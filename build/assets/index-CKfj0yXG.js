(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function NM(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var px={exports:{}},qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1;function $3(){if(F1)return qp;F1=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:o}}return qp.Fragment=t,qp.jsx=e,qp.jsxs=e,qp}var G1;function tD(){return G1||(G1=1,px.exports=$3()),px.exports}var on=tD(),mx={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function eD(){if(X1)return $e;X1=1;var i=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.iterator;function _(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function R(k,tt,bt){this.props=k,this.context=tt,this.refs=C,this.updater=bt||M}R.prototype.isReactComponent={},R.prototype.setState=function(k,tt){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,tt,"setState")},R.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function b(){}b.prototype=R.prototype;function D(k,tt,bt){this.props=k,this.context=tt,this.refs=C,this.updater=bt||M}var U=D.prototype=new b;U.constructor=D,T(U,R.prototype),U.isPureReactComponent=!0;var N=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function H(k,tt,bt,Rt,et,Et){return bt=Et.ref,{$$typeof:i,type:k,key:tt,ref:bt!==void 0?bt:null,props:Et}}function X(k,tt){return H(k.type,tt,void 0,void 0,void 0,k.props)}function z(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function L(k){var tt={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(bt){return tt[bt]})}var W=/\/+/g;function ot(k,tt){return typeof k=="object"&&k!==null&&k.key!=null?L(""+k.key):tt.toString(36)}function it(){}function pt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(it,it):(k.status="pending",k.then(function(tt){k.status==="pending"&&(k.status="fulfilled",k.value=tt)},function(tt){k.status==="pending"&&(k.status="rejected",k.reason=tt)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function gt(k,tt,bt,Rt,et){var Et=typeof k;(Et==="undefined"||Et==="boolean")&&(k=null);var Bt=!1;if(k===null)Bt=!0;else switch(Et){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(k.$$typeof){case i:case t:Bt=!0;break;case v:return Bt=k._init,gt(Bt(k._payload),tt,bt,Rt,et)}}if(Bt)return et=et(k),Bt=Rt===""?"."+ot(k,0):Rt,N(et)?(bt="",Bt!=null&&(bt=Bt.replace(W,"$&/")+"/"),gt(et,tt,bt,"",function(Te){return Te})):et!=null&&(z(et)&&(et=X(et,bt+(et.key==null||k&&k.key===et.key?"":(""+et.key).replace(W,"$&/")+"/")+Bt)),tt.push(et)),1;Bt=0;var Wt=Rt===""?".":Rt+":";if(N(k))for(var jt=0;jt<k.length;jt++)Rt=k[jt],Et=Wt+ot(Rt,jt),Bt+=gt(Rt,tt,bt,Et,et);else if(jt=_(k),typeof jt=="function")for(k=jt.call(k),jt=0;!(Rt=k.next()).done;)Rt=Rt.value,Et=Wt+ot(Rt,jt++),Bt+=gt(Rt,tt,bt,Et,et);else if(Et==="object"){if(typeof k.then=="function")return gt(pt(k),tt,bt,Rt,et);throw tt=String(k),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function I(k,tt,bt){if(k==null)return k;var Rt=[],et=0;return gt(k,Rt,"","",function(Et){return tt.call(bt,Et,et++)}),Rt}function j(k){if(k._status===-1){var tt=k._result;tt=tt(),tt.then(function(bt){(k._status===0||k._status===-1)&&(k._status=1,k._result=bt)},function(bt){(k._status===0||k._status===-1)&&(k._status=2,k._result=bt)}),k._status===-1&&(k._status=0,k._result=tt)}if(k._status===1)return k._result.default;throw k._result}var Z=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function ct(){}return $e.Children={map:I,forEach:function(k,tt,bt){I(k,function(){tt.apply(this,arguments)},bt)},count:function(k){var tt=0;return I(k,function(){tt++}),tt},toArray:function(k){return I(k,function(tt){return tt})||[]},only:function(k){if(!z(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},$e.Component=R,$e.Fragment=e,$e.Profiler=a,$e.PureComponent=D,$e.StrictMode=n,$e.Suspense=d,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,$e.__COMPILER_RUNTIME={__proto__:null,c:function(k){return P.H.useMemoCache(k)}},$e.cache=function(k){return function(){return k.apply(null,arguments)}},$e.cloneElement=function(k,tt,bt){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Rt=T({},k.props),et=k.key,Et=void 0;if(tt!=null)for(Bt in tt.ref!==void 0&&(Et=void 0),tt.key!==void 0&&(et=""+tt.key),tt)!B.call(tt,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&tt.ref===void 0||(Rt[Bt]=tt[Bt]);var Bt=arguments.length-2;if(Bt===1)Rt.children=bt;else if(1<Bt){for(var Wt=Array(Bt),jt=0;jt<Bt;jt++)Wt[jt]=arguments[jt+2];Rt.children=Wt}return H(k.type,et,void 0,void 0,Et,Rt)},$e.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:o,_context:k},k},$e.createElement=function(k,tt,bt){var Rt,et={},Et=null;if(tt!=null)for(Rt in tt.key!==void 0&&(Et=""+tt.key),tt)B.call(tt,Rt)&&Rt!=="key"&&Rt!=="__self"&&Rt!=="__source"&&(et[Rt]=tt[Rt]);var Bt=arguments.length-2;if(Bt===1)et.children=bt;else if(1<Bt){for(var Wt=Array(Bt),jt=0;jt<Bt;jt++)Wt[jt]=arguments[jt+2];et.children=Wt}if(k&&k.defaultProps)for(Rt in Bt=k.defaultProps,Bt)et[Rt]===void 0&&(et[Rt]=Bt[Rt]);return H(k,Et,void 0,void 0,null,et)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(k){return{$$typeof:h,render:k}},$e.isValidElement=z,$e.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:j}},$e.memo=function(k,tt){return{$$typeof:m,type:k,compare:tt===void 0?null:tt}},$e.startTransition=function(k){var tt=P.T,bt={};P.T=bt;try{var Rt=k(),et=P.S;et!==null&&et(bt,Rt),typeof Rt=="object"&&Rt!==null&&typeof Rt.then=="function"&&Rt.then(ct,Z)}catch(Et){Z(Et)}finally{P.T=tt}},$e.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},$e.use=function(k){return P.H.use(k)},$e.useActionState=function(k,tt,bt){return P.H.useActionState(k,tt,bt)},$e.useCallback=function(k,tt){return P.H.useCallback(k,tt)},$e.useContext=function(k){return P.H.useContext(k)},$e.useDebugValue=function(){},$e.useDeferredValue=function(k,tt){return P.H.useDeferredValue(k,tt)},$e.useEffect=function(k,tt,bt){var Rt=P.H;if(typeof bt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Rt.useEffect(k,tt)},$e.useId=function(){return P.H.useId()},$e.useImperativeHandle=function(k,tt,bt){return P.H.useImperativeHandle(k,tt,bt)},$e.useInsertionEffect=function(k,tt){return P.H.useInsertionEffect(k,tt)},$e.useLayoutEffect=function(k,tt){return P.H.useLayoutEffect(k,tt)},$e.useMemo=function(k,tt){return P.H.useMemo(k,tt)},$e.useOptimistic=function(k,tt){return P.H.useOptimistic(k,tt)},$e.useReducer=function(k,tt,bt){return P.H.useReducer(k,tt,bt)},$e.useRef=function(k){return P.H.useRef(k)},$e.useState=function(k){return P.H.useState(k)},$e.useSyncExternalStore=function(k,tt,bt){return P.H.useSyncExternalStore(k,tt,bt)},$e.useTransition=function(){return P.H.useTransition()},$e.version="19.1.0",$e}var q1;function _d(){return q1||(q1=1,mx.exports=eD()),mx.exports}var zt=_d();const nD=NM(zt);var gx={exports:{}},kp={},vx={exports:{}},yx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1;function iD(){return k1||(k1=1,function(i){function t(I,j){var Z=I.length;I.push(j);t:for(;0<Z;){var ct=Z-1>>>1,k=I[ct];if(0<a(k,j))I[ct]=j,I[Z]=k,Z=ct;else break t}}function e(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var j=I[0],Z=I.pop();if(Z!==j){I[0]=Z;t:for(var ct=0,k=I.length,tt=k>>>1;ct<tt;){var bt=2*(ct+1)-1,Rt=I[bt],et=bt+1,Et=I[et];if(0>a(Rt,Z))et<k&&0>a(Et,Rt)?(I[ct]=Et,I[et]=Z,ct=et):(I[ct]=Rt,I[bt]=Z,ct=bt);else if(et<k&&0>a(Et,Z))I[ct]=Et,I[et]=Z,ct=et;else break t}}return j}function a(I,j){var Z=I.sortIndex-j.sortIndex;return Z!==0?Z:I.id-j.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],m=[],v=1,y=null,_=3,M=!1,T=!1,C=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function N(I){for(var j=e(m);j!==null;){if(j.callback===null)n(m);else if(j.startTime<=I)n(m),j.sortIndex=j.expirationTime,t(d,j);else break;j=e(m)}}function P(I){if(C=!1,N(I),!T)if(e(d)!==null)T=!0,B||(B=!0,ot());else{var j=e(m);j!==null&&gt(P,j.startTime-I)}}var B=!1,H=-1,X=5,z=-1;function L(){return R?!0:!(i.unstable_now()-z<X)}function W(){if(R=!1,B){var I=i.unstable_now();z=I;var j=!0;try{t:{T=!1,C&&(C=!1,D(H),H=-1),M=!0;var Z=_;try{e:{for(N(I),y=e(d);y!==null&&!(y.expirationTime>I&&L());){var ct=y.callback;if(typeof ct=="function"){y.callback=null,_=y.priorityLevel;var k=ct(y.expirationTime<=I);if(I=i.unstable_now(),typeof k=="function"){y.callback=k,N(I),j=!0;break e}y===e(d)&&n(d),N(I)}else n(d);y=e(d)}if(y!==null)j=!0;else{var tt=e(m);tt!==null&&gt(P,tt.startTime-I),j=!1}}break t}finally{y=null,_=Z,M=!1}j=void 0}}finally{j?ot():B=!1}}}var ot;if(typeof U=="function")ot=function(){U(W)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,pt=it.port2;it.port1.onmessage=W,ot=function(){pt.postMessage(null)}}else ot=function(){b(W,0)};function gt(I,j){H=b(function(){I(i.unstable_now())},j)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_next=function(I){switch(_){case 1:case 2:case 3:var j=3;break;default:j=_}var Z=_;_=j;try{return I()}finally{_=Z}},i.unstable_requestPaint=function(){R=!0},i.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Z=_;_=I;try{return j()}finally{_=Z}},i.unstable_scheduleCallback=function(I,j,Z){var ct=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ct+Z:ct):Z=ct,I){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Z+k,I={id:v++,callback:j,priorityLevel:I,startTime:Z,expirationTime:k,sortIndex:-1},Z>ct?(I.sortIndex=Z,t(m,I),e(d)===null&&I===e(m)&&(C?(D(H),H=-1):C=!0,gt(P,Z-ct))):(I.sortIndex=k,t(d,I),T||M||(T=!0,B||(B=!0,ot()))),I},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(I){var j=_;return function(){var Z=_;_=j;try{return I.apply(this,arguments)}finally{_=Z}}}}(yx)),yx}var Y1;function aD(){return Y1||(Y1=1,vx.exports=iD()),vx.exports}var _x={exports:{}},Ra={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function sD(){if(W1)return Ra;W1=1;var i=_d();function t(d){var m="https://react.dev/errors/"+d;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,m,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:m,implementation:v}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,m){if(d==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ra.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ra.createPortal=function(d,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(d,m,null,v)},Ra.flushSync=function(d){var m=c.T,v=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=m,n.p=v,n.d.f()}},Ra.preconnect=function(d,m){typeof d=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(d,m))},Ra.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Ra.preinit=function(d,m){if(typeof d=="string"&&m&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,M=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?n.d.S(d,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:M}):v==="script"&&n.d.X(d,{crossOrigin:y,integrity:_,fetchPriority:M,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ra.preinitModule=function(d,m){if(typeof d=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);n.d.M(d,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(d)},Ra.preload=function(d,m){if(typeof d=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,y=h(v,m.crossOrigin);n.d.L(d,v,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ra.preloadModule=function(d,m){if(typeof d=="string")if(m){var v=h(m.as,m.crossOrigin);n.d.m(d,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(d)},Ra.requestFormReset=function(d){n.d.r(d)},Ra.unstable_batchedUpdates=function(d,m){return d(m)},Ra.useFormState=function(d,m,v){return c.H.useFormState(d,m,v)},Ra.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ra.version="19.1.0",Ra}var j1;function rD(){if(j1)return _x.exports;j1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),_x.exports=sD(),_x.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function oD(){if(Z1)return kp;Z1=1;var i=aD(),t=_d(),e=rD();function n(s){var r="https://react.dev/errors/"+s;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)r+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var r=s,f=s;if(s.alternate)for(;r.return;)r=r.return;else{s=r;do r=s,(r.flags&4098)!==0&&(f=r.return),s=r.return;while(s)}return r.tag===3?f:null}function c(s){if(s.tag===13){var r=s.memoizedState;if(r===null&&(s=s.alternate,s!==null&&(r=s.memoizedState)),r!==null)return r.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(n(188))}function d(s){var r=s.alternate;if(!r){if(r=o(s),r===null)throw Error(n(188));return r!==s?null:s}for(var f=s,p=r;;){var x=f.return;if(x===null)break;var E=x.alternate;if(E===null){if(p=x.return,p!==null){f=p;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===f)return h(x),s;if(E===p)return h(x),r;E=E.sibling}throw Error(n(188))}if(f.return!==p.return)f=x,p=E;else{for(var O=!1,F=x.child;F;){if(F===f){O=!0,f=x,p=E;break}if(F===p){O=!0,p=x,f=E;break}F=F.sibling}if(!O){for(F=E.child;F;){if(F===f){O=!0,f=E,p=x;break}if(F===p){O=!0,p=E,f=x;break}F=F.sibling}if(!O)throw Error(n(189))}}if(f.alternate!==p)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?s:r}function m(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s;for(s=s.child;s!==null;){if(r=m(s),r!==null)return r;s=s.sibling}return null}var v=Object.assign,y=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),U=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function ot(s){return s===null||typeof s!="object"?null:(s=W&&s[W]||s["@@iterator"],typeof s=="function"?s:null)}var it=Symbol.for("react.client.reference");function pt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===it?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case R:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case B:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case M:return"Portal";case U:return(s.displayName||"Context")+".Provider";case D:return(s._context.displayName||"Context")+".Consumer";case N:var r=s.render;return s=s.displayName,s||(s=r.displayName||r.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return r=s.displayName||null,r!==null?r:pt(s.type)||"Memo";case X:r=s._payload,s=s._init;try{return pt(s(r))}catch{}}return null}var gt=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ct=[],k=-1;function tt(s){return{current:s}}function bt(s){0>k||(s.current=ct[k],ct[k]=null,k--)}function Rt(s,r){k++,ct[k]=s.current,s.current=r}var et=tt(null),Et=tt(null),Bt=tt(null),Wt=tt(null);function jt(s,r){switch(Rt(Bt,r),Rt(Et,s),Rt(et,null),r.nodeType){case 9:case 11:s=(s=r.documentElement)&&(s=s.namespaceURI)?m1(s):0;break;default:if(s=r.tagName,r=r.namespaceURI)r=m1(r),s=g1(r,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}bt(et),Rt(et,s)}function Te(){bt(et),bt(Et),bt(Bt)}function ye(s){s.memoizedState!==null&&Rt(Wt,s);var r=et.current,f=g1(r,s.type);r!==f&&(Rt(Et,s),Rt(et,f))}function cn(s){Et.current===s&&(bt(et),bt(Et)),Wt.current===s&&(bt(Wt),Vp._currentValue=Z)}var ke=Object.prototype.hasOwnProperty,Ue=i.unstable_scheduleCallback,Y=i.unstable_cancelCallback,Zt=i.unstable_shouldYield,Gt=i.unstable_requestPaint,Xt=i.unstable_now,Ut=i.unstable_getCurrentPriorityLevel,re=i.unstable_ImmediatePriority,Vt=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,Ve=i.unstable_LowPriority,Q=i.unstable_IdlePriority,V=i.log,dt=i.unstable_setDisableYieldValue,Tt=null,Ct=null;function At(s){if(typeof V=="function"&&dt(s),Ct&&typeof Ct.setStrictMode=="function")try{Ct.setStrictMode(Tt,s)}catch{}}var ne=Math.clz32?Math.clz32:de,Jt=Math.log,fe=Math.LN2;function de(s){return s>>>=0,s===0?32:31-(Jt(s)/fe|0)|0}var Ot=256,$t=4194304;function ge(s){var r=s&42;if(r!==0)return r;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _e(s,r,f){var p=s.pendingLanes;if(p===0)return 0;var x=0,E=s.suspendedLanes,O=s.pingedLanes;s=s.warmLanes;var F=p&134217727;return F!==0?(p=F&~E,p!==0?x=ge(p):(O&=F,O!==0?x=ge(O):f||(f=F&~s,f!==0&&(x=ge(f))))):(F=p&~E,F!==0?x=ge(F):O!==0?x=ge(O):f||(f=p&~s,f!==0&&(x=ge(f)))),x===0?0:r!==0&&r!==x&&(r&E)===0&&(E=x&-x,f=r&-r,E>=f||E===32&&(f&4194048)!==0)?r:x}function Kt(s,r){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&r)===0}function Re(s,r){switch(s){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function st(){var s=Ot;return Ot<<=1,(Ot&4194048)===0&&(Ot=256),s}function te(){var s=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),s}function Ft(s){for(var r=[],f=0;31>f;f++)r.push(s);return r}function ue(s,r){s.pendingLanes|=r,r!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function qt(s,r,f,p,x,E){var O=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,J=s.expirationTimes,mt=s.hiddenUpdates;for(f=O&~f;0<f;){var Dt=31-ne(f),Pt=1<<Dt;F[Dt]=0,J[Dt]=-1;var yt=mt[Dt];if(yt!==null)for(mt[Dt]=null,Dt=0;Dt<yt.length;Dt++){var St=yt[Dt];St!==null&&(St.lane&=-536870913)}f&=~Pt}p!==0&&Lt(s,p,0),E!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=E&~(O&~r))}function Lt(s,r,f){s.pendingLanes|=r,s.suspendedLanes&=~r;var p=31-ne(r);s.entangledLanes|=r,s.entanglements[p]=s.entanglements[p]|1073741824|f&4194090}function he(s,r){var f=s.entangledLanes|=r;for(s=s.entanglements;f;){var p=31-ne(f),x=1<<p;x&r|s[p]&r&&(s[p]|=r),f&=~x}}function Ce(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function hn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ln(){var s=j.p;return s!==0?s:(s=window.event,s===void 0?32:z1(s.type))}function va(s,r){var f=j.p;try{return j.p=s,r()}finally{j.p=f}}var yi=Math.random().toString(36).slice(2),ui="__reactFiber$"+yi,_i="__reactProps$"+yi,Zi="__reactContainer$"+yi,ya="__reactEvents$"+yi,Qu="__reactListeners$"+yi,Ts="__reactHandles$"+yi,aa="__reactResources$"+yi,As="__reactMarker$"+yi;function wn(s){delete s[ui],delete s[_i],delete s[ya],delete s[Qu],delete s[Ts]}function Rs(s){var r=s[ui];if(r)return r;for(var f=s.parentNode;f;){if(r=f[Zi]||f[ui]){if(f=r.alternate,r.child!==null||f!==null&&f.child!==null)for(s=x1(s);s!==null;){if(f=s[ui])return f;s=x1(s)}return r}s=f,f=s.parentNode}return null}function Cs(s){if(s=s[ui]||s[Zi]){var r=s.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return s}return null}function no(s){var r=s.tag;if(r===5||r===26||r===27||r===6)return s.stateNode;throw Error(n(33))}function xr(s){var r=s[aa];return r||(r=s[aa]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ci(s){s[As]=!0}var Bl=new Set,Il={};function ws(s,r){G(s,r),G(s+"Capture",r)}function G(s,r){for(Il[s]=r,s=0;s<r.length;s++)Bl.add(r[s])}var rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_t={},xt={};function ut(s){return ke.call(xt,s)?!0:ke.call(_t,s)?!1:rt.test(s)?xt[s]=!0:(_t[s]=!0,!1)}function Ht(s,r,f){if(ut(r))if(f===null)s.removeAttribute(r);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(r);return;case"boolean":var p=r.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){s.removeAttribute(r);return}}s.setAttribute(r,""+f)}}function Qt(s,r,f){if(f===null)s.removeAttribute(r);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(r);return}s.setAttribute(r,""+f)}}function se(s,r,f,p){if(p===null)s.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(r,f,""+p)}}var oe,we;function Me(s){if(oe===void 0)try{throw Error()}catch(f){var r=f.stack.trim().match(/\n( *(at )?)/);oe=r&&r[1]||"",we=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+s+we}var ve=!1;function Ye(s,r){if(!s||ve)return"";ve=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(r){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pt,[])}catch(St){var yt=St}Reflect.construct(s,[],Pt)}else{try{Pt.call()}catch(St){yt=St}s.call(Pt.prototype)}}else{try{throw Error()}catch(St){yt=St}(Pt=s())&&typeof Pt.catch=="function"&&Pt.catch(function(){})}}catch(St){if(St&&yt&&typeof St.stack=="string")return[St.stack,yt.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=p.DetermineComponentFrameRoot(),O=E[0],F=E[1];if(O&&F){var J=O.split(`
`),mt=F.split(`
`);for(x=p=0;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;for(;x<mt.length&&!mt[x].includes("DetermineComponentFrameRoot");)x++;if(p===J.length||x===mt.length)for(p=J.length-1,x=mt.length-1;1<=p&&0<=x&&J[p]!==mt[x];)x--;for(;1<=p&&0<=x;p--,x--)if(J[p]!==mt[x]){if(p!==1||x!==1)do if(p--,x--,0>x||J[p]!==mt[x]){var Dt=`
`+J[p].replace(" at new "," at ");return s.displayName&&Dt.includes("<anonymous>")&&(Dt=Dt.replace("<anonymous>",s.displayName)),Dt}while(1<=p&&0<=x);break}}}finally{ve=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Me(f):""}function yn(s){switch(s.tag){case 26:case 27:case 5:return Me(s.type);case 16:return Me("Lazy");case 13:return Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return Ye(s.type,!1);case 11:return Ye(s.type.render,!1);case 1:return Ye(s.type,!0);case 31:return Me("Activity");default:return""}}function Vn(s){try{var r="";do r+=yn(s),s=s.return;while(s);return r}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Ze(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function _n(s){var r=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function be(s){var r=_n(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,r),p=""+s[r];if(!s.hasOwnProperty(r)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,E=f.set;return Object.defineProperty(s,r,{configurable:!0,get:function(){return x.call(this)},set:function(O){p=""+O,E.call(this,O)}}),Object.defineProperty(s,r,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){s._valueTracker=null,delete s[r]}}}}function Rn(s){s._valueTracker||(s._valueTracker=be(s))}function an(s){if(!s)return!1;var r=s._valueTracker;if(!r)return!0;var f=r.getValue(),p="";return s&&(p=_n(s)?s.checked?"true":"false":s.value),s=p,s!==f?(r.setValue(s),!0):!1}function xi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ys=/[\n"\\]/g;function Nn(s){return s.replace(Ys,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Ws(s,r,f,p,x,E,O,F){s.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.type=O:s.removeAttribute("type"),r!=null?O==="number"?(r===0&&s.value===""||s.value!=r)&&(s.value=""+Ze(r)):s.value!==""+Ze(r)&&(s.value=""+Ze(r)):O!=="submit"&&O!=="reset"||s.removeAttribute("value"),r!=null?Bi(s,O,Ze(r)):f!=null?Bi(s,O,Ze(f)):p!=null&&s.removeAttribute("value"),x==null&&E!=null&&(s.defaultChecked=!!E),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+Ze(F):s.removeAttribute("name")}function Dn(s,r,f,p,x,E,O,F){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),r!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||r!=null))return;f=f!=null?""+Ze(f):"",r=r!=null?""+Ze(r):f,F||r===s.value||(s.value=r),s.defaultValue=r}p=p??x,p=typeof p!="function"&&typeof p!="symbol"&&!!p,s.checked=F?s.checked:!!p,s.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.name=O)}function Bi(s,r,f){r==="number"&&xi(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function fi(s,r,f,p){if(s=s.options,r){r={};for(var x=0;x<f.length;x++)r["$"+f[x]]=!0;for(f=0;f<s.length;f++)x=r.hasOwnProperty("$"+s[f].value),s[f].selected!==x&&(s[f].selected=x),x&&p&&(s[f].defaultSelected=!0)}else{for(f=""+Ze(f),r=null,x=0;x<s.length;x++){if(s[x].value===f){s[x].selected=!0,p&&(s[x].defaultSelected=!0);return}r!==null||s[x].disabled||(r=s[x])}r!==null&&(r.selected=!0)}}function Ri(s,r,f){if(r!=null&&(r=""+Ze(r),r!==s.value&&(s.value=r),f==null)){s.defaultValue!==r&&(s.defaultValue=r);return}s.defaultValue=f!=null?""+Ze(f):""}function Ci(s,r,f,p){if(r==null){if(p!=null){if(f!=null)throw Error(n(92));if(gt(p)){if(1<p.length)throw Error(n(93));p=p[0]}f=p}f==null&&(f=""),r=f}f=Ze(r),s.defaultValue=f,p=s.textContent,p===f&&p!==""&&p!==null&&(s.value=p)}function sa(s,r){if(r){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=r;return}}s.textContent=r}var js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ju(s,r,f){var p=r.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?s.setProperty(r,""):r==="float"?s.cssFloat="":s[r]="":p?s.setProperty(r,f):typeof f!="number"||f===0||js.has(r)?r==="float"?s.cssFloat=f:s[r]=(""+f).trim():s[r]=f+"px"}function $u(s,r,f){if(r!=null&&typeof r!="object")throw Error(n(62));if(s=s.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||r!=null&&r.hasOwnProperty(p)||(p.indexOf("--")===0?s.setProperty(p,""):p==="float"?s.cssFloat="":s[p]="");for(var x in r)p=r[x],r.hasOwnProperty(x)&&f[x]!==p&&Ju(s,x,p)}else for(var E in r)r.hasOwnProperty(E)&&Ju(s,E,r[E])}function Af(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ud=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tc(s){return hg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Rf=null;function Cf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var io=null,Jo=null;function Nd(s){var r=Cs(s);if(r&&(s=r.stateNode)){var f=s[_i]||null;t:switch(s=r.stateNode,r.type){case"input":if(Ws(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),r=f.name,f.type==="radio"&&r!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Nn(""+r)+'"][type="radio"]'),r=0;r<f.length;r++){var p=f[r];if(p!==s&&p.form===s.form){var x=p[_i]||null;if(!x)throw Error(n(90));Ws(p,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(r=0;r<f.length;r++)p=f[r],p.form===s.form&&an(p)}break t;case"textarea":Ri(s,f.value,f.defaultValue);break t;case"select":r=f.value,r!=null&&fi(s,!!f.multiple,r,!1)}}}var ec=!1;function Od(s,r,f){if(ec)return s(r,f);ec=!0;try{var p=s(r);return p}finally{if(ec=!1,(io!==null||Jo!==null)&&(cr(),io&&(r=io,s=Jo,Jo=io=null,Nd(r),s)))for(r=0;r<s.length;r++)Nd(s[r])}}function Vl(s,r){var f=s.stateNode;if(f===null)return null;var p=f[_i]||null;if(p===null)return null;f=p[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(n(231,r,typeof f));return f}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nc=!1;if(Zs)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){nc=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{nc=!1}var Sr=null,Ld=null,wf=null;function zd(){if(wf)return wf;var s,r=Ld,f=r.length,p,x="value"in Sr?Sr.value:Sr.textContent,E=x.length;for(s=0;s<f&&r[s]===x[s];s++);var O=f-s;for(p=1;p<=O&&r[f-p]===x[E-p];p++);return wf=x.slice(s,1<p?1-p:void 0)}function ao(s){var r=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&r===13&&(s=13)):s=r,s===10&&(s=13),32<=s||s===13?s:0}function Fl(){return!0}function ic(){return!1}function ra(s){function r(f,p,x,E,O){this._reactName=f,this._targetInst=x,this.type=p,this.nativeEvent=E,this.target=O,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(E):E[F]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Fl:ic,this.isPropagationStopped=ic,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),r}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=ra(so),Xl=v({},so,{view:0,detail:0}),dg=ra(Xl),Mr,ql,kl,Yl=v({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==kl&&(kl&&s.type==="mousemove"?(Mr=s.screenX-kl.screenX,ql=s.screenY-kl.screenY):ql=Mr=0,kl=s),Mr)},movementY:function(s){return"movementY"in s?s.movementY:ql}}),Pd=ra(Yl),pg=v({},Yl,{dataTransfer:0}),N_=ra(pg),Ii=v({},Xl,{relatedTarget:0}),Df=ra(Ii),mg=v({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),gg=ra(mg),vg=v({},so,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),yg=ra(vg),ac=v({},so,{data:0}),Uf=ra(ac),_g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bd(s){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(s):(s=Sg[s])?!!r[s]:!1}function sc(){return Bd}var Mg=v({},Xl,{key:function(s){if(s.key){var r=_g[s.key]||s.key;if(r!=="Unidentified")return r}return s.type==="keypress"?(s=ao(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?xg[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(s){return s.type==="keypress"?ao(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ao(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Id=ra(Mg),Vd=v({},Yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nf=ra(Vd),bg=v({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Hd=ra(bg),Eg=v({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),br=ra(Eg),Fd=v({},Yl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),O_=ra(Fd),Tg=v({},so,{newState:0,oldState:0}),ro=ra(Tg),Er=[9,13,27,32],rc=Zs&&"CompositionEvent"in window,$o=null;Zs&&"documentMode"in document&&($o=document.documentMode);var oc=Zs&&"TextEvent"in window&&!$o,lc=Zs&&(!rc||$o&&8<$o&&11>=$o),oo=" ",Vi=!1;function uc(s,r){switch(s){case"keyup":return Er.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var lo=!1;function cc(s,r){switch(s){case"compositionend":return Gd(r);case"keypress":return r.which!==32?null:(Vi=!0,oo);case"textInput":return s=r.data,s===oo&&Vi?null:s;default:return null}}function Xd(s,r){if(lo)return s==="compositionend"||!rc&&uc(s,r)?(s=zd(),wf=Ld=Sr=null,lo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return lc&&r.locale!=="ko"?null:r.data;default:return null}}var Of={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r==="input"?!!Of[s.type]:r==="textarea"}function _a(s,r,f,p){io?Jo?Jo.push(p):Jo=[p]:io=p,r=E0(r,"onChange"),0<r.length&&(f=new Gl("onChange","change",null,f,p),s.push({event:f,listeners:r}))}var Wl=null,tl=null;function Ag(s){c1(s,0)}function fc(s){var r=no(s);if(an(r))return s}function Lf(s,r){if(s==="change")return r}var zf=!1;if(Zs){var Pf;if(Zs){var jl="oninput"in document;if(!jl){var Zl=document.createElement("div");Zl.setAttribute("oninput","return;"),jl=typeof Zl.oninput=="function"}Pf=jl}else Pf=!1;zf=Pf&&(!document.documentMode||9<document.documentMode)}function jn(){Wl&&(Wl.detachEvent("onpropertychange",Rg),tl=Wl=null)}function Rg(s){if(s.propertyName==="value"&&fc(tl)){var r=[];_a(r,tl,s,Cf(s)),Od(Ag,r)}}function L_(s,r,f){s==="focusin"?(jn(),Wl=r,tl=f,Wl.attachEvent("onpropertychange",Rg)):s==="focusout"&&jn()}function Cg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fc(tl)}function hc(s,r){if(s==="click")return fc(r)}function uo(s,r){if(s==="input"||s==="change")return fc(r)}function wg(s,r){return s===r&&(s!==0||1/s===1/r)||s!==s&&r!==r}var xa=typeof Object.is=="function"?Object.is:wg;function Ds(s,r){if(xa(s,r))return!0;if(typeof s!="object"||s===null||typeof r!="object"||r===null)return!1;var f=Object.keys(s),p=Object.keys(r);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var x=f[p];if(!ke.call(r,x)||!xa(s[x],r[x]))return!1}return!0}function Sa(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kd(s,r){var f=Sa(s);s=0;for(var p;f;){if(f.nodeType===3){if(p=s+f.textContent.length,s<=r&&p>=r)return{node:f,offset:r-s};s=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=Sa(f)}}function Yd(s,r){return s&&r?s===r?!0:s&&s.nodeType===3?!1:r&&r.nodeType===3?Yd(s,r.parentNode):"contains"in s?s.contains(r):s.compareDocumentPosition?!!(s.compareDocumentPosition(r)&16):!1:!1}function Wd(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var r=xi(s.document);r instanceof s.HTMLIFrameElement;){try{var f=typeof r.contentWindow.location.href=="string"}catch{f=!1}if(f)s=r.contentWindow;else break;r=xi(s.document)}return r}function dc(s){var r=s&&s.nodeName&&s.nodeName.toLowerCase();return r&&(r==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||r==="textarea"||s.contentEditable==="true")}var jd=Zs&&"documentMode"in document&&11>=document.documentMode,Tr=null,Bf=null,pc=null,If=!1;function Zd(s,r,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;If||Tr==null||Tr!==xi(p)||(p=Tr,"selectionStart"in p&&dc(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),pc&&Ds(pc,p)||(pc=p,p=E0(Bf,"onSelect"),0<p.length&&(r=new Gl("onSelect","select",null,r,f),s.push({event:r,listeners:p}),r.target=Tr)))}function Hi(s,r){var f={};return f[s.toLowerCase()]=r.toLowerCase(),f["Webkit"+s]="webkit"+r,f["Moz"+s]="moz"+r,f}var co={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionrun:Hi("Transition","TransitionRun"),transitionstart:Hi("Transition","TransitionStart"),transitioncancel:Hi("Transition","TransitionCancel"),transitionend:Hi("Transition","TransitionEnd")},Vf={},Dg={};Zs&&(Dg=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Ar(s){if(Vf[s])return Vf[s];if(!co[s])return s;var r=co[s],f;for(f in r)if(r.hasOwnProperty(f)&&f in Dg)return Vf[s]=r[f];return s}var oa=Ar("animationend"),Kd=Ar("animationiteration"),Ma=Ar("animationstart"),Ug=Ar("transitionrun"),Rr=Ar("transitionstart"),Kl=Ar("transitioncancel"),Cr=Ar("transitionend"),Hf=new Map,mc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mc.push("scrollEnd");function wi(s,r){Hf.set(s,r),ws(r,[s])}var Qd=new WeakMap;function Fi(s,r){if(typeof s=="object"&&s!==null){var f=Qd.get(s);return f!==void 0?f:(r={value:s,source:r,stack:Vn(r)},Qd.set(s,r),r)}return{value:s,source:r,stack:Vn(r)}}var Ki=[],is=0,Ff=0;function gc(){for(var s=is,r=Ff=is=0;r<s;){var f=Ki[r];Ki[r++]=null;var p=Ki[r];Ki[r++]=null;var x=Ki[r];Ki[r++]=null;var E=Ki[r];if(Ki[r++]=null,p!==null&&x!==null){var O=p.pending;O===null?x.next=x:(x.next=O.next,O.next=x),p.pending=x}E!==0&&Jd(f,x,E)}}function fo(s,r,f,p){Ki[is++]=s,Ki[is++]=r,Ki[is++]=f,Ki[is++]=p,Ff|=p,s.lanes|=p,s=s.alternate,s!==null&&(s.lanes|=p)}function Gf(s,r,f,p){return fo(s,r,f,p),Ql(s)}function wr(s,r){return fo(s,null,null,r),Ql(s)}function Jd(s,r,f){s.lanes|=f;var p=s.alternate;p!==null&&(p.lanes|=f);for(var x=!1,E=s.return;E!==null;)E.childLanes|=f,p=E.alternate,p!==null&&(p.childLanes|=f),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(x=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,x&&r!==null&&(x=31-ne(f),s=E.hiddenUpdates,p=s[x],p===null?s[x]=[r]:p.push(r),r.lane=f|536870912),E):null}function Ql(s){if(50<ur)throw ur=0,yl=null,Error(n(185));for(var r=s.return;r!==null;)s=r,r=s.return;return s.tag===3?s.stateNode:null}var ho={};function $d(s,r,f,p){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(s,r,f,p){return new $d(s,r,f,p)}function vc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ei(s,r){var f=s.alternate;return f===null?(f=ba(s.tag,r,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=r,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,r=s.dependencies,f.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function tp(s,r){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,r=f.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),s}function Di(s,r,f,p,x,E){var O=0;if(p=s,typeof s=="function")vc(s)&&(O=1);else if(typeof s=="string")O=H3(s,f,et.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case z:return s=ba(31,f,r,x),s.elementType=z,s.lanes=E,s;case T:return po(f.children,x,E,r);case C:O=8,x|=24;break;case R:return s=ba(12,f,r,x|2),s.elementType=R,s.lanes=E,s;case P:return s=ba(13,f,r,x),s.elementType=P,s.lanes=E,s;case B:return s=ba(19,f,r,x),s.elementType=B,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b:case U:O=10;break t;case D:O=9;break t;case N:O=11;break t;case H:O=14;break t;case X:O=16,p=null;break t}O=29,f=Error(n(130,s===null?"null":typeof s,"")),p=null}return r=ba(O,f,r,x),r.elementType=s,r.type=p,r.lanes=E,r}function po(s,r,f,p){return s=ba(7,s,p,r),s.lanes=f,s}function yc(s,r,f){return s=ba(6,s,null,r),s.lanes=f,s}function Xf(s,r,f){return r=ba(4,s.children!==null?s.children:[],s.key,r),r.lanes=f,r.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},r}var Jl=[],Ea=0,_c=null,$l=0,Gi=[],Pa=0,mo=null,Ks=1,Qs="";function Dr(s,r){Jl[Ea++]=$l,Jl[Ea++]=_c,_c=s,$l=r}function qf(s,r,f){Gi[Pa++]=Ks,Gi[Pa++]=Qs,Gi[Pa++]=mo,mo=s;var p=Ks;s=Qs;var x=32-ne(p)-1;p&=~(1<<x),f+=1;var E=32-ne(r)+x;if(30<E){var O=x-x%5;E=(p&(1<<O)-1).toString(32),p>>=O,x-=O,Ks=1<<32-ne(r)+x|f<<x|p,Qs=E+s}else Ks=1<<E|f<<x|p,Qs=s}function ep(s){s.return!==null&&(Dr(s,1),qf(s,1,0))}function np(s){for(;s===_c;)_c=Jl[--Ea],Jl[Ea]=null,$l=Jl[--Ea],Jl[Ea]=null;for(;s===mo;)mo=Gi[--Pa],Gi[Pa]=null,Qs=Gi[--Pa],Gi[Pa]=null,Ks=Gi[--Pa],Gi[Pa]=null}var la=null,Zn=null,gn=!1,as=null,Ba=!1,kf=Error(n(519));function go(s){var r=Error(n(418,""));throw el(Fi(r,s)),kf}function Ng(s){var r=s.stateNode,f=s.type,p=s.memoizedProps;switch(r[ui]=s,r[_i]=p,f){case"dialog":un("cancel",r),un("close",r);break;case"iframe":case"object":case"embed":un("load",r);break;case"video":case"audio":for(f=0;f<Op.length;f++)un(Op[f],r);break;case"source":un("error",r);break;case"img":case"image":case"link":un("error",r),un("load",r);break;case"details":un("toggle",r);break;case"input":un("invalid",r),Dn(r,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0),Rn(r);break;case"select":un("invalid",r);break;case"textarea":un("invalid",r),Ci(r,p.value,p.defaultValue,p.children),Rn(r)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||r.textContent===""+f||p.suppressHydrationWarning===!0||p1(r.textContent,f)?(p.popover!=null&&(un("beforetoggle",r),un("toggle",r)),p.onScroll!=null&&un("scroll",r),p.onScrollEnd!=null&&un("scrollend",r),p.onClick!=null&&(r.onclick=T0),r=!0):r=!1,r||go(s)}function ip(s){for(la=s.return;la;)switch(la.tag){case 5:case 13:Ba=!1;return;case 27:case 3:Ba=!0;return;default:la=la.return}}function Us(s){if(s!==la)return!1;if(!gn)return ip(s),gn=!0,!1;var r=s.tag,f;if((f=r!==3&&r!==27)&&((f=r===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||tx(s.type,s.memoizedProps)),f=!f),f&&Zn&&go(s),ip(s),r===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));t:{for(s=s.nextSibling,r=0;s;){if(s.nodeType===8)if(f=s.data,f==="/$"){if(r===0){Zn=qr(s.nextSibling);break t}r--}else f!=="$"&&f!=="$!"&&f!=="$?"||r++;s=s.nextSibling}Zn=null}}else r===27?(r=Zn,Eu(s.type)?(s=ax,ax=null,Zn=s):Zn=r):Zn=la?qr(s.stateNode.nextSibling):null;return!0}function tu(){Zn=la=null,gn=!1}function bn(){var s=as;return s!==null&&(De===null?De=s:De.push.apply(De,s),as=null),s}function el(s){as===null?as=[s]:as.push(s)}var ap=tt(null),vo=null,Ur=null;function yo(s,r,f){Rt(ap,r._currentValue),r._currentValue=f}function Nr(s){s._currentValue=ap.current,bt(ap)}function sp(s,r,f){for(;s!==null;){var p=s.alternate;if((s.childLanes&r)!==r?(s.childLanes|=r,p!==null&&(p.childLanes|=r)):p!==null&&(p.childLanes&r)!==r&&(p.childLanes|=r),s===f)break;s=s.return}}function xc(s,r,f,p){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var E=x.dependencies;if(E!==null){var O=x.child;E=E.firstContext;t:for(;E!==null;){var F=E;E=x;for(var J=0;J<r.length;J++)if(F.context===r[J]){E.lanes|=f,F=E.alternate,F!==null&&(F.lanes|=f),sp(E.return,f,s),p||(O=null);break t}E=F.next}}else if(x.tag===18){if(O=x.return,O===null)throw Error(n(341));O.lanes|=f,E=O.alternate,E!==null&&(E.lanes|=f),sp(O,f,s),O=null}else O=x.child;if(O!==null)O.return=x;else for(O=x;O!==null;){if(O===s){O=null;break}if(x=O.sibling,x!==null){x.return=O.return,O=x;break}O=O.return}x=O}}function ss(s,r,f,p){s=null;for(var x=r,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var O=x.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var F=x.type;xa(x.pendingProps.value,O.value)||(s!==null?s.push(F):s=[F])}}else if(x===Wt.current){if(O=x.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Vp):s=[Vp])}x=x.return}s!==null&&xc(r,s,f,p),r.flags|=262144}function Sc(s){for(s=s.firstContext;s!==null;){if(!xa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Js(s){vo=s,Ur=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Qn(s){return Yf(vo,s)}function Mc(s,r){return vo===null&&Js(s),Yf(s,r)}function Yf(s,r){var f=r._currentValue;if(r={context:r,memoizedValue:f,next:null},Ur===null){if(s===null)throw Error(n(308));Ur=r,s.dependencies={lanes:0,firstContext:r},s.flags|=524288}else Ur=Ur.next=r;return f}var rp=typeof AbortController<"u"?AbortController:function(){var s=[],r=this.signal={aborted:!1,addEventListener:function(f,p){s.push(p)}};this.abort=function(){r.aborted=!0,s.forEach(function(f){return f()})}},z_=i.unstable_scheduleCallback,Og=i.unstable_NormalPriority,hi={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new rp,data:new Map,refCount:0}}function eu(s){s.refCount--,s.refCount===0&&z_(Og,function(){s.controller.abort()})}var nu=null,bc=0,Ge=0,iu=null;function Ia(s,r){if(nu===null){var f=nu=[];bc=0,Ge=k_(),iu={status:"pending",value:void 0,then:function(p){f.push(p)}}}return bc++,r.then(jf,jf),r}function jf(){if(--bc===0&&nu!==null){iu!==null&&(iu.status="fulfilled");var s=nu;nu=null,Ge=0,iu=null;for(var r=0;r<s.length;r++)(0,s[r])()}}function P_(s,r){var f=[],p={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return s.then(function(){p.status="fulfilled",p.value=r;for(var x=0;x<f.length;x++)(0,f[x])(r)},function(x){for(p.status="rejected",p.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),p}var Ec=I.S;I.S=function(s,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Ia(s,r),Ec!==null&&Ec(s,r)};var rs=tt(null);function _o(){var s=rs.current;return s!==null?s:He.pooledCache}function Tc(s,r){r===null?Rt(rs,rs.current):Rt(rs,r.pool)}function Zf(){var s=_o();return s===null?null:{parent:hi._currentValue,pool:s}}var Ac=Error(n(460)),op=Error(n(474)),Ns=Error(n(542)),Rc={then:function(){}};function Kf(s){return s=s.status,s==="fulfilled"||s==="rejected"}function au(){}function Qf(s,r,f){switch(f=s[f],f===void 0?s.push(r):f!==r&&(r.then(au,au),r=f),r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Lg(s),s;default:if(typeof r.status=="string")r.then(au,au);else{if(s=He,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=r,s.status="pending",s.then(function(p){if(r.status==="pending"){var x=r;x.status="fulfilled",x.value=p}},function(p){if(r.status==="pending"){var x=r;x.status="rejected",x.reason=p}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw s=r.reason,Lg(s),s}throw os=r,Ac}}var os=null;function lp(){if(os===null)throw Error(n(459));var s=os;return os=null,s}function Lg(s){if(s===Ac||s===Ns)throw Error(n(483))}var Or=!1;function up(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Le(s,r){s=s.updateQueue,r.updateQueue===s&&(r.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function $s(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Lr(s,r,f){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(En&2)!==0){var x=p.pending;return x===null?r.next=r:(r.next=x.next,x.next=r),p.pending=r,r=Ql(s),Jd(s,null,f),r}return fo(s,p,r,f),Ql(s)}function nl(s,r,f){if(r=r.updateQueue,r!==null&&(r=r.shared,(f&4194048)!==0)){var p=r.lanes;p&=s.pendingLanes,f|=p,r.lanes=f,he(s,f)}}function su(s,r){var f=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var x=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var O={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?x=E=O:E=E.next=O,f=f.next}while(f!==null);E===null?x=E=r:E=E.next=r}else x=E=r;f={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:p.shared,callbacks:p.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=r:s.next=r,f.lastBaseUpdate=r}var cp=!1;function Cc(){if(cp){var s=iu;if(s!==null)throw s}}function ru(s,r,f,p){cp=!1;var x=s.updateQueue;Or=!1;var E=x.firstBaseUpdate,O=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var J=F,mt=J.next;J.next=null,O===null?E=mt:O.next=mt,O=J;var Dt=s.alternate;Dt!==null&&(Dt=Dt.updateQueue,F=Dt.lastBaseUpdate,F!==O&&(F===null?Dt.firstBaseUpdate=mt:F.next=mt,Dt.lastBaseUpdate=J))}if(E!==null){var Pt=x.baseState;O=0,Dt=mt=J=null,F=E;do{var yt=F.lane&-536870913,St=yt!==F.lane;if(St?(Ee&yt)===yt:(p&yt)===yt){yt!==0&&yt===Ge&&(cp=!0),Dt!==null&&(Dt=Dt.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});t:{var Be=s,Ne=F;yt=r;var qn=f;switch(Ne.tag){case 1:if(Be=Ne.payload,typeof Be=="function"){Pt=Be.call(qn,Pt,yt);break t}Pt=Be;break t;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ne.payload,yt=typeof Be=="function"?Be.call(qn,Pt,yt):Be,yt==null)break t;Pt=v({},Pt,yt);break t;case 2:Or=!0}}yt=F.callback,yt!==null&&(s.flags|=64,St&&(s.flags|=8192),St=x.callbacks,St===null?x.callbacks=[yt]:St.push(yt))}else St={lane:yt,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Dt===null?(mt=Dt=St,J=Pt):Dt=Dt.next=St,O|=yt;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;St=F,F=St.next,St.next=null,x.lastBaseUpdate=St,x.shared.pending=null}}while(!0);Dt===null&&(J=Pt),x.baseState=J,x.firstBaseUpdate=mt,x.lastBaseUpdate=Dt,E===null&&(x.shared.lanes=0),Hs|=O,s.lanes=O,s.memoizedState=Pt}}function ou(s,r){if(typeof s!="function")throw Error(n(191,s));s.call(r)}function zg(s,r){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)ou(f[s],r)}var lu=tt(null),Jf=tt(0);function Pg(s,r){s=ds,Rt(Jf,s),Rt(lu,r),ds=s|r.baseLanes}function fp(){Rt(Jf,ds),Rt(lu,lu.current)}function wc(){ds=Jf.current,bt(lu),bt(Jf)}var zr=0,Xe=null,Cn=null,di=null,$f=!1,xo=!1,ua=!1,Si=0,ls=0,Xi=null,Bg=0;function ni(){throw Error(n(321))}function Qi(s,r){if(r===null)return!1;for(var f=0;f<r.length&&f<s.length;f++)if(!xa(s[f],r[f]))return!1;return!0}function Pr(s,r,f,p,x,E){return zr=E,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,I.H=s===null||s.memoizedState===null?lh:Rp,ua=!1,E=f(p,x),ua=!1,xo&&(E=Vg(r,f,p,x)),Ig(s),E}function Ig(s){I.H=Nc;var r=Cn!==null&&Cn.next!==null;if(zr=0,di=Cn=Xe=null,$f=!1,ls=0,Xi=null,r)throw Error(n(300));s===null||Ui||(s=s.dependencies,s!==null&&Sc(s)&&(Ui=!0))}function Vg(s,r,f,p){Xe=s;var x=0;do{if(xo&&(Xi=null),ls=0,xo=!1,25<=x)throw Error(n(301));if(x+=1,di=Cn=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}I.H=f0,E=r(f,p)}while(xo);return E}function B_(){var s=I.H,r=s.useState()[0];return r=typeof r.then=="function"?Os(r):r,s=s.useState()[0],(Cn!==null?Cn.memoizedState:null)!==s&&(Xe.flags|=1024),r}function hp(){var s=Si!==0;return Si=0,s}function th(s,r,f){r.updateQueue=s.updateQueue,r.flags&=-2053,s.lanes&=~f}function dp(s){if($f){for(s=s.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}$f=!1}zr=0,di=Cn=Xe=null,xo=!1,ls=Si=0,Xi=null}function ca(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return di===null?Xe.memoizedState=di=s:di=di.next=s,di}function pi(){if(Cn===null){var s=Xe.alternate;s=s!==null?s.memoizedState:null}else s=Cn.next;var r=di===null?Xe.memoizedState:di.next;if(r!==null)di=r,Cn=s;else{if(s===null)throw Xe.alternate===null?Error(n(467)):Error(n(310));Cn=s,s={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},di===null?Xe.memoizedState=di=s:di=di.next=s}return di}function So(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Os(s){var r=ls;return ls+=1,Xi===null&&(Xi=[]),s=Qf(Xi,s,r),r=Xe,(di===null?r.memoizedState:di.next)===null&&(r=r.alternate,I.H=r===null||r.memoizedState===null?lh:Rp),s}function eh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Os(s);if(s.$$typeof===U)return Qn(s)}throw Error(n(438,String(s)))}function pp(s){var r=null,f=Xe.updateQueue;if(f!==null&&(r=f.memoCache),r==null){var p=Xe.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(r={data:p.data.map(function(x){return x.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),f===null&&(f=So(),Xe.updateQueue=f),f.memoCache=r,f=r.data[r.index],f===void 0)for(f=r.data[r.index]=Array(s),p=0;p<s;p++)f[p]=L;return r.index++,f}function Br(s,r){return typeof r=="function"?r(s):r}function Mo(s){var r=pi();return mp(r,Cn,s)}function mp(s,r,f){var p=s.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=f;var x=s.baseQueue,E=p.pending;if(E!==null){if(x!==null){var O=x.next;x.next=E.next,E.next=O}r.baseQueue=x=E,p.pending=null}if(E=s.baseState,x===null)s.memoizedState=E;else{r=x.next;var F=O=null,J=null,mt=r,Dt=!1;do{var Pt=mt.lane&-536870913;if(Pt!==mt.lane?(Ee&Pt)===Pt:(zr&Pt)===Pt){var yt=mt.revertLane;if(yt===0)J!==null&&(J=J.next={lane:0,revertLane:0,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),Pt===Ge&&(Dt=!0);else if((zr&yt)===yt){mt=mt.next,yt===Ge&&(Dt=!0);continue}else Pt={lane:0,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},J===null?(F=J=Pt,O=E):J=J.next=Pt,Xe.lanes|=yt,Hs|=yt;Pt=mt.action,ua&&f(E,Pt),E=mt.hasEagerState?mt.eagerState:f(E,Pt)}else yt={lane:Pt,revertLane:mt.revertLane,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},J===null?(F=J=yt,O=E):J=J.next=yt,Xe.lanes|=Pt,Hs|=Pt;mt=mt.next}while(mt!==null&&mt!==r);if(J===null?O=E:J.next=F,!xa(E,s.memoizedState)&&(Ui=!0,Dt&&(f=iu,f!==null)))throw f;s.memoizedState=E,s.baseState=O,s.baseQueue=J,p.lastRenderedState=E}return x===null&&(p.lanes=0),[s.memoizedState,p.dispatch]}function gp(s){var r=pi(),f=r.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=s;var p=f.dispatch,x=f.pending,E=r.memoizedState;if(x!==null){f.pending=null;var O=x=x.next;do E=s(E,O.action),O=O.next;while(O!==x);xa(E,r.memoizedState)||(Ui=!0),r.memoizedState=E,r.baseQueue===null&&(r.baseState=E),f.lastRenderedState=E}return[E,p]}function Hg(s,r,f){var p=Xe,x=pi(),E=gn;if(E){if(f===void 0)throw Error(n(407));f=f()}else f=r();var O=!xa((Cn||x).memoizedState,f);O&&(x.memoizedState=f,Ui=!0),x=x.queue;var F=Gg.bind(null,p,x,s);if(fu(2048,8,F,[s]),x.getSnapshot!==r||O||di!==null&&di.memoizedState.tag&1){if(p.flags|=2048,cu(9,Dc(),Fg.bind(null,p,x,f,r),null),He===null)throw Error(n(349));E||(zr&124)!==0||uu(p,r,f)}return f}function uu(s,r,f){s.flags|=16384,s={getSnapshot:r,value:f},r=Xe.updateQueue,r===null?(r=So(),Xe.updateQueue=r,r.stores=[s]):(f=r.stores,f===null?r.stores=[s]:f.push(s))}function Fg(s,r,f,p){r.value=f,r.getSnapshot=p,Xg(r)&&qg(s)}function Gg(s,r,f){return f(function(){Xg(r)&&qg(s)})}function Xg(s){var r=s.getSnapshot;s=s.value;try{var f=r();return!xa(s,f)}catch{return!0}}function qg(s){var r=wr(s,2);r!==null&&da(r,s,2)}function vp(s){var r=ca();if(typeof s=="function"){var f=s;if(s=f(),ua){At(!0);try{f()}finally{At(!1)}}}return r.memoizedState=r.baseState=s,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:s},r}function kg(s,r,f,p){return s.baseState=f,mp(s,Cn,typeof p=="function"?p:Br)}function I_(s,r,f,p,x){if(oh(s))throw Error(n(485));if(s=r.action,s!==null){var E={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){E.listeners.push(O)}};I.T!==null?f(!0):E.isTransition=!1,p(E),f=r.pending,f===null?(E.next=r.pending=E,Yg(r,E)):(E.next=f.next,r.pending=f.next=E)}}function Yg(s,r){var f=r.action,p=r.payload,x=s.state;if(r.isTransition){var E=I.T,O={};I.T=O;try{var F=f(x,p),J=I.S;J!==null&&J(O,F),Wg(s,r,F)}catch(mt){yp(s,r,mt)}finally{I.T=E}}else try{E=f(x,p),Wg(s,r,E)}catch(mt){yp(s,r,mt)}}function Wg(s,r,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){jg(s,r,p)},function(p){return yp(s,r,p)}):jg(s,r,f)}function jg(s,r,f){r.status="fulfilled",r.value=f,Zg(r),s.state=f,r=s.pending,r!==null&&(f=r.next,f===r?s.pending=null:(f=f.next,r.next=f,Yg(s,f)))}function yp(s,r,f){var p=s.pending;if(s.pending=null,p!==null){p=p.next;do r.status="rejected",r.reason=f,Zg(r),r=r.next;while(r!==p)}s.action=null}function Zg(s){s=s.listeners;for(var r=0;r<s.length;r++)(0,s[r])()}function _p(s,r){return r}function Kg(s,r){if(gn){var f=He.formState;if(f!==null){t:{var p=Xe;if(gn){if(Zn){e:{for(var x=Zn,E=Ba;x.nodeType!==8;){if(!E){x=null;break e}if(x=qr(x.nextSibling),x===null){x=null;break e}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Zn=qr(x.nextSibling),p=x.data==="F!";break t}}go(p)}p=!1}p&&(r=f[0])}}return f=ca(),f.memoizedState=f.baseState=r,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:r},f.queue=p,f=u0.bind(null,Xe,p),p.dispatch=f,p=vp(!1),E=rh.bind(null,Xe,!1,p.queue),p=ca(),x={state:r,dispatch:null,action:s,pending:null},p.queue=x,f=I_.bind(null,Xe,x,E,f),x.dispatch=f,p.memoizedState=s,[r,f,!1]}function Qg(s){var r=pi();return Jg(r,Cn,s)}function Jg(s,r,f){if(r=mp(s,r,_p)[0],s=Mo(Br)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var p=Os(r)}catch(O){throw O===Ac?Ns:O}else p=r;r=pi();var x=r.queue,E=x.dispatch;return f!==r.memoizedState&&(Xe.flags|=2048,cu(9,Dc(),V_.bind(null,x,f),null)),[p,E,s]}function V_(s,r){s.action=r}function $g(s){var r=pi(),f=Cn;if(f!==null)return Jg(r,f,s);pi(),r=r.memoizedState,f=pi();var p=f.queue.dispatch;return f.memoizedState=s,[r,p,!1]}function cu(s,r,f,p){return s={tag:s,create:f,deps:p,inst:r,next:null},r=Xe.updateQueue,r===null&&(r=So(),Xe.updateQueue=r),f=r.lastEffect,f===null?r.lastEffect=s.next=s:(p=f.next,f.next=s,s.next=p,r.lastEffect=s),s}function Dc(){return{destroy:void 0,resource:void 0}}function xp(){return pi().memoizedState}function nh(s,r,f,p){var x=ca();p=p===void 0?null:p,Xe.flags|=s,x.memoizedState=cu(1|r,Dc(),f,p)}function fu(s,r,f,p){var x=pi();p=p===void 0?null:p;var E=x.memoizedState.inst;Cn!==null&&p!==null&&Qi(p,Cn.memoizedState.deps)?x.memoizedState=cu(r,E,f,p):(Xe.flags|=s,x.memoizedState=cu(1|r,E,f,p))}function Sp(s,r){nh(8390656,8,s,r)}function Mp(s,r){fu(2048,8,s,r)}function ih(s,r){return fu(4,2,s,r)}function ah(s,r){return fu(4,4,s,r)}function t0(s,r){if(typeof r=="function"){s=s();var f=r(s);return function(){typeof f=="function"?f():r(null)}}if(r!=null)return s=s(),r.current=s,function(){r.current=null}}function e0(s,r,f){f=f!=null?f.concat([s]):null,fu(4,4,t0.bind(null,r,s),f)}function bp(){}function n0(s,r){var f=pi();r=r===void 0?null:r;var p=f.memoizedState;return r!==null&&Qi(r,p[1])?p[0]:(f.memoizedState=[s,r],s)}function Ep(s,r){var f=pi();r=r===void 0?null:r;var p=f.memoizedState;if(r!==null&&Qi(r,p[1]))return p[0];if(p=s(),ua){At(!0);try{s()}finally{At(!1)}}return f.memoizedState=[p,r],p}function sh(s,r,f){return f===void 0||(zr&1073741824)!==0?s.memoizedState=r:(s.memoizedState=f,s=_h(),Xe.lanes|=s,Hs|=s,f)}function i0(s,r,f,p){return xa(f,r)?f:lu.current!==null?(s=sh(s,f,p),xa(s,r)||(Ui=!0),s):(zr&42)===0?(Ui=!0,s.memoizedState=f):(s=_h(),Xe.lanes|=s,Hs|=s,r)}function a0(s,r,f,p,x){var E=j.p;j.p=E!==0&&8>E?E:8;var O=I.T,F={};I.T=F,rh(s,!1,r,f);try{var J=x(),mt=I.S;if(mt!==null&&mt(F,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Dt=P_(J,p);Uc(s,r,Dt,ti(s))}else Uc(s,r,p,ti(s))}catch(Pt){Uc(s,r,{then:function(){},status:"rejected",reason:Pt},ti())}finally{j.p=E,I.T=O}}function H_(){}function Tp(s,r,f,p){if(s.tag!==5)throw Error(n(476));var x=s0(s).queue;a0(s,x,r,Z,f===null?H_:function(){return r0(s),f(p)})}function s0(s){var r=s.memoizedState;if(r!==null)return r;r={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:Z},next:null};var f={};return r.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:f},next:null},s.memoizedState=r,s=s.alternate,s!==null&&(s.memoizedState=r),r}function r0(s){var r=s0(s).next.queue;Uc(s,r,{},ti())}function Ap(){return Qn(Vp)}function o0(){return pi().memoizedState}function l0(){return pi().memoizedState}function F_(s){for(var r=s.return;r!==null;){switch(r.tag){case 24:case 3:var f=ti();s=$s(f);var p=Lr(r,s,f);p!==null&&(da(p,r,f),nl(p,r,f)),r={cache:Wf()},s.payload=r;return}r=r.return}}function G_(s,r,f){var p=ti();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},oh(s)?c0(r,f):(f=Gf(s,r,f,p),f!==null&&(da(f,s,p),Va(f,r,p)))}function u0(s,r,f){var p=ti();Uc(s,r,f,p)}function Uc(s,r,f,p){var x={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(oh(s))c0(r,x);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=r.lastRenderedReducer,E!==null))try{var O=r.lastRenderedState,F=E(O,f);if(x.hasEagerState=!0,x.eagerState=F,xa(F,O))return fo(s,r,x,0),He===null&&gc(),!1}catch{}finally{}if(f=Gf(s,r,x,p),f!==null)return da(f,s,p),Va(f,r,p),!0}return!1}function rh(s,r,f,p){if(p={lane:2,revertLane:k_(),action:p,hasEagerState:!1,eagerState:null,next:null},oh(s)){if(r)throw Error(n(479))}else r=Gf(s,f,p,2),r!==null&&da(r,s,2)}function oh(s){var r=s.alternate;return s===Xe||r!==null&&r===Xe}function c0(s,r){xo=$f=!0;var f=s.pending;f===null?r.next=r:(r.next=f.next,f.next=r),s.pending=r}function Va(s,r,f){if((f&4194048)!==0){var p=r.lanes;p&=s.pendingLanes,f|=p,r.lanes=f,he(s,f)}}var Nc={readContext:Qn,use:eh,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useLayoutEffect:ni,useInsertionEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useSyncExternalStore:ni,useId:ni,useHostTransitionStatus:ni,useFormState:ni,useActionState:ni,useOptimistic:ni,useMemoCache:ni,useCacheRefresh:ni},lh={readContext:Qn,use:eh,useCallback:function(s,r){return ca().memoizedState=[s,r===void 0?null:r],s},useContext:Qn,useEffect:Sp,useImperativeHandle:function(s,r,f){f=f!=null?f.concat([s]):null,nh(4194308,4,t0.bind(null,r,s),f)},useLayoutEffect:function(s,r){return nh(4194308,4,s,r)},useInsertionEffect:function(s,r){nh(4,2,s,r)},useMemo:function(s,r){var f=ca();r=r===void 0?null:r;var p=s();if(ua){At(!0);try{s()}finally{At(!1)}}return f.memoizedState=[p,r],p},useReducer:function(s,r,f){var p=ca();if(f!==void 0){var x=f(r);if(ua){At(!0);try{f(r)}finally{At(!1)}}}else x=r;return p.memoizedState=p.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},p.queue=s,s=s.dispatch=G_.bind(null,Xe,s),[p.memoizedState,s]},useRef:function(s){var r=ca();return s={current:s},r.memoizedState=s},useState:function(s){s=vp(s);var r=s.queue,f=u0.bind(null,Xe,r);return r.dispatch=f,[s.memoizedState,f]},useDebugValue:bp,useDeferredValue:function(s,r){var f=ca();return sh(f,s,r)},useTransition:function(){var s=vp(!1);return s=a0.bind(null,Xe,s.queue,!0,!1),ca().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,r,f){var p=Xe,x=ca();if(gn){if(f===void 0)throw Error(n(407));f=f()}else{if(f=r(),He===null)throw Error(n(349));(Ee&124)!==0||uu(p,r,f)}x.memoizedState=f;var E={value:f,getSnapshot:r};return x.queue=E,Sp(Gg.bind(null,p,E,s),[s]),p.flags|=2048,cu(9,Dc(),Fg.bind(null,p,E,f,r),null),f},useId:function(){var s=ca(),r=He.identifierPrefix;if(gn){var f=Qs,p=Ks;f=(p&~(1<<32-ne(p)-1)).toString(32)+f,r=""+r+"R"+f,f=Si++,0<f&&(r+="H"+f.toString(32)),r+=""}else f=Bg++,r=""+r+"r"+f.toString(32)+"";return s.memoizedState=r},useHostTransitionStatus:Ap,useFormState:Kg,useActionState:Kg,useOptimistic:function(s){var r=ca();r.memoizedState=r.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=f,r=rh.bind(null,Xe,!0,f),f.dispatch=r,[s,r]},useMemoCache:pp,useCacheRefresh:function(){return ca().memoizedState=F_.bind(null,Xe)}},Rp={readContext:Qn,use:eh,useCallback:n0,useContext:Qn,useEffect:Mp,useImperativeHandle:e0,useInsertionEffect:ih,useLayoutEffect:ah,useMemo:Ep,useReducer:Mo,useRef:xp,useState:function(){return Mo(Br)},useDebugValue:bp,useDeferredValue:function(s,r){var f=pi();return i0(f,Cn.memoizedState,s,r)},useTransition:function(){var s=Mo(Br)[0],r=pi().memoizedState;return[typeof s=="boolean"?s:Os(s),r]},useSyncExternalStore:Hg,useId:o0,useHostTransitionStatus:Ap,useFormState:Qg,useActionState:Qg,useOptimistic:function(s,r){var f=pi();return kg(f,Cn,s,r)},useMemoCache:pp,useCacheRefresh:l0},f0={readContext:Qn,use:eh,useCallback:n0,useContext:Qn,useEffect:Mp,useImperativeHandle:e0,useInsertionEffect:ih,useLayoutEffect:ah,useMemo:Ep,useReducer:gp,useRef:xp,useState:function(){return gp(Br)},useDebugValue:bp,useDeferredValue:function(s,r){var f=pi();return Cn===null?sh(f,s,r):i0(f,Cn.memoizedState,s,r)},useTransition:function(){var s=gp(Br)[0],r=pi().memoizedState;return[typeof s=="boolean"?s:Os(s),r]},useSyncExternalStore:Hg,useId:o0,useHostTransitionStatus:Ap,useFormState:$g,useActionState:$g,useOptimistic:function(s,r){var f=pi();return Cn!==null?kg(f,Cn,s,r):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:pp,useCacheRefresh:l0},il=null,Oc=0;function Lc(s){var r=Oc;return Oc+=1,il===null&&(il=[]),Qf(il,s,r)}function hu(s,r){r=r.props.ref,s.ref=r!==void 0?r:null}function uh(s,r){throw r.$$typeof===y?Error(n(525)):(s=Object.prototype.toString.call(r),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":s)))}function h0(s){var r=s._init;return r(s._payload)}function d0(s){function r(lt,at){if(s){var ht=lt.deletions;ht===null?(lt.deletions=[at],lt.flags|=16):ht.push(at)}}function f(lt,at){if(!s)return null;for(;at!==null;)r(lt,at),at=at.sibling;return null}function p(lt){for(var at=new Map;lt!==null;)lt.key!==null?at.set(lt.key,lt):at.set(lt.index,lt),lt=lt.sibling;return at}function x(lt,at){return lt=ei(lt,at),lt.index=0,lt.sibling=null,lt}function E(lt,at,ht){return lt.index=ht,s?(ht=lt.alternate,ht!==null?(ht=ht.index,ht<at?(lt.flags|=67108866,at):ht):(lt.flags|=67108866,at)):(lt.flags|=1048576,at)}function O(lt){return s&&lt.alternate===null&&(lt.flags|=67108866),lt}function F(lt,at,ht,Nt){return at===null||at.tag!==6?(at=yc(ht,lt.mode,Nt),at.return=lt,at):(at=x(at,ht),at.return=lt,at)}function J(lt,at,ht,Nt){var pe=ht.type;return pe===T?Dt(lt,at,ht.props.children,Nt,ht.key):at!==null&&(at.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===X&&h0(pe)===at.type)?(at=x(at,ht.props),hu(at,ht),at.return=lt,at):(at=Di(ht.type,ht.key,ht.props,null,lt.mode,Nt),hu(at,ht),at.return=lt,at)}function mt(lt,at,ht,Nt){return at===null||at.tag!==4||at.stateNode.containerInfo!==ht.containerInfo||at.stateNode.implementation!==ht.implementation?(at=Xf(ht,lt.mode,Nt),at.return=lt,at):(at=x(at,ht.children||[]),at.return=lt,at)}function Dt(lt,at,ht,Nt,pe){return at===null||at.tag!==7?(at=po(ht,lt.mode,Nt,pe),at.return=lt,at):(at=x(at,ht),at.return=lt,at)}function Pt(lt,at,ht){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return at=yc(""+at,lt.mode,ht),at.return=lt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case _:return ht=Di(at.type,at.key,at.props,null,lt.mode,ht),hu(ht,at),ht.return=lt,ht;case M:return at=Xf(at,lt.mode,ht),at.return=lt,at;case X:var Nt=at._init;return at=Nt(at._payload),Pt(lt,at,ht)}if(gt(at)||ot(at))return at=po(at,lt.mode,ht,null),at.return=lt,at;if(typeof at.then=="function")return Pt(lt,Lc(at),ht);if(at.$$typeof===U)return Pt(lt,Mc(lt,at),ht);uh(lt,at)}return null}function yt(lt,at,ht,Nt){var pe=at!==null?at.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint")return pe!==null?null:F(lt,at,""+ht,Nt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case _:return ht.key===pe?J(lt,at,ht,Nt):null;case M:return ht.key===pe?mt(lt,at,ht,Nt):null;case X:return pe=ht._init,ht=pe(ht._payload),yt(lt,at,ht,Nt)}if(gt(ht)||ot(ht))return pe!==null?null:Dt(lt,at,ht,Nt,null);if(typeof ht.then=="function")return yt(lt,at,Lc(ht),Nt);if(ht.$$typeof===U)return yt(lt,at,Mc(lt,ht),Nt);uh(lt,ht)}return null}function St(lt,at,ht,Nt,pe){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return lt=lt.get(ht)||null,F(at,lt,""+Nt,pe);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case _:return lt=lt.get(Nt.key===null?ht:Nt.key)||null,J(at,lt,Nt,pe);case M:return lt=lt.get(Nt.key===null?ht:Nt.key)||null,mt(at,lt,Nt,pe);case X:var rn=Nt._init;return Nt=rn(Nt._payload),St(lt,at,ht,Nt,pe)}if(gt(Nt)||ot(Nt))return lt=lt.get(ht)||null,Dt(at,lt,Nt,pe,null);if(typeof Nt.then=="function")return St(lt,at,ht,Lc(Nt),pe);if(Nt.$$typeof===U)return St(lt,at,ht,Mc(at,Nt),pe);uh(at,Nt)}return null}function Be(lt,at,ht,Nt){for(var pe=null,rn=null,Se=at,Oe=at=0,ta=null;Se!==null&&Oe<ht.length;Oe++){Se.index>Oe?(ta=Se,Se=null):ta=Se.sibling;var An=yt(lt,Se,ht[Oe],Nt);if(An===null){Se===null&&(Se=ta);break}s&&Se&&An.alternate===null&&r(lt,Se),at=E(An,at,Oe),rn===null?pe=An:rn.sibling=An,rn=An,Se=ta}if(Oe===ht.length)return f(lt,Se),gn&&Dr(lt,Oe),pe;if(Se===null){for(;Oe<ht.length;Oe++)Se=Pt(lt,ht[Oe],Nt),Se!==null&&(at=E(Se,at,Oe),rn===null?pe=Se:rn.sibling=Se,rn=Se);return gn&&Dr(lt,Oe),pe}for(Se=p(Se);Oe<ht.length;Oe++)ta=St(Se,lt,Oe,ht[Oe],Nt),ta!==null&&(s&&ta.alternate!==null&&Se.delete(ta.key===null?Oe:ta.key),at=E(ta,at,Oe),rn===null?pe=ta:rn.sibling=ta,rn=ta);return s&&Se.forEach(function(wu){return r(lt,wu)}),gn&&Dr(lt,Oe),pe}function Ne(lt,at,ht,Nt){if(ht==null)throw Error(n(151));for(var pe=null,rn=null,Se=at,Oe=at=0,ta=null,An=ht.next();Se!==null&&!An.done;Oe++,An=ht.next()){Se.index>Oe?(ta=Se,Se=null):ta=Se.sibling;var wu=yt(lt,Se,An.value,Nt);if(wu===null){Se===null&&(Se=ta);break}s&&Se&&wu.alternate===null&&r(lt,Se),at=E(wu,at,Oe),rn===null?pe=wu:rn.sibling=wu,rn=wu,Se=ta}if(An.done)return f(lt,Se),gn&&Dr(lt,Oe),pe;if(Se===null){for(;!An.done;Oe++,An=ht.next())An=Pt(lt,An.value,Nt),An!==null&&(at=E(An,at,Oe),rn===null?pe=An:rn.sibling=An,rn=An);return gn&&Dr(lt,Oe),pe}for(Se=p(Se);!An.done;Oe++,An=ht.next())An=St(Se,lt,Oe,An.value,Nt),An!==null&&(s&&An.alternate!==null&&Se.delete(An.key===null?Oe:An.key),at=E(An,at,Oe),rn===null?pe=An:rn.sibling=An,rn=An);return s&&Se.forEach(function(J3){return r(lt,J3)}),gn&&Dr(lt,Oe),pe}function qn(lt,at,ht,Nt){if(typeof ht=="object"&&ht!==null&&ht.type===T&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case _:t:{for(var pe=ht.key;at!==null;){if(at.key===pe){if(pe=ht.type,pe===T){if(at.tag===7){f(lt,at.sibling),Nt=x(at,ht.props.children),Nt.return=lt,lt=Nt;break t}}else if(at.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===X&&h0(pe)===at.type){f(lt,at.sibling),Nt=x(at,ht.props),hu(Nt,ht),Nt.return=lt,lt=Nt;break t}f(lt,at);break}else r(lt,at);at=at.sibling}ht.type===T?(Nt=po(ht.props.children,lt.mode,Nt,ht.key),Nt.return=lt,lt=Nt):(Nt=Di(ht.type,ht.key,ht.props,null,lt.mode,Nt),hu(Nt,ht),Nt.return=lt,lt=Nt)}return O(lt);case M:t:{for(pe=ht.key;at!==null;){if(at.key===pe)if(at.tag===4&&at.stateNode.containerInfo===ht.containerInfo&&at.stateNode.implementation===ht.implementation){f(lt,at.sibling),Nt=x(at,ht.children||[]),Nt.return=lt,lt=Nt;break t}else{f(lt,at);break}else r(lt,at);at=at.sibling}Nt=Xf(ht,lt.mode,Nt),Nt.return=lt,lt=Nt}return O(lt);case X:return pe=ht._init,ht=pe(ht._payload),qn(lt,at,ht,Nt)}if(gt(ht))return Be(lt,at,ht,Nt);if(ot(ht)){if(pe=ot(ht),typeof pe!="function")throw Error(n(150));return ht=pe.call(ht),Ne(lt,at,ht,Nt)}if(typeof ht.then=="function")return qn(lt,at,Lc(ht),Nt);if(ht.$$typeof===U)return qn(lt,at,Mc(lt,ht),Nt);uh(lt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"||typeof ht=="bigint"?(ht=""+ht,at!==null&&at.tag===6?(f(lt,at.sibling),Nt=x(at,ht),Nt.return=lt,lt=Nt):(f(lt,at),Nt=yc(ht,lt.mode,Nt),Nt.return=lt,lt=Nt),O(lt)):f(lt,at)}return function(lt,at,ht,Nt){try{Oc=0;var pe=qn(lt,at,ht,Nt);return il=null,pe}catch(Se){if(Se===Ac||Se===Ns)throw Se;var rn=ba(29,Se,null,lt.mode);return rn.lanes=Nt,rn.return=lt,rn}finally{}}}var al=d0(!0),p0=d0(!1),On=tt(null),Ls=null;function bo(s){var r=s.alternate;Rt(ii,ii.current&1),Rt(On,s),Ls===null&&(r===null||lu.current!==null||r.memoizedState!==null)&&(Ls=s)}function m0(s){if(s.tag===22){if(Rt(ii,ii.current),Rt(On,s),Ls===null){var r=s.alternate;r!==null&&r.memoizedState!==null&&(Ls=s)}}else Eo()}function Eo(){Rt(ii,ii.current),Rt(On,On.current)}function tr(s){bt(On),Ls===s&&(Ls=null),bt(ii)}var ii=tt(0);function Ir(s){for(var r=s;r!==null;){if(r.tag===13){var f=r.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||ix(f)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function To(s,r,f,p){r=s.memoizedState,f=f(p,r),f=f==null?r:v({},r,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var fa={enqueueSetState:function(s,r,f){s=s._reactInternals;var p=ti(),x=$s(p);x.payload=r,f!=null&&(x.callback=f),r=Lr(s,x,p),r!==null&&(da(r,s,p),nl(r,s,p))},enqueueReplaceState:function(s,r,f){s=s._reactInternals;var p=ti(),x=$s(p);x.tag=1,x.payload=r,f!=null&&(x.callback=f),r=Lr(s,x,p),r!==null&&(da(r,s,p),nl(r,s,p))},enqueueForceUpdate:function(s,r){s=s._reactInternals;var f=ti(),p=$s(f);p.tag=2,r!=null&&(p.callback=r),r=Lr(s,p,f),r!==null&&(da(r,s,f),nl(r,s,f))}};function g0(s,r,f,p,x,E,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,E,O):r.prototype&&r.prototype.isPureReactComponent?!Ds(f,p)||!Ds(x,E):!0}function v0(s,r,f,p){s=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(f,p),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(f,p),r.state!==s&&fa.enqueueReplaceState(r,r.state,null)}function er(s,r){var f=r;if("ref"in r){f={};for(var p in r)p!=="ref"&&(f[p]=r[p])}if(s=s.defaultProps){f===r&&(f=v({},f));for(var x in s)f[x]===void 0&&(f[x]=s[x])}return f}var sl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function zc(s){sl(s)}function ch(s){console.error(s)}function y0(s){sl(s)}function fh(s,r){try{var f=s.onUncaughtError;f(r.value,{componentStack:r.stack})}catch(p){setTimeout(function(){throw p})}}function us(s,r,f){try{var p=s.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function hh(s,r,f){return f=$s(f),f.tag=3,f.payload={element:null},f.callback=function(){fh(s,r)},f}function _0(s){return s=$s(s),s.tag=3,s}function dh(s,r,f,p){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var E=p.value;s.payload=function(){return x(E)},s.callback=function(){us(r,f,p)}}var O=f.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(s.callback=function(){us(r,f,p),typeof x!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:""})})}function X_(s,r,f,p,x){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(r=f.alternate,r!==null&&ss(r,f,x,!0),f=On.current,f!==null){switch(f.tag){case 13:return Ls===null?l():f.alternate===null&&Yn===0&&(Yn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,p===Rc?f.flags|=16384:(r=f.updateQueue,r===null?f.updateQueue=new Set([p]):r.add(p),Mt(s,p,x)),!1;case 22:return f.flags|=65536,p===Rc?f.flags|=16384:(r=f.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=r):(f=r.retryQueue,f===null?r.retryQueue=new Set([p]):f.add(p)),Mt(s,p,x)),!1}throw Error(n(435,f.tag))}return Mt(s,p,x),l(),!1}if(gn)return r=On.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=x,p!==kf&&(s=Error(n(422),{cause:p}),el(Fi(s,f)))):(p!==kf&&(r=Error(n(423),{cause:p}),el(Fi(r,f))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,p=Fi(p,f),x=hh(s.stateNode,p,x),su(s,x),Yn!==4&&(Yn=2)),!1;var E=Error(n(520),{cause:p});if(E=Fi(E,f),Tn===null?Tn=[E]:Tn.push(E),Yn!==4&&(Yn=2),r===null)return!0;p=Fi(p,f),f=r;do{switch(f.tag){case 3:return f.flags|=65536,s=x&-x,f.lanes|=s,s=hh(f.stateNode,p,s),su(f,s),!1;case 1:if(r=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Wa===null||!Wa.has(E))))return f.flags|=65536,x&=-x,f.lanes|=x,x=_0(x),dh(x,s,f,p),su(f,x),!1}f=f.return}while(f!==null);return!1}var x0=Error(n(461)),Ui=!1;function ai(s,r,f,p){r.child=s===null?p0(r,null,f,p):al(r,s.child,f,p)}function Ta(s,r,f,p,x){f=f.render;var E=r.ref;if("ref"in p){var O={};for(var F in p)F!=="ref"&&(O[F]=p[F])}else O=p;return Js(r),p=Pr(s,r,f,O,E,x),F=hp(),s!==null&&!Ui?(th(s,r,x),Ni(s,r,x)):(gn&&F&&ep(r),r.flags|=1,ai(s,r,p,x),r.child)}function Aa(s,r,f,p,x){if(s===null){var E=f.type;return typeof E=="function"&&!vc(E)&&E.defaultProps===void 0&&f.compare===null?(r.tag=15,r.type=E,Cp(s,r,E,p,x)):(s=Di(f.type,null,p,r,r.mode,x),s.ref=r.ref,s.return=r,r.child=s)}if(E=s.child,!Pc(s,x)){var O=E.memoizedProps;if(f=f.compare,f=f!==null?f:Ds,f(O,p)&&s.ref===r.ref)return Ni(s,r,x)}return r.flags|=1,s=ei(E,p),s.ref=r.ref,s.return=r,r.child=s}function Cp(s,r,f,p,x){if(s!==null){var E=s.memoizedProps;if(Ds(E,p)&&s.ref===r.ref)if(Ui=!1,r.pendingProps=p=E,Pc(s,x))(s.flags&131072)!==0&&(Ui=!0);else return r.lanes=s.lanes,Ni(s,r,x)}return du(s,r,f,p,x)}function rl(s,r,f){var p=r.pendingProps,x=p.children,E=s!==null?s.memoizedState:null;if(p.mode==="hidden"){if((r.flags&128)!==0){if(p=E!==null?E.baseLanes|f:f,s!==null){for(x=r.child=s.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;r.childLanes=E&~p}else r.childLanes=0,r.child=null;return ol(s,r,p,f)}if((f&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},s!==null&&Tc(r,E!==null?E.cachePool:null),E!==null?Pg(r,E):fp(),m0(r);else return r.lanes=r.childLanes=536870912,ol(s,r,E!==null?E.baseLanes|f:f,f)}else E!==null?(Tc(r,E.cachePool),Pg(r,E),Eo(),r.memoizedState=null):(s!==null&&Tc(r,null),fp(),Eo());return ai(s,r,x,f),r.child}function ol(s,r,f,p){var x=_o();return x=x===null?null:{parent:hi._currentValue,pool:x},r.memoizedState={baseLanes:f,cachePool:x},s!==null&&Tc(r,null),fp(),m0(r),s!==null&&ss(s,r,p,!0),null}function ll(s,r){var f=r.ref;if(f===null)s!==null&&s.ref!==null&&(r.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(n(284));(s===null||s.ref!==f)&&(r.flags|=4194816)}}function du(s,r,f,p,x){return Js(r),f=Pr(s,r,f,p,void 0,x),p=hp(),s!==null&&!Ui?(th(s,r,x),Ni(s,r,x)):(gn&&p&&ep(r),r.flags|=1,ai(s,r,f,x),r.child)}function Ha(s,r,f,p,x,E){return Js(r),r.updateQueue=null,f=Vg(r,p,f,x),Ig(s),p=hp(),s!==null&&!Ui?(th(s,r,E),Ni(s,r,E)):(gn&&p&&ep(r),r.flags|=1,ai(s,r,f,E),r.child)}function Fa(s,r,f,p,x){if(Js(r),r.stateNode===null){var E=ho,O=f.contextType;typeof O=="object"&&O!==null&&(E=Qn(O)),E=new f(p,E),r.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=fa,r.stateNode=E,E._reactInternals=r,E=r.stateNode,E.props=p,E.state=r.memoizedState,E.refs={},up(r),O=f.contextType,E.context=typeof O=="object"&&O!==null?Qn(O):ho,E.state=r.memoizedState,O=f.getDerivedStateFromProps,typeof O=="function"&&(To(r,f,O,p),E.state=r.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(O=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),O!==E.state&&fa.enqueueReplaceState(E,E.state,null),ru(r,p,E,x),Cc(),E.state=r.memoizedState),typeof E.componentDidMount=="function"&&(r.flags|=4194308),p=!0}else if(s===null){E=r.stateNode;var F=r.memoizedProps,J=er(f,F);E.props=J;var mt=E.context,Dt=f.contextType;O=ho,typeof Dt=="object"&&Dt!==null&&(O=Qn(Dt));var Pt=f.getDerivedStateFromProps;Dt=typeof Pt=="function"||typeof E.getSnapshotBeforeUpdate=="function",F=r.pendingProps!==F,Dt||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(F||mt!==O)&&v0(r,E,p,O),Or=!1;var yt=r.memoizedState;E.state=yt,ru(r,p,E,x),Cc(),mt=r.memoizedState,F||yt!==mt||Or?(typeof Pt=="function"&&(To(r,f,Pt,p),mt=r.memoizedState),(J=Or||g0(r,f,J,p,yt,mt,O))?(Dt||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=p,r.memoizedState=mt),E.props=p,E.state=mt,E.context=O,p=J):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),p=!1)}else{E=r.stateNode,Le(s,r),O=r.memoizedProps,Dt=er(f,O),E.props=Dt,Pt=r.pendingProps,yt=E.context,mt=f.contextType,J=ho,typeof mt=="object"&&mt!==null&&(J=Qn(mt)),F=f.getDerivedStateFromProps,(mt=typeof F=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O!==Pt||yt!==J)&&v0(r,E,p,J),Or=!1,yt=r.memoizedState,E.state=yt,ru(r,p,E,x),Cc();var St=r.memoizedState;O!==Pt||yt!==St||Or||s!==null&&s.dependencies!==null&&Sc(s.dependencies)?(typeof F=="function"&&(To(r,f,F,p),St=r.memoizedState),(Dt=Or||g0(r,f,Dt,p,yt,St,J)||s!==null&&s.dependencies!==null&&Sc(s.dependencies))?(mt||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(p,St,J),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(p,St,J)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||O===s.memoizedProps&&yt===s.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&yt===s.memoizedState||(r.flags|=1024),r.memoizedProps=p,r.memoizedState=St),E.props=p,E.state=St,E.context=J,p=Dt):(typeof E.componentDidUpdate!="function"||O===s.memoizedProps&&yt===s.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&yt===s.memoizedState||(r.flags|=1024),p=!1)}return E=p,ll(s,r),p=(r.flags&128)!==0,E||p?(E=r.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:E.render(),r.flags|=1,s!==null&&p?(r.child=al(r,s.child,null,x),r.child=al(r,null,f,x)):ai(s,r,f,x),r.memoizedState=E.state,s=r.child):s=Ni(s,r,x),s}function Ao(s,r,f,p){return tu(),r.flags|=256,ai(s,r,f,p),r.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ps(s){return{baseLanes:s,cachePool:Zf()}}function Mi(s,r,f){return s=s!==null?s.childLanes&~f:0,r&&(s|=ps),s}function pu(s,r,f){var p=r.pendingProps,x=!1,E=(r.flags&128)!==0,O;if((O=E)||(O=s!==null&&s.memoizedState===null?!1:(ii.current&2)!==0),O&&(x=!0,r.flags&=-129),O=(r.flags&32)!==0,r.flags&=-33,s===null){if(gn){if(x?bo(r):Eo(),gn){var F=Zn,J;if(J=F){t:{for(J=F,F=Ba;J.nodeType!==8;){if(!F){F=null;break t}if(J=qr(J.nextSibling),J===null){F=null;break t}}F=J}F!==null?(r.memoizedState={dehydrated:F,treeContext:mo!==null?{id:Ks,overflow:Qs}:null,retryLane:536870912,hydrationErrors:null},J=ba(18,null,null,0),J.stateNode=F,J.return=r,r.child=J,la=r,Zn=null,J=!0):J=!1}J||go(r)}if(F=r.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return ix(F)?r.lanes=32:r.lanes=536870912,null;tr(r)}return F=p.children,p=p.fallback,x?(Eo(),x=r.mode,F=ul({mode:"hidden",children:F},x),p=po(p,x,f,null),F.return=r,p.return=r,F.sibling=p,r.child=F,x=r.child,x.memoizedState=Ps(f),x.childLanes=Mi(s,O,f),r.memoizedState=zs,p):(bo(r),nr(r,F))}if(J=s.memoizedState,J!==null&&(F=J.dehydrated,F!==null)){if(E)r.flags&256?(bo(r),r.flags&=-257,r=qi(s,r,f)):r.memoizedState!==null?(Eo(),r.child=s.child,r.flags|=128,r=null):(Eo(),x=p.fallback,F=r.mode,p=ul({mode:"visible",children:p.children},F),x=po(x,F,f,null),x.flags|=2,p.return=r,x.return=r,p.sibling=x,r.child=p,al(r,s.child,null,f),p=r.child,p.memoizedState=Ps(f),p.childLanes=Mi(s,O,f),r.memoizedState=zs,r=x);else if(bo(r),ix(F)){if(O=F.nextSibling&&F.nextSibling.dataset,O)var mt=O.dgst;O=mt,p=Error(n(419)),p.stack="",p.digest=O,el({value:p,source:null,stack:null}),r=qi(s,r,f)}else if(Ui||ss(s,r,f,!1),O=(f&s.childLanes)!==0,Ui||O){if(O=He,O!==null&&(p=f&-f,p=(p&42)!==0?1:Ce(p),p=(p&(O.suspendedLanes|f))!==0?0:p,p!==0&&p!==J.retryLane))throw J.retryLane=p,wr(s,p),da(O,s,p),x0;F.data==="$?"||l(),r=qi(s,r,f)}else F.data==="$?"?(r.flags|=192,r.child=s.child,r=null):(s=J.treeContext,Zn=qr(F.nextSibling),la=r,gn=!0,as=null,Ba=!1,s!==null&&(Gi[Pa++]=Ks,Gi[Pa++]=Qs,Gi[Pa++]=mo,Ks=s.id,Qs=s.overflow,mo=r),r=nr(r,p.children),r.flags|=4096);return r}return x?(Eo(),x=p.fallback,F=r.mode,J=s.child,mt=J.sibling,p=ei(J,{mode:"hidden",children:p.children}),p.subtreeFlags=J.subtreeFlags&65011712,mt!==null?x=ei(mt,x):(x=po(x,F,f,null),x.flags|=2),x.return=r,p.return=r,p.sibling=x,r.child=p,p=x,x=r.child,F=s.child.memoizedState,F===null?F=Ps(f):(J=F.cachePool,J!==null?(mt=hi._currentValue,J=J.parent!==mt?{parent:mt,pool:mt}:J):J=Zf(),F={baseLanes:F.baseLanes|f,cachePool:J}),x.memoizedState=F,x.childLanes=Mi(s,O,f),r.memoizedState=zs,p):(bo(r),f=s.child,s=f.sibling,f=ei(f,{mode:"visible",children:p.children}),f.return=r,f.sibling=null,s!==null&&(O=r.deletions,O===null?(r.deletions=[s],r.flags|=16):O.push(s)),r.child=f,r.memoizedState=null,f)}function nr(s,r){return r=ul({mode:"visible",children:r},s.mode),r.return=s,s.child=r}function ul(s,r){return s=ba(22,s,null,r),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function qi(s,r,f){return al(r,s.child,null,f),s=nr(r,r.pendingProps.children),s.flags|=2,r.memoizedState=null,s}function ki(s,r,f){s.lanes|=r;var p=s.alternate;p!==null&&(p.lanes|=r),sp(s.return,r,f)}function fn(s,r,f,p,x){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:x}:(E.isBackwards=r,E.rendering=null,E.renderingStartTime=0,E.last=p,E.tail=f,E.tailMode=x)}function cs(s,r,f){var p=r.pendingProps,x=p.revealOrder,E=p.tail;if(ai(s,r,p.children,f),p=ii.current,(p&2)!==0)p=p&1|2,r.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=r.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ki(s,f,r);else if(s.tag===19)ki(s,f,r);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break t;for(;s.sibling===null;){if(s.return===null||s.return===r)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}switch(Rt(ii,p),x){case"forwards":for(f=r.child,x=null;f!==null;)s=f.alternate,s!==null&&Ir(s)===null&&(x=f),f=f.sibling;f=x,f===null?(x=r.child,r.child=null):(x=f.sibling,f.sibling=null),fn(r,!1,x,f,E);break;case"backwards":for(f=null,x=r.child,r.child=null;x!==null;){if(s=x.alternate,s!==null&&Ir(s)===null){r.child=x;break}s=x.sibling,x.sibling=f,f=x,x=s}fn(r,!0,f,null,E);break;case"together":fn(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ni(s,r,f){if(s!==null&&(r.dependencies=s.dependencies),Hs|=r.lanes,(f&r.childLanes)===0)if(s!==null){if(ss(s,r,f,!1),(f&r.childLanes)===0)return null}else return null;if(s!==null&&r.child!==s.child)throw Error(n(153));if(r.child!==null){for(s=r.child,f=ei(s,s.pendingProps),r.child=f,f.return=r;s.sibling!==null;)s=s.sibling,f=f.sibling=ei(s,s.pendingProps),f.return=r;f.sibling=null}return r.child}function Pc(s,r){return(s.lanes&r)!==0?!0:(s=s.dependencies,!!(s!==null&&Sc(s)))}function fs(s,r,f){switch(r.tag){case 3:jt(r,r.stateNode.containerInfo),yo(r,hi,s.memoizedState.cache),tu();break;case 27:case 5:ye(r);break;case 4:jt(r,r.stateNode.containerInfo);break;case 10:yo(r,r.type,r.memoizedProps.value);break;case 13:var p=r.memoizedState;if(p!==null)return p.dehydrated!==null?(bo(r),r.flags|=128,null):(f&r.child.childLanes)!==0?pu(s,r,f):(bo(r),s=Ni(s,r,f),s!==null?s.sibling:null);bo(r);break;case 19:var x=(s.flags&128)!==0;if(p=(f&r.childLanes)!==0,p||(ss(s,r,f,!1),p=(f&r.childLanes)!==0),x){if(p)return cs(s,r,f);r.flags|=128}if(x=r.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Rt(ii,ii.current),p)break;return null;case 22:case 23:return r.lanes=0,rl(s,r,f);case 24:yo(r,hi,s.memoizedState.cache)}return Ni(s,r,f)}function cl(s,r,f){if(s!==null)if(s.memoizedProps!==r.pendingProps)Ui=!0;else{if(!Pc(s,f)&&(r.flags&128)===0)return Ui=!1,fs(s,r,f);Ui=(s.flags&131072)!==0}else Ui=!1,gn&&(r.flags&1048576)!==0&&qf(r,$l,r.index);switch(r.lanes=0,r.tag){case 16:t:{s=r.pendingProps;var p=r.elementType,x=p._init;if(p=x(p._payload),r.type=p,typeof p=="function")vc(p)?(s=er(p,s),r.tag=1,r=Fa(null,r,p,s,f)):(r.tag=0,r=du(null,r,p,s,f));else{if(p!=null){if(x=p.$$typeof,x===N){r.tag=11,r=Ta(null,r,p,s,f);break t}else if(x===H){r.tag=14,r=Aa(null,r,p,s,f);break t}}throw r=pt(p)||p,Error(n(306,r,""))}}return r;case 0:return du(s,r,r.type,r.pendingProps,f);case 1:return p=r.type,x=er(p,r.pendingProps),Fa(s,r,p,x,f);case 3:t:{if(jt(r,r.stateNode.containerInfo),s===null)throw Error(n(387));p=r.pendingProps;var E=r.memoizedState;x=E.element,Le(s,r),ru(r,p,null,f);var O=r.memoizedState;if(p=O.cache,yo(r,hi,p),p!==E.cache&&xc(r,[hi],f,!0),Cc(),p=O.element,E.isDehydrated)if(E={element:p,isDehydrated:!1,cache:O.cache},r.updateQueue.baseState=E,r.memoizedState=E,r.flags&256){r=Ao(s,r,p,f);break t}else if(p!==x){x=Fi(Error(n(424)),r),el(x),r=Ao(s,r,p,f);break t}else{switch(s=r.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Zn=qr(s.firstChild),la=r,gn=!0,as=null,Ba=!0,f=p0(r,null,p,f),r.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(tu(),p===x){r=Ni(s,r,f);break t}ai(s,r,p,f)}r=r.child}return r;case 26:return ll(s,r),s===null?(f=E1(r.type,null,r.pendingProps,null))?r.memoizedState=f:gn||(f=r.type,s=r.pendingProps,p=A0(Bt.current).createElement(f),p[ui]=r,p[_i]=s,pa(p,f,s),ci(p),r.stateNode=p):r.memoizedState=E1(r.type,s.memoizedProps,r.pendingProps,s.memoizedState),null;case 27:return ye(r),s===null&&gn&&(p=r.stateNode=S1(r.type,r.pendingProps,Bt.current),la=r,Ba=!0,x=Zn,Eu(r.type)?(ax=x,Zn=qr(p.firstChild)):Zn=x),ai(s,r,r.pendingProps.children,f),ll(s,r),s===null&&(r.flags|=4194304),r.child;case 5:return s===null&&gn&&((x=p=Zn)&&(p=R3(p,r.type,r.pendingProps,Ba),p!==null?(r.stateNode=p,la=r,Zn=qr(p.firstChild),Ba=!1,x=!0):x=!1),x||go(r)),ye(r),x=r.type,E=r.pendingProps,O=s!==null?s.memoizedProps:null,p=E.children,tx(x,E)?p=null:O!==null&&tx(x,O)&&(r.flags|=32),r.memoizedState!==null&&(x=Pr(s,r,B_,null,null,f),Vp._currentValue=x),ll(s,r),ai(s,r,p,f),r.child;case 6:return s===null&&gn&&((s=f=Zn)&&(f=C3(f,r.pendingProps,Ba),f!==null?(r.stateNode=f,la=r,Zn=null,s=!0):s=!1),s||go(r)),null;case 13:return pu(s,r,f);case 4:return jt(r,r.stateNode.containerInfo),p=r.pendingProps,s===null?r.child=al(r,null,p,f):ai(s,r,p,f),r.child;case 11:return Ta(s,r,r.type,r.pendingProps,f);case 7:return ai(s,r,r.pendingProps,f),r.child;case 8:return ai(s,r,r.pendingProps.children,f),r.child;case 12:return ai(s,r,r.pendingProps.children,f),r.child;case 10:return p=r.pendingProps,yo(r,r.type,p.value),ai(s,r,p.children,f),r.child;case 9:return x=r.type._context,p=r.pendingProps.children,Js(r),x=Qn(x),p=p(x),r.flags|=1,ai(s,r,p,f),r.child;case 14:return Aa(s,r,r.type,r.pendingProps,f);case 15:return Cp(s,r,r.type,r.pendingProps,f);case 19:return cs(s,r,f);case 31:return p=r.pendingProps,f=r.mode,p={mode:p.mode,children:p.children},s===null?(f=ul(p,f),f.ref=r.ref,r.child=f,f.return=r,r=f):(f=ei(s.child,p),f.ref=r.ref,r.child=f,f.return=r,r=f),r;case 22:return rl(s,r,f);case 24:return Js(r),p=Qn(hi),s===null?(x=_o(),x===null&&(x=He,E=Wf(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=f),x=E),r.memoizedState={parent:p,cache:x},up(r),yo(r,hi,x)):((s.lanes&f)!==0&&(Le(s,r),ru(r,null,null,f),Cc()),x=s.memoizedState,E=r.memoizedState,x.parent!==p?(x={parent:p,cache:p},r.memoizedState=x,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=x),yo(r,hi,p)):(p=E.cache,yo(r,hi,p),p!==x.cache&&xc(r,[hi],f,!0))),ai(s,r,r.pendingProps.children,f),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Bs(s){s.flags|=4}function Bc(s,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!w1(r)){if(r=On.current,r!==null&&((Ee&4194048)===Ee?Ls!==null:(Ee&62914560)!==Ee&&(Ee&536870912)===0||r!==Ls))throw os=Rc,op;s.flags|=8192}}function Vr(s,r){r!==null&&(s.flags|=4),s.flags&16384&&(r=s.tag!==22?te():536870912,s.lanes|=r,pn|=r)}function fl(s,r){if(!gn)switch(s.tailMode){case"hidden":r=s.tail;for(var f=null;r!==null;)r.alternate!==null&&(f=r),r=r.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?r||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Hn(s){var r=s.alternate!==null&&s.alternate.child===s.child,f=0,p=0;if(r)for(var x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags&65011712,p|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)f|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=p,s.childLanes=f,r}function wp(s,r,f){var p=r.pendingProps;switch(np(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(r),null;case 1:return Hn(r),null;case 3:return f=r.stateNode,p=null,s!==null&&(p=s.memoizedState.cache),r.memoizedState.cache!==p&&(r.flags|=2048),Nr(hi),Te(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Us(r)?Bs(r):s===null||s.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,bn())),Hn(r),null;case 26:return f=r.memoizedState,s===null?(Bs(r),f!==null?(Hn(r),Bc(r,f)):(Hn(r),r.flags&=-16777217)):f?f!==s.memoizedState?(Bs(r),Hn(r),Bc(r,f)):(Hn(r),r.flags&=-16777217):(s.memoizedProps!==p&&Bs(r),Hn(r),r.flags&=-16777217),null;case 27:cn(r),f=Bt.current;var x=r.type;if(s!==null&&r.stateNode!=null)s.memoizedProps!==p&&Bs(r);else{if(!p){if(r.stateNode===null)throw Error(n(166));return Hn(r),null}s=et.current,Us(r)?Ng(r):(s=S1(x,p,f),r.stateNode=s,Bs(r))}return Hn(r),null;case 5:if(cn(r),f=r.type,s!==null&&r.stateNode!=null)s.memoizedProps!==p&&Bs(r);else{if(!p){if(r.stateNode===null)throw Error(n(166));return Hn(r),null}if(s=et.current,Us(r))Ng(r);else{switch(x=A0(Bt.current),s){case 1:s=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:s=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":s=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":s=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof p.is=="string"?x.createElement("select",{is:p.is}):x.createElement("select"),p.multiple?s.multiple=!0:p.size&&(s.size=p.size);break;default:s=typeof p.is=="string"?x.createElement(f,{is:p.is}):x.createElement(f)}}s[ui]=r,s[_i]=p;t:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)s.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break t;for(;x.sibling===null;){if(x.return===null||x.return===r)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=s;t:switch(pa(s,f,p),f){case"button":case"input":case"select":case"textarea":s=!!p.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Bs(r)}}return Hn(r),r.flags&=-16777217,null;case 6:if(s&&r.stateNode!=null)s.memoizedProps!==p&&Bs(r);else{if(typeof p!="string"&&r.stateNode===null)throw Error(n(166));if(s=Bt.current,Us(r)){if(s=r.stateNode,f=r.memoizedProps,p=null,x=la,x!==null)switch(x.tag){case 27:case 5:p=x.memoizedProps}s[ui]=r,s=!!(s.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||p1(s.nodeValue,f)),s||go(r)}else s=A0(s).createTextNode(p),s[ui]=r,r.stateNode=s}return Hn(r),null;case 13:if(p=r.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Us(r),p!==null&&p.dehydrated!==null){if(s===null){if(!x)throw Error(n(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[ui]=r}else tu(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Hn(r),x=!1}else x=bn(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return r.flags&256?(tr(r),r):(tr(r),null)}if(tr(r),(r.flags&128)!==0)return r.lanes=f,r;if(f=p!==null,s=s!==null&&s.memoizedState!==null,f){p=r.child,x=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(x=p.alternate.memoizedState.cachePool.pool);var E=null;p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==x&&(p.flags|=2048)}return f!==s&&f&&(r.child.flags|=8192),Vr(r,r.updateQueue),Hn(r),null;case 4:return Te(),s===null&&Z_(r.stateNode.containerInfo),Hn(r),null;case 10:return Nr(r.type),Hn(r),null;case 19:if(bt(ii),x=r.memoizedState,x===null)return Hn(r),null;if(p=(r.flags&128)!==0,E=x.rendering,E===null)if(p)fl(x,!1);else{if(Yn!==0||s!==null&&(s.flags&128)!==0)for(s=r.child;s!==null;){if(E=Ir(s),E!==null){for(r.flags|=128,fl(x,!1),s=E.updateQueue,r.updateQueue=s,Vr(r,s),r.subtreeFlags=0,s=f,f=r.child;f!==null;)tp(f,s),f=f.sibling;return Rt(ii,ii.current&1|2),r.child}s=s.sibling}x.tail!==null&&Xt()>Ji&&(r.flags|=128,p=!0,fl(x,!1),r.lanes=4194304)}else{if(!p)if(s=Ir(E),s!==null){if(r.flags|=128,p=!0,s=s.updateQueue,r.updateQueue=s,Vr(r,s),fl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!gn)return Hn(r),null}else 2*Xt()-x.renderingStartTime>Ji&&f!==536870912&&(r.flags|=128,p=!0,fl(x,!1),r.lanes=4194304);x.isBackwards?(E.sibling=r.child,r.child=E):(s=x.last,s!==null?s.sibling=E:r.child=E,x.last=E)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=Xt(),r.sibling=null,s=ii.current,Rt(ii,p?s&1|2:s&1),r):(Hn(r),null);case 22:case 23:return tr(r),wc(),p=r.memoizedState!==null,s!==null?s.memoizedState!==null!==p&&(r.flags|=8192):p&&(r.flags|=8192),p?(f&536870912)!==0&&(r.flags&128)===0&&(Hn(r),r.subtreeFlags&6&&(r.flags|=8192)):Hn(r),f=r.updateQueue,f!==null&&Vr(r,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),p=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(p=r.memoizedState.cachePool.pool),p!==f&&(r.flags|=2048),s!==null&&bt(rs),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),r.memoizedState.cache!==f&&(r.flags|=2048),Nr(hi),Hn(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function mu(s,r){switch(np(r),r.tag){case 1:return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 3:return Nr(hi),Te(),s=r.flags,(s&65536)!==0&&(s&128)===0?(r.flags=s&-65537|128,r):null;case 26:case 27:case 5:return cn(r),null;case 13:if(tr(r),s=r.memoizedState,s!==null&&s.dehydrated!==null){if(r.alternate===null)throw Error(n(340));tu()}return s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 19:return bt(ii),null;case 4:return Te(),null;case 10:return Nr(r.type),null;case 22:case 23:return tr(r),wc(),s!==null&&bt(rs),s=r.flags,s&65536?(r.flags=s&-65537|128,r):null;case 24:return Nr(hi),null;case 25:return null;default:return null}}function gu(s,r){switch(np(r),r.tag){case 3:Nr(hi),Te();break;case 26:case 27:case 5:cn(r);break;case 4:Te();break;case 13:tr(r);break;case 19:bt(ii);break;case 10:Nr(r.type);break;case 22:case 23:tr(r),wc(),s!==null&&bt(rs);break;case 24:Nr(hi)}}function hl(s,r){try{var f=r.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var x=p.next;f=x;do{if((f.tag&s)===s){p=void 0;var E=f.create,O=f.inst;p=E(),O.destroy=p}f=f.next}while(f!==x)}}catch(F){nt(r,r.return,F)}}function Ga(s,r,f){try{var p=r.updateQueue,x=p!==null?p.lastEffect:null;if(x!==null){var E=x.next;p=E;do{if((p.tag&s)===s){var O=p.inst,F=O.destroy;if(F!==void 0){O.destroy=void 0,x=r;var J=f,mt=F;try{mt()}catch(Dt){nt(x,J,Dt)}}}p=p.next}while(p!==E)}}catch(Dt){nt(r,r.return,Dt)}}function dl(s){var r=s.updateQueue;if(r!==null){var f=s.stateNode;try{zg(r,f)}catch(p){nt(s,s.return,p)}}}function Hr(s,r,f){f.props=er(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(p){nt(s,r,p)}}function pl(s,r){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var p=s.stateNode;break;case 30:p=s.stateNode;break;default:p=s.stateNode}typeof f=="function"?s.refCleanup=f(p):f.current=p}}catch(x){nt(s,r,x)}}function ir(s,r){var f=s.ref,p=s.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(x){nt(s,r,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){nt(s,r,x)}else f.current=null}function vu(s){var r=s.type,f=s.memoizedProps,p=s.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(x){nt(s,s.return,x)}}function Ic(s,r,f){try{var p=s.stateNode;M3(p,s.type,f,r),p[_i]=r}catch(x){nt(s,s.return,x)}}function Vc(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Eu(s.type)||s.tag===4}function Ro(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Vc(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Eu(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Co(s,r,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,r):(r=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,r.appendChild(s),f=f._reactRootContainer,f!=null||r.onclick!==null||(r.onclick=T0));else if(p!==4&&(p===27&&Eu(s.type)&&(f=s.stateNode,r=null),s=s.child,s!==null))for(Co(s,r,f),s=s.sibling;s!==null;)Co(s,r,f),s=s.sibling}function wo(s,r,f){var p=s.tag;if(p===5||p===6)s=s.stateNode,r?f.insertBefore(s,r):f.appendChild(s);else if(p!==4&&(p===27&&Eu(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(wo(s,r,f),s=s.sibling;s!==null;)wo(s,r,f),s=s.sibling}function Do(s){var r=s.stateNode,f=s.memoizedProps;try{for(var p=s.type,x=r.attributes;x.length;)r.removeAttributeNode(x[0]);pa(r,p,f),r[ui]=s,r[_i]=f}catch(E){nt(s,s.return,E)}}var ar=!1,Fn=!1,yu=!1,Xa=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function bi(s,r){if(s=s.containerInfo,J_=N0,s=Wd(s),dc(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else t:{f=(f=s.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var x=p.anchorOffset,E=p.focusNode;p=p.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break t}var O=0,F=-1,J=-1,mt=0,Dt=0,Pt=s,yt=null;e:for(;;){for(var St;Pt!==f||x!==0&&Pt.nodeType!==3||(F=O+x),Pt!==E||p!==0&&Pt.nodeType!==3||(J=O+p),Pt.nodeType===3&&(O+=Pt.nodeValue.length),(St=Pt.firstChild)!==null;)yt=Pt,Pt=St;for(;;){if(Pt===s)break e;if(yt===f&&++mt===x&&(F=O),yt===E&&++Dt===p&&(J=O),(St=Pt.nextSibling)!==null)break;Pt=yt,yt=Pt.parentNode}Pt=St}f=F===-1||J===-1?null:{start:F,end:J}}else f=null}f=f||{start:0,end:0}}else f=null;for($_={focusedElem:s,selectionRange:f},N0=!1,Ln=r;Ln!==null;)if(r=Ln,s=r.child,(r.subtreeFlags&1024)!==0&&s!==null)s.return=r,Ln=s;else for(;Ln!==null;){switch(r=Ln,E=r.alternate,s=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,f=r,x=E.memoizedProps,E=E.memoizedState,p=f.stateNode;try{var Be=er(f.type,x,f.elementType===f.type);s=p.getSnapshotBeforeUpdate(Be,E),p.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){nt(f,f.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=r.stateNode.containerInfo,f=s.nodeType,f===9)nx(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":nx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=r.sibling,s!==null){s.return=r.return,Ln=s;break}Ln=r.return}}function Fr(s,r,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:ha(s,f),p&4&&hl(5,f);break;case 1:if(ha(s,f),p&4)if(s=f.stateNode,r===null)try{s.componentDidMount()}catch(O){nt(f,f.return,O)}else{var x=er(f.type,r.memoizedProps);r=r.memoizedState;try{s.componentDidUpdate(x,r,s.__reactInternalSnapshotBeforeUpdate)}catch(O){nt(f,f.return,O)}}p&64&&dl(f),p&512&&pl(f,f.return);break;case 3:if(ha(s,f),p&64&&(s=f.updateQueue,s!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=f.child.stateNode;break;case 1:r=f.child.stateNode}try{zg(s,r)}catch(O){nt(f,f.return,O)}}break;case 27:r===null&&p&4&&Do(f);case 26:case 5:ha(s,f),r===null&&p&4&&vu(f),p&512&&pl(f,f.return);break;case 12:ha(s,f);break;case 13:ha(s,f),p&4&&Uo(s,f),p&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=Wn.bind(null,f),w3(s,f))));break;case 22:if(p=f.memoizedState!==null||ar,!p){r=r!==null&&r.memoizedState!==null||Fn,x=ar;var E=Fn;ar=p,(Fn=r)&&!E?sr(s,f,(f.subtreeFlags&8772)!==0):ha(s,f),ar=x,Fn=E}break;case 30:break;default:ha(s,f)}}function Ke(s){var r=s.alternate;r!==null&&(s.alternate=null,Ke(r)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(r=s.stateNode,r!==null&&wn(r)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ae=null,dn=!1;function hs(s,r,f){for(f=f.child;f!==null;)ml(s,r,f),f=f.sibling}function ml(s,r,f){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Tt,f)}catch{}switch(f.tag){case 26:Fn||ir(f,r),hs(s,r,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Fn||ir(f,r);var p=Ae,x=dn;Eu(f.type)&&(Ae=f.stateNode,dn=!1),hs(s,r,f),zp(f.stateNode),Ae=p,dn=x;break;case 5:Fn||ir(f,r);case 6:if(p=Ae,x=dn,Ae=null,hs(s,r,f),Ae=p,dn=x,Ae!==null)if(dn)try{(Ae.nodeType===9?Ae.body:Ae.nodeName==="HTML"?Ae.ownerDocument.body:Ae).removeChild(f.stateNode)}catch(E){nt(f,r,E)}else try{Ae.removeChild(f.stateNode)}catch(E){nt(f,r,E)}break;case 18:Ae!==null&&(dn?(s=Ae,_1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Xp(s)):_1(Ae,f.stateNode));break;case 4:p=Ae,x=dn,Ae=f.stateNode.containerInfo,dn=!0,hs(s,r,f),Ae=p,dn=x;break;case 0:case 11:case 14:case 15:Fn||Ga(2,f,r),Fn||Ga(4,f,r),hs(s,r,f);break;case 1:Fn||(ir(f,r),p=f.stateNode,typeof p.componentWillUnmount=="function"&&Hr(f,r,p)),hs(s,r,f);break;case 21:hs(s,r,f);break;case 22:Fn=(p=Fn)||f.memoizedState!==null,hs(s,r,f),Fn=p;break;default:hs(s,r,f)}}function Uo(s,r){if(r.memoizedState===null&&(s=r.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Xp(s)}catch(f){nt(r,r.return,f)}}function ph(s){switch(s.tag){case 13:case 19:var r=s.stateNode;return r===null&&(r=s.stateNode=new Xa),r;case 22:return s=s.stateNode,r=s._retryCache,r===null&&(r=s._retryCache=new Xa),r;default:throw Error(n(435,s.tag))}}function gl(s,r){var f=ph(s);r.forEach(function(p){var x=ze.bind(null,s,p);f.has(p)||(f.add(p),p.then(x,x))})}function Oi(s,r){var f=r.deletions;if(f!==null)for(var p=0;p<f.length;p++){var x=f[p],E=s,O=r,F=O;t:for(;F!==null;){switch(F.tag){case 27:if(Eu(F.type)){Ae=F.stateNode,dn=!1;break t}break;case 5:Ae=F.stateNode,dn=!1;break t;case 3:case 4:Ae=F.stateNode.containerInfo,dn=!0;break t}F=F.return}if(Ae===null)throw Error(n(160));ml(E,O,x),Ae=null,dn=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)mh(r,s),r=r.sibling}var Is=null;function mh(s,r){var f=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Oi(r,s),Jn(s),p&4&&(Ga(3,s,s.return),hl(3,s),Ga(5,s,s.return));break;case 1:Oi(r,s),Jn(s),p&512&&(Fn||f===null||ir(f,f.return)),p&64&&ar&&(s=s.updateQueue,s!==null&&(p=s.callbacks,p!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var x=Is;if(Oi(r,s),Jn(s),p&512&&(Fn||f===null||ir(f,f.return)),p&4){var E=f!==null?f.memoizedState:null;if(p=s.memoizedState,f===null)if(p===null)if(s.stateNode===null){t:{p=s.type,f=s.memoizedProps,x=x.ownerDocument||x;e:switch(p){case"title":E=x.getElementsByTagName("title")[0],(!E||E[As]||E[ui]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(p),x.head.insertBefore(E,x.querySelector("head > title"))),pa(E,p,f),E[ui]=s,ci(E),p=E;break t;case"link":var O=R1("link","href",x).get(p+(f.href||""));if(O){for(var F=0;F<O.length;F++)if(E=O[F],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){O.splice(F,1);break e}}E=x.createElement(p),pa(E,p,f),x.head.appendChild(E);break;case"meta":if(O=R1("meta","content",x).get(p+(f.content||""))){for(F=0;F<O.length;F++)if(E=O[F],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){O.splice(F,1);break e}}E=x.createElement(p),pa(E,p,f),x.head.appendChild(E);break;default:throw Error(n(468,p))}E[ui]=s,ci(E),p=E}s.stateNode=p}else C1(x,s.type,s.stateNode);else s.stateNode=A1(x,p,s.memoizedProps);else E!==p?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,p===null?C1(x,s.type,s.stateNode):A1(x,p,s.memoizedProps)):p===null&&s.stateNode!==null&&Ic(s,s.memoizedProps,f.memoizedProps)}break;case 27:Oi(r,s),Jn(s),p&512&&(Fn||f===null||ir(f,f.return)),f!==null&&p&4&&Ic(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Oi(r,s),Jn(s),p&512&&(Fn||f===null||ir(f,f.return)),s.flags&32){x=s.stateNode;try{sa(x,"")}catch(St){nt(s,s.return,St)}}p&4&&s.stateNode!=null&&(x=s.memoizedProps,Ic(s,x,f!==null?f.memoizedProps:x)),p&1024&&(yu=!0);break;case 6:if(Oi(r,s),Jn(s),p&4){if(s.stateNode===null)throw Error(n(162));p=s.memoizedProps,f=s.stateNode;try{f.nodeValue=p}catch(St){nt(s,s.return,St)}}break;case 3:if(w0=null,x=Is,Is=R0(r.containerInfo),Oi(r,s),Is=x,Jn(s),p&4&&f!==null&&f.memoizedState.isDehydrated)try{Xp(r.containerInfo)}catch(St){nt(s,s.return,St)}yu&&(yu=!1,No(s));break;case 4:p=Is,Is=R0(s.stateNode.containerInfo),Oi(r,s),Jn(s),Is=p;break;case 12:Oi(r,s),Jn(s);break;case 13:Oi(r,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Un=Xt()),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,gl(s,p)));break;case 22:x=s.memoizedState!==null;var J=f!==null&&f.memoizedState!==null,mt=ar,Dt=Fn;if(ar=mt||x,Fn=Dt||J,Oi(r,s),Fn=Dt,ar=mt,Jn(s),p&8192)t:for(r=s.stateNode,r._visibility=x?r._visibility&-2:r._visibility|1,x&&(f===null||J||ar||Fn||qa(s)),f=null,r=s;;){if(r.tag===5||r.tag===26){if(f===null){J=f=r;try{if(E=J.stateNode,x)O=E.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{F=J.stateNode;var Pt=J.memoizedProps.style,yt=Pt!=null&&Pt.hasOwnProperty("display")?Pt.display:null;F.style.display=yt==null||typeof yt=="boolean"?"":(""+yt).trim()}}catch(St){nt(J,J.return,St)}}}else if(r.tag===6){if(f===null){J=r;try{J.stateNode.nodeValue=x?"":J.memoizedProps}catch(St){nt(J,J.return,St)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===s)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break t;for(;r.sibling===null;){if(r.return===null||r.return===s)break t;f===r&&(f=null),r=r.return}f===r&&(f=null),r.sibling.return=r.return,r=r.sibling}p&4&&(p=s.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,gl(s,f))));break;case 19:Oi(r,s),Jn(s),p&4&&(p=s.updateQueue,p!==null&&(s.updateQueue=null,gl(s,p)));break;case 30:break;case 21:break;default:Oi(r,s),Jn(s)}}function Jn(s){var r=s.flags;if(r&2){try{for(var f,p=s.return;p!==null;){if(Vc(p)){f=p;break}p=p.return}if(f==null)throw Error(n(160));switch(f.tag){case 27:var x=f.stateNode,E=Ro(s);wo(s,E,x);break;case 5:var O=f.stateNode;f.flags&32&&(sa(O,""),f.flags&=-33);var F=Ro(s);wo(s,F,O);break;case 3:case 4:var J=f.stateNode.containerInfo,mt=Ro(s);Co(s,mt,J);break;default:throw Error(n(161))}}catch(Dt){nt(s,s.return,Dt)}s.flags&=-3}r&4096&&(s.flags&=-4097)}function No(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var r=s;No(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),s=s.sibling}}function ha(s,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fr(s,r.alternate,r),r=r.sibling}function qa(s){for(s=s.child;s!==null;){var r=s;switch(r.tag){case 0:case 11:case 14:case 15:Ga(4,r,r.return),qa(r);break;case 1:ir(r,r.return);var f=r.stateNode;typeof f.componentWillUnmount=="function"&&Hr(r,r.return,f),qa(r);break;case 27:zp(r.stateNode);case 26:case 5:ir(r,r.return),qa(r);break;case 22:r.memoizedState===null&&qa(r);break;case 30:qa(r);break;default:qa(r)}s=s.sibling}}function sr(s,r,f){for(f=f&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var p=r.alternate,x=s,E=r,O=E.flags;switch(E.tag){case 0:case 11:case 15:sr(x,E,f),hl(4,E);break;case 1:if(sr(x,E,f),p=E,x=p.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(mt){nt(p,p.return,mt)}if(p=E,x=p.updateQueue,x!==null){var F=p.stateNode;try{var J=x.shared.hiddenCallbacks;if(J!==null)for(x.shared.hiddenCallbacks=null,x=0;x<J.length;x++)ou(J[x],F)}catch(mt){nt(p,p.return,mt)}}f&&O&64&&dl(E),pl(E,E.return);break;case 27:Do(E);case 26:case 5:sr(x,E,f),f&&p===null&&O&4&&vu(E),pl(E,E.return);break;case 12:sr(x,E,f);break;case 13:sr(x,E,f),f&&O&4&&Uo(x,E);break;case 22:E.memoizedState===null&&sr(x,E,f),pl(E,E.return);break;case 30:break;default:sr(x,E,f)}r=r.sibling}}function gh(s,r){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&eu(f))}function vh(s,r){s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&eu(s))}function zn(s,r,f,p){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yh(s,r,f,p),r=r.sibling}function yh(s,r,f,p){var x=r.flags;switch(r.tag){case 0:case 11:case 15:zn(s,r,f,p),x&2048&&hl(9,r);break;case 1:zn(s,r,f,p);break;case 3:zn(s,r,f,p),x&2048&&(s=null,r.alternate!==null&&(s=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==s&&(r.refCount++,s!=null&&eu(s)));break;case 12:if(x&2048){zn(s,r,f,p),s=r.stateNode;try{var E=r.memoizedProps,O=E.id,F=E.onPostCommit;typeof F=="function"&&F(O,r.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(J){nt(r,r.return,J)}}else zn(s,r,f,p);break;case 13:zn(s,r,f,p);break;case 23:break;case 22:E=r.stateNode,O=r.alternate,r.memoizedState!==null?E._visibility&2?zn(s,r,f,p):Vs(s,r):E._visibility&2?zn(s,r,f,p):(E._visibility|=2,Gr(s,r,f,p,(r.subtreeFlags&10256)!==0)),x&2048&&gh(O,r);break;case 24:zn(s,r,f,p),x&2048&&vh(r.alternate,r);break;default:zn(s,r,f,p)}}function Gr(s,r,f,p,x){for(x=x&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var E=s,O=r,F=f,J=p,mt=O.flags;switch(O.tag){case 0:case 11:case 15:Gr(E,O,F,J,x),hl(8,O);break;case 23:break;case 22:var Dt=O.stateNode;O.memoizedState!==null?Dt._visibility&2?Gr(E,O,F,J,x):Vs(E,O):(Dt._visibility|=2,Gr(E,O,F,J,x)),x&&mt&2048&&gh(O.alternate,O);break;case 24:Gr(E,O,F,J,x),x&&mt&2048&&vh(O.alternate,O);break;default:Gr(E,O,F,J,x)}r=r.sibling}}function Vs(s,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var f=s,p=r,x=p.flags;switch(p.tag){case 22:Vs(f,p),x&2048&&gh(p.alternate,p);break;case 24:Vs(f,p),x&2048&&vh(p.alternate,p);break;default:Vs(f,p)}r=r.sibling}}var ka=8192;function _u(s){if(s.subtreeFlags&ka)for(s=s.child;s!==null;)S0(s),s=s.sibling}function S0(s){switch(s.tag){case 26:_u(s),s.flags&ka&&s.memoizedState!==null&&G3(Is,s.memoizedState,s.memoizedProps);break;case 5:_u(s);break;case 3:case 4:var r=Is;Is=R0(s.stateNode.containerInfo),_u(s),Is=r;break;case 22:s.memoizedState===null&&(r=s.alternate,r!==null&&r.memoizedState!==null?(r=ka,ka=16777216,_u(s),ka=r):_u(s));break;default:_u(s)}}function M0(s){var r=s.alternate;if(r!==null&&(s=r.child,s!==null)){r.child=null;do r=s.sibling,s.sibling=null,s=r;while(s!==null)}}function Gn(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var f=0;f<r.length;f++){var p=r[f];Ln=p,or(p,s)}M0(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Dp(s),s=s.sibling}function Dp(s){switch(s.tag){case 0:case 11:case 15:Gn(s),s.flags&2048&&Ga(9,s,s.return);break;case 3:Gn(s);break;case 12:Gn(s);break;case 22:var r=s.stateNode;s.memoizedState!==null&&r._visibility&2&&(s.return===null||s.return.tag!==13)?(r._visibility&=-3,rr(s)):Gn(s);break;default:Gn(s)}}function rr(s){var r=s.deletions;if((s.flags&16)!==0){if(r!==null)for(var f=0;f<r.length;f++){var p=r[f];Ln=p,or(p,s)}M0(s)}for(s=s.child;s!==null;){switch(r=s,r.tag){case 0:case 11:case 15:Ga(8,r,r.return),rr(r);break;case 22:f=r.stateNode,f._visibility&2&&(f._visibility&=-3,rr(r));break;default:rr(r)}s=s.sibling}}function or(s,r){for(;Ln!==null;){var f=Ln;switch(f.tag){case 0:case 11:case 15:Ga(8,f,r);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:eu(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,Ln=p;else t:for(f=s;Ln!==null;){p=Ln;var x=p.sibling,E=p.return;if(Ke(p),p===f){Ln=null;break t}if(x!==null){x.return=E,Ln=x;break t}Ln=E}}}var $n={getCacheForType:function(s){var r=Qn(hi),f=r.data.get(s);return f===void 0&&(f=s(),r.data.set(s,f)),f}},Up=typeof WeakMap=="function"?WeakMap:Map,En=0,He=null,en=null,Ee=0,We=0,Kn=null,Ya=!1,xu=!1,Su=!1,ds=0,Yn=0,Hs=0,lr=0,vl=0,ps=0,pn=0,Tn=null,De=null,sn=!1,Un=0,Ji=1/0,ms=null,Wa=null,Ei=0,$i=null,Pn=null,ja=0,Xr=0,Hc=null,Za=null,ur=0,yl=null;function ti(){if((En&2)!==0&&Ee!==0)return Ee&-Ee;if(I.T!==null){var s=Ge;return s!==0?s:k_()}return ln()}function _h(){ps===0&&(ps=(Ee&536870912)===0||gn?st():536870912);var s=On.current;return s!==null&&(s.flags|=32),ps}function da(s,r,f){(s===He&&(We===2||We===9)||s.cancelPendingCommit!==null)&&(Lo(s,0),Fs(s,Ee,ps,!1)),ue(s,f),((En&2)===0||s!==He)&&(s===He&&((En&2)===0&&(lr|=f),Yn===4&&Fs(s,Ee,ps,!1)),Bo(s))}function Mu(s,r,f){if((En&6)!==0)throw Error(n(327));var p=!f&&(r&124)===0&&(r&s.expiredLanes)===0||Kt(s,r),x=p?S(s,r):u(s,r,!0),E=p;do{if(x===0){xu&&!p&&Fs(s,r,0,!1);break}else{if(f=s.current.alternate,E&&!Oo(f)){x=u(s,r,!1),E=!1;continue}if(x===2){if(E=r,s.errorRecoveryDisabledLanes&E)var O=0;else O=s.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){r=O;t:{var F=s;x=Tn;var J=F.current.memoizedState.isDehydrated;if(J&&(Lo(F,O).flags|=256),O=u(F,O,!1),O!==2){if(Su&&!J){F.errorRecoveryDisabledLanes|=E,lr|=E,x=4;break t}E=De,De=x,E!==null&&(De===null?De=E:De.push.apply(De,E))}x=O}if(E=!1,x!==2)continue}}if(x===1){Lo(s,0),Fs(s,r,0,!0);break}t:{switch(p=s,E=x,E){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Fs(p,r,ps,!Ya);break t;case 2:De=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(x=Un+300-Xt(),10<x)){if(Fs(p,r,ps,!Ya),_e(p,0,!0)!==0)break t;p.timeoutHandle=v1(Fc.bind(null,p,f,De,ms,sn,r,ps,lr,pn,Ya,E,2,-0,0),x);break t}Fc(p,f,De,ms,sn,r,ps,lr,pn,Ya,E,0,-0,0)}}break}while(!0);Bo(s)}function Fc(s,r,f,p,x,E,O,F,J,mt,Dt,Pt,yt,St){if(s.timeoutHandle=-1,Pt=r.subtreeFlags,(Pt&8192||(Pt&16785408)===16785408)&&(Ip={stylesheets:null,count:0,unsuspend:F3},S0(r),Pt=X3(),Pt!==null)){s.cancelPendingCommit=Pt(Yt.bind(null,s,r,E,f,p,x,O,F,J,Dt,1,yt,St)),Fs(s,E,O,!mt);return}Yt(s,r,E,f,p,x,O,F,J)}function Oo(s){for(var r=s;;){var f=r.tag;if((f===0||f===11||f===15)&&r.flags&16384&&(f=r.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var x=f[p],E=x.getSnapshot;x=x.value;try{if(!xa(E(),x))return!1}catch{return!1}}if(f=r.child,r.subtreeFlags&16384&&f!==null)f.return=r,r=f;else{if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fs(s,r,f,p){r&=~vl,r&=~lr,s.suspendedLanes|=r,s.pingedLanes&=~r,p&&(s.warmLanes|=r),p=s.expirationTimes;for(var x=r;0<x;){var E=31-ne(x),O=1<<E;p[E]=-1,x&=~O}f!==0&&Lt(s,f,r)}function cr(){return(En&6)===0?(Np(0),!1):!0}function _l(){if(en!==null){if(We===0)var s=en.return;else s=en,Ur=vo=null,dp(s),il=null,Oc=0,s=en;for(;s!==null;)gu(s.alternate,s),s=s.return;en=null}}function Lo(s,r){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,E3(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),_l(),He=s,en=f=ei(s.current,null),Ee=r,We=0,Kn=null,Ya=!1,xu=Kt(s,r),Su=!1,pn=ps=vl=lr=Hs=Yn=0,De=Tn=null,sn=!1,(r&8)!==0&&(r|=r&32);var p=s.entangledLanes;if(p!==0)for(s=s.entanglements,p&=r;0<p;){var x=31-ne(p),E=1<<x;r|=s[x],p&=~E}return ds=r,gc(),f}function xh(s,r){Xe=null,I.H=Nc,r===Ac||r===Ns?(r=lp(),We=3):r===op?(r=lp(),We=4):We=r===x0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Kn=r,en===null&&(Yn=1,fh(s,Fi(r,s.current)))}function bu(){var s=I.H;return I.H=Nc,s===null?Nc:s}function Sh(){var s=I.A;return I.A=$n,s}function l(){Yn=4,Ya||(Ee&4194048)!==Ee&&On.current!==null||(xu=!0),(Hs&134217727)===0&&(lr&134217727)===0||He===null||Fs(He,Ee,ps,!1)}function u(s,r,f){var p=En;En|=2;var x=bu(),E=Sh();(He!==s||Ee!==r)&&(ms=null,Lo(s,r)),r=!1;var O=Yn;t:do try{if(We!==0&&en!==null){var F=en,J=Kn;switch(We){case 8:_l(),O=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(r=!0);var mt=We;if(We=0,Kn=null,$(s,F,J,mt),f&&xu){O=0;break t}break;default:mt=We,We=0,Kn=null,$(s,F,J,mt)}}g(),O=Yn;break}catch(Dt){xh(s,Dt)}while(!0);return r&&s.shellSuspendCounter++,Ur=vo=null,En=p,I.H=x,I.A=E,en===null&&(He=null,Ee=0,gc()),O}function g(){for(;en!==null;)w(en)}function S(s,r){var f=En;En|=2;var p=bu(),x=Sh();He!==s||Ee!==r?(ms=null,Ji=Xt()+500,Lo(s,r)):xu=Kt(s,r);t:do try{if(We!==0&&en!==null){r=en;var E=Kn;e:switch(We){case 1:We=0,Kn=null,$(s,r,E,1);break;case 2:case 9:if(Kf(E)){We=0,Kn=null,q(r);break}r=function(){We!==2&&We!==9||He!==s||(We=7),Bo(s)},E.then(r,r);break t;case 3:We=7;break t;case 4:We=5;break t;case 7:Kf(E)?(We=0,Kn=null,q(r)):(We=0,Kn=null,$(s,r,E,7));break;case 5:var O=null;switch(en.tag){case 26:O=en.memoizedState;case 5:case 27:var F=en;if(!O||w1(O)){We=0,Kn=null;var J=F.sibling;if(J!==null)en=J;else{var mt=F.return;mt!==null?(en=mt,ft(mt)):en=null}break e}}We=0,Kn=null,$(s,r,E,5);break;case 6:We=0,Kn=null,$(s,r,E,6);break;case 8:_l(),Yn=6;break t;default:throw Error(n(462))}}A();break}catch(Dt){xh(s,Dt)}while(!0);return Ur=vo=null,I.H=p,I.A=x,En=f,en!==null?0:(He=null,Ee=0,gc(),Yn)}function A(){for(;en!==null&&!Zt();)w(en)}function w(s){var r=cl(s.alternate,s,ds);s.memoizedProps=s.pendingProps,r===null?ft(s):en=r}function q(s){var r=s,f=r.alternate;switch(r.tag){case 15:case 0:r=Ha(f,r,r.pendingProps,r.type,void 0,Ee);break;case 11:r=Ha(f,r,r.pendingProps,r.type.render,r.ref,Ee);break;case 5:dp(r);default:gu(f,r),r=en=tp(r,ds),r=cl(f,r,ds)}s.memoizedProps=s.pendingProps,r===null?ft(s):en=r}function $(s,r,f,p){Ur=vo=null,dp(r),il=null,Oc=0;var x=r.return;try{if(X_(s,x,r,f,Ee)){Yn=1,fh(s,Fi(f,s.current)),en=null;return}}catch(E){if(x!==null)throw en=x,E;Yn=1,fh(s,Fi(f,s.current)),en=null;return}r.flags&32768?(gn||p===1?s=!0:xu||(Ee&536870912)!==0?s=!1:(Ya=s=!0,(p===2||p===9||p===3||p===6)&&(p=On.current,p!==null&&p.tag===13&&(p.flags|=16384))),wt(r,s)):ft(r)}function ft(s){var r=s;do{if((r.flags&32768)!==0){wt(r,Ya);return}s=r.return;var f=wp(r.alternate,r,ds);if(f!==null){en=f;return}if(r=r.sibling,r!==null){en=r;return}en=r=s}while(r!==null);Yn===0&&(Yn=5)}function wt(s,r){do{var f=mu(s.alternate,s);if(f!==null){f.flags&=32767,en=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!r&&(s=s.sibling,s!==null)){en=s;return}en=s=f}while(s!==null);Yn=6,en=null}function Yt(s,r,f,p,x,E,O,F,J){s.cancelPendingCommit=null;do zo();while(Ei!==0);if((En&6)!==0)throw Error(n(327));if(r!==null){if(r===s.current)throw Error(n(177));if(E=r.lanes|r.childLanes,E|=Ff,qt(s,f,E,O,F,J),s===He&&(en=He=null,Ee=0),Pn=r,$i=s,ja=f,Xr=E,Hc=x,Za=p,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,vn(ee,function(){return Po(),null})):(s.callbackNode=null,s.callbackPriority=0),p=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||p){p=I.T,I.T=null,x=j.p,j.p=2,O=En,En|=4;try{bi(s,r,f)}finally{En=O,j.p=x,I.T=p}}Ei=1,ie(),le(),Fe()}}function ie(){if(Ei===1){Ei=0;var s=$i,r=Pn,f=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||f){f=I.T,I.T=null;var p=j.p;j.p=2;var x=En;En|=4;try{mh(r,s);var E=$_,O=Wd(s.containerInfo),F=E.focusedElem,J=E.selectionRange;if(O!==F&&F&&F.ownerDocument&&Yd(F.ownerDocument.documentElement,F)){if(J!==null&&dc(F)){var mt=J.start,Dt=J.end;if(Dt===void 0&&(Dt=mt),"selectionStart"in F)F.selectionStart=mt,F.selectionEnd=Math.min(Dt,F.value.length);else{var Pt=F.ownerDocument||document,yt=Pt&&Pt.defaultView||window;if(yt.getSelection){var St=yt.getSelection(),Be=F.textContent.length,Ne=Math.min(J.start,Be),qn=J.end===void 0?Ne:Math.min(J.end,Be);!St.extend&&Ne>qn&&(O=qn,qn=Ne,Ne=O);var lt=kd(F,Ne),at=kd(F,qn);if(lt&&at&&(St.rangeCount!==1||St.anchorNode!==lt.node||St.anchorOffset!==lt.offset||St.focusNode!==at.node||St.focusOffset!==at.offset)){var ht=Pt.createRange();ht.setStart(lt.node,lt.offset),St.removeAllRanges(),Ne>qn?(St.addRange(ht),St.extend(at.node,at.offset)):(ht.setEnd(at.node,at.offset),St.addRange(ht))}}}}for(Pt=[],St=F;St=St.parentNode;)St.nodeType===1&&Pt.push({element:St,left:St.scrollLeft,top:St.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Pt.length;F++){var Nt=Pt[F];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}N0=!!J_,$_=J_=null}finally{En=x,j.p=p,I.T=f}}s.current=r,Ei=2}}function le(){if(Ei===2){Ei=0;var s=$i,r=Pn,f=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||f){f=I.T,I.T=null;var p=j.p;j.p=2;var x=En;En|=4;try{Fr(s,r.alternate,r)}finally{En=x,j.p=p,I.T=f}}Ei=3}}function Fe(){if(Ei===4||Ei===3){Ei=0,Gt();var s=$i,r=Pn,f=ja,p=Za;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ei=5:(Ei=0,Pn=$i=null,Ka(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Wa=null),hn(f),r=r.stateNode,Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Tt,r,void 0,(r.current.flags&128)===128)}catch{}if(p!==null){r=I.T,x=j.p,j.p=2,I.T=null;try{for(var E=s.onRecoverableError,O=0;O<p.length;O++){var F=p[O];E(F.value,{componentStack:F.stack})}}finally{I.T=r,j.p=x}}(ja&3)!==0&&zo(),Bo(s),x=s.pendingLanes,(f&4194090)!==0&&(x&42)!==0?s===yl?ur++:(ur=0,yl=s):ur=0,Np(0)}}function Ka(s,r){(s.pooledCacheLanes&=r)===0&&(r=s.pooledCache,r!=null&&(s.pooledCache=null,eu(r)))}function zo(s){return ie(),le(),Fe(),Po()}function Po(){if(Ei!==5)return!1;var s=$i,r=Xr;Xr=0;var f=hn(ja),p=I.T,x=j.p;try{j.p=32>f?32:f,I.T=null,f=Hc,Hc=null;var E=$i,O=ja;if(Ei=0,Pn=$i=null,ja=0,(En&6)!==0)throw Error(n(331));var F=En;if(En|=4,Dp(E.current),yh(E,E.current,O,f),En=F,Np(0,!1),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Tt,E)}catch{}return!0}finally{j.p=x,I.T=p,Ka(s,r)}}function vt(s,r,f){r=Fi(f,r),r=hh(s.stateNode,r,2),s=Lr(s,r,2),s!==null&&(ue(s,2),Bo(s))}function nt(s,r,f){if(s.tag===3)vt(s,s,f);else for(;r!==null;){if(r.tag===3){vt(r,s,f);break}else if(r.tag===1){var p=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Wa===null||!Wa.has(p))){s=Fi(f,s),f=_0(2),p=Lr(r,f,2),p!==null&&(dh(f,p,r,s),ue(p,2),Bo(p));break}}r=r.return}}function Mt(s,r,f){var p=s.pingCache;if(p===null){p=s.pingCache=new Up;var x=new Set;p.set(r,x)}else x=p.get(r),x===void 0&&(x=new Set,p.set(r,x));x.has(f)||(Su=!0,x.add(f),s=kt.bind(null,s,r,f),r.then(s,s))}function kt(s,r,f){var p=s.pingCache;p!==null&&p.delete(r),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,He===s&&(Ee&f)===f&&(Yn===4||Yn===3&&(Ee&62914560)===Ee&&300>Xt()-Un?(En&2)===0&&Lo(s,0):vl|=f,pn===Ee&&(pn=0)),Bo(s)}function xe(s,r){r===0&&(r=te()),s=wr(s,r),s!==null&&(ue(s,r),Bo(s))}function Wn(s){var r=s.memoizedState,f=0;r!==null&&(f=r.retryLane),xe(s,f)}function ze(s,r){var f=0;switch(s.tag){case 13:var p=s.stateNode,x=s.memoizedState;x!==null&&(f=x.retryLane);break;case 19:p=s.stateNode;break;case 22:p=s.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(r),xe(s,f)}function vn(s,r){return Ue(s,r)}var si=null,nn=null,fr=!1,Mh=!1,q_=!1,Gc=0;function Bo(s){s!==nn&&s.next===null&&(nn===null?si=nn=s:nn=nn.next=s),Mh=!0,fr||(fr=!0,m3())}function Np(s,r){if(!q_&&Mh){q_=!0;do for(var f=!1,p=si;p!==null;){if(s!==0){var x=p.pendingLanes;if(x===0)var E=0;else{var O=p.suspendedLanes,F=p.pingedLanes;E=(1<<31-ne(42|s)+1)-1,E&=x&~(O&~F),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,o1(p,E))}else E=Ee,E=_e(p,p===He?E:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(E&3)===0||Kt(p,E)||(f=!0,o1(p,E));p=p.next}while(f);q_=!1}}function p3(){a1()}function a1(){Mh=fr=!1;var s=0;Gc!==0&&(b3()&&(s=Gc),Gc=0);for(var r=Xt(),f=null,p=si;p!==null;){var x=p.next,E=s1(p,r);E===0?(p.next=null,f===null?si=x:f.next=x,x===null&&(nn=f)):(f=p,(s!==0||(E&3)!==0)&&(Mh=!0)),p=x}Np(s)}function s1(s,r){for(var f=s.suspendedLanes,p=s.pingedLanes,x=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var O=31-ne(E),F=1<<O,J=x[O];J===-1?((F&f)===0||(F&p)!==0)&&(x[O]=Re(F,r)):J<=r&&(s.expiredLanes|=F),E&=~F}if(r=He,f=Ee,f=_e(s,s===r?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p=s.callbackNode,f===0||s===r&&(We===2||We===9)||s.cancelPendingCommit!==null)return p!==null&&p!==null&&Y(p),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Kt(s,f)){if(r=f&-f,r===s.callbackPriority)return r;switch(p!==null&&Y(p),hn(f)){case 2:case 8:f=Vt;break;case 32:f=ee;break;case 268435456:f=Q;break;default:f=ee}return p=r1.bind(null,s),f=Ue(f,p),s.callbackPriority=r,s.callbackNode=f,r}return p!==null&&p!==null&&Y(p),s.callbackPriority=2,s.callbackNode=null,2}function r1(s,r){if(Ei!==0&&Ei!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(zo()&&s.callbackNode!==f)return null;var p=Ee;return p=_e(s,s===He?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),p===0?null:(Mu(s,p,r),s1(s,Xt()),s.callbackNode!=null&&s.callbackNode===f?r1.bind(null,s):null)}function o1(s,r){if(zo())return null;Mu(s,r,!0)}function m3(){T3(function(){(En&6)!==0?Ue(re,p3):a1()})}function k_(){return Gc===0&&(Gc=st()),Gc}function l1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:tc(""+s)}function u1(s,r){var f=r.ownerDocument.createElement("input");return f.name=r.name,f.value=r.value,s.id&&f.setAttribute("form",s.id),r.parentNode.insertBefore(f,r),s=new FormData(s),f.parentNode.removeChild(f),s}function g3(s,r,f,p,x){if(r==="submit"&&f&&f.stateNode===x){var E=l1((x[_i]||null).action),O=p.submitter;O&&(r=(r=O[_i]||null)?l1(r.formAction):O.getAttribute("formAction"),r!==null&&(E=r,O=null));var F=new Gl("action","action",null,p,x);s.push({event:F,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Gc!==0){var J=O?u1(x,O):new FormData(x);Tp(f,{pending:!0,data:J,method:x.method,action:E},null,J)}}else typeof E=="function"&&(F.preventDefault(),J=O?u1(x,O):new FormData(x),Tp(f,{pending:!0,data:J,method:x.method,action:E},E,J))},currentTarget:x}]})}}for(var Y_=0;Y_<mc.length;Y_++){var W_=mc[Y_],v3=W_.toLowerCase(),y3=W_[0].toUpperCase()+W_.slice(1);wi(v3,"on"+y3)}wi(oa,"onAnimationEnd"),wi(Kd,"onAnimationIteration"),wi(Ma,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Ug,"onTransitionRun"),wi(Rr,"onTransitionStart"),wi(Kl,"onTransitionCancel"),wi(Cr,"onTransitionEnd"),G("onMouseEnter",["mouseout","mouseover"]),G("onMouseLeave",["mouseout","mouseover"]),G("onPointerEnter",["pointerout","pointerover"]),G("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Op));function c1(s,r){r=(r&4)!==0;for(var f=0;f<s.length;f++){var p=s[f],x=p.event;p=p.listeners;t:{var E=void 0;if(r)for(var O=p.length-1;0<=O;O--){var F=p[O],J=F.instance,mt=F.currentTarget;if(F=F.listener,J!==E&&x.isPropagationStopped())break t;E=F,x.currentTarget=mt;try{E(x)}catch(Dt){sl(Dt)}x.currentTarget=null,E=J}else for(O=0;O<p.length;O++){if(F=p[O],J=F.instance,mt=F.currentTarget,F=F.listener,J!==E&&x.isPropagationStopped())break t;E=F,x.currentTarget=mt;try{E(x)}catch(Dt){sl(Dt)}x.currentTarget=null,E=J}}}}function un(s,r){var f=r[ya];f===void 0&&(f=r[ya]=new Set);var p=s+"__bubble";f.has(p)||(f1(r,s,2,!1),f.add(p))}function j_(s,r,f){var p=0;r&&(p|=4),f1(f,s,p,r)}var b0="_reactListening"+Math.random().toString(36).slice(2);function Z_(s){if(!s[b0]){s[b0]=!0,Bl.forEach(function(f){f!=="selectionchange"&&(_3.has(f)||j_(f,!1,s),j_(f,!0,s))});var r=s.nodeType===9?s:s.ownerDocument;r===null||r[b0]||(r[b0]=!0,j_("selectionchange",!1,r))}}function f1(s,r,f,p){switch(z1(r)){case 2:var x=Y3;break;case 8:x=W3;break;default:x=ux}f=x.bind(null,r,f,s),x=void 0,!nc||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(x=!0),p?x!==void 0?s.addEventListener(r,f,{capture:!0,passive:x}):s.addEventListener(r,f,!0):x!==void 0?s.addEventListener(r,f,{passive:x}):s.addEventListener(r,f,!1)}function K_(s,r,f,p,x){var E=p;if((r&1)===0&&(r&2)===0&&p!==null)t:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var F=p.stateNode.containerInfo;if(F===x)break;if(O===4)for(O=p.return;O!==null;){var J=O.tag;if((J===3||J===4)&&O.stateNode.containerInfo===x)return;O=O.return}for(;F!==null;){if(O=Rs(F),O===null)return;if(J=O.tag,J===5||J===6||J===26||J===27){p=E=O;continue t}F=F.parentNode}}p=p.return}Od(function(){var mt=E,Dt=Cf(f),Pt=[];t:{var yt=Hf.get(s);if(yt!==void 0){var St=Gl,Be=s;switch(s){case"keypress":if(ao(f)===0)break t;case"keydown":case"keyup":St=Id;break;case"focusin":Be="focus",St=Df;break;case"focusout":Be="blur",St=Df;break;case"beforeblur":case"afterblur":St=Df;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=N_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Hd;break;case oa:case Kd:case Ma:St=gg;break;case Cr:St=br;break;case"scroll":case"scrollend":St=dg;break;case"wheel":St=O_;break;case"copy":case"cut":case"paste":St=yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Nf;break;case"toggle":case"beforetoggle":St=ro}var Ne=(r&4)!==0,qn=!Ne&&(s==="scroll"||s==="scrollend"),lt=Ne?yt!==null?yt+"Capture":null:yt;Ne=[];for(var at=mt,ht;at!==null;){var Nt=at;if(ht=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||ht===null||lt===null||(Nt=Vl(at,lt),Nt!=null&&Ne.push(Lp(at,Nt,ht))),qn)break;at=at.return}0<Ne.length&&(yt=new St(yt,Be,null,f,Dt),Pt.push({event:yt,listeners:Ne}))}}if((r&7)===0){t:{if(yt=s==="mouseover"||s==="pointerover",St=s==="mouseout"||s==="pointerout",yt&&f!==Rf&&(Be=f.relatedTarget||f.fromElement)&&(Rs(Be)||Be[Zi]))break t;if((St||yt)&&(yt=Dt.window===Dt?Dt:(yt=Dt.ownerDocument)?yt.defaultView||yt.parentWindow:window,St?(Be=f.relatedTarget||f.toElement,St=mt,Be=Be?Rs(Be):null,Be!==null&&(qn=o(Be),Ne=Be.tag,Be!==qn||Ne!==5&&Ne!==27&&Ne!==6)&&(Be=null)):(St=null,Be=mt),St!==Be)){if(Ne=Pd,Nt="onMouseLeave",lt="onMouseEnter",at="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=Nf,Nt="onPointerLeave",lt="onPointerEnter",at="pointer"),qn=St==null?yt:no(St),ht=Be==null?yt:no(Be),yt=new Ne(Nt,at+"leave",St,f,Dt),yt.target=qn,yt.relatedTarget=ht,Nt=null,Rs(Dt)===mt&&(Ne=new Ne(lt,at+"enter",Be,f,Dt),Ne.target=ht,Ne.relatedTarget=qn,Nt=Ne),qn=Nt,St&&Be)e:{for(Ne=St,lt=Be,at=0,ht=Ne;ht;ht=bh(ht))at++;for(ht=0,Nt=lt;Nt;Nt=bh(Nt))ht++;for(;0<at-ht;)Ne=bh(Ne),at--;for(;0<ht-at;)lt=bh(lt),ht--;for(;at--;){if(Ne===lt||lt!==null&&Ne===lt.alternate)break e;Ne=bh(Ne),lt=bh(lt)}Ne=null}else Ne=null;St!==null&&h1(Pt,yt,St,Ne,!1),Be!==null&&qn!==null&&h1(Pt,qn,Be,Ne,!0)}}t:{if(yt=mt?no(mt):window,St=yt.nodeName&&yt.nodeName.toLowerCase(),St==="select"||St==="input"&&yt.type==="file")var pe=Lf;else if(qd(yt))if(zf)pe=uo;else{pe=Cg;var rn=L_}else St=yt.nodeName,!St||St.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?mt&&Af(mt.elementType)&&(pe=Lf):pe=hc;if(pe&&(pe=pe(s,mt))){_a(Pt,pe,f,Dt);break t}rn&&rn(s,yt,mt),s==="focusout"&&mt&&yt.type==="number"&&mt.memoizedProps.value!=null&&Bi(yt,"number",yt.value)}switch(rn=mt?no(mt):window,s){case"focusin":(qd(rn)||rn.contentEditable==="true")&&(Tr=rn,Bf=mt,pc=null);break;case"focusout":pc=Bf=Tr=null;break;case"mousedown":If=!0;break;case"contextmenu":case"mouseup":case"dragend":If=!1,Zd(Pt,f,Dt);break;case"selectionchange":if(jd)break;case"keydown":case"keyup":Zd(Pt,f,Dt)}var Se;if(rc)t:{switch(s){case"compositionstart":var Oe="onCompositionStart";break t;case"compositionend":Oe="onCompositionEnd";break t;case"compositionupdate":Oe="onCompositionUpdate";break t}Oe=void 0}else lo?uc(s,f)&&(Oe="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Oe="onCompositionStart");Oe&&(lc&&f.locale!=="ko"&&(lo||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&lo&&(Se=zd()):(Sr=Dt,Ld="value"in Sr?Sr.value:Sr.textContent,lo=!0)),rn=E0(mt,Oe),0<rn.length&&(Oe=new Uf(Oe,s,null,f,Dt),Pt.push({event:Oe,listeners:rn}),Se?Oe.data=Se:(Se=Gd(f),Se!==null&&(Oe.data=Se)))),(Se=oc?cc(s,f):Xd(s,f))&&(Oe=E0(mt,"onBeforeInput"),0<Oe.length&&(rn=new Uf("onBeforeInput","beforeinput",null,f,Dt),Pt.push({event:rn,listeners:Oe}),rn.data=Se)),g3(Pt,s,mt,f,Dt)}c1(Pt,r)})}function Lp(s,r,f){return{instance:s,listener:r,currentTarget:f}}function E0(s,r){for(var f=r+"Capture",p=[];s!==null;){var x=s,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Vl(s,f),x!=null&&p.unshift(Lp(s,x,E)),x=Vl(s,r),x!=null&&p.push(Lp(s,x,E))),s.tag===3)return p;s=s.return}return[]}function bh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function h1(s,r,f,p,x){for(var E=r._reactName,O=[];f!==null&&f!==p;){var F=f,J=F.alternate,mt=F.stateNode;if(F=F.tag,J!==null&&J===p)break;F!==5&&F!==26&&F!==27||mt===null||(J=mt,x?(mt=Vl(f,E),mt!=null&&O.unshift(Lp(f,mt,J))):x||(mt=Vl(f,E),mt!=null&&O.push(Lp(f,mt,J)))),f=f.return}O.length!==0&&s.push({event:r,listeners:O})}var x3=/\r\n?/g,S3=/\u0000|\uFFFD/g;function d1(s){return(typeof s=="string"?s:""+s).replace(x3,`
`).replace(S3,"")}function p1(s,r){return r=d1(r),d1(s)===r}function T0(){}function Xn(s,r,f,p,x,E){switch(f){case"children":typeof p=="string"?r==="body"||r==="textarea"&&p===""||sa(s,p):(typeof p=="number"||typeof p=="bigint")&&r!=="body"&&sa(s,""+p);break;case"className":Qt(s,"class",p);break;case"tabIndex":Qt(s,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(s,f,p);break;case"style":$u(s,p,E);break;case"data":if(r!=="object"){Qt(s,"data",p);break}case"src":case"href":if(p===""&&(r!=="a"||f!=="href")){s.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=tc(""+p),s.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(r!=="input"&&Xn(s,r,"name",x.name,x,null),Xn(s,r,"formEncType",x.formEncType,x,null),Xn(s,r,"formMethod",x.formMethod,x,null),Xn(s,r,"formTarget",x.formTarget,x,null)):(Xn(s,r,"encType",x.encType,x,null),Xn(s,r,"method",x.method,x,null),Xn(s,r,"target",x.target,x,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){s.removeAttribute(f);break}p=tc(""+p),s.setAttribute(f,p);break;case"onClick":p!=null&&(s.onclick=T0);break;case"onScroll":p!=null&&un("scroll",s);break;case"onScrollEnd":p!=null&&un("scrollend",s);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(n(60));s.innerHTML=f}}break;case"multiple":s.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":s.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){s.removeAttribute("xlink:href");break}f=tc(""+p),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""+p):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":p===!0?s.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?s.setAttribute(f,p):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?s.setAttribute(f,p):s.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?s.removeAttribute(f):s.setAttribute(f,p);break;case"popover":un("beforetoggle",s),un("toggle",s),Ht(s,"popover",p);break;case"xlinkActuate":se(s,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":se(s,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":se(s,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":se(s,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":se(s,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":se(s,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":se(s,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":se(s,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":se(s,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ht(s,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ud.get(f)||f,Ht(s,f,p))}}function Q_(s,r,f,p,x,E){switch(f){case"style":$u(s,p,E);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(f=p.__html,f!=null){if(x.children!=null)throw Error(n(60));s.innerHTML=f}}break;case"children":typeof p=="string"?sa(s,p):(typeof p=="number"||typeof p=="bigint")&&sa(s,""+p);break;case"onScroll":p!=null&&un("scroll",s);break;case"onScrollEnd":p!=null&&un("scrollend",s);break;case"onClick":p!=null&&(s.onclick=T0);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Il.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),r=f.slice(2,x?f.length-7:void 0),E=s[_i]||null,E=E!=null?E[f]:null,typeof E=="function"&&s.removeEventListener(r,E,x),typeof p=="function")){typeof E!="function"&&E!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(r,p,x);break t}f in s?s[f]=p:p===!0?s.setAttribute(f,""):Ht(s,f,p)}}}function pa(s,r,f){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":un("error",s),un("load",s);var p=!1,x=!1,E;for(E in f)if(f.hasOwnProperty(E)){var O=f[E];if(O!=null)switch(E){case"src":p=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:Xn(s,r,E,O,f,null)}}x&&Xn(s,r,"srcSet",f.srcSet,f,null),p&&Xn(s,r,"src",f.src,f,null);return;case"input":un("invalid",s);var F=E=O=x=null,J=null,mt=null;for(p in f)if(f.hasOwnProperty(p)){var Dt=f[p];if(Dt!=null)switch(p){case"name":x=Dt;break;case"type":O=Dt;break;case"checked":J=Dt;break;case"defaultChecked":mt=Dt;break;case"value":E=Dt;break;case"defaultValue":F=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(n(137,r));break;default:Xn(s,r,p,Dt,f,null)}}Dn(s,E,F,J,mt,O,x,!1),Rn(s);return;case"select":un("invalid",s),p=O=E=null;for(x in f)if(f.hasOwnProperty(x)&&(F=f[x],F!=null))switch(x){case"value":E=F;break;case"defaultValue":O=F;break;case"multiple":p=F;default:Xn(s,r,x,F,f,null)}r=E,f=O,s.multiple=!!p,r!=null?fi(s,!!p,r,!1):f!=null&&fi(s,!!p,f,!0);return;case"textarea":un("invalid",s),E=x=p=null;for(O in f)if(f.hasOwnProperty(O)&&(F=f[O],F!=null))switch(O){case"value":p=F;break;case"defaultValue":x=F;break;case"children":E=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(91));break;default:Xn(s,r,O,F,f,null)}Ci(s,p,x,E),Rn(s);return;case"option":for(J in f)if(f.hasOwnProperty(J)&&(p=f[J],p!=null))switch(J){case"selected":s.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Xn(s,r,J,p,f,null)}return;case"dialog":un("beforetoggle",s),un("toggle",s),un("cancel",s),un("close",s);break;case"iframe":case"object":un("load",s);break;case"video":case"audio":for(p=0;p<Op.length;p++)un(Op[p],s);break;case"image":un("error",s),un("load",s);break;case"details":un("toggle",s);break;case"embed":case"source":case"link":un("error",s),un("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in f)if(f.hasOwnProperty(mt)&&(p=f[mt],p!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:Xn(s,r,mt,p,f,null)}return;default:if(Af(r)){for(Dt in f)f.hasOwnProperty(Dt)&&(p=f[Dt],p!==void 0&&Q_(s,r,Dt,p,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(p=f[F],p!=null&&Xn(s,r,F,p,f,null))}function M3(s,r,f,p){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,O=null,F=null,J=null,mt=null,Dt=null;for(St in f){var Pt=f[St];if(f.hasOwnProperty(St)&&Pt!=null)switch(St){case"checked":break;case"value":break;case"defaultValue":J=Pt;default:p.hasOwnProperty(St)||Xn(s,r,St,null,p,Pt)}}for(var yt in p){var St=p[yt];if(Pt=f[yt],p.hasOwnProperty(yt)&&(St!=null||Pt!=null))switch(yt){case"type":E=St;break;case"name":x=St;break;case"checked":mt=St;break;case"defaultChecked":Dt=St;break;case"value":O=St;break;case"defaultValue":F=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,r));break;default:St!==Pt&&Xn(s,r,yt,St,p,Pt)}}Ws(s,O,F,J,mt,Dt,E,x);return;case"select":St=O=F=yt=null;for(E in f)if(J=f[E],f.hasOwnProperty(E)&&J!=null)switch(E){case"value":break;case"multiple":St=J;default:p.hasOwnProperty(E)||Xn(s,r,E,null,p,J)}for(x in p)if(E=p[x],J=f[x],p.hasOwnProperty(x)&&(E!=null||J!=null))switch(x){case"value":yt=E;break;case"defaultValue":F=E;break;case"multiple":O=E;default:E!==J&&Xn(s,r,x,E,p,J)}r=F,f=O,p=St,yt!=null?fi(s,!!f,yt,!1):!!p!=!!f&&(r!=null?fi(s,!!f,r,!0):fi(s,!!f,f?[]:"",!1));return;case"textarea":St=yt=null;for(F in f)if(x=f[F],f.hasOwnProperty(F)&&x!=null&&!p.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Xn(s,r,F,null,p,x)}for(O in p)if(x=p[O],E=f[O],p.hasOwnProperty(O)&&(x!=null||E!=null))switch(O){case"value":yt=x;break;case"defaultValue":St=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==E&&Xn(s,r,O,x,p,E)}Ri(s,yt,St);return;case"option":for(var Be in f)if(yt=f[Be],f.hasOwnProperty(Be)&&yt!=null&&!p.hasOwnProperty(Be))switch(Be){case"selected":s.selected=!1;break;default:Xn(s,r,Be,null,p,yt)}for(J in p)if(yt=p[J],St=f[J],p.hasOwnProperty(J)&&yt!==St&&(yt!=null||St!=null))switch(J){case"selected":s.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:Xn(s,r,J,yt,p,St)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in f)yt=f[Ne],f.hasOwnProperty(Ne)&&yt!=null&&!p.hasOwnProperty(Ne)&&Xn(s,r,Ne,null,p,yt);for(mt in p)if(yt=p[mt],St=f[mt],p.hasOwnProperty(mt)&&yt!==St&&(yt!=null||St!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(n(137,r));break;default:Xn(s,r,mt,yt,p,St)}return;default:if(Af(r)){for(var qn in f)yt=f[qn],f.hasOwnProperty(qn)&&yt!==void 0&&!p.hasOwnProperty(qn)&&Q_(s,r,qn,void 0,p,yt);for(Dt in p)yt=p[Dt],St=f[Dt],!p.hasOwnProperty(Dt)||yt===St||yt===void 0&&St===void 0||Q_(s,r,Dt,yt,p,St);return}}for(var lt in f)yt=f[lt],f.hasOwnProperty(lt)&&yt!=null&&!p.hasOwnProperty(lt)&&Xn(s,r,lt,null,p,yt);for(Pt in p)yt=p[Pt],St=f[Pt],!p.hasOwnProperty(Pt)||yt===St||yt==null&&St==null||Xn(s,r,Pt,yt,p,St)}var J_=null,$_=null;function A0(s){return s.nodeType===9?s:s.ownerDocument}function m1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function g1(s,r){if(s===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&r==="foreignObject"?0:s}function tx(s,r){return s==="textarea"||s==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ex=null;function b3(){var s=window.event;return s&&s.type==="popstate"?s===ex?!1:(ex=s,!0):(ex=null,!1)}var v1=typeof setTimeout=="function"?setTimeout:void 0,E3=typeof clearTimeout=="function"?clearTimeout:void 0,y1=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof y1<"u"?function(s){return y1.resolve(null).then(s).catch(A3)}:v1;function A3(s){setTimeout(function(){throw s})}function Eu(s){return s==="head"}function _1(s,r){var f=r,p=0,x=0;do{var E=f.nextSibling;if(s.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(0<p&&8>p){f=p;var O=s.ownerDocument;if(f&1&&zp(O.documentElement),f&2&&zp(O.body),f&4)for(f=O.head,zp(f),O=f.firstChild;O;){var F=O.nextSibling,J=O.nodeName;O[As]||J==="SCRIPT"||J==="STYLE"||J==="LINK"&&O.rel.toLowerCase()==="stylesheet"||f.removeChild(O),O=F}}if(x===0){s.removeChild(E),Xp(r);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:p=f.charCodeAt(0)-48;else p=0;f=E}while(f);Xp(r)}function nx(s){var r=s.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var f=r;switch(r=r.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":nx(f),wn(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function R3(s,r,f,p){for(;s.nodeType===1;){var x=f;if(s.nodeName.toLowerCase()!==r.toLowerCase()){if(!p&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(p){if(!s[As])switch(r){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(r==="input"&&s.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=qr(s.nextSibling),s===null)break}return null}function C3(s,r,f){if(r==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=qr(s.nextSibling),s===null))return null;return s}function ix(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function w3(s,r){var f=s.ownerDocument;if(s.data!=="$?"||f.readyState==="complete")r();else{var p=function(){r(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),s._reactRetry=p}}function qr(s){for(;s!=null;s=s.nextSibling){var r=s.nodeType;if(r===1||r===3)break;if(r===8){if(r=s.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return s}var ax=null;function x1(s){s=s.previousSibling;for(var r=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(r===0)return s;r--}else f==="/$"&&r++}s=s.previousSibling}return null}function S1(s,r,f){switch(r=A0(f),s){case"html":if(s=r.documentElement,!s)throw Error(n(452));return s;case"head":if(s=r.head,!s)throw Error(n(453));return s;case"body":if(s=r.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function zp(s){for(var r=s.attributes;r.length;)s.removeAttributeNode(r[0]);wn(s)}var hr=new Map,M1=new Set;function R0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var xl=j.d;j.d={f:D3,r:U3,D:N3,C:O3,L:L3,m:z3,X:B3,S:P3,M:I3};function D3(){var s=xl.f(),r=cr();return s||r}function U3(s){var r=Cs(s);r!==null&&r.tag===5&&r.type==="form"?r0(r):xl.r(s)}var Eh=typeof document>"u"?null:document;function b1(s,r,f){var p=Eh;if(p&&typeof r=="string"&&r){var x=Nn(r);x='link[rel="'+s+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),M1.has(x)||(M1.add(x),s={rel:s,crossOrigin:f,href:r},p.querySelector(x)===null&&(r=p.createElement("link"),pa(r,"link",s),ci(r),p.head.appendChild(r)))}}function N3(s){xl.D(s),b1("dns-prefetch",s,null)}function O3(s,r){xl.C(s,r),b1("preconnect",s,r)}function L3(s,r,f){xl.L(s,r,f);var p=Eh;if(p&&s&&r){var x='link[rel="preload"][as="'+Nn(r)+'"]';r==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Nn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Nn(f.imageSizes)+'"]')):x+='[href="'+Nn(s)+'"]';var E=x;switch(r){case"style":E=Th(s);break;case"script":E=Ah(s)}hr.has(E)||(s=v({rel:"preload",href:r==="image"&&f&&f.imageSrcSet?void 0:s,as:r},f),hr.set(E,s),p.querySelector(x)!==null||r==="style"&&p.querySelector(Pp(E))||r==="script"&&p.querySelector(Bp(E))||(r=p.createElement("link"),pa(r,"link",s),ci(r),p.head.appendChild(r)))}}function z3(s,r){xl.m(s,r);var f=Eh;if(f&&s){var p=r&&typeof r.as=="string"?r.as:"script",x='link[rel="modulepreload"][as="'+Nn(p)+'"][href="'+Nn(s)+'"]',E=x;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ah(s)}if(!hr.has(E)&&(s=v({rel:"modulepreload",href:s},r),hr.set(E,s),f.querySelector(x)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Bp(E)))return}p=f.createElement("link"),pa(p,"link",s),ci(p),f.head.appendChild(p)}}}function P3(s,r,f){xl.S(s,r,f);var p=Eh;if(p&&s){var x=xr(p).hoistableStyles,E=Th(s);r=r||"default";var O=x.get(E);if(!O){var F={loading:0,preload:null};if(O=p.querySelector(Pp(E)))F.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":r},f),(f=hr.get(E))&&sx(s,f);var J=O=p.createElement("link");ci(J),pa(J,"link",s),J._p=new Promise(function(mt,Dt){J.onload=mt,J.onerror=Dt}),J.addEventListener("load",function(){F.loading|=1}),J.addEventListener("error",function(){F.loading|=2}),F.loading|=4,C0(O,r,p)}O={type:"stylesheet",instance:O,count:1,state:F},x.set(E,O)}}}function B3(s,r){xl.X(s,r);var f=Eh;if(f&&s){var p=xr(f).hoistableScripts,x=Ah(s),E=p.get(x);E||(E=f.querySelector(Bp(x)),E||(s=v({src:s,async:!0},r),(r=hr.get(x))&&rx(s,r),E=f.createElement("script"),ci(E),pa(E,"link",s),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function I3(s,r){xl.M(s,r);var f=Eh;if(f&&s){var p=xr(f).hoistableScripts,x=Ah(s),E=p.get(x);E||(E=f.querySelector(Bp(x)),E||(s=v({src:s,async:!0,type:"module"},r),(r=hr.get(x))&&rx(s,r),E=f.createElement("script"),ci(E),pa(E,"link",s),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},p.set(x,E))}}function E1(s,r,f,p){var x=(x=Bt.current)?R0(x):null;if(!x)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(r=Th(f.href),f=xr(x).hoistableStyles,p=f.get(r),p||(p={type:"style",instance:null,count:0,state:null},f.set(r,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Th(f.href);var E=xr(x).hoistableStyles,O=E.get(s);if(O||(x=x.ownerDocument||x,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,O),(E=x.querySelector(Pp(s)))&&!E._p&&(O.instance=E,O.state.loading=5),hr.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},hr.set(s,f),E||V3(x,s,f,O.state))),r&&p===null)throw Error(n(528,""));return O}if(r&&p!==null)throw Error(n(529,""));return null;case"script":return r=f.async,f=f.src,typeof f=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ah(f),f=xr(x).hoistableScripts,p=f.get(r),p||(p={type:"script",instance:null,count:0,state:null},f.set(r,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Th(s){return'href="'+Nn(s)+'"'}function Pp(s){return'link[rel="stylesheet"]['+s+"]"}function T1(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function V3(s,r,f,p){s.querySelector('link[rel="preload"][as="style"]['+r+"]")?p.loading=1:(r=s.createElement("link"),p.preload=r,r.addEventListener("load",function(){return p.loading|=1}),r.addEventListener("error",function(){return p.loading|=2}),pa(r,"link",f),ci(r),s.head.appendChild(r))}function Ah(s){return'[src="'+Nn(s)+'"]'}function Bp(s){return"script[async]"+s}function A1(s,r,f){if(r.count++,r.instance===null)switch(r.type){case"style":var p=s.querySelector('style[data-href~="'+Nn(f.href)+'"]');if(p)return r.instance=p,ci(p),p;var x=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(s.ownerDocument||s).createElement("style"),ci(p),pa(p,"style",x),C0(p,f.precedence,s),r.instance=p;case"stylesheet":x=Th(f.href);var E=s.querySelector(Pp(x));if(E)return r.state.loading|=4,r.instance=E,ci(E),E;p=T1(f),(x=hr.get(x))&&sx(p,x),E=(s.ownerDocument||s).createElement("link"),ci(E);var O=E;return O._p=new Promise(function(F,J){O.onload=F,O.onerror=J}),pa(E,"link",p),r.state.loading|=4,C0(E,f.precedence,s),r.instance=E;case"script":return E=Ah(f.src),(x=s.querySelector(Bp(E)))?(r.instance=x,ci(x),x):(p=f,(x=hr.get(E))&&(p=v({},f),rx(p,x)),s=s.ownerDocument||s,x=s.createElement("script"),ci(x),pa(x,"link",p),s.head.appendChild(x),r.instance=x);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(p=r.instance,r.state.loading|=4,C0(p,f.precedence,s));return r.instance}function C0(s,r,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=p.length?p[p.length-1]:null,E=x,O=0;O<p.length;O++){var F=p[O];if(F.dataset.precedence===r)E=F;else if(E!==x)break}E?E.parentNode.insertBefore(s,E.nextSibling):(r=f.nodeType===9?f.head:f,r.insertBefore(s,r.firstChild))}function sx(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.title==null&&(s.title=r.title)}function rx(s,r){s.crossOrigin==null&&(s.crossOrigin=r.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=r.referrerPolicy),s.integrity==null&&(s.integrity=r.integrity)}var w0=null;function R1(s,r,f){if(w0===null){var p=new Map,x=w0=new Map;x.set(f,p)}else x=w0,p=x.get(f),p||(p=new Map,x.set(f,p));if(p.has(s))return p;for(p.set(s,null),f=f.getElementsByTagName(s),x=0;x<f.length;x++){var E=f[x];if(!(E[As]||E[ui]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var O=E.getAttribute(r)||"";O=s+O;var F=p.get(O);F?F.push(E):p.set(O,[E])}}return p}function C1(s,r,f){s=s.ownerDocument||s,s.head.insertBefore(f,r==="title"?s.querySelector("head > title"):null)}function H3(s,r,f){if(f===1||r.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return s=r.disabled,typeof r.precedence=="string"&&s==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function w1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Ip=null;function F3(){}function G3(s,r,f){if(Ip===null)throw Error(n(475));var p=Ip;if(r.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var x=Th(f.href),E=s.querySelector(Pp(x));if(E){s=E._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(p.count++,p=D0.bind(p),s.then(p,p)),r.state.loading|=4,r.instance=E,ci(E);return}E=s.ownerDocument||s,f=T1(f),(x=hr.get(x))&&sx(f,x),E=E.createElement("link"),ci(E);var O=E;O._p=new Promise(function(F,J){O.onload=F,O.onerror=J}),pa(E,"link",f),r.instance=E}p.stylesheets===null&&(p.stylesheets=new Map),p.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(p.count++,r=D0.bind(p),s.addEventListener("load",r),s.addEventListener("error",r))}}function X3(){if(Ip===null)throw Error(n(475));var s=Ip;return s.stylesheets&&s.count===0&&ox(s,s.stylesheets),0<s.count?function(r){var f=setTimeout(function(){if(s.stylesheets&&ox(s,s.stylesheets),s.unsuspend){var p=s.unsuspend;s.unsuspend=null,p()}},6e4);return s.unsuspend=r,function(){s.unsuspend=null,clearTimeout(f)}}:null}function D0(){if(this.count--,this.count===0){if(this.stylesheets)ox(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var U0=null;function ox(s,r){s.stylesheets=null,s.unsuspend!==null&&(s.count++,U0=new Map,r.forEach(q3,s),U0=null,D0.call(s))}function q3(s,r){if(!(r.state.loading&4)){var f=U0.get(s);if(f)var p=f.get(null);else{f=new Map,U0.set(s,f);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var O=x[E];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(f.set(O.dataset.precedence,O),p=O)}p&&f.set(null,p)}x=r.instance,O=x.getAttribute("data-precedence"),E=f.get(O)||p,E===p&&f.set(null,x),f.set(O,x),this.count++,p=D0.bind(this),x.addEventListener("load",p),x.addEventListener("error",p),E?E.parentNode.insertBefore(x,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),r.state.loading|=4}}var Vp={$$typeof:U,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function k3(s,r,f,p,x,E,O,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=p,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function D1(s,r,f,p,x,E,O,F,J,mt,Dt,Pt){return s=new k3(s,r,f,O,F,J,mt,Pt),r=1,E===!0&&(r|=24),E=ba(3,null,null,r),s.current=E,E.stateNode=s,r=Wf(),r.refCount++,s.pooledCache=r,r.refCount++,E.memoizedState={element:p,isDehydrated:f,cache:r},up(E),s}function U1(s){return s?(s=ho,s):ho}function N1(s,r,f,p,x,E){x=U1(x),p.context===null?p.context=x:p.pendingContext=x,p=$s(r),p.payload={element:f},E=E===void 0?null:E,E!==null&&(p.callback=E),f=Lr(s,p,r),f!==null&&(da(f,s,r),nl(f,s,r))}function O1(s,r){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<r?f:r}}function lx(s,r){O1(s,r),(s=s.alternate)&&O1(s,r)}function L1(s){if(s.tag===13){var r=wr(s,67108864);r!==null&&da(r,s,67108864),lx(s,67108864)}}var N0=!0;function Y3(s,r,f,p){var x=I.T;I.T=null;var E=j.p;try{j.p=2,ux(s,r,f,p)}finally{j.p=E,I.T=x}}function W3(s,r,f,p){var x=I.T;I.T=null;var E=j.p;try{j.p=8,ux(s,r,f,p)}finally{j.p=E,I.T=x}}function ux(s,r,f,p){if(N0){var x=cx(p);if(x===null)K_(s,r,p,O0,f),P1(s,p);else if(Z3(x,s,r,f,p))p.stopPropagation();else if(P1(s,p),r&4&&-1<j3.indexOf(s)){for(;x!==null;){var E=Cs(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var O=ge(E.pendingLanes);if(O!==0){var F=E;for(F.pendingLanes|=2,F.entangledLanes|=2;O;){var J=1<<31-ne(O);F.entanglements[1]|=J,O&=~J}Bo(E),(En&6)===0&&(Ji=Xt()+500,Np(0))}}break;case 13:F=wr(E,2),F!==null&&da(F,E,2),cr(),lx(E,2)}if(E=cx(p),E===null&&K_(s,r,p,O0,f),E===x)break;x=E}x!==null&&p.stopPropagation()}else K_(s,r,p,null,f)}}function cx(s){return s=Cf(s),fx(s)}var O0=null;function fx(s){if(O0=null,s=Rs(s),s!==null){var r=o(s);if(r===null)s=null;else{var f=r.tag;if(f===13){if(s=c(r),s!==null)return s;s=null}else if(f===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;s=null}else r!==s&&(s=null)}}return O0=s,null}function z1(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ut()){case re:return 2;case Vt:return 8;case ee:case Ve:return 32;case Q:return 268435456;default:return 32}default:return 32}}var hx=!1,Tu=null,Au=null,Ru=null,Hp=new Map,Fp=new Map,Cu=[],j3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P1(s,r){switch(s){case"focusin":case"focusout":Tu=null;break;case"dragenter":case"dragleave":Au=null;break;case"mouseover":case"mouseout":Ru=null;break;case"pointerover":case"pointerout":Hp.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fp.delete(r.pointerId)}}function Gp(s,r,f,p,x,E){return s===null||s.nativeEvent!==E?(s={blockedOn:r,domEventName:f,eventSystemFlags:p,nativeEvent:E,targetContainers:[x]},r!==null&&(r=Cs(r),r!==null&&L1(r)),s):(s.eventSystemFlags|=p,r=s.targetContainers,x!==null&&r.indexOf(x)===-1&&r.push(x),s)}function Z3(s,r,f,p,x){switch(r){case"focusin":return Tu=Gp(Tu,s,r,f,p,x),!0;case"dragenter":return Au=Gp(Au,s,r,f,p,x),!0;case"mouseover":return Ru=Gp(Ru,s,r,f,p,x),!0;case"pointerover":var E=x.pointerId;return Hp.set(E,Gp(Hp.get(E)||null,s,r,f,p,x)),!0;case"gotpointercapture":return E=x.pointerId,Fp.set(E,Gp(Fp.get(E)||null,s,r,f,p,x)),!0}return!1}function B1(s){var r=Rs(s.target);if(r!==null){var f=o(r);if(f!==null){if(r=f.tag,r===13){if(r=c(f),r!==null){s.blockedOn=r,va(s.priority,function(){if(f.tag===13){var p=ti();p=Ce(p);var x=wr(f,p);x!==null&&da(x,f,p),lx(f,p)}});return}}else if(r===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function L0(s){if(s.blockedOn!==null)return!1;for(var r=s.targetContainers;0<r.length;){var f=cx(s.nativeEvent);if(f===null){f=s.nativeEvent;var p=new f.constructor(f.type,f);Rf=p,f.target.dispatchEvent(p),Rf=null}else return r=Cs(f),r!==null&&L1(r),s.blockedOn=f,!1;r.shift()}return!0}function I1(s,r,f){L0(s)&&f.delete(r)}function K3(){hx=!1,Tu!==null&&L0(Tu)&&(Tu=null),Au!==null&&L0(Au)&&(Au=null),Ru!==null&&L0(Ru)&&(Ru=null),Hp.forEach(I1),Fp.forEach(I1)}function z0(s,r){s.blockedOn===r&&(s.blockedOn=null,hx||(hx=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,K3)))}var P0=null;function V1(s){P0!==s&&(P0=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){P0===s&&(P0=null);for(var r=0;r<s.length;r+=3){var f=s[r],p=s[r+1],x=s[r+2];if(typeof p!="function"){if(fx(p||f)===null)continue;break}var E=Cs(f);E!==null&&(s.splice(r,3),r-=3,Tp(E,{pending:!0,data:x,method:f.method,action:p},p,x))}}))}function Xp(s){function r(J){return z0(J,s)}Tu!==null&&z0(Tu,s),Au!==null&&z0(Au,s),Ru!==null&&z0(Ru,s),Hp.forEach(r),Fp.forEach(r);for(var f=0;f<Cu.length;f++){var p=Cu[f];p.blockedOn===s&&(p.blockedOn=null)}for(;0<Cu.length&&(f=Cu[0],f.blockedOn===null);)B1(f),f.blockedOn===null&&Cu.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var x=f[p],E=f[p+1],O=x[_i]||null;if(typeof E=="function")O||V1(f);else if(O){var F=null;if(E&&E.hasAttribute("formAction")){if(x=E,O=E[_i]||null)F=O.formAction;else if(fx(x)!==null)continue}else F=O.action;typeof F=="function"?f[p+1]=F:(f.splice(p,3),p-=3),V1(f)}}}function dx(s){this._internalRoot=s}B0.prototype.render=dx.prototype.render=function(s){var r=this._internalRoot;if(r===null)throw Error(n(409));var f=r.current,p=ti();N1(f,p,s,r,null,null)},B0.prototype.unmount=dx.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var r=s.containerInfo;N1(s.current,2,null,s,null,null),cr(),r[Zi]=null}};function B0(s){this._internalRoot=s}B0.prototype.unstable_scheduleHydration=function(s){if(s){var r=ln();s={blockedOn:null,target:s,priority:r};for(var f=0;f<Cu.length&&r!==0&&r<Cu[f].priority;f++);Cu.splice(f,0,s),f===0&&B1(s)}};var H1=t.version;if(H1!=="19.1.0")throw Error(n(527,H1,"19.1.0"));j.findDOMNode=function(s){var r=s._reactInternals;if(r===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=d(r),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var Q3={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var I0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!I0.isDisabled&&I0.supportsFiber)try{Tt=I0.inject(Q3),Ct=I0}catch{}}return kp.createRoot=function(s,r){if(!a(s))throw Error(n(299));var f=!1,p="",x=zc,E=ch,O=y0,F=null;return r!=null&&(r.unstable_strictMode===!0&&(f=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(x=r.onUncaughtError),r.onCaughtError!==void 0&&(E=r.onCaughtError),r.onRecoverableError!==void 0&&(O=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(F=r.unstable_transitionCallbacks)),r=D1(s,1,!1,null,null,f,p,x,E,O,F,null),s[Zi]=r.current,Z_(s),new dx(r)},kp.hydrateRoot=function(s,r,f){if(!a(s))throw Error(n(299));var p=!1,x="",E=zc,O=ch,F=y0,J=null,mt=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(O=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(J=f.unstable_transitionCallbacks),f.formState!==void 0&&(mt=f.formState)),r=D1(s,1,!0,r,f??null,p,x,E,O,F,J,mt),r.context=U1(null),f=r.current,p=ti(),p=Ce(p),x=$s(p),x.callback=null,Lr(f,x,p),f=p,r.current.lanes=f,ue(r,f),Bo(r),s[Zi]=r.current,Z_(s),new B0(r)},kp.version="19.1.0",kp}var K1;function lD(){if(K1)return gx.exports;K1=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),gx.exports=oD(),gx.exports}var uD=lD();const OM=zt.createContext({});function xd(i){const t=zt.useRef(null);return t.current===null&&(t.current=i()),t.current}const LM=typeof window<"u",qy=LM?zt.useLayoutEffect:zt.useEffect,ky=zt.createContext(null);function zM(i,t){i.indexOf(t)===-1&&i.push(t)}function PM(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const jo=(i,t,e)=>e>t?t:e<i?i:e;let Rm=()=>{};const Nl={},g2=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function v2(i){return typeof i=="object"&&i!==null}const y2=i=>/^0[^.\s]+$/u.test(i);function BM(i){let t;return()=>(t===void 0&&(t=i()),t)}const Ms=i=>i,cD=(i,t)=>e=>t(i(e)),Jm=(...i)=>i.reduce(cD),od=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n};class IM{constructor(){this.subscriptions=[]}add(t){return zM(this.subscriptions,t),()=>PM(this.subscriptions,t)}notify(t,e,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,n);else for(let o=0;o<a;o++){const c=this.subscriptions[o];c&&c(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xo=i=>i*1e3,qo=i=>i/1e3;function VM(i,t){return t?i*(1e3/t):0}const _2=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,fD=1e-7,hD=12;function dD(i,t,e,n,a){let o,c,h=0;do c=t+(e-t)/2,o=_2(c,n,a)-i,o>0?e=c:t=c;while(Math.abs(o)>fD&&++h<hD);return c}function $m(i,t,e,n){if(i===t&&e===n)return Ms;const a=o=>dD(o,0,1,i,e);return o=>o===0||o===1?o:_2(a(o),t,n)}const x2=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,S2=i=>t=>1-i(1-t),M2=$m(.33,1.53,.69,.99),HM=S2(M2),b2=x2(HM),E2=i=>(i*=2)<1?.5*HM(i):.5*(2-Math.pow(2,-10*(i-1))),FM=i=>1-Math.sin(Math.acos(i)),T2=S2(FM),A2=x2(FM),pD=$m(.42,0,1,1),mD=$m(0,0,.58,1),R2=$m(.42,0,.58,1),gD=i=>Array.isArray(i)&&typeof i[0]!="number",C2=i=>Array.isArray(i)&&typeof i[0]=="number",vD={linear:Ms,easeIn:pD,easeInOut:R2,easeOut:mD,circIn:FM,circInOut:A2,circOut:T2,backIn:HM,backInOut:b2,backOut:M2,anticipate:E2},yD=i=>typeof i=="string",Q1=i=>{if(C2(i)){Rm(i.length===4);const[t,e,n,a]=i;return $m(t,e,n,a)}else if(yD(i))return vD[i];return i},V0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _D(i,t){let e=new Set,n=new Set,a=!1,o=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function d(v){c.has(v)&&(m.schedule(v),i()),v(h)}const m={schedule:(v,y=!1,_=!1)=>{const T=_&&a?e:n;return y&&c.add(v),T.has(v)||T.add(v),v},cancel:v=>{n.delete(v),c.delete(v)},process:v=>{if(h=v,a){o=!0;return}a=!0,[e,n]=[n,e],e.forEach(d),e.clear(),a=!1,o&&(o=!1,m.process(v))}};return m}const xD=40;function w2(i,t){let e=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,c=V0.reduce((U,N)=>(U[N]=_D(o),U),{}),{setup:h,read:d,resolveKeyframes:m,preUpdate:v,update:y,preRender:_,render:M,postRender:T}=c,C=()=>{const U=Nl.useManualTiming?a.timestamp:performance.now();e=!1,Nl.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(U-a.timestamp,xD),1)),a.timestamp=U,a.isProcessing=!0,h.process(a),d.process(a),m.process(a),v.process(a),y.process(a),_.process(a),M.process(a),T.process(a),a.isProcessing=!1,e&&t&&(n=!1,i(C))},R=()=>{e=!0,n=!0,a.isProcessing||i(C)};return{schedule:V0.reduce((U,N)=>{const P=c[N];return U[N]=(B,H=!1,X=!1)=>(e||R(),P.schedule(B,H,X)),U},{}),cancel:U=>{for(let N=0;N<V0.length;N++)c[V0[N]].cancel(U)},state:a,steps:c}}const{schedule:In,cancel:$r,state:na,steps:xx}=w2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ms,!0);let Bv;function SD(){Bv=void 0}const xs={now:()=>(Bv===void 0&&xs.set(na.isProcessing||Nl.useManualTiming?na.timestamp:performance.now()),Bv),set:i=>{Bv=i,queueMicrotask(SD)}},D2=i=>t=>typeof t=="string"&&t.startsWith(i),GM=D2("--"),MD=D2("var(--"),XM=i=>MD(i)?bD.test(i.split("/*")[0].trim()):!1,bD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sd={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Cm={...Sd,transform:i=>jo(0,1,i)},H0={...Sd,default:1},cm=i=>Math.round(i*1e5)/1e5,qM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ED(i){return i==null}const TD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kM=(i,t)=>e=>!!(typeof e=="string"&&TD.test(e)&&e.startsWith(i)||t&&!ED(e)&&Object.prototype.hasOwnProperty.call(e,t)),U2=(i,t,e)=>n=>{if(typeof n!="string")return n;const[a,o,c,h]=n.match(qM);return{[i]:parseFloat(a),[t]:parseFloat(o),[e]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},AD=i=>jo(0,255,i),Sx={...Sd,transform:i=>Math.round(AD(i))},uf={test:kM("rgb","red"),parse:U2("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+Sx.transform(i)+", "+Sx.transform(t)+", "+Sx.transform(e)+", "+cm(Cm.transform(n))+")"};function RD(i){let t="",e="",n="",a="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),a=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),a=i.substring(4,5),t+=t,e+=e,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const GS={test:kM("#"),parse:RD,transform:uf.transform},tg=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),Bu=tg("deg"),ko=tg("%"),Ie=tg("px"),CD=tg("vh"),wD=tg("vw"),J1={...ko,parse:i=>ko.parse(i)/100,transform:i=>ko.transform(i*100)},Zh={test:kM("hsl","hue"),parse:U2("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+ko.transform(cm(t))+", "+ko.transform(cm(e))+", "+cm(Cm.transform(n))+")"},zi={test:i=>uf.test(i)||GS.test(i)||Zh.test(i),parse:i=>uf.test(i)?uf.parse(i):Zh.test(i)?Zh.parse(i):GS.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?uf.transform(i):Zh.transform(i),getAnimatableNone:i=>{const t=zi.parse(i);return t.alpha=0,zi.transform(t)}},DD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function UD(i){return isNaN(i)&&typeof i=="string"&&(i.match(qM)?.length||0)+(i.match(DD)?.length||0)>0}const N2="number",O2="color",ND="var",OD="var(",$1="${}",LD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wm(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},a=[];let o=0;const h=t.replace(LD,d=>(zi.test(d)?(n.color.push(o),a.push(O2),e.push(zi.parse(d))):d.startsWith(OD)?(n.var.push(o),a.push(ND),e.push(d)):(n.number.push(o),a.push(N2),e.push(parseFloat(d))),++o,$1)).split($1);return{values:e,split:h,indexes:n,types:a}}function L2(i){return wm(i).values}function z2(i){const{split:t,types:e}=wm(i),n=t.length;return a=>{let o="";for(let c=0;c<n;c++)if(o+=t[c],a[c]!==void 0){const h=e[c];h===N2?o+=cm(a[c]):h===O2?o+=zi.transform(a[c]):o+=a[c]}return o}}const zD=i=>typeof i=="number"?0:zi.test(i)?zi.getAnimatableNone(i):i;function PD(i){const t=L2(i);return z2(i)(t.map(zD))}const Gu={test:UD,parse:L2,createTransformer:z2,getAnimatableNone:PD};function Mx(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function BD({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let a=0,o=0,c=0;if(!t)a=o=c=e;else{const h=e<.5?e*(1+t):e+t-e*t,d=2*e-h;a=Mx(d,h,i+1/3),o=Mx(d,h,i),c=Mx(d,h,i-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:n}}function Zv(i,t){return e=>e>0?t:i}const oi=(i,t,e)=>i+(t-i)*e,bx=(i,t,e)=>{const n=i*i,a=e*(t*t-n)+n;return a<0?0:Math.sqrt(a)},ID=[GS,uf,Zh],VD=i=>ID.find(t=>t.test(i));function tE(i){const t=VD(i);if(!t)return!1;let e=t.parse(i);return t===Zh&&(e=BD(e)),e}const eE=(i,t)=>{const e=tE(i),n=tE(t);if(!e||!n)return Zv(i,t);const a={...e};return o=>(a.red=bx(e.red,n.red,o),a.green=bx(e.green,n.green,o),a.blue=bx(e.blue,n.blue,o),a.alpha=oi(e.alpha,n.alpha,o),uf.transform(a))},XS=new Set(["none","hidden"]);function HD(i,t){return XS.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function FD(i,t){return e=>oi(i,t,e)}function YM(i){return typeof i=="number"?FD:typeof i=="string"?XM(i)?Zv:zi.test(i)?eE:qD:Array.isArray(i)?P2:typeof i=="object"?zi.test(i)?eE:GD:Zv}function P2(i,t){const e=[...i],n=e.length,a=i.map((o,c)=>YM(o)(o,t[c]));return o=>{for(let c=0;c<n;c++)e[c]=a[c](o);return e}}function GD(i,t){const e={...i,...t},n={};for(const a in e)i[a]!==void 0&&t[a]!==void 0&&(n[a]=YM(i[a])(i[a],t[a]));return a=>{for(const o in n)e[o]=n[o](a);return e}}function XD(i,t){const e=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],c=i.indexes[o][n[o]],h=i.values[c]??0;e[a]=h,n[o]++}return e}const qD=(i,t)=>{const e=Gu.createTransformer(t),n=wm(i),a=wm(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?XS.has(i)&&!a.values.length||XS.has(t)&&!n.values.length?HD(i,t):Jm(P2(XD(n,a),a.values),e):Zv(i,t)};function B2(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?oi(i,t,e):YM(i)(i,t)}const kD=i=>{const t=({timestamp:e})=>i(e);return{start:(e=!0)=>In.update(t,e),stop:()=>$r(t),now:()=>na.isProcessing?na.timestamp:xs.now()}},I2=(i,t,e=10)=>{let n="";const a=Math.max(Math.round(t/e),2);for(let o=0;o<a;o++)n+=Math.round(i(o/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Kv=2e4;function WM(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<Kv;)t+=e,n=i.next(t);return t>=Kv?1/0:t}function YD(i,t=100,e){const n=e({...i,keyframes:[0,t]}),a=Math.min(WM(n),Kv);return{type:"keyframes",ease:o=>n.next(a*o).value/t,duration:qo(a)}}const WD=5;function V2(i,t,e){const n=Math.max(t-WD,0);return VM(e-i(n),t-n)}const gi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ex=.001;function jD({duration:i=gi.duration,bounce:t=gi.bounce,velocity:e=gi.velocity,mass:n=gi.mass}){let a,o,c=1-t;c=jo(gi.minDamping,gi.maxDamping,c),i=jo(gi.minDuration,gi.maxDuration,qo(i)),c<1?(a=m=>{const v=m*c,y=v*i,_=v-e,M=qS(m,c),T=Math.exp(-y);return Ex-_/M*T},o=m=>{const y=m*c*i,_=y*e+e,M=Math.pow(c,2)*Math.pow(m,2)*i,T=Math.exp(-y),C=qS(Math.pow(m,2),c);return(-a(m)+Ex>0?-1:1)*((_-M)*T)/C}):(a=m=>{const v=Math.exp(-m*i),y=(m-e)*i+1;return-Ex+v*y},o=m=>{const v=Math.exp(-m*i),y=(e-m)*(i*i);return v*y});const h=5/i,d=KD(a,o,h);if(i=Xo(i),isNaN(d))return{stiffness:gi.stiffness,damping:gi.damping,duration:i};{const m=Math.pow(d,2)*n;return{stiffness:m,damping:c*2*Math.sqrt(n*m),duration:i}}}const ZD=12;function KD(i,t,e){let n=e;for(let a=1;a<ZD;a++)n=n-i(n)/t(n);return n}function qS(i,t){return i*Math.sqrt(1-t*t)}const QD=["duration","bounce"],JD=["stiffness","damping","mass"];function nE(i,t){return t.some(e=>i[e]!==void 0)}function $D(i){let t={velocity:gi.velocity,stiffness:gi.stiffness,damping:gi.damping,mass:gi.mass,isResolvedFromDuration:!1,...i};if(!nE(i,JD)&&nE(i,QD))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),a=n*n,o=2*jo(.05,1,1-(i.bounce||0))*Math.sqrt(a);t={...t,mass:gi.mass,stiffness:a,damping:o}}else{const e=jD(i);t={...t,...e,mass:gi.mass},t.isResolvedFromDuration=!0}return t}function Qv(i=gi.visualDuration,t=gi.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:a}=e;const o=e.keyframes[0],c=e.keyframes[e.keyframes.length-1],h={done:!1,value:o},{stiffness:d,damping:m,mass:v,duration:y,velocity:_,isResolvedFromDuration:M}=$D({...e,velocity:-qo(e.velocity||0)}),T=_||0,C=m/(2*Math.sqrt(d*v)),R=c-o,b=qo(Math.sqrt(d/v)),D=Math.abs(R)<5;n||(n=D?gi.restSpeed.granular:gi.restSpeed.default),a||(a=D?gi.restDelta.granular:gi.restDelta.default);let U;if(C<1){const P=qS(b,C);U=B=>{const H=Math.exp(-C*b*B);return c-H*((T+C*b*R)/P*Math.sin(P*B)+R*Math.cos(P*B))}}else if(C===1)U=P=>c-Math.exp(-b*P)*(R+(T+b*R)*P);else{const P=b*Math.sqrt(C*C-1);U=B=>{const H=Math.exp(-C*b*B),X=Math.min(P*B,300);return c-H*((T+C*b*R)*Math.sinh(X)+P*R*Math.cosh(X))/P}}const N={calculatedDuration:M&&y||null,next:P=>{const B=U(P);if(M)h.done=P>=y;else{let H=P===0?T:0;C<1&&(H=P===0?Xo(T):V2(U,P,B));const X=Math.abs(H)<=n,z=Math.abs(c-B)<=a;h.done=X&&z}return h.value=h.done?c:B,h},toString:()=>{const P=Math.min(WM(N),Kv),B=I2(H=>N.next(P*H).value,P,30);return P+"ms "+B},toTransition:()=>{}};return N}Qv.applyToOptions=i=>{const t=YD(i,100,Qv);return i.ease=t.ease,i.duration=Xo(t.duration),i.type="keyframes",i};function kS({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:c,min:h,max:d,restDelta:m=.5,restSpeed:v}){const y=i[0],_={done:!1,value:y},M=X=>h!==void 0&&X<h||d!==void 0&&X>d,T=X=>h===void 0?d:d===void 0||Math.abs(h-X)<Math.abs(d-X)?h:d;let C=e*t;const R=y+C,b=c===void 0?R:c(R);b!==R&&(C=b-y);const D=X=>-C*Math.exp(-X/n),U=X=>b+D(X),N=X=>{const z=D(X),L=U(X);_.done=Math.abs(z)<=m,_.value=_.done?b:L};let P,B;const H=X=>{M(_.value)&&(P=X,B=Qv({keyframes:[_.value,T(_.value)],velocity:V2(U,X,_.value),damping:a,stiffness:o,restDelta:m,restSpeed:v}))};return H(0),{calculatedDuration:null,next:X=>{let z=!1;return!B&&P===void 0&&(z=!0,N(X),H(X)),P!==void 0&&X>=P?B.next(X-P):(!z&&N(X),_)}}}function tU(i,t,e){const n=[],a=e||Nl.mix||B2,o=i.length-1;for(let c=0;c<o;c++){let h=a(i[c],i[c+1]);if(t){const d=Array.isArray(t)?t[c]||Ms:t;h=Jm(d,h)}n.push(h)}return n}function jM(i,t,{clamp:e=!0,ease:n,mixer:a}={}){const o=i.length;if(Rm(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const c=i[0]===i[1];i[0]>i[o-1]&&(i=[...i].reverse(),t=[...t].reverse());const h=tU(t,n,a),d=h.length,m=v=>{if(c&&v<i[0])return t[0];let y=0;if(d>1)for(;y<i.length-2&&!(v<i[y+1]);y++);const _=od(i[y],i[y+1],v);return h[y](_)};return e?v=>m(jo(i[0],i[o-1],v)):m}function eU(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const a=od(0,t,n);i.push(oi(e,1,a))}}function H2(i){const t=[0];return eU(t,i.length-1),t}function nU(i,t){return i.map(e=>e*t)}function iU(i,t){return i.map(()=>t||R2).splice(0,i.length-1)}function fm({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const a=gD(n)?n.map(Q1):Q1(n),o={done:!1,value:t[0]},c=nU(e&&e.length===t.length?e:H2(t),i),h=jM(c,t,{ease:Array.isArray(a)?a:iU(t,a)});return{calculatedDuration:i,next:d=>(o.value=h(d),o.done=d>=i,o)}}const aU=i=>i!==null;function ZM(i,{repeat:t,repeatType:e="loop"},n,a=1){const o=i.filter(aU),h=a<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!h||n===void 0?o[h]:n}const sU={decay:kS,inertia:kS,tween:fm,keyframes:fm,spring:Qv};function F2(i){typeof i.type=="string"&&(i.type=sU[i.type])}class KM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const rU=i=>i/100;class QM extends KM{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==xs.now()&&this.tick(xs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;F2(t);const{type:e=fm,repeat:n=0,repeatDelay:a=0,repeatType:o,velocity:c=0}=t;let{keyframes:h}=t;const d=e||fm;d!==fm&&typeof h[0]!="number"&&(this.mixKeyframes=Jm(rU,B2(h[0],h[1])),h=[0,100]);const m=d({...t,keyframes:h});o==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...h].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=WM(m));const{calculatedDuration:v}=m;this.calculatedDuration=v,this.resolvedDuration=v+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=m}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:a,mixKeyframes:o,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:m=0,keyframes:v,repeat:y,repeatType:_,repeatDelay:M,type:T,onUpdate:C,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const b=this.currentTime-m*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?b<0:b>a;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let U=this.currentTime,N=n;if(y){const X=Math.min(this.currentTime,a)/h;let z=Math.floor(X),L=X%1;!L&&X>=1&&(L=1),L===1&&z--,z=Math.min(z,y+1),!!(z%2)&&(_==="reverse"?(L=1-L,M&&(L-=M/h)):_==="mirror"&&(N=c)),U=jo(0,1,L)*h}const P=D?{done:!1,value:v[0]}:N.next(U);o&&(P.value=o(P.value));let{done:B}=P;!D&&d!==null&&(B=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return H&&T!==kS&&(P.value=ZM(v,this.options,R,this.speed)),C&&C(P.value),H&&this.finish(),P}then(t,e){return this.finished.then(t,e)}get duration(){return qo(this.calculatedDuration)}get time(){return qo(this.currentTime)}set time(t){t=Xo(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(xs.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=qo(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=kD,startTime:e}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function oU(i){for(let t=1;t<i.length;t++)i[t]??(i[t]=i[t-1])}const cf=i=>i*180/Math.PI,YS=i=>{const t=cf(Math.atan2(i[1],i[0]));return WS(t)},lU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:YS,rotateZ:YS,skewX:i=>cf(Math.atan(i[1])),skewY:i=>cf(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},WS=i=>(i=i%360,i<0&&(i+=360),i),iE=YS,aE=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),sE=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),uU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:aE,scaleY:sE,scale:i=>(aE(i)+sE(i))/2,rotateX:i=>WS(cf(Math.atan2(i[6],i[5]))),rotateY:i=>WS(cf(Math.atan2(-i[2],i[0]))),rotateZ:iE,rotate:iE,skewX:i=>cf(Math.atan(i[4])),skewY:i=>cf(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function jS(i){return i.includes("scale")?1:0}function ZS(i,t){if(!i||i==="none")return jS(t);const e=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(e)n=uU,a=e;else{const h=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=lU,a=h}if(!a)return jS(t);const o=n[t],c=a[1].split(",").map(fU);return typeof o=="function"?o(c):c[o]}const cU=(i,t)=>{const{transform:e="none"}=getComputedStyle(i);return ZS(e,t)};function fU(i){return parseFloat(i.trim())}const Md=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bd=new Set(Md),rE=i=>i===Sd||i===Ie,hU=new Set(["x","y","z"]),dU=Md.filter(i=>!hU.has(i));function pU(i){const t=[];return dU.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const pf={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:(i,{transform:t})=>ZS(t,"x"),y:(i,{transform:t})=>ZS(t,"y")};pf.translateX=pf.x;pf.translateY=pf.y;const mf=new Set;let KS=!1,QS=!1,JS=!1;function G2(){if(QS){const i=Array.from(mf).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const a=pU(n);a.length&&(e.set(n,a),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=e.get(n);a&&a.forEach(([o,c])=>{n.getValue(o)?.set(c)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}QS=!1,KS=!1,mf.forEach(i=>i.complete(JS)),mf.clear()}function X2(){mf.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(QS=!0)})}function mU(){JS=!0,X2(),G2(),JS=!1}class JM{constructor(t,e,n,a,o,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=a,this.element=o,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(mf.add(this),KS||(KS=!0,In.read(X2),In.resolveKeyframes(G2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:a}=this;if(t[0]===null){const o=a?.get(),c=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const h=n.readValue(e,c);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=c),a&&o===void 0&&a.set(t[0])}oU(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),mf.delete(this)}cancel(){this.state==="scheduled"&&(mf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const gU=i=>i.startsWith("--");function vU(i,t,e){gU(t)?i.style.setProperty(t,e):i.style[t]=e}const q2=BM(()=>window.ScrollTimeline!==void 0),yU={};function _U(i,t){const e=BM(i);return()=>yU[t]??e()}const k2=_U(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rm=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,oE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rm([0,.65,.55,1]),circOut:rm([.55,0,1,.45]),backIn:rm([.31,.01,.66,-.59]),backOut:rm([.33,1.53,.69,.99])};function Y2(i,t){if(i)return typeof i=="function"?k2()?I2(i,t):"ease-out":C2(i)?rm(i):Array.isArray(i)?i.map(e=>Y2(e,t)||oE.easeOut):oE[i]}function xU(i,t,e,{delay:n=0,duration:a=300,repeat:o=0,repeatType:c="loop",ease:h="easeOut",times:d}={},m=void 0){const v={[t]:e};d&&(v.offset=d);const y=Y2(h,a);Array.isArray(y)&&(v.easing=y);const _={delay:n,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"};return m&&(_.pseudoElement=m),i.animate(v,_)}function W2(i){return typeof i=="function"&&"applyToOptions"in i}function SU({type:i,...t}){return W2(i)&&k2()?i.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class MU extends KM{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:e,name:n,keyframes:a,pseudoElement:o,allowFlatten:c=!1,finalKeyframe:h,onComplete:d}=t;this.isPseudoElement=!!o,this.allowFlatten=c,this.options=t,Rm(typeof t.type!="string");const m=SU(t);this.animation=xU(e,n,a,m,o),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const v=ZM(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(v):vU(e,n,v),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return qo(Number(t))}get time(){return qo(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Xo(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&q2()?(this.animation.timeline=t,Ms):e(this)}}const j2={anticipate:E2,backInOut:b2,circInOut:A2};function bU(i){return i in j2}function EU(i){typeof i.ease=="string"&&bU(i.ease)&&(i.ease=j2[i.ease])}const lE=10;class TU extends MU{constructor(t){EU(t),F2(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:a,element:o,...c}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const h=new QM({...c,autoplay:!1}),d=Xo(this.finishedTime??this.time);e.setWithVelocity(h.sample(d-lE).value,h.sample(d).value,lE),h.stop()}}const uE=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Gu.test(i)||i==="0")&&!i.startsWith("url("));function AU(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function RU(i,t,e,n){const a=i[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const o=i[i.length-1],c=uE(a,t),h=uE(o,t);return!c||!h?!1:AU(i)||(e==="spring"||W2(e))&&n}function $S(i){i.duration=0,i.type}const CU=new Set(["opacity","clipPath","filter","transform"]),wU=BM(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DU(i){const{motionValue:t,name:e,repeatDelay:n,repeatType:a,damping:o,type:c}=i;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:m}=t.owner.getProps();return wU()&&e&&CU.has(e)&&(e!=="transform"||!m)&&!d&&!n&&a!=="mirror"&&o!==0&&c!=="inertia"}const UU=40;class NU extends KM{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:c="loop",keyframes:h,name:d,motionValue:m,element:v,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=xs.now();const _={autoplay:t,delay:e,type:n,repeat:a,repeatDelay:o,repeatType:c,name:d,motionValue:m,element:v,...y},M=v?.KeyframeResolver||JM;this.keyframeResolver=new M(h,(T,C,R)=>this.onKeyframesResolved(T,C,_,!R),d,m,v),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,a){this.keyframeResolver=void 0;const{name:o,type:c,velocity:h,delay:d,isHandoff:m,onUpdate:v}=n;this.resolvedAt=xs.now(),RU(t,o,c,h)||((Nl.instantAnimations||!d)&&v?.(ZM(t,n,e)),t[0]=t[t.length-1],$S(n),n.repeat=0);const _={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>UU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},M=!m&&DU(_)?new TU({..._,element:_.motionValue.owner.current}):new QM(_);M.finished.then(()=>this.notifyFinished()).catch(Ms),this.pendingTimeline&&(this.stopTimeline=M.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=M}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),mU()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const OU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LU(i){const t=OU.exec(i);if(!t)return[,];const[,e,n,a]=t;return[`--${e??n}`,a]}function Z2(i,t,e=1){const[n,a]=LU(i);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const c=o.trim();return g2(c)?parseFloat(c):c}return XM(a)?Z2(a,t,e+1):a}function $M(i,t){return i?.[t]??i?.default??i}const K2=new Set(["width","height","top","left","right","bottom",...Md]),zU={test:i=>i==="auto",parse:i=>i},Q2=i=>t=>t.test(i),J2=[Sd,Ie,ko,Bu,wD,CD,zU],cE=i=>J2.find(Q2(i));function PU(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||y2(i):!0}const BU=new Set(["brightness","contrast","saturate","opacity"]);function IU(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(qM)||[];if(!n)return i;const a=e.replace(n,"");let o=BU.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+a+")"}const VU=/\b([a-z-]*)\(.*?\)/gu,tM={...Gu,getAnimatableNone:i=>{const t=i.match(VU);return t?t.map(IU).join(" "):i}},fE={...Sd,transform:Math.round},HU={rotate:Bu,rotateX:Bu,rotateY:Bu,rotateZ:Bu,scale:H0,scaleX:H0,scaleY:H0,scaleZ:H0,skew:Bu,skewX:Bu,skewY:Bu,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Cm,originX:J1,originY:J1,originZ:Ie},tb={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...HU,zIndex:fE,fillOpacity:Cm,strokeOpacity:Cm,numOctaves:fE},FU={...tb,color:zi,backgroundColor:zi,outlineColor:zi,fill:zi,stroke:zi,borderColor:zi,borderTopColor:zi,borderRightColor:zi,borderBottomColor:zi,borderLeftColor:zi,filter:tM,WebkitFilter:tM},$2=i=>FU[i];function tR(i,t){let e=$2(i);return e!==tM&&(e=Gu),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const GU=new Set(["auto","none","0"]);function XU(i,t,e){let n=0,a;for(;n<i.length&&!a;){const o=i[n];typeof o=="string"&&!GU.has(o)&&wm(o).values.length&&(a=i[n]),n++}if(a&&e)for(const o of t)i[o]=tR(e,a)}class qU extends JM{constructor(t,e,n,a,o){super(t,e,n,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let m=t[d];if(typeof m=="string"&&(m=m.trim(),XM(m))){const v=Z2(m,e.current);v!==void 0&&(t[d]=v),d===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!K2.has(n)||t.length!==2)return;const[a,o]=t,c=cE(a),h=cE(o);if(c!==h)if(rE(c)&&rE(h))for(let d=0;d<t.length;d++){const m=t[d];typeof m=="string"&&(t[d]=parseFloat(m))}else pf[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||PU(t[a]))&&n.push(a);n.length&&XU(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pf[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(e);a&&a.jump(this.measuredOrigin,!1);const o=n.length-1,c=n[o];n[o]=pf[e](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,d])=>{t.getValue(h).set(d)}),this.resolveNoneKeyframes()}}function eR(i,t,e){if(i instanceof EventTarget)return[i];if(typeof i=="string"){const a=document.querySelectorAll(i);return a?Array.from(a):[]}return Array.from(i)}const nR=(i,t)=>t&&typeof i=="number"?t.transform(i):i;function eb(i){return v2(i)&&"offsetHeight"in i}const hE=30,kU=i=>!isNaN(parseFloat(i)),hm={current:void 0};class YU{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=xs.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=xs.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new IM);const n=this.events[t].add(e);return t==="change"?()=>{n(),In.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return hm.current&&hm.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=xs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>hE)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,hE);return VM(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qr(i,t){return new YU(i,t)}const{schedule:nb}=w2(queueMicrotask,!1),jr={x:!1,y:!1};function iR(){return jr.x||jr.y}function WU(i){return i==="x"||i==="y"?jr[i]?null:(jr[i]=!0,()=>{jr[i]=!1}):jr.x||jr.y?null:(jr.x=jr.y=!0,()=>{jr.x=jr.y=!1})}function aR(i,t){const e=eR(i),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[e,a,()=>n.abort()]}function dE(i){return!(i.pointerType==="touch"||iR())}function jU(i,t,e={}){const[n,a,o]=aR(i,e),c=h=>{if(!dE(h))return;const{target:d}=h,m=t(d,h);if(typeof m!="function"||!d)return;const v=y=>{dE(y)&&(m(y),d.removeEventListener("pointerleave",v))};d.addEventListener("pointerleave",v,a)};return n.forEach(h=>{h.addEventListener("pointerenter",c,a)}),o}const sR=(i,t)=>t?i===t?!0:sR(i,t.parentElement):!1,ib=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,ZU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function KU(i){return ZU.has(i.tagName)||i.tabIndex!==-1}const Iv=new WeakSet;function pE(i){return t=>{t.key==="Enter"&&i(t)}}function Tx(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const QU=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=pE(()=>{if(Iv.has(e))return;Tx(e,"down");const a=pE(()=>{Tx(e,"up")}),o=()=>Tx(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function mE(i){return ib(i)&&!iR()}function JU(i,t,e={}){const[n,a,o]=aR(i,e),c=h=>{const d=h.currentTarget;if(!mE(h))return;Iv.add(d);const m=t(d,h),v=(M,T)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",_),Iv.has(d)&&Iv.delete(d),mE(M)&&typeof m=="function"&&m(M,{success:T})},y=M=>{v(M,d===window||d===document||e.useGlobalTarget||sR(d,M.target))},_=M=>{v(M,!1)};window.addEventListener("pointerup",y,a),window.addEventListener("pointercancel",_,a)};return n.forEach(h=>{(e.useGlobalTarget?window:h).addEventListener("pointerdown",c,a),eb(h)&&(h.addEventListener("focus",m=>QU(m,a)),!KU(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),o}function ab(i){return v2(i)&&"ownerSVGElement"in i}const Vv=new WeakMap;let Hv;const rR=(i,t,e)=>(n,a)=>a&&a[0]?a[0][i+"Size"]:ab(n)&&"getBBox"in n?n.getBBox()[t]:n[e],$U=rR("inline","width","offsetWidth"),tN=rR("block","height","offsetHeight");function eN({target:i,borderBoxSize:t}){Vv.get(i)?.forEach(e=>{e(i,{get width(){return $U(i,t)},get height(){return tN(i,t)}})})}function nN(i){i.forEach(eN)}function iN(){typeof ResizeObserver>"u"||(Hv=new ResizeObserver(nN))}function aN(i,t){Hv||iN();const e=eR(i);return e.forEach(n=>{let a=Vv.get(n);a||(a=new Set,Vv.set(n,a)),a.add(t),Hv?.observe(n)}),()=>{e.forEach(n=>{const a=Vv.get(n);a?.delete(t),a?.size||Hv?.unobserve(n)})}}const Fv=new Set;let Kh;function sN(){Kh=()=>{const i={get width(){return window.innerWidth},get height(){return window.innerHeight}};Fv.forEach(t=>t(i))},window.addEventListener("resize",Kh)}function rN(i){return Fv.add(i),Kh||sN(),()=>{Fv.delete(i),!Fv.size&&typeof Kh=="function"&&(window.removeEventListener("resize",Kh),Kh=void 0)}}function oN(i,t){return typeof i=="function"?rN(i):aN(i,t)}function oR(i,t){let e;const n=()=>{const{currentTime:a}=t,c=(a===null?0:a.value)/100;e!==c&&i(c),e=c};return In.preUpdate(n,!0),()=>$r(n)}function lN(i){return ab(i)&&i.tagName==="svg"}function uN(...i){const t=!Array.isArray(i[0]),e=t?0:-1,n=i[0+e],a=i[1+e],o=i[2+e],c=i[3+e],h=jM(a,o,c);return t?h(n):h}const Na=i=>!!(i&&i.getVelocity),cN=[...J2,zi,Gu],fN=i=>cN.find(Q2(i)),Yy=zt.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class hN extends zt.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=e.offsetParent,a=eb(n)&&n.offsetWidth||0,o=this.props.sizeRef.current;o.height=e.offsetHeight||0,o.width=e.offsetWidth||0,o.top=e.offsetTop,o.left=e.offsetLeft,o.right=a-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function dN({children:i,isPresent:t,anchorX:e,root:n}){const a=zt.useId(),o=zt.useRef(null),c=zt.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=zt.useContext(Yy);return zt.useInsertionEffect(()=>{const{width:d,height:m,top:v,left:y,right:_}=c.current;if(t||!o.current||!d||!m)return;const M=e==="left"?`left: ${y}`:`right: ${_}`;o.current.dataset.motionPopId=a;const T=document.createElement("style");h&&(T.nonce=h);const C=n??document.head;return C.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${m}px !important;
            ${M}px !important;
            top: ${v}px !important;
          }
        `),()=>{C.contains(T)&&C.removeChild(T)}},[t]),on.jsx(hN,{isPresent:t,childRef:o,sizeRef:c,children:zt.cloneElement(i,{ref:o})})}const pN=({children:i,initial:t,isPresent:e,onExitComplete:n,custom:a,presenceAffectsLayout:o,mode:c,anchorX:h,root:d})=>{const m=xd(mN),v=zt.useId();let y=!0,_=zt.useMemo(()=>(y=!1,{id:v,initial:t,isPresent:e,custom:a,onExitComplete:M=>{m.set(M,!0);for(const T of m.values())if(!T)return;n&&n()},register:M=>(m.set(M,!1),()=>m.delete(M))}),[e,m,n]);return o&&y&&(_={..._}),zt.useMemo(()=>{m.forEach((M,T)=>m.set(T,!1))},[e]),zt.useEffect(()=>{!e&&!m.size&&n&&n()},[e]),c==="popLayout"&&(i=on.jsx(dN,{isPresent:e,anchorX:h,root:d,children:i})),on.jsx(ky.Provider,{value:_,children:i})};function mN(){return new Map}function lR(i=!0){const t=zt.useContext(ky);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:a}=t,o=zt.useId();zt.useEffect(()=>{if(i)return a(o)},[i]);const c=zt.useCallback(()=>i&&n&&n(o),[o,n,i]);return!e&&n?[!1,c]:[!0]}const F0=i=>i.key||"";function gE(i){const t=[];return zt.Children.forEach(i,e=>{zt.isValidElement(e)&&t.push(e)}),t}const gN=({children:i,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:o="sync",propagate:c=!1,anchorX:h="left",root:d})=>{const[m,v]=lR(c),y=zt.useMemo(()=>gE(i),[i]),_=c&&!m?[]:y.map(F0),M=zt.useRef(!0),T=zt.useRef(y),C=xd(()=>new Map),[R,b]=zt.useState(y),[D,U]=zt.useState(y);qy(()=>{M.current=!1,T.current=y;for(let B=0;B<D.length;B++){const H=F0(D[B]);_.includes(H)?C.delete(H):C.get(H)!==!0&&C.set(H,!1)}},[D,_.length,_.join("-")]);const N=[];if(y!==R){let B=[...y];for(let H=0;H<D.length;H++){const X=D[H],z=F0(X);_.includes(z)||(B.splice(H,0,X),N.push(X))}return o==="wait"&&N.length&&(B=N),U(gE(B)),b(y),null}const{forceRender:P}=zt.useContext(OM);return on.jsx(on.Fragment,{children:D.map(B=>{const H=F0(B),X=c&&!m?!1:y===D||_.includes(H),z=()=>{if(C.has(H))C.set(H,!0);else return;let L=!0;C.forEach(W=>{W||(L=!1)}),L&&(P?.(),U(T.current),c&&v?.(),n&&n())};return on.jsx(pN,{isPresent:X,initial:!M.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:o,root:d,onExitComplete:X?void 0:z,anchorX:h,children:B},H)})})},uR=zt.createContext({strict:!1}),vE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ld={};for(const i in vE)ld[i]={isEnabled:t=>vE[i].some(e=>!!t[e])};function vN(i){for(const t in i)ld[t]={...ld[t],...i[t]}}const yN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jv(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||yN.has(i)}let cR=i=>!Jv(i);function _N(i){typeof i=="function"&&(cR=t=>t.startsWith("on")?!Jv(t):i(t))}try{_N(require("@emotion/is-prop-valid").default)}catch{}function xN(i,t,e){const n={};for(const a in i)a==="values"&&typeof i.values=="object"||(cR(a)||e===!0&&Jv(a)||!t&&!Jv(a)||i.draggable&&a.startsWith("onDrag"))&&(n[a]=i[a]);return n}const Wy=zt.createContext({});function jy(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Dm(i){return typeof i=="string"||Array.isArray(i)}const sb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rb=["initial",...sb];function Zy(i){return jy(i.animate)||rb.some(t=>Dm(i[t]))}function fR(i){return!!(Zy(i)||i.variants)}function SN(i,t){if(Zy(i)){const{initial:e,animate:n}=i;return{initial:e===!1||Dm(e)?e:void 0,animate:Dm(n)?n:void 0}}return i.inherit!==!1?t:{}}function MN(i){const{initial:t,animate:e}=SN(i,zt.useContext(Wy));return zt.useMemo(()=>({initial:t,animate:e}),[yE(t),yE(e)])}function yE(i){return Array.isArray(i)?i.join(" "):i}const Um={};function bN(i){for(const t in i)Um[t]=i[t],GM(t)&&(Um[t].isCSSVariable=!0)}function hR(i,{layout:t,layoutId:e}){return bd.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!Um[i]||i==="opacity")}const EN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TN=Md.length;function AN(i,t,e){let n="",a=!0;for(let o=0;o<TN;o++){const c=Md[o],h=i[c];if(h===void 0)continue;let d=!0;if(typeof h=="number"?d=h===(c.startsWith("scale")?1:0):d=parseFloat(h)===0,!d||e){const m=nR(h,tb[c]);if(!d){a=!1;const v=EN[c]||c;n+=`${v}(${m}) `}e&&(t[c]=m)}}return n=n.trim(),e?n=e(t,a?"":n):a&&(n="none"),n}function ob(i,t,e){const{style:n,vars:a,transformOrigin:o}=i;let c=!1,h=!1;for(const d in t){const m=t[d];if(bd.has(d)){c=!0;continue}else if(GM(d)){a[d]=m;continue}else{const v=nR(m,tb[d]);d.startsWith("origin")?(h=!0,o[d]=v):n[d]=v}}if(t.transform||(c||e?n.transform=AN(t,i.transform,e):n.transform&&(n.transform="none")),h){const{originX:d="50%",originY:m="50%",originZ:v=0}=o;n.transformOrigin=`${d} ${m} ${v}`}}const lb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dR(i,t,e){for(const n in t)!Na(t[n])&&!hR(n,e)&&(i[n]=t[n])}function RN({transformTemplate:i},t){return zt.useMemo(()=>{const e=lb();return ob(e,t,i),Object.assign({},e.vars,e.style)},[t])}function CN(i,t){const e=i.style||{},n={};return dR(n,e,i),Object.assign(n,RN(i,t)),n}function wN(i,t){const e={},n=CN(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}const DN={offset:"stroke-dashoffset",array:"stroke-dasharray"},UN={offset:"strokeDashoffset",array:"strokeDasharray"};function NN(i,t,e=1,n=0,a=!0){i.pathLength=1;const o=a?DN:UN;i[o.offset]=Ie.transform(-n);const c=Ie.transform(t),h=Ie.transform(e);i[o.array]=`${c} ${h}`}function pR(i,{attrX:t,attrY:e,attrScale:n,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...h},d,m,v){if(ob(i,h,m),d){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:y,style:_}=i;y.transform&&(_.transform=y.transform,delete y.transform),(_.transform||y.transformOrigin)&&(_.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),_.transform&&(_.transformBox=v?.transformBox??"fill-box",delete y.transformBox),t!==void 0&&(y.x=t),e!==void 0&&(y.y=e),n!==void 0&&(y.scale=n),a!==void 0&&NN(y,a,o,c,!1)}const mR=()=>({...lb(),attrs:{}}),gR=i=>typeof i=="string"&&i.toLowerCase()==="svg";function ON(i,t,e,n){const a=zt.useMemo(()=>{const o=mR();return pR(o,t,gR(n),i.transformTemplate,i.style),{...o.attrs,style:{...o.style}}},[t]);if(i.style){const o={};dR(o,i.style,i),a.style={...o,...a.style}}return a}const LN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ub(i){return typeof i!="string"||i.includes("-")?!1:!!(LN.indexOf(i)>-1||/[A-Z]/u.test(i))}function zN(i,t,e,{latestValues:n},a,o=!1){const h=(ub(i)?ON:wN)(t,n,a,i),d=xN(t,typeof i=="string",o),m=i!==zt.Fragment?{...d,...h,ref:e}:{},{children:v}=t,y=zt.useMemo(()=>Na(v)?v.get():v,[v]);return zt.createElement(i,{...m,children:y})}function _E(i){const t=[{},{}];return i?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function cb(i,t,e,n){if(typeof t=="function"){const[a,o]=_E(n);t=t(e!==void 0?e:i.custom,a,o)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[a,o]=_E(n);t=t(e!==void 0?e:i.custom,a,o)}return t}function Gv(i){return Na(i)?i.get():i}function PN({scrapeMotionValuesFromProps:i,createRenderState:t},e,n,a){return{latestValues:BN(e,n,a,i),renderState:t()}}function BN(i,t,e,n){const a={},o=n(i,{});for(const _ in o)a[_]=Gv(o[_]);let{initial:c,animate:h}=i;const d=Zy(i),m=fR(i);t&&m&&!d&&i.inherit!==!1&&(c===void 0&&(c=t.initial),h===void 0&&(h=t.animate));let v=e?e.initial===!1:!1;v=v||c===!1;const y=v?h:c;if(y&&typeof y!="boolean"&&!jy(y)){const _=Array.isArray(y)?y:[y];for(let M=0;M<_.length;M++){const T=cb(i,_[M]);if(T){const{transitionEnd:C,transition:R,...b}=T;for(const D in b){let U=b[D];if(Array.isArray(U)){const N=v?U.length-1:0;U=U[N]}U!==null&&(a[D]=U)}for(const D in C)a[D]=C[D]}}}return a}const vR=i=>(t,e)=>{const n=zt.useContext(Wy),a=zt.useContext(ky),o=()=>PN(i,t,n,a);return e?o():xd(o)};function fb(i,t,e){const{style:n}=i,a={};for(const o in n)(Na(n[o])||t.style&&Na(t.style[o])||hR(o,i)||e?.getValue(o)?.liveStyle!==void 0)&&(a[o]=n[o]);return a}const IN=vR({scrapeMotionValuesFromProps:fb,createRenderState:lb});function yR(i,t,e){const n=fb(i,t,e);for(const a in i)if(Na(i[a])||Na(t[a])){const o=Md.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[o]=i[a]}return n}const VN=vR({scrapeMotionValuesFromProps:yR,createRenderState:mR}),HN=Symbol.for("motionComponentSymbol");function Qh(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function FN(i,t,e){return zt.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Qh(e)&&(e.current=n))},[t])}const hb=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GN="framerAppearId",_R="data-"+hb(GN),xR=zt.createContext({});function XN(i,t,e,n,a){const{visualElement:o}=zt.useContext(Wy),c=zt.useContext(uR),h=zt.useContext(ky),d=zt.useContext(Yy).reducedMotion,m=zt.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(i,{visualState:t,parent:o,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:d}));const v=m.current,y=zt.useContext(xR);v&&!v.projection&&a&&(v.type==="html"||v.type==="svg")&&qN(m.current,e,a,y);const _=zt.useRef(!1);zt.useInsertionEffect(()=>{v&&_.current&&v.update(e,h)});const M=e[_R],T=zt.useRef(!!M&&!window.MotionHandoffIsComplete?.(M)&&window.MotionHasOptimisedAnimation?.(M));return qy(()=>{v&&(_.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),v.scheduleRenderMicrotask(),T.current&&v.animationState&&v.animationState.animateChanges())}),zt.useEffect(()=>{v&&(!T.current&&v.animationState&&v.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(M)}),T.current=!1))}),v}function qN(i,t,e,n){const{layoutId:a,layout:o,drag:c,dragConstraints:h,layoutScroll:d,layoutRoot:m,layoutCrossfade:v}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:SR(i.parent)),i.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!c||h&&Qh(h),visualElement:i,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:v,layoutScroll:d,layoutRoot:m})}function SR(i){if(i)return i.options.allowProjection!==!1?i.projection:SR(i.parent)}function Ax(i,{forwardMotionProps:t=!1}={},e,n){e&&vN(e);const a=ub(i)?VN:IN;function o(h,d){let m;const v={...zt.useContext(Yy),...h,layoutId:kN(h)},{isStatic:y}=v,_=MN(h),M=a(h,y);if(!y&&LM){YN();const T=WN(v);m=T.MeasureLayout,_.visualElement=XN(i,M,v,n,T.ProjectionNode)}return on.jsxs(Wy.Provider,{value:_,children:[m&&_.visualElement?on.jsx(m,{visualElement:_.visualElement,...v}):null,zN(i,h,FN(M,_.visualElement,d),M,y,t)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const c=zt.forwardRef(o);return c[HN]=i,c}function kN({layoutId:i}){const t=zt.useContext(OM).id;return t&&i!==void 0?t+"-"+i:i}function YN(i,t){zt.useContext(uR).strict}function WN(i){const{drag:t,layout:e}=ld;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(i)||e?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function jN(i,t){if(typeof Proxy>"u")return Ax;const e=new Map,n=(o,c)=>Ax(o,c,i,t),a=(o,c)=>n(o,c);return new Proxy(a,{get:(o,c)=>c==="create"?n:(e.has(c)||e.set(c,Ax(c,void 0,i,t)),e.get(c))})}function MR({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function ZN({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function KN(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function Rx(i){return i===void 0||i===1}function eM({scale:i,scaleX:t,scaleY:e}){return!Rx(i)||!Rx(t)||!Rx(e)}function sf(i){return eM(i)||bR(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function bR(i){return xE(i.x)||xE(i.y)}function xE(i){return i&&i!=="0%"}function $v(i,t,e){const n=i-e,a=t*n;return e+a}function SE(i,t,e,n,a){return a!==void 0&&(i=$v(i,a,n)),$v(i,e,n)+t}function nM(i,t=0,e=1,n,a){i.min=SE(i.min,t,e,n,a),i.max=SE(i.max,t,e,n,a)}function ER(i,{x:t,y:e}){nM(i.x,t.translate,t.scale,t.originPoint),nM(i.y,e.translate,e.scale,e.originPoint)}const ME=.999999999999,bE=1.0000000000001;function QN(i,t,e,n=!1){const a=e.length;if(!a)return;t.x=t.y=1;let o,c;for(let h=0;h<a;h++){o=e[h],c=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&$h(i,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,ER(i,c)),n&&sf(o.latestValues)&&$h(i,o.latestValues))}t.x<bE&&t.x>ME&&(t.x=1),t.y<bE&&t.y>ME&&(t.y=1)}function Jh(i,t){i.min=i.min+t,i.max=i.max+t}function EE(i,t,e,n,a=.5){const o=oi(i.min,i.max,a);nM(i,t,e,o,n)}function $h(i,t){EE(i.x,t.x,t.scaleX,t.scale,t.originX),EE(i.y,t.y,t.scaleY,t.scale,t.originY)}function TR(i,t){return MR(KN(i.getBoundingClientRect(),t))}function JN(i,t,e){const n=TR(i,e),{scroll:a}=t;return a&&(Jh(n.x,a.offset.x),Jh(n.y,a.offset.y)),n}const TE=()=>({translate:0,scale:1,origin:0,originPoint:0}),td=()=>({x:TE(),y:TE()}),AE=()=>({min:0,max:0}),Ai=()=>({x:AE(),y:AE()}),iM={current:null},AR={current:!1};function $N(){if(AR.current=!0,!!LM)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>iM.current=i.matches;i.addEventListener("change",t),t()}else iM.current=!1}const tO=new WeakMap;function eO(i,t,e){for(const n in t){const a=t[n],o=e[n];if(Na(a))i.addValue(n,a);else if(Na(o))i.addValue(n,Qr(a,{owner:i}));else if(o!==a)if(i.hasValue(n)){const c=i.getValue(n);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=i.getStaticValue(n);i.addValue(n,Qr(c!==void 0?c:a,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const RE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nO{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:o,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=xs.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,In.render(this.render,!1,!0))};const{latestValues:d,renderState:m}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=m,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!o,this.isControllingVariants=Zy(e),this.isVariantNode=fR(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:v,...y}=this.scrapeMotionValuesFromProps(e,{},this);for(const _ in y){const M=y[_];d[_]!==void 0&&Na(M)&&M.set(d[_])}}mount(t){this.current=t,tO.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),AR.current||$N(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),$r(this.notifyUpdate),$r(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=bd.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&In.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ld){const e=ld[t];if(!e)continue;const{isEnabled:n,Feature:a}=e;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ai()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<RE.length;n++){const a=RE[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,c=t[o];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=eO(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Qr(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(g2(n)||y2(n))?n=parseFloat(n):!fN(n)&&Gu.test(e)&&(n=tR(t,e)),this.setBaseTarget(t,Na(n)?n.get():n)),Na(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const o=cb(this.props,e,this.presenceContext?.custom);o&&(n=o[t])}if(e&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Na(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new IM),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){nb.render(this.render)}}class RR extends nO{constructor(){super(...arguments),this.KeyframeResolver=qU}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Na(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function CR(i,{style:t,vars:e},n,a){const o=i.style;let c;for(c in t)o[c]=t[c];a?.applyProjectionStyles(o,n);for(c in e)o.setProperty(c,e[c])}function iO(i){return window.getComputedStyle(i)}class aO extends RR{constructor(){super(...arguments),this.type="html",this.renderInstance=CR}readValueFromInstance(t,e){if(bd.has(e))return this.projection?.isProjecting?jS(e):cU(t,e);{const n=iO(t),a=(GM(e)?n.getPropertyValue(e):n[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return TR(t,e)}build(t,e,n){ob(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return fb(t,e,n)}}const wR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sO(i,t,e,n){CR(i,t,void 0,n);for(const a in t.attrs)i.setAttribute(wR.has(a)?a:hb(a),t.attrs[a])}class rO extends RR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ai}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(bd.has(e)){const n=$2(e);return n&&n.default||0}return e=wR.has(e)?e:hb(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return yR(t,e,n)}build(t,e,n){pR(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,a){sO(t,e,n,a)}mount(t){this.isSVGTag=gR(t.tagName),super.mount(t)}}const oO=(i,t)=>ub(i)?new rO(t):new aO(t,{allowProjection:i!==zt.Fragment});function Nm(i,t,e){const n=i.getProps();return cb(n,t,e!==void 0?e:n.custom,i)}const aM=i=>Array.isArray(i);function lO(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,Qr(e))}function uO(i){return aM(i)?i[i.length-1]||0:i}function cO(i,t){const e=Nm(i,t);let{transitionEnd:n={},transition:a={},...o}=e||{};o={...o,...n};for(const c in o){const h=uO(o[c]);lO(i,c,h)}}function fO(i){return!!(Na(i)&&i.add)}function sM(i,t){const e=i.getValue("willChange");if(fO(e))return e.add(t);if(!e&&Nl.WillChange){const n=new Nl.WillChange("auto");i.addValue("willChange",n),n.add(t)}}function DR(i){return i.props[_R]}const hO=i=>i!==null;function dO(i,{repeat:t,repeatType:e="loop"},n){const a=i.filter(hO),o=t&&e!=="loop"&&t%2===1?0:a.length-1;return a[o]}const pO={type:"spring",stiffness:500,damping:25,restSpeed:10},mO=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),gO={type:"keyframes",duration:.8},vO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yO=(i,{keyframes:t})=>t.length>2?gO:bd.has(i)?i.startsWith("scale")?mO(t[1]):pO:vO;function _O({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:a,repeat:o,repeatType:c,repeatDelay:h,from:d,elapsed:m,...v}){return!!Object.keys(v).length}const db=(i,t,e,n={},a,o)=>c=>{const h=$M(n,i)||{},d=h.delay||n.delay||0;let{elapsed:m=0}=n;m=m-Xo(d);const v={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-m,onUpdate:_=>{t.set(_),h.onUpdate&&h.onUpdate(_)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:i,motionValue:t,element:o?void 0:a};_O(h)||Object.assign(v,yO(i,v)),v.duration&&(v.duration=Xo(v.duration)),v.repeatDelay&&(v.repeatDelay=Xo(v.repeatDelay)),v.from!==void 0&&(v.keyframes[0]=v.from);let y=!1;if((v.type===!1||v.duration===0&&!v.repeatDelay)&&($S(v),v.delay===0&&(y=!0)),(Nl.instantAnimations||Nl.skipAnimations)&&(y=!0,$S(v),v.delay=0),v.allowFlatten=!h.type&&!h.ease,y&&!o&&t.get()!==void 0){const _=dO(v.keyframes,h);if(_!==void 0){In.update(()=>{v.onUpdate(_),v.onComplete()});return}}return h.isSync?new QM(v):new NU(v)};function xO({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function UR(i,t,{delay:e=0,transitionOverride:n,type:a}={}){let{transition:o=i.getDefaultTransition(),transitionEnd:c,...h}=t;n&&(o=n);const d=[],m=a&&i.animationState&&i.animationState.getState()[a];for(const v in h){const y=i.getValue(v,i.latestValues[v]??null),_=h[v];if(_===void 0||m&&xO(m,v))continue;const M={delay:e,...$M(o||{},v)},T=y.get();if(T!==void 0&&!y.isAnimating&&!Array.isArray(_)&&_===T&&!M.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const b=DR(i);if(b){const D=window.MotionHandoffAnimation(b,v,In);D!==null&&(M.startTime=D,C=!0)}}sM(i,v),y.start(db(v,y,_,i.shouldReduceMotion&&K2.has(v)?{type:!1}:M,i,C));const R=y.animation;R&&d.push(R)}return c&&Promise.all(d).then(()=>{In.update(()=>{c&&cO(i,c)})}),d}function rM(i,t,e={}){const n=Nm(i,t,e.type==="exit"?i.presenceContext?.custom:void 0);let{transition:a=i.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(a=e.transitionOverride);const o=n?()=>Promise.all(UR(i,n,e)):()=>Promise.resolve(),c=i.variantChildren&&i.variantChildren.size?(d=0)=>{const{delayChildren:m=0,staggerChildren:v,staggerDirection:y}=a;return SO(i,t,d,m,v,y,e)}:()=>Promise.resolve(),{when:h}=a;if(h){const[d,m]=h==="beforeChildren"?[o,c]:[c,o];return d().then(()=>m())}else return Promise.all([o(),c(e.delay)])}function SO(i,t,e=0,n=0,a=0,o=1,c){const h=[],d=i.variantChildren.size,m=(d-1)*a,v=typeof n=="function",y=v?_=>n(_,d):o===1?(_=0)=>_*a:(_=0)=>m-_*a;return Array.from(i.variantChildren).sort(MO).forEach((_,M)=>{_.notify("AnimationStart",t),h.push(rM(_,t,{...c,delay:e+(v?0:n)+y(M)}).then(()=>_.notify("AnimationComplete",t)))}),Promise.all(h)}function MO(i,t){return i.sortNodePosition(t)}function bO(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(o=>rM(i,o,e));n=Promise.all(a)}else if(typeof t=="string")n=rM(i,t,e);else{const a=typeof t=="function"?Nm(i,t,e.custom):t;n=Promise.all(UR(i,a,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}function NR(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}const EO=rb.length;function OR(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?OR(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<EO;e++){const n=rb[e],a=i.props[n];(Dm(a)||a===!1)&&(t[n]=a)}return t}const TO=[...sb].reverse(),AO=sb.length;function RO(i){return t=>Promise.all(t.map(({animation:e,options:n})=>bO(i,e,n)))}function CO(i){let t=RO(i),e=CE(),n=!0;const a=d=>(m,v)=>{const y=Nm(i,v,d==="exit"?i.presenceContext?.custom:void 0);if(y){const{transition:_,transitionEnd:M,...T}=y;m={...m,...T,...M}}return m};function o(d){t=d(i)}function c(d){const{props:m}=i,v=OR(i.parent)||{},y=[],_=new Set;let M={},T=1/0;for(let R=0;R<AO;R++){const b=TO[R],D=e[b],U=m[b]!==void 0?m[b]:v[b],N=Dm(U),P=b===d?D.isActive:null;P===!1&&(T=R);let B=U===v[b]&&U!==m[b]&&N;if(B&&n&&i.manuallyAnimateOnMount&&(B=!1),D.protectedKeys={...M},!D.isActive&&P===null||!U&&!D.prevProp||jy(U)||typeof U=="boolean")continue;const H=wO(D.prevProp,U);let X=H||b===d&&D.isActive&&!B&&N||R>T&&N,z=!1;const L=Array.isArray(U)?U:[U];let W=L.reduce(a(b),{});P===!1&&(W={});const{prevResolvedValues:ot={}}=D,it={...ot,...W},pt=j=>{X=!0,_.has(j)&&(z=!0,_.delete(j)),D.needsAnimating[j]=!0;const Z=i.getValue(j);Z&&(Z.liveStyle=!1)};for(const j in it){const Z=W[j],ct=ot[j];if(M.hasOwnProperty(j))continue;let k=!1;aM(Z)&&aM(ct)?k=!NR(Z,ct):k=Z!==ct,k?Z!=null?pt(j):_.add(j):Z!==void 0&&_.has(j)?pt(j):D.protectedKeys[j]=!0}D.prevProp=U,D.prevResolvedValues=W,D.isActive&&(M={...M,...W}),n&&i.blockInitialAnimation&&(X=!1),X&&(!(B&&H)||z)&&y.push(...L.map(j=>({animation:j,options:{type:b}})))}if(_.size){const R={};if(typeof m.initial!="boolean"){const b=Nm(i,Array.isArray(m.initial)?m.initial[0]:m.initial);b&&b.transition&&(R.transition=b.transition)}_.forEach(b=>{const D=i.getBaseTarget(b),U=i.getValue(b);U&&(U.liveStyle=!0),R[b]=D??null}),y.push({animation:R})}let C=!!y.length;return n&&(m.initial===!1||m.initial===m.animate)&&!i.manuallyAnimateOnMount&&(C=!1),n=!1,C?t(y):Promise.resolve()}function h(d,m){if(e[d].isActive===m)return Promise.resolve();i.variantChildren?.forEach(y=>y.animationState?.setActive(d,m)),e[d].isActive=m;const v=c(d);for(const y in e)e[y].protectedKeys={};return v}return{animateChanges:c,setActive:h,setAnimateFunction:o,getState:()=>e,reset:()=>{e=CE(),n=!0}}}function wO(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!NR(t,i):!1}function Xc(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CE(){return{animate:Xc(!0),whileInView:Xc(),whileHover:Xc(),whileTap:Xc(),whileDrag:Xc(),whileFocus:Xc(),exit:Xc()}}class Yu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class DO extends Yu{constructor(t){super(t),t.animationState||(t.animationState=CO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();jy(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let UO=0;class NO extends Yu{constructor(){super(...arguments),this.id=UO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const OO={animation:{Feature:DO},exit:{Feature:NO}};function Om(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function eg(i){return{point:{x:i.pageX,y:i.pageY}}}const LO=i=>t=>ib(t)&&i(t,eg(t));function dm(i,t,e,n){return Om(i,t,LO(e),n)}const LR=1e-4,zO=1-LR,PO=1+LR,zR=.01,BO=0-zR,IO=0+zR;function ts(i){return i.max-i.min}function VO(i,t,e){return Math.abs(i-t)<=e}function wE(i,t,e,n=.5){i.origin=n,i.originPoint=oi(t.min,t.max,i.origin),i.scale=ts(e)/ts(t),i.translate=oi(e.min,e.max,i.origin)-i.originPoint,(i.scale>=zO&&i.scale<=PO||isNaN(i.scale))&&(i.scale=1),(i.translate>=BO&&i.translate<=IO||isNaN(i.translate))&&(i.translate=0)}function pm(i,t,e,n){wE(i.x,t.x,e.x,n?n.originX:void 0),wE(i.y,t.y,e.y,n?n.originY:void 0)}function DE(i,t,e){i.min=e.min+t.min,i.max=i.min+ts(t)}function HO(i,t,e){DE(i.x,t.x,e.x),DE(i.y,t.y,e.y)}function UE(i,t,e){i.min=t.min-e.min,i.max=i.min+ts(t)}function mm(i,t,e){UE(i.x,t.x,e.x),UE(i.y,t.y,e.y)}function mr(i){return[i("x"),i("y")]}const PR=({current:i})=>i?i.ownerDocument.defaultView:null,NE=(i,t)=>Math.abs(i-t);function FO(i,t){const e=NE(i.x,t.x),n=NE(i.y,t.y);return Math.sqrt(e**2+n**2)}class BR{constructor(t,e,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=wx(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,T=FO(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!M&&!T)return;const{point:C}=_,{timestamp:R}=na;this.history.push({...C,timestamp:R});const{onStart:b,onMove:D}=this.handlers;M||(b&&b(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),D&&D(this.lastMoveEvent,_)},this.handlePointerMove=(_,M)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Cx(M,this.transformPagePoint),In.update(this.updatePoint,!0)},this.handlePointerUp=(_,M)=>{this.end();const{onEnd:T,onSessionEnd:C,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=wx(_.type==="pointercancel"?this.lastMoveEventInfo:Cx(M,this.transformPagePoint),this.history);this.startEvent&&T&&T(_,b),C&&C(_,b)},!ib(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=c,this.contextWindow=a||window;const h=eg(t),d=Cx(h,this.transformPagePoint),{point:m}=d,{timestamp:v}=na;this.history=[{...m,timestamp:v}];const{onSessionStart:y}=e;y&&y(t,wx(d,this.history)),this.removeListeners=Jm(dm(this.contextWindow,"pointermove",this.handlePointerMove),dm(this.contextWindow,"pointerup",this.handlePointerUp),dm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),$r(this.updatePoint)}}function Cx(i,t){return t?{point:t(i.point)}:i}function OE(i,t){return{x:i.x-t.x,y:i.y-t.y}}function wx({point:i},t){return{point:i,delta:OE(i,IR(t)),offset:OE(i,GO(t)),velocity:XO(t,.1)}}function GO(i){return i[0]}function IR(i){return i[i.length-1]}function XO(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const a=IR(i);for(;e>=0&&(n=i[e],!(a.timestamp-n.timestamp>Xo(t)));)e--;if(!n)return{x:0,y:0};const o=qo(a.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const c={x:(a.x-n.x)/o,y:(a.y-n.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function qO(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?oi(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?oi(e,i,n.max):Math.min(i,e)),i}function LE(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function kO(i,{top:t,left:e,bottom:n,right:a}){return{x:LE(i.x,e,a),y:LE(i.y,t,n)}}function zE(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function YO(i,t){return{x:zE(i.x,t.x),y:zE(i.y,t.y)}}function WO(i,t){let e=.5;const n=ts(i),a=ts(t);return a>n?e=od(t.min,t.max-n,i.min):n>a&&(e=od(i.min,i.max-a,t.min)),jo(0,1,e)}function jO(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const oM=.35;function ZO(i=oM){return i===!1?i=0:i===!0&&(i=oM),{x:PE(i,"left","right"),y:PE(i,"top","bottom")}}function PE(i,t,e){return{min:BE(i,t),max:BE(i,e)}}function BE(i,t){return typeof i=="number"?i:i[t]||0}const KO=new WeakMap;class QO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ai(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(eg(y).point)},c=(y,_)=>{const{drag:M,dragPropagation:T,onDragStart:C}=this.getProps();if(M&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WU(M),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mr(b=>{let D=this.getAxisMotionValue(b).get()||0;if(ko.test(D)){const{projection:U}=this.visualElement;if(U&&U.layout){const N=U.layout.layoutBox[b];N&&(D=ts(N)*(parseFloat(D)/100))}}this.originPoint[b]=D}),C&&In.postRender(()=>C(y,_)),sM(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},h=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_;const{dragPropagation:M,dragDirectionLock:T,onDirectionLock:C,onDrag:R}=this.getProps();if(!M&&!this.openDragLock)return;const{offset:b}=_;if(T&&this.currentDirection===null){this.currentDirection=JO(b),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",_.point,b),this.updateAxis("y",_.point,b),this.visualElement.render(),R&&R(y,_)},d=(y,_)=>{this.latestPointerEvent=y,this.latestPanInfo=_,this.stop(y,_),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>mr(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:v}=this.getProps();this.panSession=new BR(t,{onSessionStart:o,onStart:c,onMove:h,onSessionEnd:d,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:v,distanceThreshold:n,contextWindow:PR(this.visualElement)})}stop(t,e){const n=t||this.latestPointerEvent,a=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!n)return;const{velocity:c}=a;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&In.postRender(()=>h(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:a}=this.getProps();if(!n||!G0(t,a,this.currentDirection))return;const o=this.getAxisMotionValue(t);let c=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(c=qO(c,this.constraints[t],this.elastic[t])),o.set(c)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&Qh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=kO(n.layoutBox,t):this.constraints=!1,this.elastic=ZO(e),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&mr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=jO(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Qh(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=JN(n,a.root,this.visualElement.getTransformPagePoint());let c=YO(a.layout.layoutBox,o);if(e){const h=e(ZN(c));this.hasMutatedConstraints=!!h,h&&(c=MR(h))}return c}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:a,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),d=this.constraints||{},m=mr(v=>{if(!G0(v,e,this.currentDirection))return;let y=d&&d[v]||{};c&&(y={min:0,max:0});const _=a?200:1e6,M=a?40:1e7,T={type:"inertia",velocity:n?t[v]:0,bounceStiffness:_,bounceDamping:M,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(v,T)});return Promise.all(m).then(h)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return sM(this.visualElement,t),n.start(db(t,n,0,e,this.visualElement,!1))}stopAnimation(){mr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){mr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[e];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){mr(e=>{const{drag:n}=this.getProps();if(!G0(e,n,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(e);if(a&&a.layout){const{min:c,max:h}=a.layout.layoutBox[e];o.set(t[e]-oi(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Qh(e)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};mr(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const d=h.get();a[c]=WO({min:d,max:d},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),mr(c=>{if(!G0(c,t,null))return;const h=this.getAxisMotionValue(c),{min:d,max:m}=this.constraints[c];h.set(oi(d,m,a[c]))})}addListeners(){if(!this.visualElement.current)return;KO.set(this.visualElement,this);const t=this.visualElement.current,e=dm(t,"pointerdown",d=>{const{drag:m,dragListener:v=!0}=this.getProps();m&&v&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Qh(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),In.read(n);const c=Om(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m})=>{this.isDragging&&m&&(mr(v=>{const y=this.getAxisMotionValue(v);y&&(this.originPoint[v]+=d[v].translate,y.set(y.get()+d[v].translate))}),this.visualElement.render())});return()=>{c(),e(),o(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:c=oM,dragMomentum:h=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:a,dragConstraints:o,dragElastic:c,dragMomentum:h}}}function G0(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function JO(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class $O extends Yu{constructor(t){super(t),this.removeGroupControls=Ms,this.removeListeners=Ms,this.controls=new QO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ms}unmount(){this.removeGroupControls(),this.removeListeners()}}const IE=i=>(t,e)=>{i&&In.postRender(()=>i(t,e))};class tL extends Yu{constructor(){super(...arguments),this.removePointerDownListener=Ms}onPointerDown(t){this.session=new BR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:IE(t),onStart:IE(e),onMove:n,onEnd:(o,c)=>{delete this.session,a&&In.postRender(()=>a(o,c))}}}mount(){this.removePointerDownListener=dm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function VE(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const Yp={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(Ie.test(i))i=parseFloat(i);else return i;const e=VE(i,t.target.x),n=VE(i,t.target.y);return`${e}% ${n}%`}},eL={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,a=Gu.parse(i);if(a.length>5)return n;const o=Gu.createTransformer(i),c=typeof a[0]!="number"?1:0,h=e.x.scale*t.x,d=e.y.scale*t.y;a[0+c]/=h,a[1+c]/=d;const m=oi(h,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=m),typeof a[3+c]=="number"&&(a[3+c]/=m),o(a)}};let HE=!1;class nL extends zt.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:a}=this.props,{projection:o}=t;bN(iL),o&&(e.group&&e.group.add(o),n&&n.register&&a&&n.register(o),HE&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Xv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:a,isPresent:o}=this.props,{projection:c}=n;return c&&(c.isPresent=o,HE=!0,a||t.layoutDependency!==e||e===void 0||t.isPresent!==o?c.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?c.promote():c.relegate()||In.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),nb.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function VR(i){const[t,e]=lR(),n=zt.useContext(OM);return on.jsx(nL,{...i,layoutGroup:n,switchLayoutGroup:zt.useContext(xR),isPresent:t,safeToRemove:e})}const iL={borderRadius:{...Yp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yp,borderTopRightRadius:Yp,borderBottomLeftRadius:Yp,borderBottomRightRadius:Yp,boxShadow:eL};function aL(i,t,e){const n=Na(i)?i:Qr(i);return n.start(db("",n,t,e)),n.animation}const sL=(i,t)=>i.depth-t.depth;class rL{constructor(){this.children=[],this.isDirty=!1}add(t){zM(this.children,t),this.isDirty=!0}remove(t){PM(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sL),this.isDirty=!1,this.children.forEach(t)}}function oL(i,t){const e=xs.now(),n=({timestamp:a})=>{const o=a-e;o>=t&&($r(n),i(o-t))};return In.setup(n,!0),()=>$r(n)}const HR=["TopLeft","TopRight","BottomLeft","BottomRight"],lL=HR.length,FE=i=>typeof i=="string"?parseFloat(i):i,GE=i=>typeof i=="number"||Ie.test(i);function uL(i,t,e,n,a,o){a?(i.opacity=oi(0,e.opacity??1,cL(n)),i.opacityExit=oi(t.opacity??1,0,fL(n))):o&&(i.opacity=oi(t.opacity??1,e.opacity??1,n));for(let c=0;c<lL;c++){const h=`border${HR[c]}Radius`;let d=XE(t,h),m=XE(e,h);if(d===void 0&&m===void 0)continue;d||(d=0),m||(m=0),d===0||m===0||GE(d)===GE(m)?(i[h]=Math.max(oi(FE(d),FE(m),n),0),(ko.test(m)||ko.test(d))&&(i[h]+="%")):i[h]=m}(t.rotate||e.rotate)&&(i.rotate=oi(t.rotate||0,e.rotate||0,n))}function XE(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const cL=FR(0,.5,T2),fL=FR(.5,.95,Ms);function FR(i,t,e){return n=>n<i?0:n>t?1:e(od(i,t,n))}function qE(i,t){i.min=t.min,i.max=t.max}function dr(i,t){qE(i.x,t.x),qE(i.y,t.y)}function kE(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function YE(i,t,e,n,a){return i-=t,i=$v(i,1/e,n),a!==void 0&&(i=$v(i,1/a,n)),i}function hL(i,t=0,e=1,n=.5,a,o=i,c=i){if(ko.test(t)&&(t=parseFloat(t),t=oi(c.min,c.max,t/100)-c.min),typeof t!="number")return;let h=oi(o.min,o.max,n);i===o&&(h-=t),i.min=YE(i.min,t,e,h,a),i.max=YE(i.max,t,e,h,a)}function WE(i,t,[e,n,a],o,c){hL(i,t[e],t[n],t[a],t.scale,o,c)}const dL=["x","scaleX","originX"],pL=["y","scaleY","originY"];function jE(i,t,e,n){WE(i.x,t,dL,e?e.x:void 0,n?n.x:void 0),WE(i.y,t,pL,e?e.y:void 0,n?n.y:void 0)}function ZE(i){return i.translate===0&&i.scale===1}function GR(i){return ZE(i.x)&&ZE(i.y)}function KE(i,t){return i.min===t.min&&i.max===t.max}function mL(i,t){return KE(i.x,t.x)&&KE(i.y,t.y)}function QE(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function XR(i,t){return QE(i.x,t.x)&&QE(i.y,t.y)}function JE(i){return ts(i.x)/ts(i.y)}function $E(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class gL{constructor(){this.members=[]}add(t){zM(this.members,t),t.scheduleRender()}remove(t){if(PM(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let n;for(let a=e;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vL(i,t,e){let n="";const a=i.x.translate/t.x,o=i.y.translate/t.y,c=e?.z||0;if((a||o||c)&&(n=`translate3d(${a}px, ${o}px, ${c}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:m,rotate:v,rotateX:y,rotateY:_,skewX:M,skewY:T}=e;m&&(n=`perspective(${m}px) ${n}`),v&&(n+=`rotate(${v}deg) `),y&&(n+=`rotateX(${y}deg) `),_&&(n+=`rotateY(${_}deg) `),M&&(n+=`skewX(${M}deg) `),T&&(n+=`skewY(${T}deg) `)}const h=i.x.scale*t.x,d=i.y.scale*t.y;return(h!==1||d!==1)&&(n+=`scale(${h}, ${d})`),n||"none"}const Dx=["","X","Y","Z"],yL=1e3;let _L=0;function Ux(i,t,e,n){const{latestValues:a}=t;a[i]&&(e[i]=a[i],t.setStaticValue(i,0),n&&(n[i]=0))}function qR(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=DR(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:o}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",In,!(a||o))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&qR(n)}function kR({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(c={},h=t?.()){this.id=_L++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ML),this.nodes.forEach(AL),this.nodes.forEach(RL),this.nodes.forEach(bL)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new rL)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new IM),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const d=this.eventHandlers.get(c);d&&d.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=ab(c)&&!lN(c),this.instance=c;const{layoutId:h,layout:d,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||h)&&(this.isLayoutDirty=!0),i){let v,y=0;const _=()=>this.root.updateBlockedByResize=!1;In.read(()=>{y=window.innerWidth}),i(c,()=>{const M=window.innerWidth;M!==y&&(y=M,this.root.updateBlockedByResize=!0,v&&v(),v=oL(_,250),Xv.hasAnimatedSinceResize&&(Xv.hasAnimatedSinceResize=!1,this.nodes.forEach(nT)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||d)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:y,hasRelativeLayoutChanged:_,layout:M})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||m.getDefaultTransition()||NL,{onLayoutAnimationStart:C,onLayoutAnimationComplete:R}=m.getProps(),b=!this.targetLayout||!XR(this.targetLayout,M),D=!y&&_;if(this.options.layoutRoot||this.resumeFrom||D||y&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const U={...$M(T,"layout"),onPlay:C,onComplete:R};(m.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U),this.setAnimationOrigin(v,D)}else y||nT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=M})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),$r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CL),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let v=0;v<this.path.length;v++){const y=this.path[v];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:d}=this.options;if(h===void 0&&!d)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(TL),this.nodes.forEach(xL),this.nodes.forEach(SL)):this.nodes.forEach(eT),this.clearAllSnapshots();const h=xs.now();na.delta=jo(0,1e3/60,h-na.timestamp),na.timestamp=h,na.isProcessing=!0,xx.update.process(na),xx.preRender.process(na),xx.render.process(na),na.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EL),this.sharedNodes.forEach(wL)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,In.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){In.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ts(this.snapshot.measuredBox.x)&&!ts(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!GR(this.projectionDelta),d=this.getTransformTemplate(),m=d?d(this.latestValues,""):void 0,v=m!==this.prevTransformTemplateValue;c&&this.instance&&(h||sf(this.latestValues)||v)&&(a(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let d=this.removeElementScroll(h);return c&&(d=this.removeTransform(d)),OL(d),{animationId:this.root.animationId,measuredBox:h,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Ai();const h=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(LL))){const{scroll:m}=this.root;m&&(Jh(h.x,m.offset.x),Jh(h.y,m.offset.y))}return h}removeElementScroll(c){const h=Ai();if(dr(h,c),this.scroll?.wasRoot)return h;for(let d=0;d<this.path.length;d++){const m=this.path[d],{scroll:v,options:y}=m;m!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&dr(h,c),Jh(h.x,v.offset.x),Jh(h.y,v.offset.y))}return h}applyTransform(c,h=!1){const d=Ai();dr(d,c);for(let m=0;m<this.path.length;m++){const v=this.path[m];!h&&v.options.layoutScroll&&v.scroll&&v!==v.root&&$h(d,{x:-v.scroll.offset.x,y:-v.scroll.offset.y}),sf(v.latestValues)&&$h(d,v.latestValues)}return sf(this.latestValues)&&$h(d,this.latestValues),d}removeTransform(c){const h=Ai();dr(h,c);for(let d=0;d<this.path.length;d++){const m=this.path[d];if(!m.instance||!sf(m.latestValues))continue;eM(m.latestValues)&&m.updateSnapshot();const v=Ai(),y=m.measurePageBox();dr(v,y),jE(h,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,v)}return sf(this.latestValues)&&jE(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==na.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==h;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:y}=this.options;if(!(!this.layout||!(v||y))){if(this.resolvedRelativeTargetAt=na.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),mm(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ai(),this.targetWithTransforms=Ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),HO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),ER(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ai(),this.relativeTargetOrigin=Ai(),mm(this.relativeTargetOrigin,this.target,_.target),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||eM(this.parent.latestValues)||bR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),h=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===na.timestamp&&(d=!1),d)return;const{layout:m,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||v))return;dr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,_=this.treeScale.y;QN(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Ai());const{target:M}=c;if(!M){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kE(this.prevProjectionDelta.x,this.projectionDelta.x),kE(this.prevProjectionDelta.y,this.projectionDelta.y)),pm(this.projectionDelta,this.layoutCorrected,M,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==_||!$E(this.projectionDelta.x,this.prevProjectionDelta.x)||!$E(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",M))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=td(),this.projectionDelta=td(),this.projectionDeltaWithTransform=td()}setAnimationOrigin(c,h=!1){const d=this.snapshot,m=d?d.latestValues:{},v={...this.latestValues},y=td();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const _=Ai(),M=d?d.source:void 0,T=this.layout?this.layout.source:void 0,C=M!==T,R=this.getStack(),b=!R||R.members.length<=1,D=!!(C&&!b&&this.options.crossfade===!0&&!this.path.some(UL));this.animationProgress=0;let U;this.mixTargetDelta=N=>{const P=N/1e3;iT(y.x,c.x,P),iT(y.y,c.y,P),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mm(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DL(this.relativeTarget,this.relativeTargetOrigin,_,P),U&&mL(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Ai()),dr(U,this.relativeTarget)),C&&(this.animationValues=v,uL(v,m,this.latestValues,P,D,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&($r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=In.update(()=>{Xv.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qr(0)),this.currentAnimation=aL(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),c.onUpdate&&c.onUpdate(h)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:d,layout:m,latestValues:v}=c;if(!(!h||!d||!m)){if(this!==c&&this.layout&&m&&YR(this.options.animationType,this.layout.layoutBox,m.layoutBox)){d=this.target||Ai();const y=ts(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+y;const _=ts(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+_}dr(h,d),$h(h,v),pm(this.projectionDeltaWithTransform,this.layoutCorrected,h,v)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new gL),this.sharedNodes.get(c).add(h);const m=h.options.initialPromotionConfig;h.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:d}={}){const m=this.getStack();m&&m.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(h=!0),!h)return;const m={};d.z&&Ux("z",c,m,this.animationValues);for(let v=0;v<Dx.length;v++)Ux(`rotate${Dx[v]}`,c,m,this.animationValues),Ux(`skew${Dx[v]}`,c,m,this.animationValues);c.render();for(const v in m)c.setStaticValue(v,m[v]),this.animationValues&&(this.animationValues[v]=m[v]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Gv(h?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Gv(h?.pointerEvents)||""),this.hasProjected&&!sf(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const v=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=vL(this.projectionDeltaWithTransform,this.treeScale,v);d&&(y=d(v,y)),c.transform=y;const{x:_,y:M}=this.projectionDelta;c.transformOrigin=`${_.origin*100}% ${M.origin*100}% 0`,m.animationValues?c.opacity=m===this?v.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:c.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const T in Um){if(v[T]===void 0)continue;const{correct:C,applyTo:R,isCSSVariable:b}=Um[T],D=y==="none"?v[T]:C(v[T],m);if(R){const U=R.length;for(let N=0;N<U;N++)c[R[N]]=D}else b?this.options.visualElement.renderState.vars[T]=D:c[T]=D}this.options.layoutId&&(c.pointerEvents=m===this?Gv(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(tT),this.root.sharedNodes.clear()}}}function xL(i){i.updateLayout()}function SL(i){const t=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&t&&i.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=i.layout,{animationType:a}=i.options,o=t.source!==i.layout.source;a==="size"?mr(v=>{const y=o?t.measuredBox[v]:t.layoutBox[v],_=ts(y);y.min=e[v].min,y.max=y.min+_}):YR(a,t.layoutBox,e)&&mr(v=>{const y=o?t.measuredBox[v]:t.layoutBox[v],_=ts(e[v]);y.max=y.min+_,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[v].max=i.relativeTarget[v].min+_)});const c=td();pm(c,e,t.layoutBox);const h=td();o?pm(h,i.applyTransform(n,!0),t.measuredBox):pm(h,e,t.layoutBox);const d=!GR(c);let m=!1;if(!i.resumeFrom){const v=i.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:_}=v;if(y&&_){const M=Ai();mm(M,t.layoutBox,y.layoutBox);const T=Ai();mm(T,e,_.layoutBox),XR(M,T)||(m=!0),v.options.layoutRoot&&(i.relativeTarget=T,i.relativeTargetOrigin=M,i.relativeParent=v)}}}i.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:h,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:m})}else if(i.isLead()){const{onExitComplete:e}=i.options;e&&e()}i.options.transition=void 0}function ML(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function bL(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function EL(i){i.clearSnapshot()}function tT(i){i.clearMeasurements()}function eT(i){i.isLayoutDirty=!1}function TL(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function nT(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function AL(i){i.resolveTargetDelta()}function RL(i){i.calcProjection()}function CL(i){i.resetSkewAndRotation()}function wL(i){i.removeLeadSnapshot()}function iT(i,t,e){i.translate=oi(t.translate,0,e),i.scale=oi(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function aT(i,t,e,n){i.min=oi(t.min,e.min,n),i.max=oi(t.max,e.max,n)}function DL(i,t,e,n){aT(i.x,t.x,e.x,n),aT(i.y,t.y,e.y,n)}function UL(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const NL={duration:.45,ease:[.4,0,.1,1]},sT=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),rT=sT("applewebkit/")&&!sT("chrome/")?Math.round:Ms;function oT(i){i.min=rT(i.min),i.max=rT(i.max)}function OL(i){oT(i.x),oT(i.y)}function YR(i,t,e){return i==="position"||i==="preserve-aspect"&&!VO(JE(t),JE(e),.2)}function LL(i){return i!==i.root&&i.scroll?.wasRoot}const zL=kR({attachResizeListener:(i,t)=>Om(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nx={current:void 0},WR=kR({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Nx.current){const i=new zL({});i.mount(window),i.setOptions({layoutScroll:!0}),Nx.current=i}return Nx.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),PL={pan:{Feature:tL},drag:{Feature:$O,ProjectionNode:WR,MeasureLayout:VR}};function lT(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,o=n[a];o&&In.postRender(()=>o(t,eg(t)))}class BL extends Yu{mount(){const{current:t}=this.node;t&&(this.unmount=jU(t,(e,n)=>(lT(this.node,n,"Start"),a=>lT(this.node,a,"End"))))}unmount(){}}class IL extends Yu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jm(Om(this.node.current,"focus",()=>this.onFocus()),Om(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uT(i,t,e){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),o=n[a];o&&In.postRender(()=>o(t,eg(t)))}class VL extends Yu{mount(){const{current:t}=this.node;t&&(this.unmount=JU(t,(e,n)=>(uT(this.node,n,"Start"),(a,{success:o})=>uT(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lM=new WeakMap,Ox=new WeakMap,HL=i=>{const t=lM.get(i.target);t&&t(i)},FL=i=>{i.forEach(HL)};function GL({root:i,...t}){const e=i||document;Ox.has(e)||Ox.set(e,{});const n=Ox.get(e),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(FL,{root:i,...t})),n[a]}function XL(i,t,e){const n=GL(t);return lM.set(i,e),n.observe(i),()=>{lM.delete(i),n.unobserve(i)}}const qL={some:0,all:1};class kL extends Yu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:a="some",once:o}=t,c={root:e?e.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:qL[a]},h=d=>{const{isIntersecting:m}=d;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:v,onViewportLeave:y}=this.node.getProps(),_=m?v:y;_&&_(d)};return XL(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(YL(t,e))&&this.startObserver()}unmount(){}}function YL({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const WL={inView:{Feature:kL},tap:{Feature:VL},focus:{Feature:IL},hover:{Feature:BL}},jL={layout:{ProjectionNode:WR,MeasureLayout:VR}},ZL={...OO,...WL,...PL,...jL},KL=jN(ZL,oO),QL=50,cT=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),JL=()=>({time:0,x:cT(),y:cT()}),$L={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function fT(i,t,e,n){const a=e[t],{length:o,position:c}=$L[t],h=a.current,d=e.time;a.current=i[`scroll${c}`],a.scrollLength=i[`scroll${o}`]-i[`client${o}`],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=od(0,a.scrollLength,a.current);const m=n-d;a.velocity=m>QL?0:VM(a.current-h,m)}function tz(i,t,e){fT(i,"x",t,e),fT(i,"y",t,e),t.time=e}function ez(i,t){const e={x:0,y:0};let n=i;for(;n&&n!==t;)if(eb(n))e.x+=n.offsetLeft,e.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const a=n.getBoundingClientRect();n=n.parentElement;const o=n.getBoundingClientRect();e.x+=a.left-o.left,e.y+=a.top-o.top}else if(n instanceof SVGGraphicsElement){const{x:a,y:o}=n.getBBox();e.x+=a,e.y+=o;let c=null,h=n.parentNode;for(;!c;)h.tagName==="svg"&&(c=h),h=n.parentNode;n=c}else break;return e}const uM={start:0,center:.5,end:1};function hT(i,t,e=0){let n=0;if(i in uM&&(i=uM[i]),typeof i=="string"){const a=parseFloat(i);i.endsWith("px")?n=a:i.endsWith("%")?i=a/100:i.endsWith("vw")?n=a/100*document.documentElement.clientWidth:i.endsWith("vh")?n=a/100*document.documentElement.clientHeight:i=a}return typeof i=="number"&&(n=t*i),e+n}const nz=[0,0];function iz(i,t,e,n){let a=Array.isArray(i)?i:nz,o=0,c=0;return typeof i=="number"?a=[i,i]:typeof i=="string"&&(i=i.trim(),i.includes(" ")?a=i.split(" "):a=[i,uM[i]?i:"0"]),o=hT(a[0],e,n),c=hT(a[1],t),o-c}const az={All:[[0,0],[1,1]]},sz={x:0,y:0};function rz(i){return"getBBox"in i&&i.tagName!=="svg"?i.getBBox():{width:i.clientWidth,height:i.clientHeight}}function oz(i,t,e){const{offset:n=az.All}=e,{target:a=i,axis:o="y"}=e,c=o==="y"?"height":"width",h=a!==i?ez(a,i):sz,d=a===i?{width:i.scrollWidth,height:i.scrollHeight}:rz(a),m={width:i.clientWidth,height:i.clientHeight};t[o].offset.length=0;let v=!t[o].interpolate;const y=n.length;for(let _=0;_<y;_++){const M=iz(n[_],m[c],d[c],h[o]);!v&&M!==t[o].interpolatorOffsets[_]&&(v=!0),t[o].offset[_]=M}v&&(t[o].interpolate=jM(t[o].offset,H2(n),{clamp:!1}),t[o].interpolatorOffsets=[...t[o].offset]),t[o].progress=jo(0,1,t[o].interpolate(t[o].current))}function lz(i,t=i,e){if(e.x.targetOffset=0,e.y.targetOffset=0,t!==i){let n=t;for(;n&&n!==i;)e.x.targetOffset+=n.offsetLeft,e.y.targetOffset+=n.offsetTop,n=n.offsetParent}e.x.targetLength=t===i?t.scrollWidth:t.clientWidth,e.y.targetLength=t===i?t.scrollHeight:t.clientHeight,e.x.containerLength=i.clientWidth,e.y.containerLength=i.clientHeight}function uz(i,t,e,n={}){return{measure:a=>{lz(i,n.target,e),tz(i,e,a),(n.offset||n.target)&&oz(i,e,n)},notify:()=>t(e)}}const Wp=new WeakMap,dT=new WeakMap,Lx=new WeakMap,pT=i=>i===document.scrollingElement?window:i;function jR(i,{container:t=document.scrollingElement,...e}={}){if(!t)return Ms;let n=Lx.get(t);n||(n=new Set,Lx.set(t,n));const a=JL(),o=uz(t,i,a,e);if(n.add(o),!Wp.has(t)){const h=()=>{for(const y of n)y.measure(na.timestamp);In.preUpdate(d)},d=()=>{for(const y of n)y.notify()},m=()=>In.read(h);Wp.set(t,m);const v=pT(t);window.addEventListener("resize",m,{passive:!0}),t!==document.documentElement&&dT.set(t,oN(t,m)),v.addEventListener("scroll",m,{passive:!0}),m()}const c=Wp.get(t);return In.read(c,!1,!0),()=>{$r(c);const h=Lx.get(t);if(!h||(h.delete(o),h.size))return;const d=Wp.get(t);Wp.delete(t),d&&(pT(t).removeEventListener("scroll",d),dT.get(t)?.(),window.removeEventListener("resize",d))}}const mT=new Map;function cz(i){const t={value:0},e=jR(n=>{t.value=n[i.axis].progress*100},i);return{currentTime:t,cancel:e}}function ZR({source:i,container:t,...e}){const{axis:n}=e;i&&(t=i);const a=mT.get(t)??new Map;mT.set(t,a);const o=e.target??"self",c=a.get(o)??{},h=n+(e.offset??[]).join(",");return c[h]||(c[h]=!e.target&&q2()?new ScrollTimeline({source:t,axis:n}):cz({container:t,...e})),c[h]}function fz(i,t){const e=ZR(t);return i.attachTimeline({timeline:t.target?void 0:e,observe:n=>(n.pause(),oR(a=>{n.time=n.duration*a},e))})}function hz(i){return i.length===2}function dz(i,t){return hz(i)?jR(e=>{i(e[t.axis].progress,e)},t):oR(i,ZR(t))}function pz(i,{axis:t="y",container:e=document.scrollingElement,...n}={}){if(!e)return Ms;const a={axis:t,container:e,...n};return typeof i=="function"?dz(i,a):fz(i,a)}const mz=()=>({scrollX:Qr(0),scrollY:Qr(0),scrollXProgress:Qr(0),scrollYProgress:Qr(0)}),X0=i=>i?!i.current:!1;function gz({container:i,target:t,...e}={}){const n=xd(mz),a=zt.useRef(null),o=zt.useRef(!1),c=zt.useCallback(()=>(a.current=pz((h,{x:d,y:m})=>{n.scrollX.set(d.current),n.scrollXProgress.set(d.progress),n.scrollY.set(m.current),n.scrollYProgress.set(m.progress)},{...e,container:i?.current||void 0,target:t?.current||void 0}),()=>{a.current?.()}),[i,t,JSON.stringify(e.offset)]);return qy(()=>{if(o.current=!1,X0(i)||X0(t)){o.current=!0;return}else return c()},[c]),zt.useEffect(()=>{if(o.current)return Rm(!X0(i)),Rm(!X0(t)),c()},[c]),n}function vz(i){const t=xd(()=>Qr(i)),{isStatic:e}=zt.useContext(Yy);if(e){const[,n]=zt.useState(i);zt.useEffect(()=>t.on("change",n),[])}return t}function KR(i,t){const e=vz(t()),n=()=>e.set(t());return n(),qy(()=>{const a=()=>In.preRender(n,!1,!0),o=i.map(c=>c.on("change",a));return()=>{o.forEach(c=>c()),$r(n)}}),e}function yz(i){hm.current=[],i();const t=KR(hm.current,i);return hm.current=void 0,t}function QR(i,t,e,n){if(typeof i=="function")return yz(i);const a=uN(t,e,n);return Array.isArray(i)?gT(i,a):gT([i],([o])=>a(o))}function gT(i,t){const e=xd(()=>[]);return KR(i,()=>{e.length=0;const n=i.length;for(let a=0;a<n;a++)e[a]=i[a].get();return t(e)})}function _z({scrollProgress:i}){const[t,e]=zt.useState(0),n=["Frame A","Frame B","Frame C"],a={initial:{transform:"translateY(20px)",opacity:0},animate:{transform:"translateY(0px)",opacity:1}};return QR(()=>{Math.floor(i.get()*n.length)!==t&&e(Math.floor(i.get()*n.length))}),on.jsx("div",{className:"h-30",children:on.jsx(gN,{children:n.map((o,c)=>on.jsx(KL.div,{animate:t===c?a.animate:a.initial,className:"text-8xl absolute",children:o},c))})})}var zx={exports:{}},Sl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function xz(){return vT||(vT=1,Sl.ConcurrentRoot=1,Sl.ContinuousEventPriority=8,Sl.DefaultEventPriority=32,Sl.DiscreteEventPriority=2,Sl.IdleEventPriority=268435456,Sl.LegacyRoot=0,Sl.NoEventPriority=0),Sl}var yT;function Sz(){return yT||(yT=1,zx.exports=xz()),zx.exports}var qv=Sz();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ky="178",Mz={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},bz={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},JR=0,cM=1,$R=2,Ez=3,tC=0,Qy=1,gm=2,Zr=3,Ol=0,es=1,Ho=2,Dl=0,gf=1,fM=2,hM=3,dM=4,eC=5,Vu=100,nC=101,iC=102,aC=103,sC=104,rC=200,oC=201,lC=202,uC=203,ty=204,ey=205,cC=206,fC=207,hC=208,dC=209,pC=210,mC=211,gC=212,vC=213,yC=214,ny=0,iy=1,ay=2,_f=3,sy=4,ry=5,oy=6,ly=7,ng=0,_C=1,xC=2,Yo=0,SC=1,MC=2,bC=3,pb=4,EC=5,TC=6,AC=7,pM="attached",RC="detached",Jy=300,Ll=301,Xu=302,Lm=303,zm=304,Ed=306,Pm=1e3,gr=1001,Bm=1002,ma=1003,mb=1004,Tz=1004,ed=1005,Az=1005,Yi=1006,vm=1007,Rz=1007,Fo=1008,Cz=1008,yr=1009,gb=1010,vb=1011,ud=1012,$y=1013,zl=1014,Ss=1015,Td=1016,t_=1017,e_=1018,cd=1020,yb=35902,_b=1021,xb=1022,Oa=1023,fd=1026,hd=1027,n_=1028,ig=1029,Sb=1030,i_=1031,wz=1032,a_=1033,ym=33776,_m=33777,xm=33778,Sm=33779,uy=35840,cy=35841,fy=35842,hy=35843,dy=36196,py=37492,my=37496,gy=37808,vy=37809,yy=37810,_y=37811,xy=37812,Sy=37813,My=37814,by=37815,Ey=37816,Ty=37817,Ay=37818,Ry=37819,Cy=37820,wy=37821,Mm=36492,Dy=36494,Uy=36495,Mb=36283,Ny=36284,Oy=36285,Ly=36286,CC=2200,wC=2201,DC=2202,Im=2300,zy=2301,kv=2302,ff=2400,hf=2401,Vm=2402,s_=2500,bb=2501,Dz=0,Uz=1,Nz=2,UC=3200,NC=3201,Oz=3202,Lz=3203,Wu=0,OC=1,Cl="",Ua="srgb",qu="srgb-linear",Hm="linear",Bn="srgb",zz=0,rf=7680,Pz=7681,Bz=7682,Iz=7683,Vz=34055,Hz=34056,Fz=5386,Gz=512,Xz=513,qz=514,kz=515,Yz=516,Wz=517,jz=518,mM=519,LC=512,zC=513,PC=514,Eb=515,BC=516,IC=517,VC=518,HC=519,Fm=35044,Zz=35048,Kz=35040,Qz=35045,Jz=35049,$z=35041,tP=35046,eP=35050,nP=35042,iP="100",gM="300 es",vr=2e3,Gm=2001,aP={COMPUTE:"compute",RENDER:"render"},sP={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},rP={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class Ko{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){const n=this._listeners;if(n===void 0)return;const a=n[t];if(a!==void 0){const o=a.indexOf(e);o!==-1&&a.splice(o,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const n=e[t.type];if(n!==void 0){t.target=this;const a=n.slice(0);for(let o=0,c=a.length;o<c;o++)a[o].call(this,t);t.target=null}}}const Ca=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _T=1234567;const vf=Math.PI/180,dd=180/Math.PI;function qs(){const i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ca[i&255]+Ca[i>>8&255]+Ca[i>>16&255]+Ca[i>>24&255]+"-"+Ca[t&255]+Ca[t>>8&255]+"-"+Ca[t>>16&15|64]+Ca[t>>24&255]+"-"+Ca[e&63|128]+Ca[e>>8&255]+"-"+Ca[e>>16&255]+Ca[e>>24&255]+Ca[n&255]+Ca[n>>8&255]+Ca[n>>16&255]+Ca[n>>24&255]).toLowerCase()}function qe(i,t,e){return Math.max(t,Math.min(e,i))}function Tb(i,t){return(i%t+t)%t}function oP(i,t,e,n,a){return n+(i-t)*(a-n)/(e-t)}function lP(i,t,e){return i!==t?(e-i)/(t-i):0}function bm(i,t,e){return(1-e)*i+e*t}function uP(i,t,e,n){return bm(i,t,1-Math.exp(-e*n))}function cP(i,t=1){return t-Math.abs(Tb(i,t*2)-t)}function fP(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function hP(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function dP(i,t){return i+Math.floor(Math.random()*(t-i+1))}function pP(i,t){return i+Math.random()*(t-i)}function mP(i){return i*(.5-Math.random())}function gP(i){i!==void 0&&(_T=i);let t=_T+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function vP(i){return i*vf}function yP(i){return i*dd}function _P(i){return(i&i-1)===0&&i!==0}function xP(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function SP(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function MP(i,t,e,n,a){const o=Math.cos,c=Math.sin,h=o(e/2),d=c(e/2),m=o((t+n)/2),v=c((t+n)/2),y=o((t-n)/2),_=c((t-n)/2),M=o((n-t)/2),T=c((n-t)/2);switch(a){case"XYX":i.set(h*v,d*y,d*_,h*m);break;case"YZY":i.set(d*_,h*v,d*y,h*m);break;case"ZXZ":i.set(d*y,d*_,h*v,h*m);break;case"XZX":i.set(h*v,d*T,d*M,h*m);break;case"YXY":i.set(d*M,h*v,d*T,h*m);break;case"ZYZ":i.set(d*T,d*M,h*v,h*m);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function $a(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Qe(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const bP={DEG2RAD:vf,RAD2DEG:dd,generateUUID:qs,clamp:qe,euclideanModulo:Tb,mapLinear:oP,inverseLerp:lP,lerp:bm,damp:uP,pingpong:cP,smoothstep:fP,smootherstep:hP,randInt:dP,randFloat:pP,randFloatSpread:mP,seededRandom:gP,degToRad:vP,radToDeg:yP,isPowerOfTwo:_P,ceilPowerOfTwo:xP,floorPowerOfTwo:SP,setQuaternionFromProperEuler:MP,normalize:Qe,denormalize:$a};class It{constructor(t=0,e=0){It.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,a=t.elements;return this.x=a[0]*e+a[3]*n+a[6],this.y=a[1]*e+a[4]*n+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=qe(this.x,t.x,e.x),this.y=qe(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=qe(this.x,t,e),this.y=qe(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qe(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(qe(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),a=Math.sin(e),o=this.x-t.x,c=this.y-t.y;return this.x=o*n-c*a+t.x,this.y=o*a+c*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bs{constructor(t=0,e=0,n=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=a}static slerpFlat(t,e,n,a,o,c,h){let d=n[a+0],m=n[a+1],v=n[a+2],y=n[a+3];const _=o[c+0],M=o[c+1],T=o[c+2],C=o[c+3];if(h===0){t[e+0]=d,t[e+1]=m,t[e+2]=v,t[e+3]=y;return}if(h===1){t[e+0]=_,t[e+1]=M,t[e+2]=T,t[e+3]=C;return}if(y!==C||d!==_||m!==M||v!==T){let R=1-h;const b=d*_+m*M+v*T+y*C,D=b>=0?1:-1,U=1-b*b;if(U>Number.EPSILON){const P=Math.sqrt(U),B=Math.atan2(P,b*D);R=Math.sin(R*B)/P,h=Math.sin(h*B)/P}const N=h*D;if(d=d*R+_*N,m=m*R+M*N,v=v*R+T*N,y=y*R+C*N,R===1-h){const P=1/Math.sqrt(d*d+m*m+v*v+y*y);d*=P,m*=P,v*=P,y*=P}}t[e]=d,t[e+1]=m,t[e+2]=v,t[e+3]=y}static multiplyQuaternionsFlat(t,e,n,a,o,c){const h=n[a],d=n[a+1],m=n[a+2],v=n[a+3],y=o[c],_=o[c+1],M=o[c+2],T=o[c+3];return t[e]=h*T+v*y+d*M-m*_,t[e+1]=d*T+v*_+m*y-h*M,t[e+2]=m*T+v*M+h*_-d*y,t[e+3]=v*T-h*y-d*_-m*M,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,a){return this._x=t,this._y=e,this._z=n,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,a=t._y,o=t._z,c=t._order,h=Math.cos,d=Math.sin,m=h(n/2),v=h(a/2),y=h(o/2),_=d(n/2),M=d(a/2),T=d(o/2);switch(c){case"XYZ":this._x=_*v*y+m*M*T,this._y=m*M*y-_*v*T,this._z=m*v*T+_*M*y,this._w=m*v*y-_*M*T;break;case"YXZ":this._x=_*v*y+m*M*T,this._y=m*M*y-_*v*T,this._z=m*v*T-_*M*y,this._w=m*v*y+_*M*T;break;case"ZXY":this._x=_*v*y-m*M*T,this._y=m*M*y+_*v*T,this._z=m*v*T+_*M*y,this._w=m*v*y-_*M*T;break;case"ZYX":this._x=_*v*y-m*M*T,this._y=m*M*y+_*v*T,this._z=m*v*T-_*M*y,this._w=m*v*y+_*M*T;break;case"YZX":this._x=_*v*y+m*M*T,this._y=m*M*y+_*v*T,this._z=m*v*T-_*M*y,this._w=m*v*y-_*M*T;break;case"XZY":this._x=_*v*y-m*M*T,this._y=m*M*y-_*v*T,this._z=m*v*T+_*M*y,this._w=m*v*y+_*M*T;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,a=Math.sin(n);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],a=e[4],o=e[8],c=e[1],h=e[5],d=e[9],m=e[2],v=e[6],y=e[10],_=n+h+y;if(_>0){const M=.5/Math.sqrt(_+1);this._w=.25/M,this._x=(v-d)*M,this._y=(o-m)*M,this._z=(c-a)*M}else if(n>h&&n>y){const M=2*Math.sqrt(1+n-h-y);this._w=(v-d)/M,this._x=.25*M,this._y=(a+c)/M,this._z=(o+m)/M}else if(h>y){const M=2*Math.sqrt(1+h-n-y);this._w=(o-m)/M,this._x=(a+c)/M,this._y=.25*M,this._z=(d+v)/M}else{const M=2*Math.sqrt(1+y-n-h);this._w=(c-a)/M,this._x=(o+m)/M,this._y=(d+v)/M,this._z=.25*M}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(qe(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(n===0)return this;const a=Math.min(1,e/n);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,a=t._y,o=t._z,c=t._w,h=e._x,d=e._y,m=e._z,v=e._w;return this._x=n*v+c*h+a*m-o*d,this._y=a*v+c*d+o*h-n*m,this._z=o*v+c*m+n*d-a*h,this._w=c*v-n*h-a*d-o*m,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const n=this._x,a=this._y,o=this._z,c=this._w;let h=c*t._w+n*t._x+a*t._y+o*t._z;if(h<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,h=-h):this.copy(t),h>=1)return this._w=c,this._x=n,this._y=a,this._z=o,this;const d=1-h*h;if(d<=Number.EPSILON){const M=1-e;return this._w=M*c+e*this._w,this._x=M*n+e*this._x,this._y=M*a+e*this._y,this._z=M*o+e*this._z,this.normalize(),this}const m=Math.sqrt(d),v=Math.atan2(m,h),y=Math.sin((1-e)*v)/m,_=Math.sin(e*v)/m;return this._w=c*y+this._w*_,this._x=n*y+this._x*_,this._y=a*y+this._y*_,this._z=o*y+this._z*_,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),a=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(a*Math.sin(t),a*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(t=0,e=0,n=0){K.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(xT.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(xT.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*a,this.y=o[1]*e+o[4]*n+o[7]*a,this.z=o[2]*e+o[5]*n+o[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,o=t.elements,c=1/(o[3]*e+o[7]*n+o[11]*a+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*a+o[12])*c,this.y=(o[1]*e+o[5]*n+o[9]*a+o[13])*c,this.z=(o[2]*e+o[6]*n+o[10]*a+o[14])*c,this}applyQuaternion(t){const e=this.x,n=this.y,a=this.z,o=t.x,c=t.y,h=t.z,d=t.w,m=2*(c*a-h*n),v=2*(h*e-o*a),y=2*(o*n-c*e);return this.x=e+d*m+c*y-h*v,this.y=n+d*v+h*m-o*y,this.z=a+d*y+o*v-c*m,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,a=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*a,this.y=o[1]*e+o[5]*n+o[9]*a,this.z=o[2]*e+o[6]*n+o[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=qe(this.x,t.x,e.x),this.y=qe(this.y,t.y,e.y),this.z=qe(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=qe(this.x,t,e),this.y=qe(this.y,t,e),this.z=qe(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qe(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,a=t.y,o=t.z,c=e.x,h=e.y,d=e.z;return this.x=a*d-o*h,this.y=o*c-n*d,this.z=n*h-a*c,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Px.copy(this).projectOnVector(t),this.sub(Px)}reflect(t){return this.sub(Px.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(qe(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,a=this.z-t.z;return e*e+n*n+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const a=Math.sin(e)*t;return this.x=a*Math.sin(n),this.y=Math.cos(e)*t,this.z=a*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Px=new K,xT=new bs;class je{constructor(t,e,n,a,o,c,h,d,m){je.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,a,o,c,h,d,m)}set(t,e,n,a,o,c,h,d,m){const v=this.elements;return v[0]=t,v[1]=a,v[2]=h,v[3]=e,v[4]=o,v[5]=d,v[6]=n,v[7]=c,v[8]=m,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,o=this.elements,c=n[0],h=n[3],d=n[6],m=n[1],v=n[4],y=n[7],_=n[2],M=n[5],T=n[8],C=a[0],R=a[3],b=a[6],D=a[1],U=a[4],N=a[7],P=a[2],B=a[5],H=a[8];return o[0]=c*C+h*D+d*P,o[3]=c*R+h*U+d*B,o[6]=c*b+h*N+d*H,o[1]=m*C+v*D+y*P,o[4]=m*R+v*U+y*B,o[7]=m*b+v*N+y*H,o[2]=_*C+M*D+T*P,o[5]=_*R+M*U+T*B,o[8]=_*b+M*N+T*H,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],c=t[4],h=t[5],d=t[6],m=t[7],v=t[8];return e*c*v-e*h*m-n*o*v+n*h*d+a*o*m-a*c*d}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],c=t[4],h=t[5],d=t[6],m=t[7],v=t[8],y=v*c-h*m,_=h*d-v*o,M=m*o-c*d,T=e*y+n*_+a*M;if(T===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/T;return t[0]=y*C,t[1]=(a*m-v*n)*C,t[2]=(h*n-a*c)*C,t[3]=_*C,t[4]=(v*e-a*d)*C,t[5]=(a*o-h*e)*C,t[6]=M*C,t[7]=(n*d-m*e)*C,t[8]=(c*e-n*o)*C,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,a,o,c,h){const d=Math.cos(o),m=Math.sin(o);return this.set(n*d,n*m,-n*(d*c+m*h)+c+t,-a*m,a*d,-a*(-m*c+d*h)+h+e,0,0,1),this}scale(t,e){return this.premultiply(Bx.makeScale(t,e)),this}rotate(t){return this.premultiply(Bx.makeRotation(-t)),this}translate(t,e){return this.premultiply(Bx.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<9;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Bx=new je;function FC(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}const EP={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function nd(i,t){return new EP[i](t)}function Xm(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function GC(){const i=Xm("canvas");return i.style.display="block",i}const ST={};function sd(i){i in ST||(ST[i]=!0,console.warn(i))}function TP(i,t,e){return new Promise(function(n,a){function o(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:a();break;case i.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:n()}}setTimeout(o,e)})}function AP(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function RP(i){const t=i.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const MT=new je().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),bT=new je().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function CP(){const i={enabled:!0,workingColorSpace:qu,spaces:{},convert:function(a,o,c){return this.enabled===!1||o===c||!o||!c||(this.spaces[o].transfer===Bn&&(a.r=Ul(a.r),a.g=Ul(a.g),a.b=Ul(a.b)),this.spaces[o].primaries!==this.spaces[c].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===Bn&&(a.r=rd(a.r),a.g=rd(a.g),a.b=rd(a.b))),a},workingToColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},colorSpaceToWorking:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Cl?Hm:this.spaces[a].transfer},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,c){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,o){return sd("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(a,o)},toWorkingColorSpace:function(a,o){return sd("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(a,o)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[qu]:{primaries:t,whitePoint:n,transfer:Hm,toXYZ:MT,fromXYZ:bT,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Ua},outputColorSpaceConfig:{drawingBufferColorSpace:Ua}},[Ua]:{primaries:t,whitePoint:n,transfer:Bn,toXYZ:MT,fromXYZ:bT,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Ua}}}),i}const mn=CP();function Ul(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function rd(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let Rh;class XC{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Rh===void 0&&(Rh=Xm("canvas")),Rh.width=t.width,Rh.height=t.height;const a=Rh.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),n=Rh}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Xm("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const a=n.getImageData(0,0,t.width,t.height),o=a.data;for(let c=0;c<o.length;c++)o[c]=Ul(o[c]/255)*255;return n.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Ul(e[n]/255)*255):e[n]=Ul(e[n]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let wP=0;class Fu{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wP++}),this.uuid=qs(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const n={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let c=0,h=a.length;c<h;c++)a[c].isDataTexture?o.push(Ix(a[c].image)):o.push(Ix(a[c]))}else o=Ix(a);n.url=o}return e||(t.images[this.uuid]=n),n}}function Ix(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?XC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let DP=0;const Vx=new K;class vi extends Ko{constructor(t=vi.DEFAULT_IMAGE,e=vi.DEFAULT_MAPPING,n=gr,a=gr,o=Yi,c=Fo,h=Oa,d=yr,m=vi.DEFAULT_ANISOTROPY,v=Cl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:DP++}),this.uuid=qs(),this.name="",this.source=new Fu(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=a,this.magFilter=o,this.minFilter=c,this.anisotropy=m,this.format=h,this.internalFormat=null,this.type=d,this.offset=new It(0,0),this.repeat=new It(1,1),this.center=new It(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new je,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=v,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Vx).x}get height(){return this.source.getSize(Vx).y}get depth(){return this.source.getSize(Vx).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}a&&n&&a.isVector2&&n.isVector2||a&&n&&a.isVector3&&n.isVector3||a&&n&&a.isMatrix3&&n.isMatrix3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Jy)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Pm:t.x=t.x-Math.floor(t.x);break;case gr:t.x=t.x<0?0:1;break;case Bm:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Pm:t.y=t.y-Math.floor(t.y);break;case gr:t.y=t.y<0?0:1;break;case Bm:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}vi.DEFAULT_IMAGE=null;vi.DEFAULT_MAPPING=Jy;vi.DEFAULT_ANISOTROPY=1;class Sn{constructor(t=0,e=0,n=0,a=1){Sn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,a){return this.x=t,this.y=e,this.z=n,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,a=this.z,o=this.w,c=t.elements;return this.x=c[0]*e+c[4]*n+c[8]*a+c[12]*o,this.y=c[1]*e+c[5]*n+c[9]*a+c[13]*o,this.z=c[2]*e+c[6]*n+c[10]*a+c[14]*o,this.w=c[3]*e+c[7]*n+c[11]*a+c[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,a,o;const d=t.elements,m=d[0],v=d[4],y=d[8],_=d[1],M=d[5],T=d[9],C=d[2],R=d[6],b=d[10];if(Math.abs(v-_)<.01&&Math.abs(y-C)<.01&&Math.abs(T-R)<.01){if(Math.abs(v+_)<.1&&Math.abs(y+C)<.1&&Math.abs(T+R)<.1&&Math.abs(m+M+b-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const U=(m+1)/2,N=(M+1)/2,P=(b+1)/2,B=(v+_)/4,H=(y+C)/4,X=(T+R)/4;return U>N&&U>P?U<.01?(n=0,a=.707106781,o=.707106781):(n=Math.sqrt(U),a=B/n,o=H/n):N>P?N<.01?(n=.707106781,a=0,o=.707106781):(a=Math.sqrt(N),n=B/a,o=X/a):P<.01?(n=.707106781,a=.707106781,o=0):(o=Math.sqrt(P),n=H/o,a=X/o),this.set(n,a,o,e),this}let D=Math.sqrt((R-T)*(R-T)+(y-C)*(y-C)+(_-v)*(_-v));return Math.abs(D)<.001&&(D=1),this.x=(R-T)/D,this.y=(y-C)/D,this.z=(_-v)/D,this.w=Math.acos((m+M+b-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=qe(this.x,t.x,e.x),this.y=qe(this.y,t.y,e.y),this.z=qe(this.z,t.z,e.z),this.w=qe(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=qe(this.x,t,e),this.y=qe(this.y,t,e),this.z=qe(this.z,t,e),this.w=qe(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(qe(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ab extends Ko{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Sn(0,0,t,e),this.scissorTest=!1,this.viewport=new Sn(0,0,t,e);const a={width:t,height:e,depth:n.depth},o=new vi(a);this.textures=[];const c=n.count;for(let h=0;h<c;h++)this.textures[h]=o.clone(),this.textures[h].isRenderTargetTexture=!0,this.textures[h].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:Yi,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=n,this.textures[a].isArrayTexture=this.textures[a].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new Fu(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Zo extends Ab{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class r_ extends vi{constructor(t=null,e=1,n=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=ma,this.minFilter=ma,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class UP extends Zo{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new r_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class o_ extends vi{constructor(t=null,e=1,n=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:a},this.magFilter=ma,this.minFilter=ma,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class NP extends Zo{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new o_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class La{constructor(t=new K(1/0,1/0,1/0),e=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(kr.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(kr.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=kr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(n!==void 0){const o=n.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let c=0,h=o.count;c<h;c++)t.isMesh===!0?t.getVertexPosition(c,kr):kr.fromBufferAttribute(o,c),kr.applyMatrix4(t.matrixWorld),this.expandByPoint(kr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),q0.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),q0.copy(n.boundingBox)),q0.applyMatrix4(t.matrixWorld),this.union(q0)}const a=t.children;for(let o=0,c=a.length;o<c;o++)this.expandByObject(a[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,kr),kr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(jp),k0.subVectors(this.max,jp),Ch.subVectors(t.a,jp),wh.subVectors(t.b,jp),Dh.subVectors(t.c,jp),Du.subVectors(wh,Ch),Uu.subVectors(Dh,wh),qc.subVectors(Ch,Dh);let e=[0,-Du.z,Du.y,0,-Uu.z,Uu.y,0,-qc.z,qc.y,Du.z,0,-Du.x,Uu.z,0,-Uu.x,qc.z,0,-qc.x,-Du.y,Du.x,0,-Uu.y,Uu.x,0,-qc.y,qc.x,0];return!Hx(e,Ch,wh,Dh,k0)||(e=[1,0,0,0,1,0,0,0,1],!Hx(e,Ch,wh,Dh,k0))?!1:(Y0.crossVectors(Du,Uu),e=[Y0.x,Y0.y,Y0.z],Hx(e,Ch,wh,Dh,k0))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,kr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(kr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ml[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ml[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ml[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ml[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ml[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ml[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ml[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ml[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ml),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Ml=[new K,new K,new K,new K,new K,new K,new K,new K],kr=new K,q0=new La,Ch=new K,wh=new K,Dh=new K,Du=new K,Uu=new K,qc=new K,jp=new K,k0=new K,Y0=new K,kc=new K;function Hx(i,t,e,n,a){for(let o=0,c=i.length-3;o<=c;o+=3){kc.fromArray(i,o);const h=a.x*Math.abs(kc.x)+a.y*Math.abs(kc.y)+a.z*Math.abs(kc.z),d=t.dot(kc),m=e.dot(kc),v=n.dot(kc);if(Math.max(-Math.max(d,m,v),Math.min(d,m,v))>h)return!1}return!0}const OP=new La,Zp=new K,Fx=new K;class ga{constructor(t=new K,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;e!==void 0?n.copy(e):OP.setFromPoints(t).getCenter(n);let a=0;for(let o=0,c=t.length;o<c;o++)a=Math.max(a,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Zp.subVectors(t,this.center);const e=Zp.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),a=(n-this.radius)*.5;this.center.addScaledVector(Zp,a/n),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Fx.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Zp.copy(t.center).add(Fx)),this.expandByPoint(Zp.copy(t.center).sub(Fx))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const bl=new K,Gx=new K,W0=new K,Nu=new K,Xx=new K,j0=new K,qx=new K;class Ad{constructor(t=new K,e=new K(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,bl)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=bl.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(bl.copy(this.origin).addScaledVector(this.direction,e),bl.distanceToSquared(t))}distanceSqToSegment(t,e,n,a){Gx.copy(t).add(e).multiplyScalar(.5),W0.copy(e).sub(t).normalize(),Nu.copy(this.origin).sub(Gx);const o=t.distanceTo(e)*.5,c=-this.direction.dot(W0),h=Nu.dot(this.direction),d=-Nu.dot(W0),m=Nu.lengthSq(),v=Math.abs(1-c*c);let y,_,M,T;if(v>0)if(y=c*d-h,_=c*h-d,T=o*v,y>=0)if(_>=-T)if(_<=T){const C=1/v;y*=C,_*=C,M=y*(y+c*_+2*h)+_*(c*y+_+2*d)+m}else _=o,y=Math.max(0,-(c*_+h)),M=-y*y+_*(_+2*d)+m;else _=-o,y=Math.max(0,-(c*_+h)),M=-y*y+_*(_+2*d)+m;else _<=-T?(y=Math.max(0,-(-c*o+h)),_=y>0?-o:Math.min(Math.max(-o,-d),o),M=-y*y+_*(_+2*d)+m):_<=T?(y=0,_=Math.min(Math.max(-o,-d),o),M=_*(_+2*d)+m):(y=Math.max(0,-(c*o+h)),_=y>0?o:Math.min(Math.max(-o,-d),o),M=-y*y+_*(_+2*d)+m);else _=c>0?-o:o,y=Math.max(0,-(c*_+h)),M=-y*y+_*(_+2*d)+m;return n&&n.copy(this.origin).addScaledVector(this.direction,y),a&&a.copy(Gx).addScaledVector(W0,_),M}intersectSphere(t,e){bl.subVectors(t.center,this.origin);const n=bl.dot(this.direction),a=bl.dot(bl)-n*n,o=t.radius*t.radius;if(a>o)return null;const c=Math.sqrt(o-a),h=n-c,d=n+c;return d<0?null:h<0?this.at(d,e):this.at(h,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,a,o,c,h,d;const m=1/this.direction.x,v=1/this.direction.y,y=1/this.direction.z,_=this.origin;return m>=0?(n=(t.min.x-_.x)*m,a=(t.max.x-_.x)*m):(n=(t.max.x-_.x)*m,a=(t.min.x-_.x)*m),v>=0?(o=(t.min.y-_.y)*v,c=(t.max.y-_.y)*v):(o=(t.max.y-_.y)*v,c=(t.min.y-_.y)*v),n>c||o>a||((o>n||isNaN(n))&&(n=o),(c<a||isNaN(a))&&(a=c),y>=0?(h=(t.min.z-_.z)*y,d=(t.max.z-_.z)*y):(h=(t.max.z-_.z)*y,d=(t.min.z-_.z)*y),n>d||h>a)||((h>n||n!==n)&&(n=h),(d<a||a!==a)&&(a=d),a<0)?null:this.at(n>=0?n:a,e)}intersectsBox(t){return this.intersectBox(t,bl)!==null}intersectTriangle(t,e,n,a,o){Xx.subVectors(e,t),j0.subVectors(n,t),qx.crossVectors(Xx,j0);let c=this.direction.dot(qx),h;if(c>0){if(a)return null;h=1}else if(c<0)h=-1,c=-c;else return null;Nu.subVectors(this.origin,t);const d=h*this.direction.dot(j0.crossVectors(Nu,j0));if(d<0)return null;const m=h*this.direction.dot(Xx.cross(Nu));if(m<0||d+m>c)return null;const v=-h*Nu.dot(qx);return v<0?null:this.at(v/c,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Pe{constructor(t,e,n,a,o,c,h,d,m,v,y,_,M,T,C,R){Pe.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,a,o,c,h,d,m,v,y,_,M,T,C,R)}set(t,e,n,a,o,c,h,d,m,v,y,_,M,T,C,R){const b=this.elements;return b[0]=t,b[4]=e,b[8]=n,b[12]=a,b[1]=o,b[5]=c,b[9]=h,b[13]=d,b[2]=m,b[6]=v,b[10]=y,b[14]=_,b[3]=M,b[7]=T,b[11]=C,b[15]=R,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Pe().fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,a=1/Uh.setFromMatrixColumn(t,0).length(),o=1/Uh.setFromMatrixColumn(t,1).length(),c=1/Uh.setFromMatrixColumn(t,2).length();return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*c,e[9]=n[9]*c,e[10]=n[10]*c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,a=t.y,o=t.z,c=Math.cos(n),h=Math.sin(n),d=Math.cos(a),m=Math.sin(a),v=Math.cos(o),y=Math.sin(o);if(t.order==="XYZ"){const _=c*v,M=c*y,T=h*v,C=h*y;e[0]=d*v,e[4]=-d*y,e[8]=m,e[1]=M+T*m,e[5]=_-C*m,e[9]=-h*d,e[2]=C-_*m,e[6]=T+M*m,e[10]=c*d}else if(t.order==="YXZ"){const _=d*v,M=d*y,T=m*v,C=m*y;e[0]=_+C*h,e[4]=T*h-M,e[8]=c*m,e[1]=c*y,e[5]=c*v,e[9]=-h,e[2]=M*h-T,e[6]=C+_*h,e[10]=c*d}else if(t.order==="ZXY"){const _=d*v,M=d*y,T=m*v,C=m*y;e[0]=_-C*h,e[4]=-c*y,e[8]=T+M*h,e[1]=M+T*h,e[5]=c*v,e[9]=C-_*h,e[2]=-c*m,e[6]=h,e[10]=c*d}else if(t.order==="ZYX"){const _=c*v,M=c*y,T=h*v,C=h*y;e[0]=d*v,e[4]=T*m-M,e[8]=_*m+C,e[1]=d*y,e[5]=C*m+_,e[9]=M*m-T,e[2]=-m,e[6]=h*d,e[10]=c*d}else if(t.order==="YZX"){const _=c*d,M=c*m,T=h*d,C=h*m;e[0]=d*v,e[4]=C-_*y,e[8]=T*y+M,e[1]=y,e[5]=c*v,e[9]=-h*v,e[2]=-m*v,e[6]=M*y+T,e[10]=_-C*y}else if(t.order==="XZY"){const _=c*d,M=c*m,T=h*d,C=h*m;e[0]=d*v,e[4]=-y,e[8]=m*v,e[1]=_*y+C,e[5]=c*v,e[9]=M*y-T,e[2]=T*y-M,e[6]=h*v,e[10]=C*y+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(LP,t,zP)}lookAt(t,e,n){const a=this.elements;return Gs.subVectors(t,e),Gs.lengthSq()===0&&(Gs.z=1),Gs.normalize(),Ou.crossVectors(n,Gs),Ou.lengthSq()===0&&(Math.abs(n.z)===1?Gs.x+=1e-4:Gs.z+=1e-4,Gs.normalize(),Ou.crossVectors(n,Gs)),Ou.normalize(),Z0.crossVectors(Gs,Ou),a[0]=Ou.x,a[4]=Z0.x,a[8]=Gs.x,a[1]=Ou.y,a[5]=Z0.y,a[9]=Gs.y,a[2]=Ou.z,a[6]=Z0.z,a[10]=Gs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,a=e.elements,o=this.elements,c=n[0],h=n[4],d=n[8],m=n[12],v=n[1],y=n[5],_=n[9],M=n[13],T=n[2],C=n[6],R=n[10],b=n[14],D=n[3],U=n[7],N=n[11],P=n[15],B=a[0],H=a[4],X=a[8],z=a[12],L=a[1],W=a[5],ot=a[9],it=a[13],pt=a[2],gt=a[6],I=a[10],j=a[14],Z=a[3],ct=a[7],k=a[11],tt=a[15];return o[0]=c*B+h*L+d*pt+m*Z,o[4]=c*H+h*W+d*gt+m*ct,o[8]=c*X+h*ot+d*I+m*k,o[12]=c*z+h*it+d*j+m*tt,o[1]=v*B+y*L+_*pt+M*Z,o[5]=v*H+y*W+_*gt+M*ct,o[9]=v*X+y*ot+_*I+M*k,o[13]=v*z+y*it+_*j+M*tt,o[2]=T*B+C*L+R*pt+b*Z,o[6]=T*H+C*W+R*gt+b*ct,o[10]=T*X+C*ot+R*I+b*k,o[14]=T*z+C*it+R*j+b*tt,o[3]=D*B+U*L+N*pt+P*Z,o[7]=D*H+U*W+N*gt+P*ct,o[11]=D*X+U*ot+N*I+P*k,o[15]=D*z+U*it+N*j+P*tt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],a=t[8],o=t[12],c=t[1],h=t[5],d=t[9],m=t[13],v=t[2],y=t[6],_=t[10],M=t[14],T=t[3],C=t[7],R=t[11],b=t[15];return T*(+o*d*y-a*m*y-o*h*_+n*m*_+a*h*M-n*d*M)+C*(+e*d*M-e*m*_+o*c*_-a*c*M+a*m*v-o*d*v)+R*(+e*m*y-e*h*M-o*c*y+n*c*M+o*h*v-n*m*v)+b*(-a*h*v-e*d*y+e*h*_+a*c*y-n*c*_+n*d*v)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],a=t[2],o=t[3],c=t[4],h=t[5],d=t[6],m=t[7],v=t[8],y=t[9],_=t[10],M=t[11],T=t[12],C=t[13],R=t[14],b=t[15],D=y*R*m-C*_*m+C*d*M-h*R*M-y*d*b+h*_*b,U=T*_*m-v*R*m-T*d*M+c*R*M+v*d*b-c*_*b,N=v*C*m-T*y*m+T*h*M-c*C*M-v*h*b+c*y*b,P=T*y*d-v*C*d-T*h*_+c*C*_+v*h*R-c*y*R,B=e*D+n*U+a*N+o*P;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/B;return t[0]=D*H,t[1]=(C*_*o-y*R*o-C*a*M+n*R*M+y*a*b-n*_*b)*H,t[2]=(h*R*o-C*d*o+C*a*m-n*R*m-h*a*b+n*d*b)*H,t[3]=(y*d*o-h*_*o-y*a*m+n*_*m+h*a*M-n*d*M)*H,t[4]=U*H,t[5]=(v*R*o-T*_*o+T*a*M-e*R*M-v*a*b+e*_*b)*H,t[6]=(T*d*o-c*R*o-T*a*m+e*R*m+c*a*b-e*d*b)*H,t[7]=(c*_*o-v*d*o+v*a*m-e*_*m-c*a*M+e*d*M)*H,t[8]=N*H,t[9]=(T*y*o-v*C*o-T*n*M+e*C*M+v*n*b-e*y*b)*H,t[10]=(c*C*o-T*h*o+T*n*m-e*C*m-c*n*b+e*h*b)*H,t[11]=(v*h*o-c*y*o-v*n*m+e*y*m+c*n*M-e*h*M)*H,t[12]=P*H,t[13]=(v*C*a-T*y*a+T*n*_-e*C*_-v*n*R+e*y*R)*H,t[14]=(T*h*a-c*C*a-T*n*d+e*C*d+c*n*R-e*h*R)*H,t[15]=(c*y*a-v*h*a+v*n*d-e*y*d-c*n*_+e*h*_)*H,this}scale(t){const e=this.elements,n=t.x,a=t.y,o=t.z;return e[0]*=n,e[4]*=a,e[8]*=o,e[1]*=n,e[5]*=a,e[9]*=o,e[2]*=n,e[6]*=a,e[10]*=o,e[3]*=n,e[7]*=a,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,a))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),a=Math.sin(e),o=1-n,c=t.x,h=t.y,d=t.z,m=o*c,v=o*h;return this.set(m*c+n,m*h-a*d,m*d+a*h,0,m*h+a*d,v*h+n,v*d-a*c,0,m*d-a*h,v*d+a*c,o*d*d+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,a,o,c){return this.set(1,n,o,0,t,1,c,0,e,a,1,0,0,0,0,1),this}compose(t,e,n){const a=this.elements,o=e._x,c=e._y,h=e._z,d=e._w,m=o+o,v=c+c,y=h+h,_=o*m,M=o*v,T=o*y,C=c*v,R=c*y,b=h*y,D=d*m,U=d*v,N=d*y,P=n.x,B=n.y,H=n.z;return a[0]=(1-(C+b))*P,a[1]=(M+N)*P,a[2]=(T-U)*P,a[3]=0,a[4]=(M-N)*B,a[5]=(1-(_+b))*B,a[6]=(R+D)*B,a[7]=0,a[8]=(T+U)*H,a[9]=(R-D)*H,a[10]=(1-(_+C))*H,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,n){const a=this.elements;let o=Uh.set(a[0],a[1],a[2]).length();const c=Uh.set(a[4],a[5],a[6]).length(),h=Uh.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),t.x=a[12],t.y=a[13],t.z=a[14],Yr.copy(this);const m=1/o,v=1/c,y=1/h;return Yr.elements[0]*=m,Yr.elements[1]*=m,Yr.elements[2]*=m,Yr.elements[4]*=v,Yr.elements[5]*=v,Yr.elements[6]*=v,Yr.elements[8]*=y,Yr.elements[9]*=y,Yr.elements[10]*=y,e.setFromRotationMatrix(Yr),n.x=o,n.y=c,n.z=h,this}makePerspective(t,e,n,a,o,c,h=vr){const d=this.elements,m=2*o/(e-t),v=2*o/(n-a),y=(e+t)/(e-t),_=(n+a)/(n-a);let M,T;if(h===vr)M=-(c+o)/(c-o),T=-2*c*o/(c-o);else if(h===Gm)M=-c/(c-o),T=-c*o/(c-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return d[0]=m,d[4]=0,d[8]=y,d[12]=0,d[1]=0,d[5]=v,d[9]=_,d[13]=0,d[2]=0,d[6]=0,d[10]=M,d[14]=T,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,n,a,o,c,h=vr){const d=this.elements,m=1/(e-t),v=1/(n-a),y=1/(c-o),_=(e+t)*m,M=(n+a)*v;let T,C;if(h===vr)T=(c+o)*y,C=-2*y;else if(h===Gm)T=o*y,C=-1*y;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return d[0]=2*m,d[4]=0,d[8]=0,d[12]=-_,d[1]=0,d[5]=2*v,d[9]=0,d[13]=-M,d[2]=0,d[6]=0,d[10]=C,d[14]=-T,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let a=0;a<16;a++)if(e[a]!==n[a])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Uh=new K,Yr=new Pe,LP=new K(0,0,0),zP=new K(1,1,1),Ou=new K,Z0=new K,Gs=new K,ET=new Pe,TT=new bs;class ks{constructor(t=0,e=0,n=0,a=ks.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,a=this._order){return this._x=t,this._y=e,this._z=n,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const a=t.elements,o=a[0],c=a[4],h=a[8],d=a[1],m=a[5],v=a[9],y=a[2],_=a[6],M=a[10];switch(e){case"XYZ":this._y=Math.asin(qe(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-v,M),this._z=Math.atan2(-c,o)):(this._x=Math.atan2(_,m),this._z=0);break;case"YXZ":this._x=Math.asin(-qe(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(h,M),this._z=Math.atan2(d,m)):(this._y=Math.atan2(-y,o),this._z=0);break;case"ZXY":this._x=Math.asin(qe(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-y,M),this._z=Math.atan2(-c,m)):(this._y=0,this._z=Math.atan2(d,o));break;case"ZYX":this._y=Math.asin(-qe(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(_,M),this._z=Math.atan2(d,o)):(this._x=0,this._z=Math.atan2(-c,m));break;case"YZX":this._z=Math.asin(qe(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-v,m),this._y=Math.atan2(-y,o)):(this._x=0,this._y=Math.atan2(h,M));break;case"XZY":this._z=Math.asin(-qe(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(_,m),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-v,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,n===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return ET.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ET,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return TT.setFromEuler(this),this.setFromQuaternion(TT,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ks.DEFAULT_ORDER="XYZ";class pd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let PP=0;const AT=new K,Nh=new bs,El=new Pe,K0=new K,Kp=new K,BP=new K,IP=new bs,RT=new K(1,0,0),CT=new K(0,1,0),wT=new K(0,0,1),DT={type:"added"},VP={type:"removed"},Oh={type:"childadded",child:null},kx={type:"childremoved",child:null};class Mn extends Ko{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:PP++}),this.uuid=qs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DEFAULT_UP.clone();const t=new K,e=new ks,n=new bs,a=new K(1,1,1);function o(){n.setFromEuler(e,!1)}function c(){e.setFromQuaternion(n,void 0,!1)}e._onChange(o),n._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Pe},normalMatrix:{value:new je}}),this.matrix=new Pe,this.matrixWorld=new Pe,this.matrixAutoUpdate=Mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Nh.setFromAxisAngle(t,e),this.quaternion.multiply(Nh),this}rotateOnWorldAxis(t,e){return Nh.setFromAxisAngle(t,e),this.quaternion.premultiply(Nh),this}rotateX(t){return this.rotateOnAxis(RT,t)}rotateY(t){return this.rotateOnAxis(CT,t)}rotateZ(t){return this.rotateOnAxis(wT,t)}translateOnAxis(t,e){return AT.copy(t).applyQuaternion(this.quaternion),this.position.add(AT.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(RT,t)}translateY(t){return this.translateOnAxis(CT,t)}translateZ(t){return this.translateOnAxis(wT,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(El.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?K0.copy(t):K0.set(t,e,n);const a=this.parent;this.updateWorldMatrix(!0,!1),Kp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?El.lookAt(Kp,K0,this.up):El.lookAt(K0,Kp,this.up),this.quaternion.setFromRotationMatrix(El),a&&(El.extractRotation(a.matrixWorld),Nh.setFromRotationMatrix(El),this.quaternion.premultiply(Nh.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(DT),Oh.child=t,this.dispatchEvent(Oh),Oh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(VP),kx.child=t,this.dispatchEvent(kx),kx.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),El.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),El.multiply(t.parent.matrixWorld)),t.applyMatrix4(El),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(DT),Oh.child=t,this.dispatchEvent(Oh),Oh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,a=this.children.length;n<a;n++){const c=this.children[n].getObjectByProperty(t,e);if(c!==void 0)return c}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const a=this.children;for(let o=0,c=a.length;o<c;o++)a[o].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kp,t,BP),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Kp,IP,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,a=e.length;n<a;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let o=0,c=a.length;o<c;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(h=>({...h,boundingBox:h.boundingBox?h.boundingBox.toJSON():void 0,boundingSphere:h.boundingSphere?h.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(h=>({...h})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function o(h,d){return h[d.uuid]===void 0&&(h[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(t.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const d=h.shapes;if(Array.isArray(d))for(let m=0,v=d.length;m<v;m++){const y=d[m];o(t.shapes,y)}else o(t.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let d=0,m=this.material.length;d<m;d++)h.push(o(t.materials,this.material[d]));a.material=h}else a.material=o(t.materials,this.material);if(this.children.length>0){a.children=[];for(let h=0;h<this.children.length;h++)a.children.push(this.children[h].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let h=0;h<this.animations.length;h++){const d=this.animations[h];a.animations.push(o(t.animations,d))}}if(e){const h=c(t.geometries),d=c(t.materials),m=c(t.textures),v=c(t.images),y=c(t.shapes),_=c(t.skeletons),M=c(t.animations),T=c(t.nodes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),m.length>0&&(n.textures=m),v.length>0&&(n.images=v),y.length>0&&(n.shapes=y),_.length>0&&(n.skeletons=_),M.length>0&&(n.animations=M),T.length>0&&(n.nodes=T)}return n.object=a,n;function c(h){const d=[];for(const m in h){const v=h[m];delete v.metadata,d.push(v)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const a=t.children[n];this.add(a.clone())}return this}}Mn.DEFAULT_UP=new K(0,1,0);Mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Wr=new K,Tl=new K,Yx=new K,Al=new K,Lh=new K,zh=new K,UT=new K,Wx=new K,jx=new K,Zx=new K,Kx=new Sn,Qx=new Sn,Jx=new Sn;class _s{constructor(t=new K,e=new K,n=new K){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,a){a.subVectors(n,e),Wr.subVectors(t,e),a.cross(Wr);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(t,e,n,a,o){Wr.subVectors(a,e),Tl.subVectors(n,e),Yx.subVectors(t,e);const c=Wr.dot(Wr),h=Wr.dot(Tl),d=Wr.dot(Yx),m=Tl.dot(Tl),v=Tl.dot(Yx),y=c*m-h*h;if(y===0)return o.set(0,0,0),null;const _=1/y,M=(m*d-h*v)*_,T=(c*v-h*d)*_;return o.set(1-M-T,T,M)}static containsPoint(t,e,n,a){return this.getBarycoord(t,e,n,a,Al)===null?!1:Al.x>=0&&Al.y>=0&&Al.x+Al.y<=1}static getInterpolation(t,e,n,a,o,c,h,d){return this.getBarycoord(t,e,n,a,Al)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(o,Al.x),d.addScaledVector(c,Al.y),d.addScaledVector(h,Al.z),d)}static getInterpolatedAttribute(t,e,n,a,o,c){return Kx.setScalar(0),Qx.setScalar(0),Jx.setScalar(0),Kx.fromBufferAttribute(t,e),Qx.fromBufferAttribute(t,n),Jx.fromBufferAttribute(t,a),c.setScalar(0),c.addScaledVector(Kx,o.x),c.addScaledVector(Qx,o.y),c.addScaledVector(Jx,o.z),c}static isFrontFacing(t,e,n,a){return Wr.subVectors(n,e),Tl.subVectors(t,e),Wr.cross(Tl).dot(a)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,a){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,n,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Wr.subVectors(this.c,this.b),Tl.subVectors(this.a,this.b),Wr.cross(Tl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return _s.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return _s.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,a,o){return _s.getInterpolation(t,this.a,this.b,this.c,e,n,a,o)}containsPoint(t){return _s.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return _s.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,a=this.b,o=this.c;let c,h;Lh.subVectors(a,n),zh.subVectors(o,n),Wx.subVectors(t,n);const d=Lh.dot(Wx),m=zh.dot(Wx);if(d<=0&&m<=0)return e.copy(n);jx.subVectors(t,a);const v=Lh.dot(jx),y=zh.dot(jx);if(v>=0&&y<=v)return e.copy(a);const _=d*y-v*m;if(_<=0&&d>=0&&v<=0)return c=d/(d-v),e.copy(n).addScaledVector(Lh,c);Zx.subVectors(t,o);const M=Lh.dot(Zx),T=zh.dot(Zx);if(T>=0&&M<=T)return e.copy(o);const C=M*m-d*T;if(C<=0&&m>=0&&T<=0)return h=m/(m-T),e.copy(n).addScaledVector(zh,h);const R=v*T-M*y;if(R<=0&&y-v>=0&&M-T>=0)return UT.subVectors(o,a),h=(y-v)/(y-v+(M-T)),e.copy(a).addScaledVector(UT,h);const b=1/(R+C+_);return c=C*b,h=_*b,e.copy(n).addScaledVector(Lh,c).addScaledVector(zh,h)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const qC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Lu={h:0,s:0,l:0},Q0={h:0,s:0,l:0};function $x(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}class ce{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Ua){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,mn.colorSpaceToWorking(this,e),this}setRGB(t,e,n,a=mn.workingColorSpace){return this.r=t,this.g=e,this.b=n,mn.colorSpaceToWorking(this,a),this}setHSL(t,e,n,a=mn.workingColorSpace){if(t=Tb(t,1),e=qe(e,0,1),n=qe(n,0,1),e===0)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+e):n+e-n*e,c=2*n-o;this.r=$x(c,o,t+1/3),this.g=$x(c,o,t),this.b=$x(c,o,t-1/3)}return mn.colorSpaceToWorking(this,a),this}setStyle(t,e=Ua){function n(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const c=a[1],h=a[2];switch(c){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=a[1],c=o.length;if(c===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(c===6)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Ua){const n=qC[t.toLowerCase()];return n!==void 0?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ul(t.r),this.g=Ul(t.g),this.b=Ul(t.b),this}copyLinearToSRGB(t){return this.r=rd(t.r),this.g=rd(t.g),this.b=rd(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ua){return mn.workingToColorSpace(wa.copy(this),t),Math.round(qe(wa.r*255,0,255))*65536+Math.round(qe(wa.g*255,0,255))*256+Math.round(qe(wa.b*255,0,255))}getHexString(t=Ua){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=mn.workingColorSpace){mn.workingToColorSpace(wa.copy(this),e);const n=wa.r,a=wa.g,o=wa.b,c=Math.max(n,a,o),h=Math.min(n,a,o);let d,m;const v=(h+c)/2;if(h===c)d=0,m=0;else{const y=c-h;switch(m=v<=.5?y/(c+h):y/(2-c-h),c){case n:d=(a-o)/y+(a<o?6:0);break;case a:d=(o-n)/y+2;break;case o:d=(n-a)/y+4;break}d/=6}return t.h=d,t.s=m,t.l=v,t}getRGB(t,e=mn.workingColorSpace){return mn.workingToColorSpace(wa.copy(this),e),t.r=wa.r,t.g=wa.g,t.b=wa.b,t}getStyle(t=Ua){mn.workingToColorSpace(wa.copy(this),t);const e=wa.r,n=wa.g,a=wa.b;return t!==Ua?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(a*255)})`}offsetHSL(t,e,n){return this.getHSL(Lu),this.setHSL(Lu.h+t,Lu.s+e,Lu.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Lu),t.getHSL(Q0);const n=bm(Lu.h,Q0.h,e),a=bm(Lu.s,Q0.s,e),o=bm(Lu.l,Q0.l,e);return this.setHSL(n,a,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,a=this.b,o=t.elements;return this.r=o[0]*e+o[3]*n+o[6]*a,this.g=o[1]*e+o[4]*n+o[7]*a,this.b=o[2]*e+o[5]*n+o[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const wa=new ce;ce.NAMES=qC;let HP=0;class za extends Ko{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:HP++}),this.uuid=qs(),this.name="",this.type="Material",this.blending=gf,this.side=Ol,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ty,this.blendDst=ey,this.blendEquation=Vu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ce(0,0,0),this.blendAlpha=0,this.depthFunc=_f,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rf,this.stencilZFail=rf,this.stencilZPass=rf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):this[e]=n}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==gf&&(n.blending=this.blending),this.side!==Ol&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==ty&&(n.blendSrc=this.blendSrc),this.blendDst!==ey&&(n.blendDst=this.blendDst),this.blendEquation!==Vu&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==_f&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==mM&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rf&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rf&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rf&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function a(o){const c=[];for(const h in o){const d=o[h];delete d.metadata,c.push(d)}return c}if(e){const o=a(t.textures),c=a(t.images);o.length>0&&(n.textures=o),c.length>0&&(n.images=c)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const a=e.length;n=new Array(a);for(let o=0;o!==a;++o)n[o]=e[o].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class ju extends za{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ce(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=ng,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const wl=FP();function FP(){const i=new ArrayBuffer(4),t=new Float32Array(i),e=new Uint32Array(i),n=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const m=d-127;m<-27?(n[d]=0,n[d|256]=32768,a[d]=24,a[d|256]=24):m<-14?(n[d]=1024>>-m-14,n[d|256]=1024>>-m-14|32768,a[d]=-m-1,a[d|256]=-m-1):m<=15?(n[d]=m+15<<10,n[d|256]=m+15<<10|32768,a[d]=13,a[d|256]=13):m<128?(n[d]=31744,n[d|256]=64512,a[d]=24,a[d|256]=24):(n[d]=31744,n[d|256]=64512,a[d]=13,a[d|256]=13)}const o=new Uint32Array(2048),c=new Uint32Array(64),h=new Uint32Array(64);for(let d=1;d<1024;++d){let m=d<<13,v=0;for(;(m&8388608)===0;)m<<=1,v-=8388608;m&=-8388609,v+=947912704,o[d]=m|v}for(let d=1024;d<2048;++d)o[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)c[d]=d<<23;c[31]=1199570944,c[32]=2147483648;for(let d=33;d<63;++d)c[d]=2147483648+(d-32<<23);c[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(h[d]=1024);return{floatView:t,uint32View:e,baseTable:n,shiftTable:a,mantissaTable:o,exponentTable:c,offsetTable:h}}function vs(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=qe(i,-65504,65504),wl.floatView[0]=i;const t=wl.uint32View[0],e=t>>23&511;return wl.baseTable[e]+((t&8388607)>>wl.shiftTable[e])}function om(i){const t=i>>10;return wl.uint32View[0]=wl.mantissaTable[wl.offsetTable[t]+(i&1023)]+wl.exponentTable[t],wl.floatView[0]}class GP{static toHalfFloat(t){return vs(t)}static fromHalfFloat(t){return om(t)}}const Li=new K,J0=new It;let XP=0;class kn{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:XP++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=Fm,this.updateRanges=[],this.gpuType=Ss,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[t+a]=e.array[n+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)J0.fromBufferAttribute(this,e),J0.applyMatrix3(t),this.setXY(e,J0.x,J0.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Li.fromBufferAttribute(this,e),Li.applyMatrix3(t),this.setXYZ(e,Li.x,Li.y,Li.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Li.fromBufferAttribute(this,e),Li.applyMatrix4(t),this.setXYZ(e,Li.x,Li.y,Li.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Li.fromBufferAttribute(this,e),Li.applyNormalMatrix(t),this.setXYZ(e,Li.x,Li.y,Li.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Li.fromBufferAttribute(this,e),Li.transformDirection(t),this.setXYZ(e,Li.x,Li.y,Li.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=$a(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Qe(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=$a(e,this.array)),e}setX(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=$a(e,this.array)),e}setY(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=$a(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=$a(e,this.array)),e}setW(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this}setXYZW(t,e,n,a,o){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array),o=Qe(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=a,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Fm&&(t.usage=this.usage),t}}class qP extends kn{constructor(t,e,n){super(new Int8Array(t),e,n)}}class kP extends kn{constructor(t,e,n){super(new Uint8Array(t),e,n)}}class YP extends kn{constructor(t,e,n){super(new Uint8ClampedArray(t),e,n)}}class WP extends kn{constructor(t,e,n){super(new Int16Array(t),e,n)}}class Rb extends kn{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class jP extends kn{constructor(t,e,n){super(new Int32Array(t),e,n)}}class Cb extends kn{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ZP extends kn{constructor(t,e,n){super(new Uint16Array(t),e,n),this.isFloat16BufferAttribute=!0}getX(t){let e=om(this.array[t*this.itemSize]);return this.normalized&&(e=$a(e,this.array)),e}setX(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize]=vs(e),this}getY(t){let e=om(this.array[t*this.itemSize+1]);return this.normalized&&(e=$a(e,this.array)),e}setY(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+1]=vs(e),this}getZ(t){let e=om(this.array[t*this.itemSize+2]);return this.normalized&&(e=$a(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+2]=vs(e),this}getW(t){let e=om(this.array[t*this.itemSize+3]);return this.normalized&&(e=$a(e,this.array)),e}setW(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+3]=vs(e),this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array)),this.array[t+0]=vs(e),this.array[t+1]=vs(n),this}setXYZ(t,e,n,a){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array)),this.array[t+0]=vs(e),this.array[t+1]=vs(n),this.array[t+2]=vs(a),this}setXYZW(t,e,n,a,o){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array),o=Qe(o,this.array)),this.array[t+0]=vs(e),this.array[t+1]=vs(n),this.array[t+2]=vs(a),this.array[t+3]=vs(o),this}}class me extends kn{constructor(t,e,n){super(new Float32Array(t),e,n)}}let KP=0;const pr=new Pe,tS=new Mn,Ph=new K,Xs=new La,Qp=new La,ea=new K;class Je extends Ko{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:KP++}),this.uuid=qs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(FC(t)?Cb:Rb)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const o=new je().getNormalMatrix(t);n.applyNormalMatrix(o),n.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return pr.makeRotationFromQuaternion(t),this.applyMatrix4(pr),this}rotateX(t){return pr.makeRotationX(t),this.applyMatrix4(pr),this}rotateY(t){return pr.makeRotationY(t),this.applyMatrix4(pr),this}rotateZ(t){return pr.makeRotationZ(t),this.applyMatrix4(pr),this}translate(t,e,n){return pr.makeTranslation(t,e,n),this.applyMatrix4(pr),this}scale(t,e,n){return pr.makeScale(t,e,n),this.applyMatrix4(pr),this}lookAt(t){return tS.lookAt(t),tS.updateMatrix(),this.applyMatrix4(tS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ph).negate(),this.translate(Ph.x,Ph.y,Ph.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const n=[];for(let a=0,o=t.length;a<o;a++){const c=t[a];n.push(c.x,c.y,c.z||0)}this.setAttribute("position",new me(n,3))}else{const n=Math.min(t.length,e.count);for(let a=0;a<n;a++){const o=t[a];e.setXYZ(a,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new La);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,a=e.length;n<a;n++){const o=e[n];Xs.setFromBufferAttribute(o),this.morphTargetsRelative?(ea.addVectors(this.boundingBox.min,Xs.min),this.boundingBox.expandByPoint(ea),ea.addVectors(this.boundingBox.max,Xs.max),this.boundingBox.expandByPoint(ea)):(this.boundingBox.expandByPoint(Xs.min),this.boundingBox.expandByPoint(Xs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ga);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(t){const n=this.boundingSphere.center;if(Xs.setFromBufferAttribute(t),e)for(let o=0,c=e.length;o<c;o++){const h=e[o];Qp.setFromBufferAttribute(h),this.morphTargetsRelative?(ea.addVectors(Xs.min,Qp.min),Xs.expandByPoint(ea),ea.addVectors(Xs.max,Qp.max),Xs.expandByPoint(ea)):(Xs.expandByPoint(Qp.min),Xs.expandByPoint(Qp.max))}Xs.getCenter(n);let a=0;for(let o=0,c=t.count;o<c;o++)ea.fromBufferAttribute(t,o),a=Math.max(a,n.distanceToSquared(ea));if(e)for(let o=0,c=e.length;o<c;o++){const h=e[o],d=this.morphTargetsRelative;for(let m=0,v=h.count;m<v;m++)ea.fromBufferAttribute(h,m),d&&(Ph.fromBufferAttribute(t,m),ea.add(Ph)),a=Math.max(a,n.distanceToSquared(ea))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.position,a=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kn(new Float32Array(4*n.count),4));const c=this.getAttribute("tangent"),h=[],d=[];for(let X=0;X<n.count;X++)h[X]=new K,d[X]=new K;const m=new K,v=new K,y=new K,_=new It,M=new It,T=new It,C=new K,R=new K;function b(X,z,L){m.fromBufferAttribute(n,X),v.fromBufferAttribute(n,z),y.fromBufferAttribute(n,L),_.fromBufferAttribute(o,X),M.fromBufferAttribute(o,z),T.fromBufferAttribute(o,L),v.sub(m),y.sub(m),M.sub(_),T.sub(_);const W=1/(M.x*T.y-T.x*M.y);isFinite(W)&&(C.copy(v).multiplyScalar(T.y).addScaledVector(y,-M.y).multiplyScalar(W),R.copy(y).multiplyScalar(M.x).addScaledVector(v,-T.x).multiplyScalar(W),h[X].add(C),h[z].add(C),h[L].add(C),d[X].add(R),d[z].add(R),d[L].add(R))}let D=this.groups;D.length===0&&(D=[{start:0,count:t.count}]);for(let X=0,z=D.length;X<z;++X){const L=D[X],W=L.start,ot=L.count;for(let it=W,pt=W+ot;it<pt;it+=3)b(t.getX(it+0),t.getX(it+1),t.getX(it+2))}const U=new K,N=new K,P=new K,B=new K;function H(X){P.fromBufferAttribute(a,X),B.copy(P);const z=h[X];U.copy(z),U.sub(P.multiplyScalar(P.dot(z))).normalize(),N.crossVectors(B,z);const W=N.dot(d[X])<0?-1:1;c.setXYZW(X,U.x,U.y,U.z,W)}for(let X=0,z=D.length;X<z;++X){const L=D[X],W=L.start,ot=L.count;for(let it=W,pt=W+ot;it<pt;it+=3)H(t.getX(it+0)),H(t.getX(it+1)),H(t.getX(it+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new kn(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let _=0,M=n.count;_<M;_++)n.setXYZ(_,0,0,0);const a=new K,o=new K,c=new K,h=new K,d=new K,m=new K,v=new K,y=new K;if(t)for(let _=0,M=t.count;_<M;_+=3){const T=t.getX(_+0),C=t.getX(_+1),R=t.getX(_+2);a.fromBufferAttribute(e,T),o.fromBufferAttribute(e,C),c.fromBufferAttribute(e,R),v.subVectors(c,o),y.subVectors(a,o),v.cross(y),h.fromBufferAttribute(n,T),d.fromBufferAttribute(n,C),m.fromBufferAttribute(n,R),h.add(v),d.add(v),m.add(v),n.setXYZ(T,h.x,h.y,h.z),n.setXYZ(C,d.x,d.y,d.z),n.setXYZ(R,m.x,m.y,m.z)}else for(let _=0,M=e.count;_<M;_+=3)a.fromBufferAttribute(e,_+0),o.fromBufferAttribute(e,_+1),c.fromBufferAttribute(e,_+2),v.subVectors(c,o),y.subVectors(a,o),v.cross(y),n.setXYZ(_+0,v.x,v.y,v.z),n.setXYZ(_+1,v.x,v.y,v.z),n.setXYZ(_+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)ea.fromBufferAttribute(t,e),ea.normalize(),t.setXYZ(e,ea.x,ea.y,ea.z)}toNonIndexed(){function t(h,d){const m=h.array,v=h.itemSize,y=h.normalized,_=new m.constructor(d.length*v);let M=0,T=0;for(let C=0,R=d.length;C<R;C++){h.isInterleavedBufferAttribute?M=d[C]*h.data.stride+h.offset:M=d[C]*v;for(let b=0;b<v;b++)_[T++]=m[M++]}return new kn(_,v,y)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Je,n=this.index.array,a=this.attributes;for(const h in a){const d=a[h],m=t(d,n);e.setAttribute(h,m)}const o=this.morphAttributes;for(const h in o){const d=[],m=o[h];for(let v=0,y=m.length;v<y;v++){const _=m[v],M=t(_,n);d.push(M)}e.morphAttributes[h]=d}e.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,d=c.length;h<d;h++){const m=c[h];e.addGroup(m.start,m.count,m.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const m in d)d[m]!==void 0&&(t[m]=d[m]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const d in n){const m=n[d];t.data.attributes[d]=m.toJSON(t.data)}const a={};let o=!1;for(const d in this.morphAttributes){const m=this.morphAttributes[d],v=[];for(let y=0,_=m.length;y<_;y++){const M=m[y];v.push(M.toJSON(t.data))}v.length>0&&(a[d]=v,o=!0)}o&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(t.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(t.data.boundingSphere=h.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone());const a=t.attributes;for(const m in a){const v=a[m];this.setAttribute(m,v.clone(e))}const o=t.morphAttributes;for(const m in o){const v=[],y=o[m];for(let _=0,M=y.length;_<M;_++)v.push(y[_].clone(e));this.morphAttributes[m]=v}this.morphTargetsRelative=t.morphTargetsRelative;const c=t.groups;for(let m=0,v=c.length;m<v;m++){const y=c[m];this.addGroup(y.start,y.count,y.materialIndex)}const h=t.boundingBox;h!==null&&(this.boundingBox=h.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NT=new Pe,Yc=new Ad,$0=new ga,OT=new K,tv=new K,ev=new K,nv=new K,eS=new K,iv=new K,LT=new K,av=new K;class Pi extends Mn{constructor(t=new Je,e=new ju){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=a.length;o<c;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(t,e){const n=this.geometry,a=n.attributes.position,o=n.morphAttributes.position,c=n.morphTargetsRelative;e.fromBufferAttribute(a,t);const h=this.morphTargetInfluences;if(o&&h){iv.set(0,0,0);for(let d=0,m=o.length;d<m;d++){const v=h[d],y=o[d];v!==0&&(eS.fromBufferAttribute(y,t),c?iv.addScaledVector(eS,v):iv.addScaledVector(eS.sub(e),v))}e.add(iv)}return e}raycast(t,e){const n=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),$0.copy(n.boundingSphere),$0.applyMatrix4(o),Yc.copy(t.ray).recast(t.near),!($0.containsPoint(Yc.origin)===!1&&(Yc.intersectSphere($0,OT)===null||Yc.origin.distanceToSquared(OT)>(t.far-t.near)**2))&&(NT.copy(o).invert(),Yc.copy(t.ray).applyMatrix4(NT),!(n.boundingBox!==null&&Yc.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Yc)))}_computeIntersections(t,e,n){let a;const o=this.geometry,c=this.material,h=o.index,d=o.attributes.position,m=o.attributes.uv,v=o.attributes.uv1,y=o.attributes.normal,_=o.groups,M=o.drawRange;if(h!==null)if(Array.isArray(c))for(let T=0,C=_.length;T<C;T++){const R=_[T],b=c[R.materialIndex],D=Math.max(R.start,M.start),U=Math.min(h.count,Math.min(R.start+R.count,M.start+M.count));for(let N=D,P=U;N<P;N+=3){const B=h.getX(N),H=h.getX(N+1),X=h.getX(N+2);a=sv(this,b,t,n,m,v,y,B,H,X),a&&(a.faceIndex=Math.floor(N/3),a.face.materialIndex=R.materialIndex,e.push(a))}}else{const T=Math.max(0,M.start),C=Math.min(h.count,M.start+M.count);for(let R=T,b=C;R<b;R+=3){const D=h.getX(R),U=h.getX(R+1),N=h.getX(R+2);a=sv(this,c,t,n,m,v,y,D,U,N),a&&(a.faceIndex=Math.floor(R/3),e.push(a))}}else if(d!==void 0)if(Array.isArray(c))for(let T=0,C=_.length;T<C;T++){const R=_[T],b=c[R.materialIndex],D=Math.max(R.start,M.start),U=Math.min(d.count,Math.min(R.start+R.count,M.start+M.count));for(let N=D,P=U;N<P;N+=3){const B=N,H=N+1,X=N+2;a=sv(this,b,t,n,m,v,y,B,H,X),a&&(a.faceIndex=Math.floor(N/3),a.face.materialIndex=R.materialIndex,e.push(a))}}else{const T=Math.max(0,M.start),C=Math.min(d.count,M.start+M.count);for(let R=T,b=C;R<b;R+=3){const D=R,U=R+1,N=R+2;a=sv(this,c,t,n,m,v,y,D,U,N),a&&(a.faceIndex=Math.floor(R/3),e.push(a))}}}}function QP(i,t,e,n,a,o,c,h){let d;if(t.side===es?d=n.intersectTriangle(c,o,a,!0,h):d=n.intersectTriangle(a,o,c,t.side===Ol,h),d===null)return null;av.copy(h),av.applyMatrix4(i.matrixWorld);const m=e.ray.origin.distanceTo(av);return m<e.near||m>e.far?null:{distance:m,point:av.clone(),object:i}}function sv(i,t,e,n,a,o,c,h,d,m){i.getVertexPosition(h,tv),i.getVertexPosition(d,ev),i.getVertexPosition(m,nv);const v=QP(i,t,e,n,tv,ev,nv,LT);if(v){const y=new K;_s.getBarycoord(LT,tv,ev,nv,y),a&&(v.uv=_s.getInterpolatedAttribute(a,h,d,m,y,new It)),o&&(v.uv1=_s.getInterpolatedAttribute(o,h,d,m,y,new It)),c&&(v.normal=_s.getInterpolatedAttribute(c,h,d,m,y,new K),v.normal.dot(n.direction)>0&&v.normal.multiplyScalar(-1));const _={a:h,b:d,c:m,normal:new K,materialIndex:0};_s.getNormal(tv,ev,nv,_.normal),v.face=_,v.barycoord=y}return v}class bf extends Je{constructor(t=1,e=1,n=1,a=1,o=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:a,heightSegments:o,depthSegments:c};const h=this;a=Math.floor(a),o=Math.floor(o),c=Math.floor(c);const d=[],m=[],v=[],y=[];let _=0,M=0;T("z","y","x",-1,-1,n,e,t,c,o,0),T("z","y","x",1,-1,n,e,-t,c,o,1),T("x","z","y",1,1,t,n,e,a,c,2),T("x","z","y",1,-1,t,n,-e,a,c,3),T("x","y","z",1,-1,t,e,n,a,o,4),T("x","y","z",-1,-1,t,e,-n,a,o,5),this.setIndex(d),this.setAttribute("position",new me(m,3)),this.setAttribute("normal",new me(v,3)),this.setAttribute("uv",new me(y,2));function T(C,R,b,D,U,N,P,B,H,X,z){const L=N/H,W=P/X,ot=N/2,it=P/2,pt=B/2,gt=H+1,I=X+1;let j=0,Z=0;const ct=new K;for(let k=0;k<I;k++){const tt=k*W-it;for(let bt=0;bt<gt;bt++){const Rt=bt*L-ot;ct[C]=Rt*D,ct[R]=tt*U,ct[b]=pt,m.push(ct.x,ct.y,ct.z),ct[C]=0,ct[R]=0,ct[b]=B>0?1:-1,v.push(ct.x,ct.y,ct.z),y.push(bt/H),y.push(1-k/X),j+=1}}for(let k=0;k<X;k++)for(let tt=0;tt<H;tt++){const bt=_+tt+gt*k,Rt=_+tt+gt*(k+1),et=_+(tt+1)+gt*(k+1),Et=_+(tt+1)+gt*k;d.push(bt,Rt,Et),d.push(Rt,et,Et),Z+=6}h.addGroup(M,Z,z),M+=Z,_+=j}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new bf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function md(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const a=i[e][n];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=a.clone():Array.isArray(a)?t[e][n]=a.slice():t[e][n]=a}}return t}function Ja(i){const t={};for(let e=0;e<i.length;e++){const n=md(i[e]);for(const a in n)t[a]=n[a]}return t}function JP(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function kC(i){const t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:mn.workingColorSpace}const YC={clone:md,merge:Ja};var $P=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,tB=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class to extends za{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$P,this.fragmentShader=tB,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=md(t.uniforms),this.uniformsGroups=JP(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const c=this.uniforms[a].value;c&&c.isTexture?e.uniforms[a]={type:"t",value:c.toJSON(t).uuid}:c&&c.isColor?e.uniforms[a]={type:"c",value:c.getHex()}:c&&c.isVector2?e.uniforms[a]={type:"v2",value:c.toArray()}:c&&c.isVector3?e.uniforms[a]={type:"v3",value:c.toArray()}:c&&c.isVector4?e.uniforms[a]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?e.uniforms[a]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?e.uniforms[a]={type:"m4",value:c.toArray()}:e.uniforms[a]={value:c}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const a in this.extensions)this.extensions[a]===!0&&(n[a]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class l_ extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pe,this.projectionMatrix=new Pe,this.projectionMatrixInverse=new Pe,this.coordinateSystem=vr}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zu=new K,zT=new It,PT=new It;class ia extends l_{constructor(t=50,e=1,n=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=dd*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(vf*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return dd*2*Math.atan(Math.tan(vf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){zu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(zu.x,zu.y).multiplyScalar(-t/zu.z),zu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zu.x,zu.y).multiplyScalar(-t/zu.z)}getViewSize(t,e){return this.getViewBounds(t,zT,PT),e.subVectors(PT,zT)}setViewOffset(t,e,n,a,o,c){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(vf*.5*this.fov)/this.zoom,n=2*e,a=this.aspect*n,o=-.5*a;const c=this.view;if(this.view!==null&&this.view.enabled){const d=c.fullWidth,m=c.fullHeight;o+=c.offsetX*a/d,e-=c.offsetY*n/m,a*=c.width/d,n*=c.height/m}const h=this.filmOffset;h!==0&&(o+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Bh=-90,Ih=1;class WC extends Mn{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ia(Bh,Ih,t,e);a.layers=this.layers,this.add(a);const o=new ia(Bh,Ih,t,e);o.layers=this.layers,this.add(o);const c=new ia(Bh,Ih,t,e);c.layers=this.layers,this.add(c);const h=new ia(Bh,Ih,t,e);h.layers=this.layers,this.add(h);const d=new ia(Bh,Ih,t,e);d.layers=this.layers,this.add(d);const m=new ia(Bh,Ih,t,e);m.layers=this.layers,this.add(m)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,a,o,c,h,d]=e;for(const m of e)this.remove(m);if(t===vr)n.up.set(0,1,0),n.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===Gm)n.up.set(0,-1,0),n.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const m of e)this.add(m),m.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,c,h,d,m,v]=this.children,y=t.getRenderTarget(),_=t.getActiveCubeFace(),M=t.getActiveMipmapLevel(),T=t.xr.enabled;t.xr.enabled=!1;const C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,a),t.render(e,o),t.setRenderTarget(n,1,a),t.render(e,c),t.setRenderTarget(n,2,a),t.render(e,h),t.setRenderTarget(n,3,a),t.render(e,d),t.setRenderTarget(n,4,a),t.render(e,m),n.texture.generateMipmaps=C,t.setRenderTarget(n,5,a),t.render(e,v),t.setRenderTarget(y,_,M),t.xr.enabled=T,n.texture.needsPMREMUpdate=!0}}class ag extends vi{constructor(t=[],e=Ll,n,a,o,c,h,d,m,v){super(t,e,n,a,o,c,h,d,m,v),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class jC extends Zo{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},a=[n,n,n,n,n,n];this.texture=new ag(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new bf(5,5,5),o=new to({name:"CubemapFromEquirect",uniforms:md(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:es,blending:Dl});o.uniforms.tEquirect.value=e;const c=new Pi(a,o),h=e.minFilter;return e.minFilter===Fo&&(e.minFilter=Yi),new WC(1,10,this).update(t,c),e.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(t,e=!0,n=!0,a=!0){const o=t.getRenderTarget();for(let c=0;c<6;c++)t.setRenderTarget(this,c),t.clear(e,n,a);t.setRenderTarget(o)}}class id extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const eB={type:"move"};class Yv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new id,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new id,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new id,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let a=null,o=null,c=null;const h=this._targetRay,d=this._grip,m=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(m&&t.hand){c=!0;for(const C of t.hand.values()){const R=e.getJointPose(C,n),b=this._getHandJoint(m,C);R!==null&&(b.matrix.fromArray(R.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=R.radius),b.visible=R!==null}const v=m.joints["index-finger-tip"],y=m.joints["thumb-tip"],_=v.position.distanceTo(y.position),M=.02,T=.005;m.inputState.pinching&&_>M+T?(m.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!m.inputState.pinching&&_<=M-T&&(m.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),o!==null&&(d.matrix.fromArray(o.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,o.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(o.linearVelocity)):d.hasLinearVelocity=!1,o.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(o.angularVelocity)):d.hasAngularVelocity=!1));h!==null&&(a=e.getPose(t.targetRaySpace,n),a===null&&o!==null&&(a=o),a!==null&&(h.matrix.fromArray(a.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,a.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(a.linearVelocity)):h.hasLinearVelocity=!1,a.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(a.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(eB)))}return h!==null&&(h.visible=a!==null),d!==null&&(d.visible=o!==null),m!==null&&(m.visible=c!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const n=new id;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class u_{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new ce(t),this.density=e}clone(){return new u_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class c_{constructor(t,e=1,n=1e3){this.isFog=!0,this.name="",this.color=new ce(t),this.near=e,this.far=n}clone(){return new c_(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class wb extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ks,this.environmentIntensity=1,this.environmentRotation=new ks,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class f_{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Fm,this.updateRanges=[],this.version=0,this.uuid=qs()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let a=0,o=this.stride;a<o;a++)this.array[t+a]=e.array[n+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=qs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Qa=new K;class xf{constructor(t,e,n,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.applyMatrix4(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.applyNormalMatrix(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Qa.fromBufferAttribute(this,e),Qa.transformDirection(t),this.setXYZ(e,Qa.x,Qa.y,Qa.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=$a(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Qe(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=Qe(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Qe(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Qe(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Qe(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=$a(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=$a(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=$a(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=$a(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this}setXYZW(t,e,n,a,o){return t=t*this.data.stride+this.offset,this.normalized&&(e=Qe(e,this.array),n=Qe(n,this.array),a=Qe(a,this.array),o=Qe(o,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=a,this.data.array[t+3]=o,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return new kn(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new xf(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const a=n*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)e.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Db extends za{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ce(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Vh;const Jp=new K,Hh=new K,Fh=new K,Gh=new It,$p=new It,ZC=new Pe,rv=new K,tm=new K,ov=new K,BT=new It,nS=new It,IT=new It;class KC extends Mn{constructor(t=new Db){if(super(),this.isSprite=!0,this.type="Sprite",Vh===void 0){Vh=new Je;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new f_(e,5);Vh.setIndex([0,1,2,0,2,3]),Vh.setAttribute("position",new xf(n,3,0,!1)),Vh.setAttribute("uv",new xf(n,2,3,!1))}this.geometry=Vh,this.material=t,this.center=new It(.5,.5),this.count=1}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Hh.setFromMatrixScale(this.matrixWorld),ZC.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Fh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Hh.multiplyScalar(-Fh.z);const n=this.material.rotation;let a,o;n!==0&&(o=Math.cos(n),a=Math.sin(n));const c=this.center;lv(rv.set(-.5,-.5,0),Fh,c,Hh,a,o),lv(tm.set(.5,-.5,0),Fh,c,Hh,a,o),lv(ov.set(.5,.5,0),Fh,c,Hh,a,o),BT.set(0,0),nS.set(1,0),IT.set(1,1);let h=t.ray.intersectTriangle(rv,tm,ov,!1,Jp);if(h===null&&(lv(tm.set(-.5,.5,0),Fh,c,Hh,a,o),nS.set(0,1),h=t.ray.intersectTriangle(rv,ov,tm,!1,Jp),h===null))return;const d=t.ray.origin.distanceTo(Jp);d<t.near||d>t.far||e.push({distance:d,point:Jp.clone(),uv:_s.getInterpolation(Jp,rv,tm,ov,BT,nS,IT,new It),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function lv(i,t,e,n,a,o){Gh.subVectors(i,e).addScalar(.5).multiply(n),a!==void 0?($p.x=o*Gh.x-a*Gh.y,$p.y=a*Gh.x+o*Gh.y):$p.copy(Gh),i.copy(t),i.x+=$p.x,i.y+=$p.y,i.applyMatrix4(ZC)}const uv=new K,VT=new K;class QC extends Mn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let n=0,a=e.length;n<a;n++){const o=e[n];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,n=0){e=Math.abs(e);const a=this.levels;let o;for(o=0;o<a.length&&!(e<a[o].distance);o++);return a.splice(o,0,{distance:e,hysteresis:n,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let n=0;n<e.length;n++)if(e[n].distance===t){const a=e.splice(n,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,a;for(n=1,a=e.length;n<a;n++){let o=e[n].distance;if(e[n].object.visible&&(o-=o*e[n].hysteresis),t<o)break}return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){uv.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(uv);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){uv.setFromMatrixPosition(t.matrixWorld),VT.setFromMatrixPosition(this.matrixWorld);const n=uv.distanceTo(VT)/t.zoom;e[0].object.visible=!0;let a,o;for(a=1,o=e.length;a<o;a++){let c=e[a].distance;if(e[a].object.visible&&(c-=c*e[a].hysteresis),n>=c)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<o;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let a=0,o=n.length;a<o;a++){const c=n[a];e.object.levels.push({object:c.object.uuid,distance:c.distance,hysteresis:c.hysteresis})}return e}}const HT=new K,FT=new Sn,GT=new Sn,nB=new K,XT=new Pe,cv=new K,iS=new ga,qT=new Pe,aS=new Ad;class JC extends Pi{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=pM,this.bindMatrix=new Pe,this.bindMatrixInverse=new Pe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new La),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,cv),this.boundingBox.expandByPoint(cv)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ga),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,cv),this.boundingSphere.expandByPoint(cv)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const n=this.material,a=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),iS.copy(this.boundingSphere),iS.applyMatrix4(a),t.ray.intersectsSphere(iS)!==!1&&(qT.copy(a).invert(),aS.copy(t.ray).applyMatrix4(qT),!(this.boundingBox!==null&&aS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,aS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Sn,e=this.geometry.attributes.skinWeight;for(let n=0,a=e.count;n<a;n++){t.fromBufferAttribute(e,n);const o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===pM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===RC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,a=this.geometry;FT.fromBufferAttribute(a.attributes.skinIndex,t),GT.fromBufferAttribute(a.attributes.skinWeight,t),HT.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let o=0;o<4;o++){const c=GT.getComponent(o);if(c!==0){const h=FT.getComponent(o);XT.multiplyMatrices(n.bones[h].matrixWorld,n.boneInverses[h]),e.addScaledVector(nB.copy(HT).applyMatrix4(XT),c)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Ub extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wo extends vi{constructor(t=null,e=1,n=1,a,o,c,h,d,m=ma,v=ma,y,_){super(null,c,h,d,m,v,a,o,y,_),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kT=new Pe,iB=new Pe;class h_{constructor(t=[],e=[]){this.uuid=qs(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new Pe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Pe;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,a=this.boneTexture;for(let o=0,c=t.length;o<c;o++){const h=t[o]?t[o].matrixWorld:iB;kT.multiplyMatrices(h,e[o]),kT.toArray(n,o*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new h_(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Wo(e,t,t,Oa,Ss);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,a=t.bones.length;n<a;n++){const o=t.bones[n];let c=e[o];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),c=new Ub),this.bones.push(c),this.boneInverses.push(new Pe().fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let a=0,o=e.length;a<o;a++){const c=e[a];t.bones.push(c.uuid);const h=n[a];t.boneInverses.push(h.toArray())}return t}}class gd extends kn{constructor(t,e,n,a=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Xh=new Pe,YT=new Pe,fv=[],WT=new La,aB=new Pe,em=new Pi,nm=new ga;class $C extends Pi{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new gd(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<n;a++)this.setMatrixAt(a,aB)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new La),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xh),WT.copy(t.boundingBox).applyMatrix4(Xh),this.boundingBox.union(WT)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new ga),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Xh),nm.copy(t.boundingSphere).applyMatrix4(Xh),this.boundingSphere.union(nm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const n=e.morphTargetInfluences,a=this.morphTexture.source.data.data,o=n.length+1,c=t*o+1;for(let h=0;h<n.length;h++)n[h]=a[c+h]}raycast(t,e){const n=this.matrixWorld,a=this.count;if(em.geometry=this.geometry,em.material=this.material,em.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),nm.copy(this.boundingSphere),nm.applyMatrix4(n),t.ray.intersectsSphere(nm)!==!1))for(let o=0;o<a;o++){this.getMatrixAt(o,Xh),YT.multiplyMatrices(n,Xh),em.matrixWorld=YT,em.raycast(t,fv);for(let c=0,h=fv.length;c<h;c++){const d=fv[c];d.instanceId=o,d.object=this,e.push(d)}fv.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new gd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const n=e.morphTargetInfluences,a=n.length+1;this.morphTexture===null&&(this.morphTexture=new Wo(new Float32Array(a*this.count),a,this.count,n_,Ss));const o=this.morphTexture.source.data.data;let c=0;for(let m=0;m<n.length;m++)c+=n[m];const h=this.geometry.morphTargetsRelative?1:1-c,d=a*t;o[d]=h,o.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const sS=new K,sB=new K,rB=new je;class Iu{constructor(t=new K(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,a){return this.normal.set(t,e,n),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const a=sS.subVectors(n,e).cross(sB.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(sS),a=this.normal.dot(n);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:e.copy(t.start).addScaledVector(n,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||rB.getNormalMatrix(t),a=this.coplanarPoint(sS).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Wc=new ga,oB=new It(.5,.5),hv=new K;class Rd{constructor(t=new Iu,e=new Iu,n=new Iu,a=new Iu,o=new Iu,c=new Iu){this.planes=[t,e,n,a,o,c]}set(t,e,n,a,o,c){const h=this.planes;return h[0].copy(t),h[1].copy(e),h[2].copy(n),h[3].copy(a),h[4].copy(o),h[5].copy(c),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=vr){const n=this.planes,a=t.elements,o=a[0],c=a[1],h=a[2],d=a[3],m=a[4],v=a[5],y=a[6],_=a[7],M=a[8],T=a[9],C=a[10],R=a[11],b=a[12],D=a[13],U=a[14],N=a[15];if(n[0].setComponents(d-o,_-m,R-M,N-b).normalize(),n[1].setComponents(d+o,_+m,R+M,N+b).normalize(),n[2].setComponents(d+c,_+v,R+T,N+D).normalize(),n[3].setComponents(d-c,_-v,R-T,N-D).normalize(),n[4].setComponents(d-h,_-y,R-C,N-U).normalize(),e===vr)n[5].setComponents(d+h,_+y,R+C,N+U).normalize();else if(e===Gm)n[5].setComponents(h,y,C,U).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Wc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Wc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Wc)}intersectsSprite(t){Wc.center.set(0,0,0);const e=oB.distanceTo(t.center);return Wc.radius=.7071067811865476+e,Wc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Wc)}intersectsSphere(t){const e=this.planes,n=t.center,a=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(n)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const a=e[n];if(hv.x=a.normal.x>0?t.max.x:t.min.x,hv.y=a.normal.y>0?t.max.y:t.min.y,hv.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(hv)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Io=new Pe,Vo=new Rd;class d_{constructor(){this.coordinateSystem=vr}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Vo.setFromProjectionMatrix(Io,this.coordinateSystem),Vo.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Vo.setFromProjectionMatrix(Io,this.coordinateSystem),Vo.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Vo.setFromProjectionMatrix(Io,this.coordinateSystem),Vo.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Vo.setFromProjectionMatrix(Io,this.coordinateSystem),Vo.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let n=0;n<e.cameras.length;n++){const a=e.cameras[n];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Vo.setFromProjectionMatrix(Io,this.coordinateSystem),Vo.containsPoint(t))return!0}return!1}clone(){return new d_}}function rS(i,t){return i-t}function lB(i,t){return i.z-t.z}function uB(i,t){return t.z-i.z}class cB{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,n,a){const o=this.pool,c=this.list;this.index>=o.length&&o.push({start:-1,count:-1,z:-1,index:-1});const h=o[this.index];c.push(h),this.index++,h.start=t,h.count=e,h.z=n,h.index=a}reset(){this.list.length=0,this.index=0}}const gs=new Pe,fB=new ce(1,1,1),jT=new Rd,hB=new d_,dv=new La,jc=new ga,im=new K,ZT=new K,dB=new K,oS=new cB,Da=new Pi,pv=[];function pB(i,t,e=0){const n=t.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==t.array.constructor){const a=i.count;for(let o=0;o<a;o++)for(let c=0;c<n;c++)t.setComponent(o+e,c,i.getComponent(o,c))}else t.array.set(i.array,e*n);t.needsUpdate=!0}function Zc(i,t){if(i.constructor!==t.constructor){const e=Math.min(i.length,t.length);for(let n=0;n<e;n++)t[n]=i[n]}else{const e=Math.min(i.length,t.length);t.set(new i.constructor(i.buffer,0,e))}}class tw extends Pi{constructor(t,e,n=e*2,a){super(new Je,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),n=new Wo(e,t,t,Oa,Ss);this._matricesTexture=n}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),n=new Wo(e,t,t,ig,zl);this._indirectTexture=n}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),n=new Wo(e,t,t,Oa,Ss);n.colorSpace=mn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(t){const e=this.geometry,n=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in t.attributes){const c=t.getAttribute(o),{array:h,itemSize:d,normalized:m}=c,v=new h.constructor(n*d),y=new kn(v,d,m);e.setAttribute(o,y)}if(t.getIndex()!==null){const o=n>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new kn(o,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in e.attributes){if(!t.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const a=t.getAttribute(n),o=e.getAttribute(n);if(a.itemSize!==o.itemSize||a.normalized!==o.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new La);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const o=e[n].geometryIndex;this.getMatrixAt(n,gs),this.getBoundingBoxAt(o,dv).applyMatrix4(gs),t.union(dv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ga);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let n=0,a=e.length;n<a;n++){if(e[n].active===!1)continue;const o=e[n].geometryIndex;this.getMatrixAt(n,gs),this.getBoundingSphereAt(o,jc).applyMatrix4(gs),t.union(jc)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(rS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=n):(a=this._instanceInfo.length,this._instanceInfo.push(n));const o=this._matricesTexture;gs.identity().toArray(o.image.data,a*16),o.needsUpdate=!0;const c=this._colorsTexture;return c&&(fB.toArray(c.image.data,a*4),c.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,n=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},o=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const c=t.getIndex();if(c!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=n===-1?c.count:n),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(rS),d=this._availableGeometryIds.shift(),o[d]=a):(d=this._geometryCount,this._geometryCount++,o.push(a)),this.setGeometryAt(d,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const n=this.geometry,a=n.getIndex()!==null,o=n.getIndex(),c=e.getIndex(),h=this._geometryInfo[t];if(a&&c.count>h.reservedIndexCount||e.attributes.position.count>h.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=h.vertexStart,m=h.reservedVertexCount;h.vertexCount=e.getAttribute("position").count;for(const v in n.attributes){const y=e.getAttribute(v),_=n.getAttribute(v);pB(y,_,d);const M=y.itemSize;for(let T=y.count,C=m;T<C;T++){const R=d+T;for(let b=0;b<M;b++)_.setComponent(R,b,0)}_.needsUpdate=!0,_.addUpdateRange(d*M,m*M)}if(a){const v=h.indexStart,y=h.reservedIndexCount;h.indexCount=e.getIndex().count;for(let _=0;_<c.count;_++)o.setX(v+_,d+c.getX(_));for(let _=c.count,M=y;_<M;_++)o.setX(v+_,d);o.needsUpdate=!0,o.addUpdateRange(v,h.reservedIndexCount)}return h.start=a?h.indexStart:h.vertexStart,h.count=a?h.indexCount:h.vertexCount,h.boundingBox=null,e.boundingBox!==null&&(h.boundingBox=e.boundingBox.clone()),h.boundingSphere=null,e.boundingSphere!==null&&(h.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const n=this._instanceInfo;for(let a=0,o=n.length;a<o;a++)n[a].active&&n[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const n=this._geometryInfo,a=n.map((c,h)=>h).sort((c,h)=>n[c].vertexStart-n[h].vertexStart),o=this.geometry;for(let c=0,h=n.length;c<h;c++){const d=a[c],m=n[d];if(m.active!==!1){if(o.index!==null){if(m.indexStart!==e){const{indexStart:v,vertexStart:y,reservedIndexCount:_}=m,M=o.index,T=M.array,C=t-y;for(let R=v;R<v+_;R++)T[R]=T[R]+C;M.array.copyWithin(e,v,v+_),M.addUpdateRange(e,_),m.indexStart=e}e+=m.reservedIndexCount}if(m.vertexStart!==t){const{vertexStart:v,reservedVertexCount:y}=m,_=o.attributes;for(const M in _){const T=_[M],{array:C,itemSize:R}=T;C.copyWithin(t*R,v*R,(v+y)*R),T.addUpdateRange(t*R,y*R)}m.vertexStart=t}t+=m.reservedVertexCount,m.start=o.index?m.indexStart:m.vertexStart,this._nextIndexStart=o.index?m.indexStart+m.reservedIndexCount:0,this._nextVertexStart=m.vertexStart+m.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const o=new La,c=n.index,h=n.attributes.position;for(let d=a.start,m=a.start+a.count;d<m;d++){let v=d;c&&(v=c.getX(v)),o.expandByPoint(im.fromBufferAttribute(h,v))}a.boundingBox=o}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const n=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const o=new ga;this.getBoundingBoxAt(t,dv),dv.getCenter(o.center);const c=n.index,h=n.attributes.position;let d=0;for(let m=a.start,v=a.start+a.count;m<v;m++){let y=m;c&&(y=c.getX(y)),im.fromBufferAttribute(h,y),d=Math.max(d,o.center.distanceToSquared(im))}o.radius=Math.sqrt(d),a.boundingSphere=o}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const n=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),n.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const n=this._geometryInfo[t];return e.vertexStart=n.vertexStart,e.vertexCount=n.vertexCount,e.reservedVertexCount=n.reservedVertexCount,e.indexStart=n.indexStart,e.indexCount=n.indexCount,e.reservedIndexCount=n.reservedIndexCount,e.start=n.start,e.count=n.count,e}setInstanceCount(t){const e=this._availableInstanceIds,n=this._instanceInfo;for(e.sort(rS);e[e.length-1]===n.length;)n.pop(),e.pop();if(t<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),o=new Int32Array(t);Zc(this._multiDrawCounts,a),Zc(this._multiDrawStarts,o),this._multiDrawCounts=a,this._multiDrawStarts=o,this._maxInstanceCount=t;const c=this._indirectTexture,h=this._matricesTexture,d=this._colorsTexture;c.dispose(),this._initIndirectTexture(),Zc(c.image.data,this._indirectTexture.image.data),h.dispose(),this._initMatricesTexture(),Zc(h.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Zc(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const n=[...this._geometryInfo].filter(h=>h.active);if(Math.max(...n.map(h=>h.vertexStart+h.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const o=this.geometry;o.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Je,this._initializeGeometry(o));const c=this.geometry;o.index&&Zc(o.index.array,c.index.array);for(const h in o.attributes)Zc(o.attributes[h].array,c.attributes[h].array)}raycast(t,e){const n=this._instanceInfo,a=this._geometryInfo,o=this.matrixWorld,c=this.geometry;Da.material=this.material,Da.geometry.index=c.index,Da.geometry.attributes=c.attributes,Da.geometry.boundingBox===null&&(Da.geometry.boundingBox=new La),Da.geometry.boundingSphere===null&&(Da.geometry.boundingSphere=new ga);for(let h=0,d=n.length;h<d;h++){if(!n[h].visible||!n[h].active)continue;const m=n[h].geometryIndex,v=a[m];Da.geometry.setDrawRange(v.start,v.count),this.getMatrixAt(h,Da.matrixWorld).premultiply(o),this.getBoundingBoxAt(m,Da.geometry.boundingBox),this.getBoundingSphereAt(m,Da.geometry.boundingSphere),Da.raycast(t,pv);for(let y=0,_=pv.length;y<_;y++){const M=pv[y];M.object=this,M.batchId=h,e.push(M)}pv.length=0}Da.material=null,Da.geometry.index=null,Da.geometry.attributes={},Da.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,n,a,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const c=a.getIndex(),h=c===null?1:c.array.BYTES_PER_ELEMENT,d=this._instanceInfo,m=this._multiDrawStarts,v=this._multiDrawCounts,y=this._geometryInfo,_=this.perObjectFrustumCulled,M=this._indirectTexture,T=M.image.data,C=n.isArrayCamera?hB:jT;_&&!n.isArrayCamera&&(gs.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),jT.setFromProjectionMatrix(gs,t.coordinateSystem));let R=0;if(this.sortObjects){gs.copy(this.matrixWorld).invert(),im.setFromMatrixPosition(n.matrixWorld).applyMatrix4(gs),ZT.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(gs);for(let U=0,N=d.length;U<N;U++)if(d[U].visible&&d[U].active){const P=d[U].geometryIndex;this.getMatrixAt(U,gs),this.getBoundingSphereAt(P,jc).applyMatrix4(gs);let B=!1;if(_&&(B=!C.intersectsSphere(jc,n)),!B){const H=y[P],X=dB.subVectors(jc.center,im).dot(ZT);oS.push(H.start,H.count,X,U)}}const b=oS.list,D=this.customSort;D===null?b.sort(o.transparent?uB:lB):D.call(this,b,n);for(let U=0,N=b.length;U<N;U++){const P=b[U];m[R]=P.start*h,v[R]=P.count,T[R]=P.index,R++}oS.reset()}else for(let b=0,D=d.length;b<D;b++)if(d[b].visible&&d[b].active){const U=d[b].geometryIndex;let N=!1;if(_&&(this.getMatrixAt(b,gs),this.getBoundingSphereAt(U,jc).applyMatrix4(gs),N=!C.intersectsSphere(jc,n)),!N){const P=y[U];m[R]=P.start*h,v[R]=P.count,T[R]=b,R++}}M.needsUpdate=!0,this._multiDrawCount=R,this._visibilityChanged=!1}onBeforeShadow(t,e,n,a,o,c){this.onBeforeRender(t,null,a,o,c)}}class ns extends za{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ce(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Py=new K,By=new K,KT=new Pe,am=new Ad,mv=new ga,lS=new K,QT=new K;class ku extends Mn{constructor(t=new Je,e=new ns){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[0];for(let a=1,o=e.count;a<o;a++)Py.fromBufferAttribute(e,a-1),By.fromBufferAttribute(e,a),n[a]=n[a-1],n[a]+=Py.distanceTo(By);t.setAttribute("lineDistance",new me(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,o=t.params.Line.threshold,c=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),mv.copy(n.boundingSphere),mv.applyMatrix4(a),mv.radius+=o,t.ray.intersectsSphere(mv)===!1)return;KT.copy(a).invert(),am.copy(t.ray).applyMatrix4(KT);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,m=this.isLineSegments?2:1,v=n.index,_=n.attributes.position;if(v!==null){const M=Math.max(0,c.start),T=Math.min(v.count,c.start+c.count);for(let C=M,R=T-1;C<R;C+=m){const b=v.getX(C),D=v.getX(C+1),U=gv(this,t,am,d,b,D,C);U&&e.push(U)}if(this.isLineLoop){const C=v.getX(T-1),R=v.getX(M),b=gv(this,t,am,d,C,R,T-1);b&&e.push(b)}}else{const M=Math.max(0,c.start),T=Math.min(_.count,c.start+c.count);for(let C=M,R=T-1;C<R;C+=m){const b=gv(this,t,am,d,C,C+1,C);b&&e.push(b)}if(this.isLineLoop){const C=gv(this,t,am,d,T-1,M,T-1);C&&e.push(C)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=a.length;o<c;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function gv(i,t,e,n,a,o,c){const h=i.geometry.attributes.position;if(Py.fromBufferAttribute(h,a),By.fromBufferAttribute(h,o),e.distanceSqToSegment(Py,By,lS,QT)>n)return;lS.applyMatrix4(i.matrixWorld);const m=t.ray.origin.distanceTo(lS);if(!(m<t.near||m>t.far))return{distance:m,point:QT.clone().applyMatrix4(i.matrixWorld),index:c,face:null,faceIndex:null,barycoord:null,object:i}}const JT=new K,$T=new K;class Qo extends ku{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,n=[];for(let a=0,o=e.count;a<o;a+=2)JT.fromBufferAttribute(e,a),$T.fromBufferAttribute(e,a+1),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+JT.distanceTo($T);t.setAttribute("lineDistance",new me(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ew extends ku{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class Nb extends za{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ce(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const tA=new Pe,vM=new Ad,vv=new ga,yv=new K;class nw extends Mn{constructor(t=new Je,e=new Nb){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,a=this.matrixWorld,o=t.params.Points.threshold,c=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),vv.copy(n.boundingSphere),vv.applyMatrix4(a),vv.radius+=o,t.ray.intersectsSphere(vv)===!1)return;tA.copy(a).invert(),vM.copy(t.ray).applyMatrix4(tA);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,m=n.index,y=n.attributes.position;if(m!==null){const _=Math.max(0,c.start),M=Math.min(m.count,c.start+c.count);for(let T=_,C=M;T<C;T++){const R=m.getX(T);yv.fromBufferAttribute(y,R),eA(yv,R,d,a,t,e,this)}}else{const _=Math.max(0,c.start),M=Math.min(y.count,c.start+c.count);for(let T=_,C=M;T<C;T++)yv.fromBufferAttribute(y,T),eA(yv,T,d,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const a=e[n[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=a.length;o<c;o++){const h=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function eA(i,t,e,n,a,o,c){const h=vM.distanceSqToPoint(i);if(h<e){const d=new K;vM.closestPointToPoint(i,d),d.applyMatrix4(n);const m=a.ray.origin.distanceTo(d);if(m<a.near||m>a.far)return;o.push({distance:m,distanceToRay:Math.sqrt(h),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:c})}}class iw extends vi{constructor(t,e,n,a,o=Yi,c=Yi,h,d,m){super(t,e,n,a,o,c,h,d,m),this.isVideoTexture=!0,this.generateMipmaps=!1;const v=this;function y(){v.needsUpdate=!0,t.requestVideoFrameCallback(y)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(y)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class mB extends iw{constructor(t,e,n,a,o,c,h,d){super({},t,e,n,a,o,c,h,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class gB extends vi{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ma,this.minFilter=ma,this.generateMipmaps=!1,this.needsUpdate=!0}}class p_ extends vi{constructor(t,e,n,a,o,c,h,d,m,v,y,_){super(null,c,h,d,m,v,a,o,y,_),this.isCompressedTexture=!0,this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class vB extends p_{constructor(t,e,n,a,o,c){super(t,e,n,o,c),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=gr,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class yB extends p_{constructor(t,e,n){super(void 0,t[0].width,t[0].height,e,n,Ll),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class _B extends vi{constructor(t,e,n,a,o,c,h,d,m){super(t,e,n,a,o,c,h,d,m),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ob extends vi{constructor(t,e,n=zl,a,o,c,h=ma,d=ma,m,v=fd,y=1){if(v!==fd&&v!==hd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:t,height:e,depth:y};super(_,a,o,c,h,d,v,n,m),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Fu(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class m_ extends Je{constructor(t=1,e=1,n=4,a=8,o=1){super(),this.type="CapsuleGeometry",this.parameters={radius:t,height:e,capSegments:n,radialSegments:a,heightSegments:o},e=Math.max(0,e),n=Math.max(1,Math.floor(n)),a=Math.max(3,Math.floor(a)),o=Math.max(1,Math.floor(o));const c=[],h=[],d=[],m=[],v=e/2,y=Math.PI/2*t,_=e,M=2*y+_,T=n*2+o,C=a+1,R=new K,b=new K;for(let D=0;D<=T;D++){let U=0,N=0,P=0,B=0;if(D<=n){const z=D/n,L=z*Math.PI/2;N=-v-t*Math.cos(L),P=t*Math.sin(L),B=-t*Math.cos(L),U=z*y}else if(D<=n+o){const z=(D-n)/o;N=-v+z*e,P=t,B=0,U=y+z*_}else{const z=(D-n-o)/n,L=z*Math.PI/2;N=v+t*Math.sin(L),P=t*Math.cos(L),B=t*Math.sin(L),U=y+_+z*y}const H=Math.max(0,Math.min(1,U/M));let X=0;D===0?X=.5/a:D===T&&(X=-.5/a);for(let z=0;z<=a;z++){const L=z/a,W=L*Math.PI*2,ot=Math.sin(W),it=Math.cos(W);b.x=-P*it,b.y=N,b.z=P*ot,h.push(b.x,b.y,b.z),R.set(-P*it,B,P*ot),R.normalize(),d.push(R.x,R.y,R.z),m.push(L+X,H)}if(D>0){const z=(D-1)*C;for(let L=0;L<a;L++){const W=z+L,ot=z+L+1,it=D*C+L,pt=D*C+L+1;c.push(W,ot,it),c.push(ot,pt,it)}}}this.setIndex(c),this.setAttribute("position",new me(h,3)),this.setAttribute("normal",new me(d,3)),this.setAttribute("uv",new me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new m_(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}}class g_ extends Je{constructor(t=1,e=32,n=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:a},e=Math.max(3,e);const o=[],c=[],h=[],d=[],m=new K,v=new It;c.push(0,0,0),h.push(0,0,1),d.push(.5,.5);for(let y=0,_=3;y<=e;y++,_+=3){const M=n+y/e*a;m.x=t*Math.cos(M),m.y=t*Math.sin(M),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(c[_]/t+1)/2,v.y=(c[_+1]/t+1)/2,d.push(v.x,v.y)}for(let y=1;y<=e;y++)o.push(y,y+1,0);this.setIndex(o),this.setAttribute("position",new me(c,3)),this.setAttribute("normal",new me(h,3)),this.setAttribute("uv",new me(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new g_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class sg extends Je{constructor(t=1,e=1,n=1,a=32,o=1,c=!1,h=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:a,heightSegments:o,openEnded:c,thetaStart:h,thetaLength:d};const m=this;a=Math.floor(a),o=Math.floor(o);const v=[],y=[],_=[],M=[];let T=0;const C=[],R=n/2;let b=0;D(),c===!1&&(t>0&&U(!0),e>0&&U(!1)),this.setIndex(v),this.setAttribute("position",new me(y,3)),this.setAttribute("normal",new me(_,3)),this.setAttribute("uv",new me(M,2));function D(){const N=new K,P=new K;let B=0;const H=(e-t)/n;for(let X=0;X<=o;X++){const z=[],L=X/o,W=L*(e-t)+t;for(let ot=0;ot<=a;ot++){const it=ot/a,pt=it*d+h,gt=Math.sin(pt),I=Math.cos(pt);P.x=W*gt,P.y=-L*n+R,P.z=W*I,y.push(P.x,P.y,P.z),N.set(gt,H,I).normalize(),_.push(N.x,N.y,N.z),M.push(it,1-L),z.push(T++)}C.push(z)}for(let X=0;X<a;X++)for(let z=0;z<o;z++){const L=C[z][X],W=C[z+1][X],ot=C[z+1][X+1],it=C[z][X+1];(t>0||z!==0)&&(v.push(L,W,it),B+=3),(e>0||z!==o-1)&&(v.push(W,ot,it),B+=3)}m.addGroup(b,B,0),b+=B}function U(N){const P=T,B=new It,H=new K;let X=0;const z=N===!0?t:e,L=N===!0?1:-1;for(let ot=1;ot<=a;ot++)y.push(0,R*L,0),_.push(0,L,0),M.push(.5,.5),T++;const W=T;for(let ot=0;ot<=a;ot++){const pt=ot/a*d+h,gt=Math.cos(pt),I=Math.sin(pt);H.x=z*I,H.y=R*L,H.z=z*gt,y.push(H.x,H.y,H.z),_.push(0,L,0),B.x=gt*.5+.5,B.y=I*.5*L+.5,M.push(B.x,B.y),T++}for(let ot=0;ot<a;ot++){const it=P+ot,pt=W+ot;N===!0?v.push(pt,pt+1,it):v.push(pt+1,pt,it),X+=3}m.addGroup(b,X,N===!0?1:2),b+=X}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new sg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class rg extends sg{constructor(t=1,e=1,n=32,a=1,o=!1,c=0,h=Math.PI*2){super(0,t,e,n,a,o,c,h),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:h}}static fromJSON(t){return new rg(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Zu extends Je{constructor(t=[],e=[],n=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:a};const o=[],c=[];h(a),m(n),v(),this.setAttribute("position",new me(o,3)),this.setAttribute("normal",new me(o.slice(),3)),this.setAttribute("uv",new me(c,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function h(D){const U=new K,N=new K,P=new K;for(let B=0;B<e.length;B+=3)M(e[B+0],U),M(e[B+1],N),M(e[B+2],P),d(U,N,P,D)}function d(D,U,N,P){const B=P+1,H=[];for(let X=0;X<=B;X++){H[X]=[];const z=D.clone().lerp(N,X/B),L=U.clone().lerp(N,X/B),W=B-X;for(let ot=0;ot<=W;ot++)ot===0&&X===B?H[X][ot]=z:H[X][ot]=z.clone().lerp(L,ot/W)}for(let X=0;X<B;X++)for(let z=0;z<2*(B-X)-1;z++){const L=Math.floor(z/2);z%2===0?(_(H[X][L+1]),_(H[X+1][L]),_(H[X][L])):(_(H[X][L+1]),_(H[X+1][L+1]),_(H[X+1][L]))}}function m(D){const U=new K;for(let N=0;N<o.length;N+=3)U.x=o[N+0],U.y=o[N+1],U.z=o[N+2],U.normalize().multiplyScalar(D),o[N+0]=U.x,o[N+1]=U.y,o[N+2]=U.z}function v(){const D=new K;for(let U=0;U<o.length;U+=3){D.x=o[U+0],D.y=o[U+1],D.z=o[U+2];const N=R(D)/2/Math.PI+.5,P=b(D)/Math.PI+.5;c.push(N,1-P)}T(),y()}function y(){for(let D=0;D<c.length;D+=6){const U=c[D+0],N=c[D+2],P=c[D+4],B=Math.max(U,N,P),H=Math.min(U,N,P);B>.9&&H<.1&&(U<.2&&(c[D+0]+=1),N<.2&&(c[D+2]+=1),P<.2&&(c[D+4]+=1))}}function _(D){o.push(D.x,D.y,D.z)}function M(D,U){const N=D*3;U.x=t[N+0],U.y=t[N+1],U.z=t[N+2]}function T(){const D=new K,U=new K,N=new K,P=new K,B=new It,H=new It,X=new It;for(let z=0,L=0;z<o.length;z+=9,L+=6){D.set(o[z+0],o[z+1],o[z+2]),U.set(o[z+3],o[z+4],o[z+5]),N.set(o[z+6],o[z+7],o[z+8]),B.set(c[L+0],c[L+1]),H.set(c[L+2],c[L+3]),X.set(c[L+4],c[L+5]),P.copy(D).add(U).add(N).divideScalar(3);const W=R(P);C(B,L+0,D,W),C(H,L+2,U,W),C(X,L+4,N,W)}}function C(D,U,N,P){P<0&&D.x===1&&(c[U]=D.x-1),N.x===0&&N.z===0&&(c[U]=P/2/Math.PI+.5)}function R(D){return Math.atan2(D.z,-D.x)}function b(D){return Math.atan2(-D.y,Math.sqrt(D.x*D.x+D.z*D.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Zu(t.vertices,t.indices,t.radius,t.details)}}class v_ extends Zu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=1/n,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-n,0,-a,n,0,a,-n,0,a,n,-a,-n,0,-a,n,0,a,-n,0,a,n,0,-n,0,-a,n,0,-a,-n,0,a,n,0,a],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,c,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new v_(t.radius,t.detail)}}const _v=new K,xv=new K,uS=new K,Sv=new _s;class aw extends Je{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),o=Math.cos(vf*e),c=t.getIndex(),h=t.getAttribute("position"),d=c?c.count:h.count,m=[0,0,0],v=["a","b","c"],y=new Array(3),_={},M=[];for(let T=0;T<d;T+=3){c?(m[0]=c.getX(T),m[1]=c.getX(T+1),m[2]=c.getX(T+2)):(m[0]=T,m[1]=T+1,m[2]=T+2);const{a:C,b:R,c:b}=Sv;if(C.fromBufferAttribute(h,m[0]),R.fromBufferAttribute(h,m[1]),b.fromBufferAttribute(h,m[2]),Sv.getNormal(uS),y[0]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,y[1]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,y[2]=`${Math.round(b.x*a)},${Math.round(b.y*a)},${Math.round(b.z*a)}`,!(y[0]===y[1]||y[1]===y[2]||y[2]===y[0]))for(let D=0;D<3;D++){const U=(D+1)%3,N=y[D],P=y[U],B=Sv[v[D]],H=Sv[v[U]],X=`${N}_${P}`,z=`${P}_${N}`;z in _&&_[z]?(uS.dot(_[z].normal)<=o&&(M.push(B.x,B.y,B.z),M.push(H.x,H.y,H.z)),_[z]=null):X in _||(_[X]={index0:m[D],index1:m[U],normal:uS.clone()})}}for(const T in _)if(_[T]){const{index0:C,index1:R}=_[T];_v.fromBufferAttribute(h,C),xv.fromBufferAttribute(h,R),M.push(_v.x,_v.y,_v.z),M.push(xv.x,xv.y,xv.z)}this.setAttribute("position",new me(M,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class eo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,a=this.getPoint(0),o=0;e.push(0);for(let c=1;c<=t;c++)n=this.getPoint(c/t),o+=n.distanceTo(a),e.push(o),a=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const n=this.getLengths();let a=0;const o=n.length;let c;e?c=e:c=t*n[o-1];let h=0,d=o-1,m;for(;h<=d;)if(a=Math.floor(h+(d-h)/2),m=n[a]-c,m<0)h=a+1;else if(m>0)d=a-1;else{d=a;break}if(a=d,n[a]===c)return a/(o-1);const v=n[a],_=n[a+1]-v,M=(c-v)/_;return(a+M)/(o-1)}getTangent(t,e){let a=t-1e-4,o=t+1e-4;a<0&&(a=0),o>1&&(o=1);const c=this.getPoint(a),h=this.getPoint(o),d=e||(c.isVector2?new It:new K);return d.copy(h).sub(c).normalize(),d}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e=!1){const n=new K,a=[],o=[],c=[],h=new K,d=new Pe;for(let M=0;M<=t;M++){const T=M/t;a[M]=this.getTangentAt(T,new K)}o[0]=new K,c[0]=new K;let m=Number.MAX_VALUE;const v=Math.abs(a[0].x),y=Math.abs(a[0].y),_=Math.abs(a[0].z);v<=m&&(m=v,n.set(1,0,0)),y<=m&&(m=y,n.set(0,1,0)),_<=m&&n.set(0,0,1),h.crossVectors(a[0],n).normalize(),o[0].crossVectors(a[0],h),c[0].crossVectors(a[0],o[0]);for(let M=1;M<=t;M++){if(o[M]=o[M-1].clone(),c[M]=c[M-1].clone(),h.crossVectors(a[M-1],a[M]),h.length()>Number.EPSILON){h.normalize();const T=Math.acos(qe(a[M-1].dot(a[M]),-1,1));o[M].applyMatrix4(d.makeRotationAxis(h,T))}c[M].crossVectors(a[M],o[M])}if(e===!0){let M=Math.acos(qe(o[0].dot(o[t]),-1,1));M/=t,a[0].dot(h.crossVectors(o[0],o[t]))>0&&(M=-M);for(let T=1;T<=t;T++)o[T].applyMatrix4(d.makeRotationAxis(a[T],M*T)),c[T].crossVectors(a[T],o[T])}return{tangents:a,normals:o,binormals:c}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class y_ extends eo{constructor(t=0,e=0,n=1,a=1,o=0,c=Math.PI*2,h=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=c,this.aClockwise=h,this.aRotation=d}getPoint(t,e=new It){const n=e,a=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const c=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(c?o=0:o=a),this.aClockwise===!0&&!c&&(o===a?o=-a:o=o-a);const h=this.aStartAngle+t*o;let d=this.aX+this.xRadius*Math.cos(h),m=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const v=Math.cos(this.aRotation),y=Math.sin(this.aRotation),_=d-this.aX,M=m-this.aY;d=_*v-M*y+this.aX,m=_*y+M*v+this.aY}return n.set(d,m)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class sw extends y_{constructor(t,e,n,a,o,c){super(t,e,n,n,a,o,c),this.isArcCurve=!0,this.type="ArcCurve"}}function Lb(){let i=0,t=0,e=0,n=0;function a(o,c,h,d){i=o,t=h,e=-3*o+3*c-2*h-d,n=2*o-2*c+h+d}return{initCatmullRom:function(o,c,h,d,m){a(c,h,m*(h-o),m*(d-c))},initNonuniformCatmullRom:function(o,c,h,d,m,v,y){let _=(c-o)/m-(h-o)/(m+v)+(h-c)/v,M=(h-c)/v-(d-c)/(v+y)+(d-h)/y;_*=v,M*=v,a(c,h,_,M)},calc:function(o){const c=o*o,h=c*o;return i+t*o+e*c+n*h}}}const Mv=new K,cS=new Lb,fS=new Lb,hS=new Lb;class rw extends eo{constructor(t=[],e=!1,n="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=a}getPoint(t,e=new K){const n=e,a=this.points,o=a.length,c=(o-(this.closed?0:1))*t;let h=Math.floor(c),d=c-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/o)+1)*o:d===0&&h===o-1&&(h=o-2,d=1);let m,v;this.closed||h>0?m=a[(h-1)%o]:(Mv.subVectors(a[0],a[1]).add(a[0]),m=Mv);const y=a[h%o],_=a[(h+1)%o];if(this.closed||h+2<o?v=a[(h+2)%o]:(Mv.subVectors(a[o-1],a[o-2]).add(a[o-1]),v=Mv),this.curveType==="centripetal"||this.curveType==="chordal"){const M=this.curveType==="chordal"?.5:.25;let T=Math.pow(m.distanceToSquared(y),M),C=Math.pow(y.distanceToSquared(_),M),R=Math.pow(_.distanceToSquared(v),M);C<1e-4&&(C=1),T<1e-4&&(T=C),R<1e-4&&(R=C),cS.initNonuniformCatmullRom(m.x,y.x,_.x,v.x,T,C,R),fS.initNonuniformCatmullRom(m.y,y.y,_.y,v.y,T,C,R),hS.initNonuniformCatmullRom(m.z,y.z,_.z,v.z,T,C,R)}else this.curveType==="catmullrom"&&(cS.initCatmullRom(m.x,y.x,_.x,v.x,this.tension),fS.initCatmullRom(m.y,y.y,_.y,v.y,this.tension),hS.initCatmullRom(m.z,y.z,_.z,v.z,this.tension));return n.set(cS.calc(d),fS.calc(d),hS.calc(d)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new K().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function nA(i,t,e,n,a){const o=(n-t)*.5,c=(a-e)*.5,h=i*i,d=i*h;return(2*e-2*n+o+c)*d+(-3*e+3*n-2*o-c)*h+o*i+e}function xB(i,t){const e=1-i;return e*e*t}function SB(i,t){return 2*(1-i)*i*t}function MB(i,t){return i*i*t}function Em(i,t,e,n){return xB(i,t)+SB(i,e)+MB(i,n)}function bB(i,t){const e=1-i;return e*e*e*t}function EB(i,t){const e=1-i;return 3*e*e*i*t}function TB(i,t){return 3*(1-i)*i*i*t}function AB(i,t){return i*i*i*t}function Tm(i,t,e,n,a){return bB(i,t)+EB(i,e)+TB(i,n)+AB(i,a)}class zb extends eo{constructor(t=new It,e=new It,n=new It,a=new It){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new It){const n=e,a=this.v0,o=this.v1,c=this.v2,h=this.v3;return n.set(Tm(t,a.x,o.x,c.x,h.x),Tm(t,a.y,o.y,c.y,h.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class ow extends eo{constructor(t=new K,e=new K,n=new K,a=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=a}getPoint(t,e=new K){const n=e,a=this.v0,o=this.v1,c=this.v2,h=this.v3;return n.set(Tm(t,a.x,o.x,c.x,h.x),Tm(t,a.y,o.y,c.y,h.y),Tm(t,a.z,o.z,c.z,h.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class Pb extends eo{constructor(t=new It,e=new It){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new It){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new It){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class lw extends eo{constructor(t=new K,e=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new K){const n=e;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new K){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Bb extends eo{constructor(t=new It,e=new It,n=new It){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new It){const n=e,a=this.v0,o=this.v1,c=this.v2;return n.set(Em(t,a.x,o.x,c.x),Em(t,a.y,o.y,c.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Ib extends eo{constructor(t=new K,e=new K,n=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new K){const n=e,a=this.v0,o=this.v1,c=this.v2;return n.set(Em(t,a.x,o.x,c.x),Em(t,a.y,o.y,c.y),Em(t,a.z,o.z,c.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class Vb extends eo{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new It){const n=e,a=this.points,o=(a.length-1)*t,c=Math.floor(o),h=o-c,d=a[c===0?c:c-1],m=a[c],v=a[c>a.length-2?a.length-1:c+1],y=a[c>a.length-3?a.length-1:c+2];return n.set(nA(h,d.x,m.x,v.x,y.x),nA(h,d.y,m.y,v.y,y.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const a=t.points[e];this.points.push(new It().fromArray(a))}return this}}var Iy=Object.freeze({__proto__:null,ArcCurve:sw,CatmullRomCurve3:rw,CubicBezierCurve:zb,CubicBezierCurve3:ow,EllipseCurve:y_,LineCurve:Pb,LineCurve3:lw,QuadraticBezierCurve:Bb,QuadraticBezierCurve3:Ib,SplineCurve:Vb});class uw extends eo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const n=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Iy[n](e,t))}return this}getPoint(t,e){const n=t*this.getLength(),a=this.getCurveLengths();let o=0;for(;o<a.length;){if(a[o]>=n){const c=a[o]-n,h=this.curves[o],d=h.getLength(),m=d===0?0:1-c/d;return h.getPointAt(m,e)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,a=this.curves.length;n<a;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let a=0,o=this.curves;a<o.length;a++){const c=o[a],h=c.isEllipseCurve?t*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?t*c.points.length:t,d=c.getPoints(h);for(let m=0;m<d.length;m++){const v=d[m];n&&n.equals(v)||(e.push(v),n=v)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const a=t.curves[e];this.curves.push(new Iy[a.type]().fromJSON(a))}return this}}class Vy extends uw{constructor(t){super(),this.type="Path",this.currentPoint=new It,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Pb(this.currentPoint.clone(),new It(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,a){const o=new Bb(this.currentPoint.clone(),new It(t,e),new It(n,a));return this.curves.push(o),this.currentPoint.set(n,a),this}bezierCurveTo(t,e,n,a,o,c){const h=new zb(this.currentPoint.clone(),new It(t,e),new It(n,a),new It(o,c));return this.curves.push(h),this.currentPoint.set(o,c),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new Vb(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,a,o,c){const h=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+h,e+d,n,a,o,c),this}absarc(t,e,n,a,o,c){return this.absellipse(t,e,n,n,a,o,c),this}ellipse(t,e,n,a,o,c,h,d){const m=this.currentPoint.x,v=this.currentPoint.y;return this.absellipse(t+m,e+v,n,a,o,c,h,d),this}absellipse(t,e,n,a,o,c,h,d){const m=new y_(t,e,n,a,o,c,h,d);if(this.curves.length>0){const y=m.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(m);const v=m.getPoint(1);return this.currentPoint.copy(v),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class yf extends Vy{constructor(t){super(t),this.uuid=qs(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,a=this.holes.length;n<a;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const a=t.holes[e];this.holes.push(new Vy().fromJSON(a))}return this}}function RB(i,t,e=2){const n=t&&t.length,a=n?t[0]*e:i.length;let o=cw(i,0,a,e,!0);const c=[];if(!o||o.next===o.prev)return c;let h,d,m;if(n&&(o=NB(i,t,o,e)),i.length>80*e){h=1/0,d=1/0;let v=-1/0,y=-1/0;for(let _=e;_<a;_+=e){const M=i[_],T=i[_+1];M<h&&(h=M),T<d&&(d=T),M>v&&(v=M),T>y&&(y=T)}m=Math.max(v-h,y-d),m=m!==0?32767/m:0}return qm(o,c,e,h,d,m,0),c}function cw(i,t,e,n,a){let o;if(a===XB(i,t,e,n)>0)for(let c=t;c<e;c+=n)o=iA(c/n|0,i[c],i[c+1],o);else for(let c=e-n;c>=t;c-=n)o=iA(c/n|0,i[c],i[c+1],o);return o&&vd(o,o.next)&&(Ym(o),o=o.next),o}function Sf(i,t){if(!i)return i;t||(t=i);let e=i,n;do if(n=!1,!e.steiner&&(vd(e,e.next)||li(e.prev,e,e.next)===0)){if(Ym(e),e=t=e.prev,e===e.next)break;n=!0}else e=e.next;while(n||e!==t);return t}function qm(i,t,e,n,a,o,c){if(!i)return;!c&&o&&BB(i,n,a,o);let h=i;for(;i.prev!==i.next;){const d=i.prev,m=i.next;if(o?wB(i,n,a,o):CB(i)){t.push(d.i,i.i,m.i),Ym(i),i=m.next,h=m.next;continue}if(i=m,i===h){c?c===1?(i=DB(Sf(i),t),qm(i,t,e,n,a,o,2)):c===2&&UB(i,t,e,n,a,o):qm(Sf(i),t,e,n,a,o,1);break}}}function CB(i){const t=i.prev,e=i,n=i.next;if(li(t,e,n)>=0)return!1;const a=t.x,o=e.x,c=n.x,h=t.y,d=e.y,m=n.y,v=Math.min(a,o,c),y=Math.min(h,d,m),_=Math.max(a,o,c),M=Math.max(h,d,m);let T=n.next;for(;T!==t;){if(T.x>=v&&T.x<=_&&T.y>=y&&T.y<=M&&lm(a,h,o,d,c,m,T.x,T.y)&&li(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function wB(i,t,e,n){const a=i.prev,o=i,c=i.next;if(li(a,o,c)>=0)return!1;const h=a.x,d=o.x,m=c.x,v=a.y,y=o.y,_=c.y,M=Math.min(h,d,m),T=Math.min(v,y,_),C=Math.max(h,d,m),R=Math.max(v,y,_),b=yM(M,T,t,e,n),D=yM(C,R,t,e,n);let U=i.prevZ,N=i.nextZ;for(;U&&U.z>=b&&N&&N.z<=D;){if(U.x>=M&&U.x<=C&&U.y>=T&&U.y<=R&&U!==a&&U!==c&&lm(h,v,d,y,m,_,U.x,U.y)&&li(U.prev,U,U.next)>=0||(U=U.prevZ,N.x>=M&&N.x<=C&&N.y>=T&&N.y<=R&&N!==a&&N!==c&&lm(h,v,d,y,m,_,N.x,N.y)&&li(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;U&&U.z>=b;){if(U.x>=M&&U.x<=C&&U.y>=T&&U.y<=R&&U!==a&&U!==c&&lm(h,v,d,y,m,_,U.x,U.y)&&li(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;N&&N.z<=D;){if(N.x>=M&&N.x<=C&&N.y>=T&&N.y<=R&&N!==a&&N!==c&&lm(h,v,d,y,m,_,N.x,N.y)&&li(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function DB(i,t){let e=i;do{const n=e.prev,a=e.next.next;!vd(n,a)&&hw(n,e,e.next,a)&&km(n,a)&&km(a,n)&&(t.push(n.i,e.i,a.i),Ym(e),Ym(e.next),e=i=a),e=e.next}while(e!==i);return Sf(e)}function UB(i,t,e,n,a,o){let c=i;do{let h=c.next.next;for(;h!==c.prev;){if(c.i!==h.i&&HB(c,h)){let d=dw(c,h);c=Sf(c,c.next),d=Sf(d,d.next),qm(c,t,e,n,a,o,0),qm(d,t,e,n,a,o,0);return}h=h.next}c=c.next}while(c!==i)}function NB(i,t,e,n){const a=[];for(let o=0,c=t.length;o<c;o++){const h=t[o]*n,d=o<c-1?t[o+1]*n:i.length,m=cw(i,h,d,n,!1);m===m.next&&(m.steiner=!0),a.push(VB(m))}a.sort(OB);for(let o=0;o<a.length;o++)e=LB(a[o],e);return e}function OB(i,t){let e=i.x-t.x;if(e===0&&(e=i.y-t.y,e===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=n-a}return e}function LB(i,t){const e=zB(i,t);if(!e)return t;const n=dw(e,i);return Sf(n,n.next),Sf(e,e.next)}function zB(i,t){let e=t;const n=i.x,a=i.y;let o=-1/0,c;if(vd(i,e))return e;do{if(vd(i,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const y=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(y<=n&&y>o&&(o=y,c=e.x<e.next.x?e:e.next,y===n))return c}e=e.next}while(e!==t);if(!c)return null;const h=c,d=c.x,m=c.y;let v=1/0;e=c;do{if(n>=e.x&&e.x>=d&&n!==e.x&&fw(a<m?n:o,a,d,m,a<m?o:n,a,e.x,e.y)){const y=Math.abs(a-e.y)/(n-e.x);km(e,i)&&(y<v||y===v&&(e.x>c.x||e.x===c.x&&PB(c,e)))&&(c=e,v=y)}e=e.next}while(e!==h);return c}function PB(i,t){return li(i.prev,i,t.prev)<0&&li(t.next,i,i.next)<0}function BB(i,t,e,n){let a=i;do a.z===0&&(a.z=yM(a.x,a.y,t,e,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==i);a.prevZ.nextZ=null,a.prevZ=null,IB(a)}function IB(i){let t,e=1;do{let n=i,a;i=null;let o=null;for(t=0;n;){t++;let c=n,h=0;for(let m=0;m<e&&(h++,c=c.nextZ,!!c);m++);let d=e;for(;h>0||d>0&&c;)h!==0&&(d===0||!c||n.z<=c.z)?(a=n,n=n.nextZ,h--):(a=c,c=c.nextZ,d--),o?o.nextZ=a:i=a,a.prevZ=o,o=a;n=c}o.nextZ=null,e*=2}while(t>1);return i}function yM(i,t,e,n,a){return i=(i-e)*a|0,t=(t-n)*a|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function VB(i){let t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function fw(i,t,e,n,a,o,c,h){return(a-c)*(t-h)>=(i-c)*(o-h)&&(i-c)*(n-h)>=(e-c)*(t-h)&&(e-c)*(o-h)>=(a-c)*(n-h)}function lm(i,t,e,n,a,o,c,h){return!(i===c&&t===h)&&fw(i,t,e,n,a,o,c,h)}function HB(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!FB(i,t)&&(km(i,t)&&km(t,i)&&GB(i,t)&&(li(i.prev,i,t.prev)||li(i,t.prev,t))||vd(i,t)&&li(i.prev,i,i.next)>0&&li(t.prev,t,t.next)>0)}function li(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function vd(i,t){return i.x===t.x&&i.y===t.y}function hw(i,t,e,n){const a=Ev(li(i,t,e)),o=Ev(li(i,t,n)),c=Ev(li(e,n,i)),h=Ev(li(e,n,t));return!!(a!==o&&c!==h||a===0&&bv(i,e,t)||o===0&&bv(i,n,t)||c===0&&bv(e,i,n)||h===0&&bv(e,t,n))}function bv(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Ev(i){return i>0?1:i<0?-1:0}function FB(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&hw(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function km(i,t){return li(i.prev,i,i.next)<0?li(i,t,i.next)>=0&&li(i,i.prev,t)>=0:li(i,t,i.prev)<0||li(i,i.next,t)<0}function GB(i,t){let e=i,n=!1;const a=(i.x+t.x)/2,o=(i.y+t.y)/2;do e.y>o!=e.next.y>o&&e.next.y!==e.y&&a<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next;while(e!==i);return n}function dw(i,t){const e=_M(i.i,i.x,i.y),n=_M(t.i,t.x,t.y),a=i.next,o=t.prev;return i.next=t,t.prev=i,e.next=a,a.prev=e,n.next=e,e.prev=n,o.next=n,n.prev=o,n}function iA(i,t,e,n){const a=_M(i,t,e);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function Ym(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function _M(i,t,e){return{i,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function XB(i,t,e,n){let a=0;for(let o=t,c=e-n;o<e;o+=n)a+=(i[c]-i[o])*(i[o+1]+i[c+1]),c=o;return a}class qB{static triangulate(t,e,n=2){return RB(t,e,n)}}class Jr{static area(t){const e=t.length;let n=0;for(let a=e-1,o=0;o<e;a=o++)n+=t[a].x*t[o].y-t[o].x*t[a].y;return n*.5}static isClockWise(t){return Jr.area(t)<0}static triangulateShape(t,e){const n=[],a=[],o=[];aA(t),sA(n,t);let c=t.length;e.forEach(aA);for(let d=0;d<e.length;d++)a.push(c),c+=e[d].length,sA(n,e[d]);const h=qB.triangulate(n,a);for(let d=0;d<h.length;d+=3)o.push(h.slice(d,d+3));return o}}function aA(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function sA(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class __ extends Je{constructor(t=new yf([new It(.5,.5),new It(-.5,.5),new It(-.5,-.5),new It(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,a=[],o=[];for(let h=0,d=t.length;h<d;h++){const m=t[h];c(m)}this.setAttribute("position",new me(a,3)),this.setAttribute("uv",new me(o,2)),this.computeVertexNormals();function c(h){const d=[],m=e.curveSegments!==void 0?e.curveSegments:12,v=e.steps!==void 0?e.steps:1,y=e.depth!==void 0?e.depth:1;let _=e.bevelEnabled!==void 0?e.bevelEnabled:!0,M=e.bevelThickness!==void 0?e.bevelThickness:.2,T=e.bevelSize!==void 0?e.bevelSize:M-.1,C=e.bevelOffset!==void 0?e.bevelOffset:0,R=e.bevelSegments!==void 0?e.bevelSegments:3;const b=e.extrudePath,D=e.UVGenerator!==void 0?e.UVGenerator:kB;let U,N=!1,P,B,H,X;b&&(U=b.getSpacedPoints(v),N=!0,_=!1,P=b.computeFrenetFrames(v,!1),B=new K,H=new K,X=new K),_||(R=0,M=0,T=0,C=0);const z=h.extractPoints(m);let L=z.shape;const W=z.holes;if(!Jr.isClockWise(L)){L=L.reverse();for(let Y=0,Zt=W.length;Y<Zt;Y++){const Gt=W[Y];Jr.isClockWise(Gt)&&(W[Y]=Gt.reverse())}}function it(Y){const Gt=10000000000000001e-36;let Xt=Y[0];for(let Ut=1;Ut<=Y.length;Ut++){const re=Ut%Y.length,Vt=Y[re],ee=Vt.x-Xt.x,Ve=Vt.y-Xt.y,Q=ee*ee+Ve*Ve,V=Math.max(Math.abs(Vt.x),Math.abs(Vt.y),Math.abs(Xt.x),Math.abs(Xt.y)),dt=Gt*V*V;if(Q<=dt){Y.splice(re,1),Ut--;continue}Xt=Vt}}it(L),W.forEach(it);const pt=W.length,gt=L;for(let Y=0;Y<pt;Y++){const Zt=W[Y];L=L.concat(Zt)}function I(Y,Zt,Gt){return Zt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Y.clone().addScaledVector(Zt,Gt)}const j=L.length;function Z(Y,Zt,Gt){let Xt,Ut,re;const Vt=Y.x-Zt.x,ee=Y.y-Zt.y,Ve=Gt.x-Y.x,Q=Gt.y-Y.y,V=Vt*Vt+ee*ee,dt=Vt*Q-ee*Ve;if(Math.abs(dt)>Number.EPSILON){const Tt=Math.sqrt(V),Ct=Math.sqrt(Ve*Ve+Q*Q),At=Zt.x-ee/Tt,ne=Zt.y+Vt/Tt,Jt=Gt.x-Q/Ct,fe=Gt.y+Ve/Ct,de=((Jt-At)*Q-(fe-ne)*Ve)/(Vt*Q-ee*Ve);Xt=At+Vt*de-Y.x,Ut=ne+ee*de-Y.y;const Ot=Xt*Xt+Ut*Ut;if(Ot<=2)return new It(Xt,Ut);re=Math.sqrt(Ot/2)}else{let Tt=!1;Vt>Number.EPSILON?Ve>Number.EPSILON&&(Tt=!0):Vt<-Number.EPSILON?Ve<-Number.EPSILON&&(Tt=!0):Math.sign(ee)===Math.sign(Q)&&(Tt=!0),Tt?(Xt=-ee,Ut=Vt,re=Math.sqrt(V)):(Xt=Vt,Ut=ee,re=Math.sqrt(V/2))}return new It(Xt/re,Ut/re)}const ct=[];for(let Y=0,Zt=gt.length,Gt=Zt-1,Xt=Y+1;Y<Zt;Y++,Gt++,Xt++)Gt===Zt&&(Gt=0),Xt===Zt&&(Xt=0),ct[Y]=Z(gt[Y],gt[Gt],gt[Xt]);const k=[];let tt,bt=ct.concat();for(let Y=0,Zt=pt;Y<Zt;Y++){const Gt=W[Y];tt=[];for(let Xt=0,Ut=Gt.length,re=Ut-1,Vt=Xt+1;Xt<Ut;Xt++,re++,Vt++)re===Ut&&(re=0),Vt===Ut&&(Vt=0),tt[Xt]=Z(Gt[Xt],Gt[re],Gt[Vt]);k.push(tt),bt=bt.concat(tt)}let Rt;if(R===0)Rt=Jr.triangulateShape(gt,W);else{const Y=[],Zt=[];for(let Gt=0;Gt<R;Gt++){const Xt=Gt/R,Ut=M*Math.cos(Xt*Math.PI/2),re=T*Math.sin(Xt*Math.PI/2)+C;for(let Vt=0,ee=gt.length;Vt<ee;Vt++){const Ve=I(gt[Vt],ct[Vt],re);Te(Ve.x,Ve.y,-Ut),Xt===0&&Y.push(Ve)}for(let Vt=0,ee=pt;Vt<ee;Vt++){const Ve=W[Vt];tt=k[Vt];const Q=[];for(let V=0,dt=Ve.length;V<dt;V++){const Tt=I(Ve[V],tt[V],re);Te(Tt.x,Tt.y,-Ut),Xt===0&&Q.push(Tt)}Xt===0&&Zt.push(Q)}}Rt=Jr.triangulateShape(Y,Zt)}const et=Rt.length,Et=T+C;for(let Y=0;Y<j;Y++){const Zt=_?I(L[Y],bt[Y],Et):L[Y];N?(H.copy(P.normals[0]).multiplyScalar(Zt.x),B.copy(P.binormals[0]).multiplyScalar(Zt.y),X.copy(U[0]).add(H).add(B),Te(X.x,X.y,X.z)):Te(Zt.x,Zt.y,0)}for(let Y=1;Y<=v;Y++)for(let Zt=0;Zt<j;Zt++){const Gt=_?I(L[Zt],bt[Zt],Et):L[Zt];N?(H.copy(P.normals[Y]).multiplyScalar(Gt.x),B.copy(P.binormals[Y]).multiplyScalar(Gt.y),X.copy(U[Y]).add(H).add(B),Te(X.x,X.y,X.z)):Te(Gt.x,Gt.y,y/v*Y)}for(let Y=R-1;Y>=0;Y--){const Zt=Y/R,Gt=M*Math.cos(Zt*Math.PI/2),Xt=T*Math.sin(Zt*Math.PI/2)+C;for(let Ut=0,re=gt.length;Ut<re;Ut++){const Vt=I(gt[Ut],ct[Ut],Xt);Te(Vt.x,Vt.y,y+Gt)}for(let Ut=0,re=W.length;Ut<re;Ut++){const Vt=W[Ut];tt=k[Ut];for(let ee=0,Ve=Vt.length;ee<Ve;ee++){const Q=I(Vt[ee],tt[ee],Xt);N?Te(Q.x,Q.y+U[v-1].y,U[v-1].x+Gt):Te(Q.x,Q.y,y+Gt)}}}Bt(),Wt();function Bt(){const Y=a.length/3;if(_){let Zt=0,Gt=j*Zt;for(let Xt=0;Xt<et;Xt++){const Ut=Rt[Xt];ye(Ut[2]+Gt,Ut[1]+Gt,Ut[0]+Gt)}Zt=v+R*2,Gt=j*Zt;for(let Xt=0;Xt<et;Xt++){const Ut=Rt[Xt];ye(Ut[0]+Gt,Ut[1]+Gt,Ut[2]+Gt)}}else{for(let Zt=0;Zt<et;Zt++){const Gt=Rt[Zt];ye(Gt[2],Gt[1],Gt[0])}for(let Zt=0;Zt<et;Zt++){const Gt=Rt[Zt];ye(Gt[0]+j*v,Gt[1]+j*v,Gt[2]+j*v)}}n.addGroup(Y,a.length/3-Y,0)}function Wt(){const Y=a.length/3;let Zt=0;jt(gt,Zt),Zt+=gt.length;for(let Gt=0,Xt=W.length;Gt<Xt;Gt++){const Ut=W[Gt];jt(Ut,Zt),Zt+=Ut.length}n.addGroup(Y,a.length/3-Y,1)}function jt(Y,Zt){let Gt=Y.length;for(;--Gt>=0;){const Xt=Gt;let Ut=Gt-1;Ut<0&&(Ut=Y.length-1);for(let re=0,Vt=v+R*2;re<Vt;re++){const ee=j*re,Ve=j*(re+1),Q=Zt+Xt+ee,V=Zt+Ut+ee,dt=Zt+Ut+Ve,Tt=Zt+Xt+Ve;cn(Q,V,dt,Tt)}}}function Te(Y,Zt,Gt){d.push(Y),d.push(Zt),d.push(Gt)}function ye(Y,Zt,Gt){ke(Y),ke(Zt),ke(Gt);const Xt=a.length/3,Ut=D.generateTopUV(n,a,Xt-3,Xt-2,Xt-1);Ue(Ut[0]),Ue(Ut[1]),Ue(Ut[2])}function cn(Y,Zt,Gt,Xt){ke(Y),ke(Zt),ke(Xt),ke(Zt),ke(Gt),ke(Xt);const Ut=a.length/3,re=D.generateSideWallUV(n,a,Ut-6,Ut-3,Ut-2,Ut-1);Ue(re[0]),Ue(re[1]),Ue(re[3]),Ue(re[1]),Ue(re[2]),Ue(re[3])}function ke(Y){a.push(d[Y*3+0]),a.push(d[Y*3+1]),a.push(d[Y*3+2])}function Ue(Y){o.push(Y.x),o.push(Y.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,n=this.parameters.options;return YB(e,n,t)}static fromJSON(t,e){const n=[];for(let o=0,c=t.shapes.length;o<c;o++){const h=e[t.shapes[o]];n.push(h)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new Iy[a.type]().fromJSON(a)),new __(n,t.options)}}const kB={generateTopUV:function(i,t,e,n,a){const o=t[e*3],c=t[e*3+1],h=t[n*3],d=t[n*3+1],m=t[a*3],v=t[a*3+1];return[new It(o,c),new It(h,d),new It(m,v)]},generateSideWallUV:function(i,t,e,n,a,o){const c=t[e*3],h=t[e*3+1],d=t[e*3+2],m=t[n*3],v=t[n*3+1],y=t[n*3+2],_=t[a*3],M=t[a*3+1],T=t[a*3+2],C=t[o*3],R=t[o*3+1],b=t[o*3+2];return Math.abs(h-v)<Math.abs(c-m)?[new It(c,1-d),new It(m,1-y),new It(_,1-T),new It(C,1-b)]:[new It(h,1-d),new It(v,1-y),new It(M,1-T),new It(R,1-b)]}};function YB(i,t,e){if(e.shapes=[],Array.isArray(i))for(let n=0,a=i.length;n<a;n++){const o=i[n];e.shapes.push(o.uuid)}else e.shapes.push(i.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class x_ extends Zu{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,a=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,o,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new x_(t.radius,t.detail)}}class S_ extends Je{constructor(t=[new It(0,-.5),new It(.5,0),new It(0,.5)],e=12,n=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:a},e=Math.floor(e),a=qe(a,0,Math.PI*2);const o=[],c=[],h=[],d=[],m=[],v=1/e,y=new K,_=new It,M=new K,T=new K,C=new K;let R=0,b=0;for(let D=0;D<=t.length-1;D++)switch(D){case 0:R=t[D+1].x-t[D].x,b=t[D+1].y-t[D].y,M.x=b*1,M.y=-R,M.z=b*0,C.copy(M),M.normalize(),d.push(M.x,M.y,M.z);break;case t.length-1:d.push(C.x,C.y,C.z);break;default:R=t[D+1].x-t[D].x,b=t[D+1].y-t[D].y,M.x=b*1,M.y=-R,M.z=b*0,T.copy(M),M.x+=C.x,M.y+=C.y,M.z+=C.z,M.normalize(),d.push(M.x,M.y,M.z),C.copy(T)}for(let D=0;D<=e;D++){const U=n+D*v*a,N=Math.sin(U),P=Math.cos(U);for(let B=0;B<=t.length-1;B++){y.x=t[B].x*N,y.y=t[B].y,y.z=t[B].x*P,c.push(y.x,y.y,y.z),_.x=D/e,_.y=B/(t.length-1),h.push(_.x,_.y);const H=d[3*B+0]*N,X=d[3*B+1],z=d[3*B+0]*P;m.push(H,X,z)}}for(let D=0;D<e;D++)for(let U=0;U<t.length-1;U++){const N=U+D*t.length,P=N,B=N+t.length,H=N+t.length+1,X=N+1;o.push(P,B,X),o.push(H,X,B)}this.setIndex(o),this.setAttribute("position",new me(c,3)),this.setAttribute("uv",new me(h,2)),this.setAttribute("normal",new me(m,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new S_(t.points,t.segments,t.phiStart,t.phiLength)}}class og extends Zu{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new og(t.radius,t.detail)}}class Cd extends Je{constructor(t=1,e=1,n=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:a};const o=t/2,c=e/2,h=Math.floor(n),d=Math.floor(a),m=h+1,v=d+1,y=t/h,_=e/d,M=[],T=[],C=[],R=[];for(let b=0;b<v;b++){const D=b*_-c;for(let U=0;U<m;U++){const N=U*y-o;T.push(N,-D,0),C.push(0,0,1),R.push(U/h),R.push(1-b/d)}}for(let b=0;b<d;b++)for(let D=0;D<h;D++){const U=D+m*b,N=D+m*(b+1),P=D+1+m*(b+1),B=D+1+m*b;M.push(U,N,B),M.push(N,P,B)}this.setIndex(M),this.setAttribute("position",new me(T,3)),this.setAttribute("normal",new me(C,3)),this.setAttribute("uv",new me(R,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cd(t.width,t.height,t.widthSegments,t.heightSegments)}}class M_ extends Je{constructor(t=.5,e=1,n=32,a=1,o=0,c=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:a,thetaStart:o,thetaLength:c},n=Math.max(3,n),a=Math.max(1,a);const h=[],d=[],m=[],v=[];let y=t;const _=(e-t)/a,M=new K,T=new It;for(let C=0;C<=a;C++){for(let R=0;R<=n;R++){const b=o+R/n*c;M.x=y*Math.cos(b),M.y=y*Math.sin(b),d.push(M.x,M.y,M.z),m.push(0,0,1),T.x=(M.x/e+1)/2,T.y=(M.y/e+1)/2,v.push(T.x,T.y)}y+=_}for(let C=0;C<a;C++){const R=C*(n+1);for(let b=0;b<n;b++){const D=b+R,U=D,N=D+n+1,P=D+n+2,B=D+1;h.push(U,N,B),h.push(N,P,B)}}this.setIndex(h),this.setAttribute("position",new me(d,3)),this.setAttribute("normal",new me(m,3)),this.setAttribute("uv",new me(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new M_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class b_ extends Je{constructor(t=new yf([new It(0,.5),new It(-.5,-.5),new It(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],a=[],o=[],c=[];let h=0,d=0;if(Array.isArray(t)===!1)m(t);else for(let v=0;v<t.length;v++)m(t[v]),this.addGroup(h,d,v),h+=d,d=0;this.setIndex(n),this.setAttribute("position",new me(a,3)),this.setAttribute("normal",new me(o,3)),this.setAttribute("uv",new me(c,2));function m(v){const y=a.length/3,_=v.extractPoints(e);let M=_.shape;const T=_.holes;Jr.isClockWise(M)===!1&&(M=M.reverse());for(let R=0,b=T.length;R<b;R++){const D=T[R];Jr.isClockWise(D)===!0&&(T[R]=D.reverse())}const C=Jr.triangulateShape(M,T);for(let R=0,b=T.length;R<b;R++){const D=T[R];M=M.concat(D)}for(let R=0,b=M.length;R<b;R++){const D=M[R];a.push(D.x,D.y,0),o.push(0,0,1),c.push(D.x,D.y)}for(let R=0,b=C.length;R<b;R++){const D=C[R],U=D[0]+y,N=D[1]+y,P=D[2]+y;n.push(U,N,P),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return WB(e,t)}static fromJSON(t,e){const n=[];for(let a=0,o=t.shapes.length;a<o;a++){const c=e[t.shapes[a]];n.push(c)}return new b_(n,t.curveSegments)}}function WB(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++){const a=i[e];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t}class lg extends Je{constructor(t=1,e=32,n=16,a=0,o=Math.PI*2,c=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:a,phiLength:o,thetaStart:c,thetaLength:h},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const d=Math.min(c+h,Math.PI);let m=0;const v=[],y=new K,_=new K,M=[],T=[],C=[],R=[];for(let b=0;b<=n;b++){const D=[],U=b/n;let N=0;b===0&&c===0?N=.5/e:b===n&&d===Math.PI&&(N=-.5/e);for(let P=0;P<=e;P++){const B=P/e;y.x=-t*Math.cos(a+B*o)*Math.sin(c+U*h),y.y=t*Math.cos(c+U*h),y.z=t*Math.sin(a+B*o)*Math.sin(c+U*h),T.push(y.x,y.y,y.z),_.copy(y).normalize(),C.push(_.x,_.y,_.z),R.push(B+N,1-U),D.push(m++)}v.push(D)}for(let b=0;b<n;b++)for(let D=0;D<e;D++){const U=v[b][D+1],N=v[b][D],P=v[b+1][D],B=v[b+1][D+1];(b!==0||c>0)&&M.push(U,N,B),(b!==n-1||d<Math.PI)&&M.push(N,P,B)}this.setIndex(M),this.setAttribute("position",new me(T,3)),this.setAttribute("normal",new me(C,3)),this.setAttribute("uv",new me(R,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class E_ extends Zu{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new E_(t.radius,t.detail)}}class T_ extends Je{constructor(t=1,e=.4,n=12,a=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:a,arc:o},n=Math.floor(n),a=Math.floor(a);const c=[],h=[],d=[],m=[],v=new K,y=new K,_=new K;for(let M=0;M<=n;M++)for(let T=0;T<=a;T++){const C=T/a*o,R=M/n*Math.PI*2;y.x=(t+e*Math.cos(R))*Math.cos(C),y.y=(t+e*Math.cos(R))*Math.sin(C),y.z=e*Math.sin(R),h.push(y.x,y.y,y.z),v.x=t*Math.cos(C),v.y=t*Math.sin(C),_.subVectors(y,v).normalize(),d.push(_.x,_.y,_.z),m.push(T/a),m.push(M/n)}for(let M=1;M<=n;M++)for(let T=1;T<=a;T++){const C=(a+1)*M+T-1,R=(a+1)*(M-1)+T-1,b=(a+1)*(M-1)+T,D=(a+1)*M+T;c.push(C,R,D),c.push(R,b,D)}this.setIndex(c),this.setAttribute("position",new me(h,3)),this.setAttribute("normal",new me(d,3)),this.setAttribute("uv",new me(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new T_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class A_ extends Je{constructor(t=1,e=.4,n=64,a=8,o=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:a,p:o,q:c},n=Math.floor(n),a=Math.floor(a);const h=[],d=[],m=[],v=[],y=new K,_=new K,M=new K,T=new K,C=new K,R=new K,b=new K;for(let U=0;U<=n;++U){const N=U/n*o*Math.PI*2;D(N,o,c,t,M),D(N+.01,o,c,t,T),R.subVectors(T,M),b.addVectors(T,M),C.crossVectors(R,b),b.crossVectors(C,R),C.normalize(),b.normalize();for(let P=0;P<=a;++P){const B=P/a*Math.PI*2,H=-e*Math.cos(B),X=e*Math.sin(B);y.x=M.x+(H*b.x+X*C.x),y.y=M.y+(H*b.y+X*C.y),y.z=M.z+(H*b.z+X*C.z),d.push(y.x,y.y,y.z),_.subVectors(y,M).normalize(),m.push(_.x,_.y,_.z),v.push(U/n),v.push(P/a)}}for(let U=1;U<=n;U++)for(let N=1;N<=a;N++){const P=(a+1)*(U-1)+(N-1),B=(a+1)*U+(N-1),H=(a+1)*U+N,X=(a+1)*(U-1)+N;h.push(P,B,X),h.push(B,H,X)}this.setIndex(h),this.setAttribute("position",new me(d,3)),this.setAttribute("normal",new me(m,3)),this.setAttribute("uv",new me(v,2));function D(U,N,P,B,H){const X=Math.cos(U),z=Math.sin(U),L=P/N*U,W=Math.cos(L);H.x=B*(2+W)*.5*X,H.y=B*(2+W)*z*.5,H.z=B*Math.sin(L)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new A_(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class R_ extends Je{constructor(t=new Ib(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),e=64,n=1,a=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:a,closed:o};const c=t.computeFrenetFrames(e,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const h=new K,d=new K,m=new It;let v=new K;const y=[],_=[],M=[],T=[];C(),this.setIndex(T),this.setAttribute("position",new me(y,3)),this.setAttribute("normal",new me(_,3)),this.setAttribute("uv",new me(M,2));function C(){for(let U=0;U<e;U++)R(U);R(o===!1?e:0),D(),b()}function R(U){v=t.getPointAt(U/e,v);const N=c.normals[U],P=c.binormals[U];for(let B=0;B<=a;B++){const H=B/a*Math.PI*2,X=Math.sin(H),z=-Math.cos(H);d.x=z*N.x+X*P.x,d.y=z*N.y+X*P.y,d.z=z*N.z+X*P.z,d.normalize(),_.push(d.x,d.y,d.z),h.x=v.x+n*d.x,h.y=v.y+n*d.y,h.z=v.z+n*d.z,y.push(h.x,h.y,h.z)}}function b(){for(let U=1;U<=e;U++)for(let N=1;N<=a;N++){const P=(a+1)*(U-1)+(N-1),B=(a+1)*U+(N-1),H=(a+1)*U+N,X=(a+1)*(U-1)+N;T.push(P,B,X),T.push(B,H,X)}}function D(){for(let U=0;U<=e;U++)for(let N=0;N<=a;N++)m.x=U/e,m.y=N/a,M.push(m.x,m.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new R_(new Iy[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class pw extends Je{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],n=new Set,a=new K,o=new K;if(t.index!==null){const c=t.attributes.position,h=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:h.count,materialIndex:0}]);for(let m=0,v=d.length;m<v;++m){const y=d[m],_=y.start,M=y.count;for(let T=_,C=_+M;T<C;T+=3)for(let R=0;R<3;R++){const b=h.getX(T+R),D=h.getX(T+(R+1)%3);a.fromBufferAttribute(c,b),o.fromBufferAttribute(c,D),rA(a,o,n)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}}else{const c=t.attributes.position;for(let h=0,d=c.count/3;h<d;h++)for(let m=0;m<3;m++){const v=3*h+m,y=3*h+(m+1)%3;a.fromBufferAttribute(c,v),o.fromBufferAttribute(c,y),rA(a,o,n)===!0&&(e.push(a.x,a.y,a.z),e.push(o.x,o.y,o.z))}}this.setAttribute("position",new me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function rA(i,t,e){const n=`${i.x},${i.y},${i.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${i.x},${i.y},${i.z}`;return e.has(n)===!0||e.has(a)===!0?!1:(e.add(n),e.add(a),!0)}var oA=Object.freeze({__proto__:null,BoxGeometry:bf,CapsuleGeometry:m_,CircleGeometry:g_,ConeGeometry:rg,CylinderGeometry:sg,DodecahedronGeometry:v_,EdgesGeometry:aw,ExtrudeGeometry:__,IcosahedronGeometry:x_,LatheGeometry:S_,OctahedronGeometry:og,PlaneGeometry:Cd,PolyhedronGeometry:Zu,RingGeometry:M_,ShapeGeometry:b_,SphereGeometry:lg,TetrahedronGeometry:E_,TorusGeometry:T_,TorusKnotGeometry:A_,TubeGeometry:R_,WireframeGeometry:pw});class mw extends za{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ce(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class gw extends to{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Hb extends za{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ce(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ce(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class vw extends Hb{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new It(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return qe(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ce(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ce(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ce(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class yw extends za{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ce(16777215),this.specular=new ce(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ce(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=ng,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class _w extends za{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ce(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ce(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class xw extends za{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class Sw extends za{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ce(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ce(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ks,this.combine=ng,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Fb extends za{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=UC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class Gb extends za{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class Mw extends za{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ce(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wu,this.normalScale=new It(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class bw extends ns{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function df(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}function Ew(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function Tw(i){function t(a,o){return i[a]-i[o]}const e=i.length,n=new Array(e);for(let a=0;a!==e;++a)n[a]=a;return n.sort(t),n}function xM(i,t,e){const n=i.length,a=new i.constructor(n);for(let o=0,c=0;c!==n;++o){const h=e[o]*t;for(let d=0;d!==t;++d)a[c++]=i[h+d]}return a}function Xb(i,t,e,n){let a=1,o=i[0];for(;o!==void 0&&o[n]===void 0;)o=i[a++];if(o===void 0)return;let c=o[n];if(c!==void 0)if(Array.isArray(c))do c=o[n],c!==void 0&&(t.push(o.time),e.push(...c)),o=i[a++];while(o!==void 0);else if(c.toArray!==void 0)do c=o[n],c!==void 0&&(t.push(o.time),c.toArray(e,e.length)),o=i[a++];while(o!==void 0);else do c=o[n],c!==void 0&&(t.push(o.time),e.push(c)),o=i[a++];while(o!==void 0)}function jB(i,t,e,n,a=30){const o=i.clone();o.name=t;const c=[];for(let d=0;d<o.tracks.length;++d){const m=o.tracks[d],v=m.getValueSize(),y=[],_=[];for(let M=0;M<m.times.length;++M){const T=m.times[M]*a;if(!(T<e||T>=n)){y.push(m.times[M]);for(let C=0;C<v;++C)_.push(m.values[M*v+C])}}y.length!==0&&(m.times=df(y,m.times.constructor),m.values=df(_,m.values.constructor),c.push(m))}o.tracks=c;let h=1/0;for(let d=0;d<o.tracks.length;++d)h>o.tracks[d].times[0]&&(h=o.tracks[d].times[0]);for(let d=0;d<o.tracks.length;++d)o.tracks[d].shift(-1*h);return o.resetDuration(),o}function ZB(i,t=0,e=i,n=30){n<=0&&(n=30);const a=e.tracks.length,o=t/n;for(let c=0;c<a;++c){const h=e.tracks[c],d=h.ValueTypeName;if(d==="bool"||d==="string")continue;const m=i.tracks.find(function(b){return b.name===h.name&&b.ValueTypeName===d});if(m===void 0)continue;let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);let _=0;const M=m.getValueSize();m.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=M/3);const T=h.times.length-1;let C;if(o<=h.times[0]){const b=v,D=y-v;C=h.values.slice(b,D)}else if(o>=h.times[T]){const b=T*y+v,D=b+y-v;C=h.values.slice(b,D)}else{const b=h.createInterpolant(),D=v,U=y-v;b.evaluate(o),C=b.resultBuffer.slice(D,U)}d==="quaternion"&&new bs().fromArray(C).normalize().conjugate().toArray(C);const R=m.times.length;for(let b=0;b<R;++b){const D=b*M+_;if(d==="quaternion")bs.multiplyQuaternionsFlat(m.values,D,C,0,m.values,D);else{const U=M-_*2;for(let N=0;N<U;++N)m.values[D+N]-=C[N]}}}return i.blendMode=bb,i}class KB{static convertArray(t,e){return df(t,e)}static isTypedArray(t){return Ew(t)}static getKeyframeOrder(t){return Tw(t)}static sortedArray(t,e,n){return xM(t,e,n)}static flattenJSON(t,e,n,a){Xb(t,e,n,a)}static subclip(t,e,n,a,o=30){return jB(t,e,n,a,o)}static makeClipAdditive(t,e=0,n=t,a=30){return ZB(t,e,n,a)}}class ug{constructor(t,e,n,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,a=e[n],o=e[n-1];t:{e:{let c;n:{i:if(!(t<a)){for(let h=n+2;;){if(a===void 0){if(t<o)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===h)break;if(o=a,a=e[++n],t<a)break e}c=e.length;break n}if(!(t>=o)){const h=e[1];t<h&&(n=2,o=h);for(let d=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(a=o,o=e[--n-1],t>=o)break e}c=n,n=0;break n}break t}for(;n<c;){const h=n+c>>>1;t<e[h]?c=h:n=h+1}if(a=e[n],o=e[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,a)}return this.interpolate_(n,o,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=t*a;for(let c=0;c!==a;++c)e[c]=n[o+c];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Aw extends ug{constructor(t,e,n,a){super(t,e,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ff,endingEnd:ff}}intervalChanged_(t,e,n){const a=this.parameterPositions;let o=t-2,c=t+1,h=a[o],d=a[c];if(h===void 0)switch(this.getSettings_().endingStart){case hf:o=t,h=2*e-n;break;case Vm:o=a.length-2,h=e+a[o]-a[o+1];break;default:o=t,h=n}if(d===void 0)switch(this.getSettings_().endingEnd){case hf:c=t,d=2*n-e;break;case Vm:c=1,d=n+a[1]-a[0];break;default:c=t-1,d=e}const m=(n-e)*.5,v=this.valueSize;this._weightPrev=m/(e-h),this._weightNext=m/(d-n),this._offsetPrev=o*v,this._offsetNext=c*v}interpolate_(t,e,n,a){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=t*h,m=d-h,v=this._offsetPrev,y=this._offsetNext,_=this._weightPrev,M=this._weightNext,T=(n-e)/(a-e),C=T*T,R=C*T,b=-_*R+2*_*C-_*T,D=(1+_)*R+(-1.5-2*_)*C+(-.5+_)*T+1,U=(-1-M)*R+(1.5+M)*C+.5*T,N=M*R-M*C;for(let P=0;P!==h;++P)o[P]=b*c[v+P]+D*c[m+P]+U*c[d+P]+N*c[y+P];return o}}class qb extends ug{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=t*h,m=d-h,v=(n-e)/(a-e),y=1-v;for(let _=0;_!==h;++_)o[_]=c[m+_]*y+c[d+_]*v;return o}}class Rw extends ug{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class _r{constructor(t,e,n,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=df(e,this.TimeBufferType),this.values=df(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:df(t.times,Array),values:df(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(n.interpolation=a)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Rw(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new qb(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Aw(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Im:e=this.InterpolantFactoryMethodDiscrete;break;case zy:e=this.InterpolantFactoryMethodLinear;break;case kv:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Im;case this.InterpolantFactoryMethodLinear:return zy;case this.InterpolantFactoryMethodSmooth:return kv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let n=0,a=e.length;n!==a;++n)e[n]*=t}return this}trim(t,e){const n=this.times,a=n.length;let o=0,c=a-1;for(;o!==a&&n[o]<t;)++o;for(;c!==-1&&n[c]>e;)--c;if(++c,o!==0||c!==a){o>=c&&(c=Math.max(c,1),o=c-1);const h=this.getValueSize();this.times=n.slice(o,c),this.values=this.values.slice(o*h,c*h)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,a=this.values,o=n.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let c=null;for(let h=0;h!==o;h++){const d=n[h];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,d),t=!1;break}if(c!==null&&c>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,d,c),t=!1;break}c=d}if(a!==void 0&&Ew(a))for(let h=0,d=a.length;h!==d;++h){const m=a[h];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,m),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),a=this.getInterpolation()===kv,o=t.length-1;let c=1;for(let h=1;h<o;++h){let d=!1;const m=t[h],v=t[h+1];if(m!==v&&(h!==1||m!==t[0]))if(a)d=!0;else{const y=h*n,_=y-n,M=y+n;for(let T=0;T!==n;++T){const C=e[y+T];if(C!==e[_+T]||C!==e[M+T]){d=!0;break}}}if(d){if(h!==c){t[c]=t[h];const y=h*n,_=c*n;for(let M=0;M!==n;++M)e[_+M]=e[y+M]}++c}}if(o>0){t[c]=t[o];for(let h=o*n,d=c*n,m=0;m!==n;++m)e[d+m]=e[h+m];++c}return c!==t.length?(this.times=t.slice(0,c),this.values=e.slice(0,c*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),n=this.constructor,a=new n(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}_r.prototype.ValueTypeName="";_r.prototype.TimeBufferType=Float32Array;_r.prototype.ValueBufferType=Float32Array;_r.prototype.DefaultInterpolation=zy;class Ef extends _r{constructor(t,e,n){super(t,e,n)}}Ef.prototype.ValueTypeName="bool";Ef.prototype.ValueBufferType=Array;Ef.prototype.DefaultInterpolation=Im;Ef.prototype.InterpolantFactoryMethodLinear=void 0;Ef.prototype.InterpolantFactoryMethodSmooth=void 0;class kb extends _r{constructor(t,e,n,a){super(t,e,n,a)}}kb.prototype.ValueTypeName="color";class Wm extends _r{constructor(t,e,n,a){super(t,e,n,a)}}Wm.prototype.ValueTypeName="number";class Cw extends ug{constructor(t,e,n,a){super(t,e,n,a)}interpolate_(t,e,n,a){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,d=(n-e)/(a-e);let m=t*h;for(let v=m+h;m!==v;m+=4)bs.slerpFlat(o,0,c,m-h,c,m,d);return o}}class cg extends _r{constructor(t,e,n,a){super(t,e,n,a)}InterpolantFactoryMethodLinear(t){return new Cw(this.times,this.values,this.getValueSize(),t)}}cg.prototype.ValueTypeName="quaternion";cg.prototype.InterpolantFactoryMethodSmooth=void 0;class Tf extends _r{constructor(t,e,n){super(t,e,n)}}Tf.prototype.ValueTypeName="string";Tf.prototype.ValueBufferType=Array;Tf.prototype.DefaultInterpolation=Im;Tf.prototype.InterpolantFactoryMethodLinear=void 0;Tf.prototype.InterpolantFactoryMethodSmooth=void 0;class jm extends _r{constructor(t,e,n,a){super(t,e,n,a)}}jm.prototype.ValueTypeName="vector";class Zm{constructor(t="",e=-1,n=[],a=s_){this.name=t,this.tracks=n,this.duration=e,this.blendMode=a,this.uuid=qs(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,a=1/(t.fps||1);for(let c=0,h=n.length;c!==h;++c)e.push(JB(n[c]).scale(a));const o=new this(t.name,t.duration,e,t.blendMode);return o.uuid=t.uuid,o}static toJSON(t){const e=[],n=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let o=0,c=n.length;o!==c;++o)e.push(_r.toJSON(n[o]));return a}static CreateFromMorphTargetSequence(t,e,n,a){const o=e.length,c=[];for(let h=0;h<o;h++){let d=[],m=[];d.push((h+o-1)%o,h,(h+1)%o),m.push(0,1,0);const v=Tw(d);d=xM(d,1,v),m=xM(m,1,v),!a&&d[0]===0&&(d.push(o),m.push(m[0])),c.push(new Wm(".morphTargetInfluences["+e[h].name+"]",d,m).scale(1/n))}return new this(t,-1,c)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const a=t;n=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<n.length;a++)if(n[a].name===e)return n[a];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const a={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,d=t.length;h<d;h++){const m=t[h],v=m.name.match(o);if(v&&v.length>1){const y=v[1];let _=a[y];_||(a[y]=_=[]),_.push(m)}}const c=[];for(const h in a)c.push(this.CreateFromMorphTargetSequence(h,a[h],e,n));return c}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,_,M,T,C){if(M.length!==0){const R=[],b=[];Xb(M,R,b,T),R.length!==0&&C.push(new y(_,R,b))}},a=[],o=t.name||"default",c=t.fps||30,h=t.blendMode;let d=t.length||-1;const m=t.hierarchy||[];for(let y=0;y<m.length;y++){const _=m[y].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const M={};let T;for(T=0;T<_.length;T++)if(_[T].morphTargets)for(let C=0;C<_[T].morphTargets.length;C++)M[_[T].morphTargets[C]]=-1;for(const C in M){const R=[],b=[];for(let D=0;D!==_[T].morphTargets.length;++D){const U=_[T];R.push(U.time),b.push(U.morphTarget===C?1:0)}a.push(new Wm(".morphTargetInfluence["+C+"]",R,b))}d=M.length*c}else{const M=".bones["+e[y].name+"]";n(jm,M+".position",_,"pos",a),n(cg,M+".quaternion",_,"rot",a),n(jm,M+".scale",_,"scl",a)}}return a.length===0?null:new this(o,d,a,h)}resetDuration(){const t=this.tracks;let e=0;for(let n=0,a=t.length;n!==a;++n){const o=this.tracks[n];e=Math.max(e,o.times[o.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QB(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wm;case"vector":case"vector2":case"vector3":case"vector4":return jm;case"color":return kb;case"quaternion":return cg;case"bool":case"boolean":return Ef;case"string":return Tf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function JB(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=QB(i.type);if(i.times===void 0){const e=[],n=[];Xb(i.keys,e,n,"value"),i.times=e,i.values=n}return t.parse!==void 0?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Go={enabled:!1,files:{},add:function(i,t){this.enabled!==!1&&(this.files[i]=t)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Yb{constructor(t,e,n){const a=this;let o=!1,c=0,h=0,d;const m=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(v){h++,o===!1&&a.onStart!==void 0&&a.onStart(v,c,h),o=!0},this.itemEnd=function(v){c++,a.onProgress!==void 0&&a.onProgress(v,c,h),c===h&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(v){a.onError!==void 0&&a.onError(v)},this.resolveURL=function(v){return d?d(v):v},this.setURLModifier=function(v){return d=v,this},this.addHandler=function(v,y){return m.push(v,y),this},this.removeHandler=function(v){const y=m.indexOf(v);return y!==-1&&m.splice(y,2),this},this.getHandler=function(v){for(let y=0,_=m.length;y<_;y+=2){const M=m[y],T=m[y+1];if(M.global&&(M.lastIndex=0),M.test(v))return T}return null}}}const ww=new Yb;class Es{constructor(t){this.manager=t!==void 0?t:ww,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise(function(a,o){n.load(t,a,e,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Es.DEFAULT_MATERIAL_NAME="__DEFAULT";const Rl={};class $B extends Error{constructor(t,e){super(t),this.response=e}}class Pl extends Es{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=Go.get(`file:${t}`);if(o!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(o),this.manager.itemEnd(t)},0),o;if(Rl[t]!==void 0){Rl[t].push({onLoad:e,onProgress:n,onError:a});return}Rl[t]=[],Rl[t].push({onLoad:e,onProgress:n,onError:a});const c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,d=this.responseType;fetch(c).then(m=>{if(m.status===200||m.status===0){if(m.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||m.body===void 0||m.body.getReader===void 0)return m;const v=Rl[t],y=m.body.getReader(),_=m.headers.get("X-File-Size")||m.headers.get("Content-Length"),M=_?parseInt(_):0,T=M!==0;let C=0;const R=new ReadableStream({start(b){D();function D(){y.read().then(({done:U,value:N})=>{if(U)b.close();else{C+=N.byteLength;const P=new ProgressEvent("progress",{lengthComputable:T,loaded:C,total:M});for(let B=0,H=v.length;B<H;B++){const X=v[B];X.onProgress&&X.onProgress(P)}b.enqueue(N),D()}},U=>{b.error(U)})}}});return new Response(R)}else throw new $B(`fetch for "${m.url}" responded with ${m.status}: ${m.statusText}`,m)}).then(m=>{switch(d){case"arraybuffer":return m.arrayBuffer();case"blob":return m.blob();case"document":return m.text().then(v=>new DOMParser().parseFromString(v,h));case"json":return m.json();default:if(h==="")return m.text();{const y=/charset="?([^;"\s]*)"?/i.exec(h),_=y&&y[1]?y[1].toLowerCase():void 0,M=new TextDecoder(_);return m.arrayBuffer().then(T=>M.decode(T))}}}).then(m=>{Go.add(`file:${t}`,m);const v=Rl[t];delete Rl[t];for(let y=0,_=v.length;y<_;y++){const M=v[y];M.onLoad&&M.onLoad(m)}}).catch(m=>{const v=Rl[t];if(v===void 0)throw this.manager.itemError(t),m;delete Rl[t];for(let y=0,_=v.length;y<_;y++){const M=v[y];M.onError&&M.onError(m)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class t4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=new Pl(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e=[];for(let n=0;n<t.length;n++){const a=Zm.parse(t[n]);e.push(a)}return e}}class e4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=[],h=new p_,d=new Pl(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(o.withCredentials);let m=0;function v(y){d.load(t[y],function(_){const M=o.parse(_,!0);c[y]={width:M.width,height:M.height,format:M.format,mipmaps:M.mipmaps},m+=1,m===6&&(M.mipmapCount===1&&(h.minFilter=Yi),h.image=c,h.format=M.format,h.needsUpdate=!0,e&&e(h))},n,a)}if(Array.isArray(t))for(let y=0,_=t.length;y<_;++y)v(y);else d.load(t,function(y){const _=o.parse(y,!0);if(_.isCubemap){const M=_.mipmaps.length/_.mipmapCount;for(let T=0;T<M;T++){c[T]={mipmaps:[]};for(let C=0;C<_.mipmapCount;C++)c[T].mipmaps.push(_.mipmaps[T*_.mipmapCount+C]),c[T].format=_.format,c[T].width=_.width,c[T].height=_.height}h.image=c}else h.image.width=_.width,h.image.height=_.height,h.mipmaps=_.mipmaps;_.mipmapCount===1&&(h.minFilter=Yi),h.format=_.format,h.needsUpdate=!0,e&&e(h)},n,a);return h}}const qh=new WeakMap;class Km extends Es{constructor(t){super(t)}load(t,e,n,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Go.get(`image:${t}`);if(c!==void 0){if(c.complete===!0)o.manager.itemStart(t),setTimeout(function(){e&&e(c),o.manager.itemEnd(t)},0);else{let y=qh.get(c);y===void 0&&(y=[],qh.set(c,y)),y.push({onLoad:e,onError:a})}return c}const h=Xm("img");function d(){v(),e&&e(this);const y=qh.get(this)||[];for(let _=0;_<y.length;_++){const M=y[_];M.onLoad&&M.onLoad(this)}qh.delete(this),o.manager.itemEnd(t)}function m(y){v(),a&&a(y),Go.remove(`image:${t}`);const _=qh.get(this)||[];for(let M=0;M<_.length;M++){const T=_[M];T.onError&&T.onError(y)}qh.delete(this),o.manager.itemError(t),o.manager.itemEnd(t)}function v(){h.removeEventListener("load",d,!1),h.removeEventListener("error",m,!1)}return h.addEventListener("load",d,!1),h.addEventListener("error",m,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),Go.add(`image:${t}`,h),o.manager.itemStart(t),h.src=t,h}}class n4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=new ag;o.colorSpace=Ua;const c=new Km(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;function d(m){c.load(t[m],function(v){o.images[m]=v,h++,h===6&&(o.needsUpdate=!0,e&&e(o))},void 0,a)}for(let m=0;m<t.length;++m)d(m);return o}}class i4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=new Wo,h=new Pl(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(o.withCredentials),h.load(t,function(d){let m;try{m=o.parse(d)}catch(v){if(a!==void 0)a(v);else{console.error(v);return}}m.image!==void 0?c.image=m.image:m.data!==void 0&&(c.image.width=m.width,c.image.height=m.height,c.image.data=m.data),c.wrapS=m.wrapS!==void 0?m.wrapS:gr,c.wrapT=m.wrapT!==void 0?m.wrapT:gr,c.magFilter=m.magFilter!==void 0?m.magFilter:Yi,c.minFilter=m.minFilter!==void 0?m.minFilter:Yi,c.anisotropy=m.anisotropy!==void 0?m.anisotropy:1,m.colorSpace!==void 0&&(c.colorSpace=m.colorSpace),m.flipY!==void 0&&(c.flipY=m.flipY),m.format!==void 0&&(c.format=m.format),m.type!==void 0&&(c.type=m.type),m.mipmaps!==void 0&&(c.mipmaps=m.mipmaps,c.minFilter=Fo),m.mipmapCount===1&&(c.minFilter=Yi),m.generateMipmaps!==void 0&&(c.generateMipmaps=m.generateMipmaps),c.needsUpdate=!0,e&&e(c,m)},n,a),c}}class a4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=new vi,c=new Km(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(t,function(h){o.image=h,o.needsUpdate=!0,e!==void 0&&e(o)},n,a),o}}class Ku extends Mn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new ce(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class Dw extends Ku{constructor(t,e,n){super(t,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ce(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const dS=new Pe,lA=new K,uA=new K;class Wb{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new It(512,512),this.mapType=yr,this.map=null,this.mapPass=null,this.matrix=new Pe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rd,this._frameExtents=new It(1,1),this._viewportCount=1,this._viewports=[new Sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;lA.setFromMatrixPosition(t.matrixWorld),e.position.copy(lA),uA.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(uA),e.updateMatrixWorld(),dS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dS),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class s4 extends Wb{constructor(){super(new ia(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const e=this.camera,n=dd*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,o=t.distance||e.far;(n!==e.fov||a!==e.aspect||o!==e.far)&&(e.fov=n,e.aspect=a,e.far=o,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Uw extends Ku{constructor(t,e,n=0,a=Math.PI/3,o=0,c=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.distance=n,this.angle=a,this.penumbra=o,this.decay=c,this.map=null,this.shadow=new s4}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const cA=new Pe,sm=new K,pS=new K;class r4 extends Wb{constructor(){super(new ia(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new It(4,2),this._viewportCount=6,this._viewports=[new Sn(2,1,1,1),new Sn(0,1,1,1),new Sn(3,1,1,1),new Sn(1,1,1,1),new Sn(3,0,1,1),new Sn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,a=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),sm.setFromMatrixPosition(t.matrixWorld),n.position.copy(sm),pS.copy(n.position),pS.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(pS),n.updateMatrixWorld(),a.makeTranslation(-sm.x,-sm.y,-sm.z),cA.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cA)}}class Nw extends Ku{constructor(t,e,n=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=a,this.shadow=new r4}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class fg extends l_{constructor(t=-1,e=1,n=1,a=-1,o=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=a,this.near=o,this.far=c,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,a,o,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=a,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=n-t,c=n+t,h=a+e,d=a-e;if(this.view!==null&&this.view.enabled){const m=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=m*this.view.offsetX,c=o+m*this.view.width,h-=v*this.view.offsetY,d=h-v*this.view.height}this.projectionMatrix.makeOrthographic(o,c,h,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class o4 extends Wb{constructor(){super(new fg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Ow extends Ku{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.shadow=new o4}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Lw extends Ku{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class zw extends Ku{constructor(t,e,n=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class Pw{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new K)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,a=t.y,o=t.z,c=this.coefficients;return e.copy(c[0]).multiplyScalar(.282095),e.addScaledVector(c[1],.488603*a),e.addScaledVector(c[2],.488603*o),e.addScaledVector(c[3],.488603*n),e.addScaledVector(c[4],1.092548*(n*a)),e.addScaledVector(c[5],1.092548*(a*o)),e.addScaledVector(c[6],.315392*(3*o*o-1)),e.addScaledVector(c[7],1.092548*(n*o)),e.addScaledVector(c[8],.546274*(n*n-a*a)),e}getIrradianceAt(t,e){const n=t.x,a=t.y,o=t.z,c=this.coefficients;return e.copy(c[0]).multiplyScalar(.886227),e.addScaledVector(c[1],2*.511664*a),e.addScaledVector(c[2],2*.511664*o),e.addScaledVector(c[3],2*.511664*n),e.addScaledVector(c[4],2*.429043*n*a),e.addScaledVector(c[5],2*.429043*a*o),e.addScaledVector(c[6],.743125*o*o-.247708),e.addScaledVector(c[7],2*.429043*n*o),e.addScaledVector(c[8],.429043*(n*n-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const n=this.coefficients;for(let a=0;a<9;a++)n[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const n=t.x,a=t.y,o=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*a,e[5]=1.092548*a*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-a*a)}}class Bw extends Ku{constructor(t=new Pw,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class C_ extends Es{constructor(t){super(t),this.textures={}}load(t,e,n,a){const o=this,c=new Pl(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e=this.textures;function n(o){return e[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),e[o]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new ce().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const o in t.uniforms){const c=t.uniforms[o];switch(a.uniforms[o]={},c.type){case"t":a.uniforms[o].value=n(c.value);break;case"c":a.uniforms[o].value=new ce().setHex(c.value);break;case"v2":a.uniforms[o].value=new It().fromArray(c.value);break;case"v3":a.uniforms[o].value=new K().fromArray(c.value);break;case"v4":a.uniforms[o].value=new Sn().fromArray(c.value);break;case"m3":a.uniforms[o].value=new je().fromArray(c.value);break;case"m4":a.uniforms[o].value=new Pe().fromArray(c.value);break;default:a.uniforms[o].value=c.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const o in t.extensions)a.extensions[o]=t.extensions[o];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=n(t.map)),t.matcap!==void 0&&(a.matcap=n(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let o=t.normalScale;Array.isArray(o)===!1&&(o=[o,o]),a.normalScale=new It().fromArray(o)}return t.displacementMap!==void 0&&(a.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=n(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=n(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=n(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=n(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new It().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=n(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=n(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=n(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=n(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=n(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=n(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=n(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return C_.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:mw,SpriteMaterial:Db,RawShaderMaterial:gw,ShaderMaterial:to,PointsMaterial:Nb,MeshPhysicalMaterial:vw,MeshStandardMaterial:Hb,MeshPhongMaterial:yw,MeshToonMaterial:_w,MeshNormalMaterial:xw,MeshLambertMaterial:Sw,MeshDepthMaterial:Fb,MeshDistanceMaterial:Gb,MeshBasicMaterial:ju,MeshMatcapMaterial:Mw,LineDashedMaterial:bw,LineBasicMaterial:ns,Material:za};return new e[t]}}class SM{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Iw extends Je{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class Vw extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=new Pl(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(t,function(h){try{e(o.parse(JSON.parse(h)))}catch(d){a?a(d):console.error(d),o.manager.itemError(t)}},n,a)}parse(t){const e={},n={};function a(M,T){if(e[T]!==void 0)return e[T];const R=M.interleavedBuffers[T],b=o(M,R.buffer),D=nd(R.type,b),U=new f_(D,R.stride);return U.uuid=R.uuid,e[T]=U,U}function o(M,T){if(n[T]!==void 0)return n[T];const R=M.arrayBuffers[T],b=new Uint32Array(R).buffer;return n[T]=b,b}const c=t.isInstancedBufferGeometry?new Iw:new Je,h=t.data.index;if(h!==void 0){const M=nd(h.type,h.array);c.setIndex(new kn(M,1))}const d=t.data.attributes;for(const M in d){const T=d[M];let C;if(T.isInterleavedBufferAttribute){const R=a(t.data,T.data);C=new xf(R,T.itemSize,T.offset,T.normalized)}else{const R=nd(T.type,T.array),b=T.isInstancedBufferAttribute?gd:kn;C=new b(R,T.itemSize,T.normalized)}T.name!==void 0&&(C.name=T.name),T.usage!==void 0&&C.setUsage(T.usage),c.setAttribute(M,C)}const m=t.data.morphAttributes;if(m)for(const M in m){const T=m[M],C=[];for(let R=0,b=T.length;R<b;R++){const D=T[R];let U;if(D.isInterleavedBufferAttribute){const N=a(t.data,D.data);U=new xf(N,D.itemSize,D.offset,D.normalized)}else{const N=nd(D.type,D.array);U=new kn(N,D.itemSize,D.normalized)}D.name!==void 0&&(U.name=D.name),C.push(U)}c.morphAttributes[M]=C}t.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const y=t.data.groups||t.data.drawcalls||t.data.offsets;if(y!==void 0)for(let M=0,T=y.length;M!==T;++M){const C=y[M];c.addGroup(C.start,C.count,C.materialIndex)}const _=t.data.boundingSphere;return _!==void 0&&(c.boundingSphere=new ga().fromJSON(_)),t.name&&(c.name=t.name),t.userData&&(c.userData=t.userData),c}}class l4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=this.path===""?SM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||c;const h=new Pl(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(t,function(d){let m=null;try{m=JSON.parse(d)}catch(y){a!==void 0&&a(y),console.error("THREE:ObjectLoader: Can't parse "+t+".",y.message);return}const v=m.metadata;if(v===void 0||v.type===void 0||v.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}o.parse(m,e)},n,a)}async loadAsync(t,e){const n=this,a=this.path===""?SM.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const o=new Pl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const c=await o.loadAsync(t,e),h=JSON.parse(c),d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await n.parseAsync(h)}parse(t,e){const n=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),o=this.parseGeometries(t.geometries,a),c=this.parseImages(t.images,function(){e!==void 0&&e(m)}),h=this.parseTextures(t.textures,c),d=this.parseMaterials(t.materials,h),m=this.parseObject(t.object,o,d,h,n),v=this.parseSkeletons(t.skeletons,m);if(this.bindSkeletons(m,v),this.bindLightTargets(m),e!==void 0){let y=!1;for(const _ in c)if(c[_].data instanceof HTMLImageElement){y=!0;break}y===!1&&e(m)}return m}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,n),o=await this.parseImagesAsync(t.images),c=this.parseTextures(t.textures,o),h=this.parseMaterials(t.materials,c),d=this.parseObject(t.object,a,h,c,e),m=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,m),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let n=0,a=t.length;n<a;n++){const o=new yf().fromJSON(t[n]);e[o.uuid]=o}return e}parseSkeletons(t,e){const n={},a={};if(e.traverse(function(o){o.isBone&&(a[o.uuid]=o)}),t!==void 0)for(let o=0,c=t.length;o<c;o++){const h=new h_().fromJSON(t[o],a);n[h.uuid]=h}return n}parseGeometries(t,e){const n={};if(t!==void 0){const a=new Vw;for(let o=0,c=t.length;o<c;o++){let h;const d=t[o];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":h=a.parse(d);break;default:d.type in oA?h=oA[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}h.uuid=d.uuid,d.name!==void 0&&(h.name=d.name),d.userData!==void 0&&(h.userData=d.userData),n[d.uuid]=h}}return n}parseMaterials(t,e){const n={},a={};if(t!==void 0){const o=new C_;o.setTextures(e);for(let c=0,h=t.length;c<h;c++){const d=t[c];n[d.uuid]===void 0&&(n[d.uuid]=o.parse(d)),a[d.uuid]=n[d.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let n=0;n<t.length;n++){const a=t[n],o=Zm.parse(a);e[o.uuid]=o}return e}parseImages(t,e){const n=this,a={};let o;function c(d){return n.manager.itemStart(d),o.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function h(d){if(typeof d=="string"){const m=d,v=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(m)?m:n.resourcePath+m;return c(v)}else return d.data?{data:nd(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new Yb(e);o=new Km(d),o.setCrossOrigin(this.crossOrigin);for(let m=0,v=t.length;m<v;m++){const y=t[m],_=y.url;if(Array.isArray(_)){const M=[];for(let T=0,C=_.length;T<C;T++){const R=_[T],b=h(R);b!==null&&(b instanceof HTMLImageElement?M.push(b):M.push(new Wo(b.data,b.width,b.height)))}a[y.uuid]=new Fu(M)}else{const M=h(y.url);a[y.uuid]=new Fu(M)}}}return a}async parseImagesAsync(t){const e=this,n={};let a;async function o(c){if(typeof c=="string"){const h=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:e.resourcePath+h;return await a.loadAsync(d)}else return c.data?{data:nd(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&&t.length>0){a=new Km(this.manager),a.setCrossOrigin(this.crossOrigin);for(let c=0,h=t.length;c<h;c++){const d=t[c],m=d.url;if(Array.isArray(m)){const v=[];for(let y=0,_=m.length;y<_;y++){const M=m[y],T=await o(M);T!==null&&(T instanceof HTMLImageElement?v.push(T):v.push(new Wo(T.data,T.width,T.height)))}n[d.uuid]=new Fu(v)}else{const v=await o(d.url);n[d.uuid]=new Fu(v)}}}return n}parseTextures(t,e){function n(o,c){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),c[o])}const a={};if(t!==void 0)for(let o=0,c=t.length;o<c;o++){const h=t[o];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),e[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const d=e[h.image],m=d.data;let v;Array.isArray(m)?(v=new ag,m.length===6&&(v.needsUpdate=!0)):(m&&m.data?v=new Wo:v=new vi,m&&(v.needsUpdate=!0)),v.source=d,v.uuid=h.uuid,h.name!==void 0&&(v.name=h.name),h.mapping!==void 0&&(v.mapping=n(h.mapping,u4)),h.channel!==void 0&&(v.channel=h.channel),h.offset!==void 0&&v.offset.fromArray(h.offset),h.repeat!==void 0&&v.repeat.fromArray(h.repeat),h.center!==void 0&&v.center.fromArray(h.center),h.rotation!==void 0&&(v.rotation=h.rotation),h.wrap!==void 0&&(v.wrapS=n(h.wrap[0],fA),v.wrapT=n(h.wrap[1],fA)),h.format!==void 0&&(v.format=h.format),h.internalFormat!==void 0&&(v.internalFormat=h.internalFormat),h.type!==void 0&&(v.type=h.type),h.colorSpace!==void 0&&(v.colorSpace=h.colorSpace),h.minFilter!==void 0&&(v.minFilter=n(h.minFilter,hA)),h.magFilter!==void 0&&(v.magFilter=n(h.magFilter,hA)),h.anisotropy!==void 0&&(v.anisotropy=h.anisotropy),h.flipY!==void 0&&(v.flipY=h.flipY),h.generateMipmaps!==void 0&&(v.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(v.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(v.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(v.compareFunction=h.compareFunction),h.userData!==void 0&&(v.userData=h.userData),a[h.uuid]=v}return a}parseObject(t,e,n,a,o){let c;function h(_){return e[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),e[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const M=[];for(let T=0,C=_.length;T<C;T++){const R=_[T];n[R]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",R),M.push(n[R])}return M}return n[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),n[_]}}function m(_){return a[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),a[_]}let v,y;switch(t.type){case"Scene":c=new wb,t.background!==void 0&&(Number.isInteger(t.background)?c.background=new ce(t.background):c.background=m(t.background)),t.environment!==void 0&&(c.environment=m(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?c.fog=new c_(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(c.fog=new u_(t.fog.color,t.fog.density)),t.fog.name!==""&&(c.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(c.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(c.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&c.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(c.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&c.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":c=new ia(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(c.focus=t.focus),t.zoom!==void 0&&(c.zoom=t.zoom),t.filmGauge!==void 0&&(c.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(c.filmOffset=t.filmOffset),t.view!==void 0&&(c.view=Object.assign({},t.view));break;case"OrthographicCamera":c=new fg(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(c.zoom=t.zoom),t.view!==void 0&&(c.view=Object.assign({},t.view));break;case"AmbientLight":c=new Lw(t.color,t.intensity);break;case"DirectionalLight":c=new Ow(t.color,t.intensity),c.target=t.target||"";break;case"PointLight":c=new Nw(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":c=new zw(t.color,t.intensity,t.width,t.height);break;case"SpotLight":c=new Uw(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),c.target=t.target||"";break;case"HemisphereLight":c=new Dw(t.color,t.groundColor,t.intensity);break;case"LightProbe":c=new Bw().fromJSON(t);break;case"SkinnedMesh":v=h(t.geometry),y=d(t.material),c=new JC(v,y),t.bindMode!==void 0&&(c.bindMode=t.bindMode),t.bindMatrix!==void 0&&c.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(c.skeleton=t.skeleton);break;case"Mesh":v=h(t.geometry),y=d(t.material),c=new Pi(v,y);break;case"InstancedMesh":v=h(t.geometry),y=d(t.material);const _=t.count,M=t.instanceMatrix,T=t.instanceColor;c=new $C(v,y,_),c.instanceMatrix=new gd(new Float32Array(M.array),16),T!==void 0&&(c.instanceColor=new gd(new Float32Array(T.array),T.itemSize));break;case"BatchedMesh":v=h(t.geometry),y=d(t.material),c=new tw(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,y),c.geometry=v,c.perObjectFrustumCulled=t.perObjectFrustumCulled,c.sortObjects=t.sortObjects,c._drawRanges=t.drawRanges,c._reservedRanges=t.reservedRanges,c._geometryInfo=t.geometryInfo.map(C=>{let R=null,b=null;return C.boundingBox!==void 0&&(R=new La().fromJSON(C.boundingBox)),C.boundingSphere!==void 0&&(b=new ga().fromJSON(C.boundingSphere)),{...C,boundingBox:R,boundingSphere:b}}),c._instanceInfo=t.instanceInfo,c._availableInstanceIds=t._availableInstanceIds,c._availableGeometryIds=t._availableGeometryIds,c._nextIndexStart=t.nextIndexStart,c._nextVertexStart=t.nextVertexStart,c._geometryCount=t.geometryCount,c._maxInstanceCount=t.maxInstanceCount,c._maxVertexCount=t.maxVertexCount,c._maxIndexCount=t.maxIndexCount,c._geometryInitialized=t.geometryInitialized,c._matricesTexture=m(t.matricesTexture.uuid),c._indirectTexture=m(t.indirectTexture.uuid),t.colorsTexture!==void 0&&(c._colorsTexture=m(t.colorsTexture.uuid)),t.boundingSphere!==void 0&&(c.boundingSphere=new ga().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&&(c.boundingBox=new La().fromJSON(t.boundingBox));break;case"LOD":c=new QC;break;case"Line":c=new ku(h(t.geometry),d(t.material));break;case"LineLoop":c=new ew(h(t.geometry),d(t.material));break;case"LineSegments":c=new Qo(h(t.geometry),d(t.material));break;case"PointCloud":case"Points":c=new nw(h(t.geometry),d(t.material));break;case"Sprite":c=new KC(d(t.material));break;case"Group":c=new id;break;case"Bone":c=new Ub;break;default:c=new Mn}if(c.uuid=t.uuid,t.name!==void 0&&(c.name=t.name),t.matrix!==void 0?(c.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=t.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(t.position!==void 0&&c.position.fromArray(t.position),t.rotation!==void 0&&c.rotation.fromArray(t.rotation),t.quaternion!==void 0&&c.quaternion.fromArray(t.quaternion),t.scale!==void 0&&c.scale.fromArray(t.scale)),t.up!==void 0&&c.up.fromArray(t.up),t.castShadow!==void 0&&(c.castShadow=t.castShadow),t.receiveShadow!==void 0&&(c.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(c.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(c.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(c.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(c.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(c.visible=t.visible),t.frustumCulled!==void 0&&(c.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(c.renderOrder=t.renderOrder),t.userData!==void 0&&(c.userData=t.userData),t.layers!==void 0&&(c.layers.mask=t.layers),t.children!==void 0){const _=t.children;for(let M=0;M<_.length;M++)c.add(this.parseObject(_[M],e,n,a,o))}if(t.animations!==void 0){const _=t.animations;for(let M=0;M<_.length;M++){const T=_[M];c.animations.push(o[T])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(c.autoUpdate=t.autoUpdate);const _=t.levels;for(let M=0;M<_.length;M++){const T=_[M],C=c.getObjectByProperty("uuid",T.object);C!==void 0&&c.addLevel(C,T.distance,T.hysteresis)}}return c}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const a=e[n.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(a,n.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const n=e.target,a=t.getObjectByProperty("uuid",n);a!==void 0?e.target=a:e.target=new Mn}})}}const u4={UVMapping:Jy,CubeReflectionMapping:Ll,CubeRefractionMapping:Xu,EquirectangularReflectionMapping:Lm,EquirectangularRefractionMapping:zm,CubeUVReflectionMapping:Ed},fA={RepeatWrapping:Pm,ClampToEdgeWrapping:gr,MirroredRepeatWrapping:Bm},hA={NearestFilter:ma,NearestMipmapNearestFilter:mb,NearestMipmapLinearFilter:ed,LinearFilter:Yi,LinearMipmapNearestFilter:vm,LinearMipmapLinearFilter:Fo},mS=new WeakMap;class c4 extends Es{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const o=this,c=Go.get(`image-bitmap:${t}`);if(c!==void 0){if(o.manager.itemStart(t),c.then){c.then(m=>{if(mS.has(c)===!0)a&&a(mS.get(c)),o.manager.itemError(t),o.manager.itemEnd(t);else return e&&e(m),o.manager.itemEnd(t),m});return}return setTimeout(function(){e&&e(c),o.manager.itemEnd(t)},0),c}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const d=fetch(t,h).then(function(m){return m.blob()}).then(function(m){return createImageBitmap(m,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(m){return Go.add(`image-bitmap:${t}`,m),e&&e(m),o.manager.itemEnd(t),m}).catch(function(m){a&&a(m),mS.set(d,m),Go.remove(`image-bitmap:${t}`),o.manager.itemError(t),o.manager.itemEnd(t)});Go.add(`image-bitmap:${t}`,d),o.manager.itemStart(t)}}let Tv;class jb{static getContext(){return Tv===void 0&&(Tv=new(window.AudioContext||window.webkitAudioContext)),Tv}static setContext(t){Tv=t}}class f4 extends Es{constructor(t){super(t)}load(t,e,n,a){const o=this,c=new Pl(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(t,function(d){try{const m=d.slice(0);jb.getContext().decodeAudioData(m,function(y){e(y)}).catch(h)}catch(m){h(m)}},n,a);function h(d){a?a(d):console.error(d),o.manager.itemError(t)}}}const dA=new Pe,pA=new Pe,Kc=new Pe;class h4{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ia,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ia,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,Kc.copy(t.projectionMatrix);const a=e.eyeSep/2,o=a*e.near/e.focus,c=e.near*Math.tan(vf*e.fov*.5)/e.zoom;let h,d;pA.elements[12]=-a,dA.elements[12]=a,h=-c*e.aspect+o,d=c*e.aspect+o,Kc.elements[0]=2*e.near/(d-h),Kc.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(Kc),h=-c*e.aspect-o,d=c*e.aspect-o,Kc.elements[0]=2*e.near/(d-h),Kc.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(Kc)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(pA),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(dA)}}class Hw extends ia{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}class Zb{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}const Qc=new K,gS=new bs,d4=new K,Jc=new K,$c=new K;class p4 extends Mn{constructor(){super(),this.type="AudioListener",this.context=jb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Zb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qc,gS,d4),Jc.set(0,0,-1).applyQuaternion(gS),$c.set(0,1,0).applyQuaternion(gS),e.positionX){const n=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Qc.x,n),e.positionY.linearRampToValueAtTime(Qc.y,n),e.positionZ.linearRampToValueAtTime(Qc.z,n),e.forwardX.linearRampToValueAtTime(Jc.x,n),e.forwardY.linearRampToValueAtTime(Jc.y,n),e.forwardZ.linearRampToValueAtTime(Jc.z,n),e.upX.linearRampToValueAtTime($c.x,n),e.upY.linearRampToValueAtTime($c.y,n),e.upZ.linearRampToValueAtTime($c.z,n)}else e.setPosition(Qc.x,Qc.y,Qc.z),e.setOrientation(Jc.x,Jc.y,Jc.z,$c.x,$c.y,$c.z)}}class Fw extends Mn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const tf=new K,mA=new bs,m4=new K,ef=new K;class g4 extends Fw{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(tf,mA,m4),ef.set(0,0,1).applyQuaternion(mA);const e=this.panner;if(e.positionX){const n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(tf.x,n),e.positionY.linearRampToValueAtTime(tf.y,n),e.positionZ.linearRampToValueAtTime(tf.z,n),e.orientationX.linearRampToValueAtTime(ef.x,n),e.orientationY.linearRampToValueAtTime(ef.y,n),e.orientationZ.linearRampToValueAtTime(ef.z,n)}else e.setPosition(tf.x,tf.y,tf.z),e.setOrientation(ef.x,ef.y,ef.z)}}class v4{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}class Gw{constructor(t,e,n){this.binding=t,this.valueSize=n;let a,o,c;switch(e){case"quaternion":a=this._slerp,o=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":a=this._select,o=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:a=this._lerp,o=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=o,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,a=this.valueSize,o=t*a+a;let c=this.cumulativeWeight;if(c===0){for(let h=0;h!==a;++h)n[o+h]=n[h];c=e}else{c+=e;const h=e/c;this._mixBufferRegion(n,o,0,h,a)}this.cumulativeWeight=c}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,a=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,a=t*e+e,o=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const d=e*this._origIndex;this._mixBufferRegion(n,a,d,1-o,e)}c>0&&this._mixBufferRegionAdditive(n,a,this._addIndex*e,1,e);for(let d=e,m=e+e;d!==m;++d)if(n[d]!==n[d+e]){h.setValue(n,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,a=n*this._origIndex;t.getValue(e,a);for(let o=n,c=a;o!==c;++o)e[o]=e[a+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,a,o){if(a>=.5)for(let c=0;c!==o;++c)t[e+c]=t[n+c]}_slerp(t,e,n,a){bs.slerpFlat(t,e,t,e,t,n,a)}_slerpAdditive(t,e,n,a,o){const c=this._workIndex*o;bs.multiplyQuaternionsFlat(t,c,t,e,t,n),bs.slerpFlat(t,e,t,e,t,c,a)}_lerp(t,e,n,a,o){const c=1-a;for(let h=0;h!==o;++h){const d=e+h;t[d]=t[d]*c+t[n+h]*a}}_lerpAdditive(t,e,n,a,o){for(let c=0;c!==o;++c){const h=e+c;t[h]=t[h]+t[n+c]*a}}}const Kb="\\[\\]\\.:\\/",y4=new RegExp("["+Kb+"]","g"),Qb="[^"+Kb+"]",_4="[^"+Kb.replace("\\.","")+"]",x4=/((?:WC+[\/:])*)/.source.replace("WC",Qb),S4=/(WCOD+)?/.source.replace("WCOD",_4),M4=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qb),b4=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qb),E4=new RegExp("^"+x4+S4+M4+b4+"$"),T4=["material","materials","bones","map"];class A4{constructor(t,e,n){const a=n||xn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let a=this._targetGroup.nCachedObjects_,o=n.length;a!==o;++a)n[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}class xn{constructor(t,e,n){this.path=e,this.parsedPath=n||xn.parseTrackName(e),this.node=xn.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new xn.Composite(t,e,n):new xn(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(y4,"")}static parseTrackName(t){const e=E4.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=n.nodeName&&n.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const o=n.nodeName.substring(a+1);T4.indexOf(o)!==-1&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=o)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(o){for(let c=0;c<o.length;c++){const h=o[c];if(h.name===e||h.uuid===e)return h;const d=n(h.children);if(d)return d}return null},a=n(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)t[e++]=n[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let a=0,o=n.length;a!==o;++a)n[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,a=e.propertyName;let o=e.propertyIndex;if(t||(t=xn.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let m=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let v=0;v<t.length;v++)if(t[v].name===m){m=v;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(m!==void 0){if(t[m]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[m]}}const c=t[a];if(c===void 0){const m=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+m+"."+a+" but it wasn't found.",t);return}let h=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?h=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(o!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[o]!==void 0&&(o=t.morphTargetDictionary[o])}d=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else c.fromArray!==void 0&&c.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(d=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}xn.Composite=A4;xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};xn.prototype.GetterByBindingType=[xn.prototype._getValue_direct,xn.prototype._getValue_array,xn.prototype._getValue_arrayElement,xn.prototype._getValue_toArray];xn.prototype.SetterByBindingTypeAndVersioning=[[xn.prototype._setValue_direct,xn.prototype._setValue_direct_setNeedsUpdate,xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_array,xn.prototype._setValue_array_setNeedsUpdate,xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_arrayElement,xn.prototype._setValue_arrayElement_setNeedsUpdate,xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[xn.prototype._setValue_fromArray,xn.prototype._setValue_fromArray_setNeedsUpdate,xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class R4{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,a=arguments.length;n!==a;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,c=o.length;let h,d=t.length,m=this.nCachedObjects_;for(let v=0,y=arguments.length;v!==y;++v){const _=arguments[v],M=_.uuid;let T=e[M];if(T===void 0){T=d++,e[M]=T,t.push(_);for(let C=0,R=c;C!==R;++C)o[C].push(new xn(_,n[C],a[C]))}else if(T<m){h=t[T];const C=--m,R=t[C];e[R.uuid]=T,t[T]=R,e[M]=C,t[C]=_;for(let b=0,D=c;b!==D;++b){const U=o[b],N=U[C];let P=U[T];U[T]=N,P===void 0&&(P=new xn(_,n[b],a[b])),U[C]=P}}else t[T]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=m}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],m=d.uuid,v=e[m];if(v!==void 0&&v>=o){const y=o++,_=t[y];e[_.uuid]=v,t[v]=_,e[m]=y,t[y]=d;for(let M=0,T=a;M!==T;++M){const C=n[M],R=C[y],b=C[v];C[v]=R,C[y]=b}}}this.nCachedObjects_=o}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,a=n.length;let o=this.nCachedObjects_,c=t.length;for(let h=0,d=arguments.length;h!==d;++h){const m=arguments[h],v=m.uuid,y=e[v];if(y!==void 0)if(delete e[v],y<o){const _=--o,M=t[_],T=--c,C=t[T];e[M.uuid]=y,t[y]=M,e[C.uuid]=_,t[_]=C,t.pop();for(let R=0,b=a;R!==b;++R){const D=n[R],U=D[_],N=D[T];D[y]=U,D[_]=N,D.pop()}}else{const _=--c,M=t[_];_>0&&(e[M.uuid]=y),t[y]=M,t.pop();for(let T=0,C=a;T!==C;++T){const R=n[T];R[y]=R[_],R.pop()}}}this.nCachedObjects_=o}subscribe_(t,e){const n=this._bindingsIndicesByPath;let a=n[t];const o=this._bindings;if(a!==void 0)return o[a];const c=this._paths,h=this._parsedPaths,d=this._objects,m=d.length,v=this.nCachedObjects_,y=new Array(m);a=o.length,n[t]=a,c.push(t),h.push(e),o.push(y);for(let _=v,M=d.length;_!==M;++_){const T=d[_];y[_]=new xn(T,t,e)}return y}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const a=this._paths,o=this._parsedPaths,c=this._bindings,h=c.length-1,d=c[h],m=t[h];e[m]=n,c[n]=d,c.pop(),o[n]=o[h],o.pop(),a[n]=a[h],a.pop()}}}class Xw{constructor(t,e,n=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=a;const o=e.tracks,c=o.length,h=new Array(c),d={endingStart:ff,endingEnd:ff};for(let m=0;m!==c;++m){const v=o[m].createInterpolant(null);h[m]=v,v.settings=d}this._interpolantSettings=d,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=wC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n=!1){if(t.fadeOut(e),this.fadeIn(e),n===!0){const a=this._clip.duration,o=t._clip.duration,c=o/a,h=a/o;t.warp(1,c,e),this.warp(h,1,e)}return this}crossFadeTo(t,e,n=!1){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const a=this._mixer,o=a.time,c=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=a._lendControlInterpolant(),this._timeScaleInterpolant=h);const d=h.parameterPositions,m=h.sampleValues;return d[0]=o,d[1]=o+n,m[0]=t/c,m[1]=e/c,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,a){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const d=(t-o)*n;d<0||n===0?e=0:(this._startTime=null,e=n*d)}e*=this._updateTimeScale(t);const c=this._updateTime(e),h=this._updateWeight(t);if(h>0){const d=this._interpolants,m=this._propertyBindings;switch(this.blendMode){case bb:for(let v=0,y=d.length;v!==y;++v)d[v].evaluate(c),m[v].accumulateAdditive(h);break;case s_:default:for(let v=0,y=d.length;v!==y;++v)d[v].evaluate(c),m[v].accumulate(a,h)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const a=n.evaluate(t)[0];e*=a,t>n.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let a=this.time+t,o=this._loopCount;const c=n===DC;if(t===0)return o===-1?a:c&&(o&1)===1?e-a:a;if(n===CC){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),a>=e||a<0){const h=Math.floor(a/e);a-=e*h,o+=Math.abs(h);const d=this.repetitions-o;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const m=t<0;this._setEndings(m,!m,c)}else this._setEndings(!1,!1,c);this._loopCount=o,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=a;if(c&&(o&1)===1)return e-a}return a}_setEndings(t,e,n){const a=this._interpolantSettings;n?(a.endingStart=hf,a.endingEnd=hf):(t?a.endingStart=this.zeroSlopeAtStart?hf:ff:a.endingStart=Vm,e?a.endingEnd=this.zeroSlopeAtEnd?hf:ff:a.endingEnd=Vm)}_scheduleFading(t,e,n){const a=this._mixer,o=a.time;let c=this._weightInterpolant;c===null&&(c=a._lendControlInterpolant(),this._weightInterpolant=c);const h=c.parameterPositions,d=c.sampleValues;return h[0]=o,d[0]=e,h[1]=o+t,d[1]=n,this}}const C4=new Float32Array(1);class w4 extends Ko{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,a=t._clip.tracks,o=a.length,c=t._propertyBindings,h=t._interpolants,d=n.uuid,m=this._bindingsByRootAndName;let v=m[d];v===void 0&&(v={},m[d]=v);for(let y=0;y!==o;++y){const _=a[y],M=_.name;let T=v[M];if(T!==void 0)++T.referenceCount,c[y]=T;else{if(T=c[y],T!==void 0){T._cacheIndex===null&&(++T.referenceCount,this._addInactiveBinding(T,d,M));continue}const C=e&&e._propertyBindings[y].binding.parsedPath;T=new Gw(xn.create(n,M,C),_.ValueTypeName,_.getValueSize()),++T.referenceCount,this._addInactiveBinding(T,d,M),c[y]=T}h[y].resultBuffer=T.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,a=t._clip.uuid,o=this._actionsByClip[a];this._bindAction(t,o&&o.knownActions[0]),this._addInactiveAction(t,a,n)}const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,n){const a=this._actions,o=this._actionsByClip;let c=o[e];if(c===void 0)c={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=c;else{const h=c.knownActions;t._byClipCacheIndex=h.length,h.push(t)}t._cacheIndex=a.length,a.push(t),c.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],a=t._cacheIndex;n._cacheIndex=a,e[a]=n,e.pop(),t._cacheIndex=null;const o=t._clip.uuid,c=this._actionsByClip,h=c[o],d=h.knownActions,m=d[d.length-1],v=t._byClipCacheIndex;m._byClipCacheIndex=v,d[v]=m,d.pop(),t._byClipCacheIndex=null;const y=h.actionByRoot,_=(t._localRoot||this._root).uuid;delete y[_],d.length===0&&delete c[o],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let n=0,a=e.length;n!==a;++n){const o=e[n];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,a=this._nActiveActions++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,a=--this._nActiveActions,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_addInactiveBinding(t,e,n){const a=this._bindingsByRootAndName,o=this._bindings;let c=a[e];c===void 0&&(c={},a[e]=c),c[n]=t,t._cacheIndex=o.length,o.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,a=n.rootNode.uuid,o=n.path,c=this._bindingsByRootAndName,h=c[a],d=e[e.length-1],m=t._cacheIndex;d._cacheIndex=m,e[m]=d,e.pop(),delete h[o],Object.keys(h).length===0&&delete c[a]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,a=this._nActiveBindings++,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,a=--this._nActiveBindings,o=e[a];t._cacheIndex=a,e[a]=t,o._cacheIndex=n,e[n]=o}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new qb(new Float32Array(2),new Float32Array(2),1,C4),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,a=--this._nActiveControlInterpolants,o=e[a];t.__cacheIndex=a,e[a]=t,o.__cacheIndex=n,e[n]=o}clipAction(t,e,n){const a=e||this._root,o=a.uuid;let c=typeof t=="string"?Zm.findByName(a,t):t;const h=c!==null?c.uuid:t,d=this._actionsByClip[h];let m=null;if(n===void 0&&(c!==null?n=c.blendMode:n=s_),d!==void 0){const y=d.actionByRoot[o];if(y!==void 0&&y.blendMode===n)return y;m=d.knownActions[0],c===null&&(c=m._clip)}if(c===null)return null;const v=new Xw(this,c,e,n);return this._bindAction(v,m),this._addInactiveAction(v,h,o),v}existingAction(t,e){const n=e||this._root,a=n.uuid,o=typeof t=="string"?Zm.findByName(n,t):t,c=o?o.uuid:t,h=this._actionsByClip[c];return h!==void 0&&h.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,a=this.time+=t,o=Math.sign(t),c=this._accuIndex^=1;for(let m=0;m!==n;++m)e[m]._update(a,t,o,c);const h=this._bindings,d=this._nActiveBindings;for(let m=0;m!==d;++m)h[m].apply(c);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,a=this._actionsByClip,o=a[n];if(o!==void 0){const c=o.knownActions;for(let h=0,d=c.length;h!==d;++h){const m=c[h];this._deactivateAction(m);const v=m._cacheIndex,y=e[e.length-1];m._cacheIndex=null,m._byClipCacheIndex=null,y._cacheIndex=v,e[v]=y,e.pop(),this._removeInactiveBindingsForAction(m)}delete a[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const c in n){const h=n[c].actionByRoot,d=h[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,o=a[e];if(o!==void 0)for(const c in o){const h=o[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class D4 extends Ab{constructor(t=1,e=1,n=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=n,this.texture=new o_(null,t,e,n),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Jb{constructor(t){this.value=t}clone(){return new Jb(this.value.clone===void 0?this.value:this.value.clone())}}let U4=0;class N4 extends Ko{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:U4++}),this.name="",this.usage=Fm,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let n=0,a=e.length;n<a;n++){const o=Array.isArray(e[n])?e[n]:[e[n]];for(let c=0;c<o.length;c++)this.uniforms.push(o[c].clone())}return this}clone(){return new this.constructor().copy(this)}}class O4 extends f_{constructor(t,e,n=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class L4{constructor(t,e,n,a,o,c=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=a,this.count=o,this.normalized=c,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const gA=new Pe;class qw{constructor(t,e,n=0,a=1/0){this.ray=new Ad(t,e),this.near=n,this.far=a,this.camera=null,this.layers=new pd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return gA.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(gA),this}intersectObject(t,e=!0,n=[]){return MM(t,this,n,e),n.sort(vA),n}intersectObjects(t,e=!0,n=[]){for(let a=0,o=t.length;a<o;a++)MM(t[a],this,n,e);return n.sort(vA),n}}function vA(i,t){return i.distance-t.distance}function MM(i,t,e,n){let a=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(a=!1),a===!0&&n===!0){const o=i.children;for(let c=0,h=o.length;c<h;c++)MM(o[c],t,e,!0)}}class z4{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=qe(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(qe(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class P4{constructor(t=1,e=0,n=0){this.radius=t,this.theta=e,this.y=n}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}clone(){return new this.constructor().copy(this)}}class $b{constructor(t,e,n,a){$b.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,n,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let n=0;n<4;n++)this.elements[n]=t[n+e];return this}set(t,e,n,a){const o=this.elements;return o[0]=t,o[2]=e,o[1]=n,o[3]=a,this}}const yA=new It;class B4{constructor(t=new It(1/0,1/0),e=new It(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=yA.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,yA).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _A=new K,Av=new K;class I4{constructor(t=new K,e=new K){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){_A.subVectors(t,this.start),Av.subVectors(this.end,this.start);const n=Av.dot(Av);let o=Av.dot(_A)/n;return e&&(o=qe(o,0,1)),o}closestPointToPoint(t,e,n){const a=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(a).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const xA=new K;class V4 extends Mn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const n=new Je,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,h=1,d=32;c<d;c++,h++){const m=c/d*Math.PI*2,v=h/d*Math.PI*2;a.push(Math.cos(m),Math.sin(m),1,Math.cos(v),Math.sin(v),1)}n.setAttribute("position",new me(a,3));const o=new ns({fog:!1,toneMapped:!1});this.cone=new Qo(n,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),xA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Pu=new K,Rv=new Pe,vS=new Pe;class H4 extends Qo{constructor(t){const e=kw(t),n=new Je,a=[],o=[],c=new ce(0,0,1),h=new ce(0,1,0);for(let m=0;m<e.length;m++){const v=e[m];v.parent&&v.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),o.push(c.r,c.g,c.b),o.push(h.r,h.g,h.b))}n.setAttribute("position",new me(a,3)),n.setAttribute("color",new me(o,3));const d=new ns({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,a=n.getAttribute("position");vS.copy(this.root.matrixWorld).invert();for(let o=0,c=0;o<e.length;o++){const h=e[o];h.parent&&h.parent.isBone&&(Rv.multiplyMatrices(vS,h.matrixWorld),Pu.setFromMatrixPosition(Rv),a.setXYZ(c,Pu.x,Pu.y,Pu.z),Rv.multiplyMatrices(vS,h.parent.matrixWorld),Pu.setFromMatrixPosition(Rv),a.setXYZ(c+1,Pu.x,Pu.y,Pu.z),c+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function kw(i){const t=[];i.isBone===!0&&t.push(i);for(let e=0;e<i.children.length;e++)t.push(...kw(i.children[e]));return t}class F4 extends Pi{constructor(t,e,n){const a=new lg(e,4,2),o=new ju({wireframe:!0,fog:!1,toneMapped:!1});super(a,o),this.light=t,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const G4=new K,SA=new ce,MA=new ce;class X4 extends Mn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const a=new og(e);a.rotateY(Math.PI*.5),this.material=new ju({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=a.getAttribute("position"),c=new Float32Array(o.count*3);a.setAttribute("color",new kn(c,3)),this.add(new Pi(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");SA.copy(this.light.color),MA.copy(this.light.groundColor);for(let n=0,a=e.count;n<a;n++){const o=n<a/2?SA:MA;e.setXYZ(n,o.r,o.g,o.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(G4.setFromMatrixPosition(this.light.matrixWorld).negate())}}class q4 extends Qo{constructor(t=10,e=10,n=4473924,a=8947848){n=new ce(n),a=new ce(a);const o=e/2,c=t/e,h=t/2,d=[],m=[];for(let _=0,M=0,T=-h;_<=e;_++,T+=c){d.push(-h,0,T,h,0,T),d.push(T,0,-h,T,0,h);const C=_===o?n:a;C.toArray(m,M),M+=3,C.toArray(m,M),M+=3,C.toArray(m,M),M+=3,C.toArray(m,M),M+=3}const v=new Je;v.setAttribute("position",new me(d,3)),v.setAttribute("color",new me(m,3));const y=new ns({vertexColors:!0,toneMapped:!1});super(v,y),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class k4 extends Qo{constructor(t=10,e=16,n=8,a=64,o=4473924,c=8947848){o=new ce(o),c=new ce(c);const h=[],d=[];if(e>1)for(let y=0;y<e;y++){const _=y/e*(Math.PI*2),M=Math.sin(_)*t,T=Math.cos(_)*t;h.push(0,0,0),h.push(M,0,T);const C=y&1?o:c;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let y=0;y<n;y++){const _=y&1?o:c,M=t-t/n*y;for(let T=0;T<a;T++){let C=T/a*(Math.PI*2),R=Math.sin(C)*M,b=Math.cos(C)*M;h.push(R,0,b),d.push(_.r,_.g,_.b),C=(T+1)/a*(Math.PI*2),R=Math.sin(C)*M,b=Math.cos(C)*M,h.push(R,0,b),d.push(_.r,_.g,_.b)}}const m=new Je;m.setAttribute("position",new me(h,3)),m.setAttribute("color",new me(d,3));const v=new ns({vertexColors:!0,toneMapped:!1});super(m,v),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const bA=new K,Cv=new K,EA=new K;class Y4 extends Mn{constructor(t,e,n){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new Je;a.setAttribute("position",new me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const o=new ns({fog:!1,toneMapped:!1});this.lightPlane=new ku(a,o),this.add(this.lightPlane),a=new Je,a.setAttribute("position",new me([0,0,0,0,0,1],3)),this.targetLine=new ku(a,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bA.setFromMatrixPosition(this.light.matrixWorld),Cv.setFromMatrixPosition(this.light.target.matrixWorld),EA.subVectors(Cv,bA),this.lightPlane.lookAt(Cv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Cv),this.targetLine.scale.z=EA.length()}}const wv=new K,mi=new l_;class W4 extends Qo{constructor(t){const e=new Je,n=new ns({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],c={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(T,C){d(T),d(C)}function d(T){a.push(0,0,0),o.push(0,0,0),c[T]===void 0&&(c[T]=[]),c[T].push(a.length/3-1)}e.setAttribute("position",new me(a,3)),e.setAttribute("color",new me(o,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();const m=new ce(16755200),v=new ce(16711680),y=new ce(43775),_=new ce(16777215),M=new ce(3355443);this.setColors(m,v,y,_,M)}setColors(t,e,n,a,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,t.r,t.g,t.b),h.setXYZ(1,t.r,t.g,t.b),h.setXYZ(2,t.r,t.g,t.b),h.setXYZ(3,t.r,t.g,t.b),h.setXYZ(4,t.r,t.g,t.b),h.setXYZ(5,t.r,t.g,t.b),h.setXYZ(6,t.r,t.g,t.b),h.setXYZ(7,t.r,t.g,t.b),h.setXYZ(8,t.r,t.g,t.b),h.setXYZ(9,t.r,t.g,t.b),h.setXYZ(10,t.r,t.g,t.b),h.setXYZ(11,t.r,t.g,t.b),h.setXYZ(12,t.r,t.g,t.b),h.setXYZ(13,t.r,t.g,t.b),h.setXYZ(14,t.r,t.g,t.b),h.setXYZ(15,t.r,t.g,t.b),h.setXYZ(16,t.r,t.g,t.b),h.setXYZ(17,t.r,t.g,t.b),h.setXYZ(18,t.r,t.g,t.b),h.setXYZ(19,t.r,t.g,t.b),h.setXYZ(20,t.r,t.g,t.b),h.setXYZ(21,t.r,t.g,t.b),h.setXYZ(22,t.r,t.g,t.b),h.setXYZ(23,t.r,t.g,t.b),h.setXYZ(24,e.r,e.g,e.b),h.setXYZ(25,e.r,e.g,e.b),h.setXYZ(26,e.r,e.g,e.b),h.setXYZ(27,e.r,e.g,e.b),h.setXYZ(28,e.r,e.g,e.b),h.setXYZ(29,e.r,e.g,e.b),h.setXYZ(30,e.r,e.g,e.b),h.setXYZ(31,e.r,e.g,e.b),h.setXYZ(32,n.r,n.g,n.b),h.setXYZ(33,n.r,n.g,n.b),h.setXYZ(34,n.r,n.g,n.b),h.setXYZ(35,n.r,n.g,n.b),h.setXYZ(36,n.r,n.g,n.b),h.setXYZ(37,n.r,n.g,n.b),h.setXYZ(38,a.r,a.g,a.b),h.setXYZ(39,a.r,a.g,a.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,n=1,a=1;mi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const o=this.camera.coordinateSystem===vr?-1:0;Ti("c",e,t,mi,0,0,o),Ti("t",e,t,mi,0,0,1),Ti("n1",e,t,mi,-n,-a,o),Ti("n2",e,t,mi,n,-a,o),Ti("n3",e,t,mi,-n,a,o),Ti("n4",e,t,mi,n,a,o),Ti("f1",e,t,mi,-n,-a,1),Ti("f2",e,t,mi,n,-a,1),Ti("f3",e,t,mi,-n,a,1),Ti("f4",e,t,mi,n,a,1),Ti("u1",e,t,mi,n*.7,a*1.1,o),Ti("u2",e,t,mi,-n*.7,a*1.1,o),Ti("u3",e,t,mi,0,a*2,o),Ti("cf1",e,t,mi,-n,0,1),Ti("cf2",e,t,mi,n,0,1),Ti("cf3",e,t,mi,0,-a,1),Ti("cf4",e,t,mi,0,a,1),Ti("cn1",e,t,mi,-n,0,o),Ti("cn2",e,t,mi,n,0,o),Ti("cn3",e,t,mi,0,-a,o),Ti("cn4",e,t,mi,0,a,o),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ti(i,t,e,n,a,o,c){wv.set(a,o,c).unproject(n);const h=t[i];if(h!==void 0){const d=e.getAttribute("position");for(let m=0,v=h.length;m<v;m++)d.setXYZ(h[m],wv.x,wv.y,wv.z)}}const Dv=new La;class j4 extends Qo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),o=new Je;o.setIndex(new kn(n,1)),o.setAttribute("position",new kn(a,3)),super(o,new ns({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Dv.setFromObject(this.object),Dv.isEmpty())return;const t=Dv.min,e=Dv.max,n=this.geometry.attributes.position,a=n.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z4 extends Qo{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Je;o.setIndex(new kn(n,1)),o.setAttribute("position",new me(a,3)),super(o,new ns({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class K4 extends ku{constructor(t,e=1,n=16776960){const a=n,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],c=new Je;c.setAttribute("position",new me(o,3)),c.computeBoundingSphere(),super(c,new ns({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Je;d.setAttribute("position",new me(h,3)),d.computeBoundingSphere(),this.add(new Pi(d,new ju({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const TA=new K;let Uv,yS;class Q4 extends Mn{constructor(t=new K(0,0,1),e=new K(0,0,0),n=1,a=16776960,o=n*.2,c=o*.2){super(),this.type="ArrowHelper",Uv===void 0&&(Uv=new Je,Uv.setAttribute("position",new me([0,0,0,0,1,0],3)),yS=new rg(.5,1,5,1),yS.translate(0,-.5,0)),this.position.copy(e),this.line=new ku(Uv,new ns({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Pi(yS,new ju({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,o,c)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{TA.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(TA,e)}}setLength(t,e=t*.2,n=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class J4 extends Qo{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Je;a.setAttribute("position",new me(e,3)),a.setAttribute("color",new me(n,3));const o=new ns({vertexColors:!0,toneMapped:!1});super(a,o),this.type="AxesHelper"}setColors(t,e,n){const a=new ce,o=this.geometry.attributes.color.array;return a.set(t),a.toArray(o,0),a.toArray(o,3),a.set(e),a.toArray(o,6),a.toArray(o,9),a.set(n),a.toArray(o,12),a.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class $4{constructor(){this.type="ShapePath",this.color=new ce,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Vy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,n,a){return this.currentPath.quadraticCurveTo(t,e,n,a),this}bezierCurveTo(t,e,n,a,o,c){return this.currentPath.bezierCurveTo(t,e,n,a,o,c),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(b){const D=[];for(let U=0,N=b.length;U<N;U++){const P=b[U],B=new yf;B.curves=P.curves,D.push(B)}return D}function n(b,D){const U=D.length;let N=!1;for(let P=U-1,B=0;B<U;P=B++){let H=D[P],X=D[B],z=X.x-H.x,L=X.y-H.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(H=D[B],z=-z,X=D[P],L=-L),b.y<H.y||b.y>X.y)continue;if(b.y===H.y){if(b.x===H.x)return!0}else{const W=L*(b.x-H.x)-z*(b.y-H.y);if(W===0)return!0;if(W<0)continue;N=!N}}else{if(b.y!==H.y)continue;if(X.x<=b.x&&b.x<=H.x||H.x<=b.x&&b.x<=X.x)return!0}}return N}const a=Jr.isClockWise,o=this.subPaths;if(o.length===0)return[];let c,h,d;const m=[];if(o.length===1)return h=o[0],d=new yf,d.curves=h.curves,m.push(d),m;let v=!a(o[0].getPoints());v=t?!v:v;const y=[],_=[];let M=[],T=0,C;_[T]=void 0,M[T]=[];for(let b=0,D=o.length;b<D;b++)h=o[b],C=h.getPoints(),c=a(C),c=t?!c:c,c?(!v&&_[T]&&T++,_[T]={s:new yf,p:C},_[T].s.curves=h.curves,v&&T++,M[T]=[]):M[T].push({h,p:C[0]});if(!_[0])return e(o);if(_.length>1){let b=!1,D=0;for(let U=0,N=_.length;U<N;U++)y[U]=[];for(let U=0,N=_.length;U<N;U++){const P=M[U];for(let B=0;B<P.length;B++){const H=P[B];let X=!0;for(let z=0;z<_.length;z++)n(H.p,_[z].p)&&(U!==z&&D++,X?(X=!1,y[z].push(H)):b=!0);X&&y[U].push(H)}}D>0&&b===!1&&(M=y)}let R;for(let b=0,D=_.length;b<D;b++){d=_[b].s,m.push(d),R=M[b];for(let U=0,N=R.length;U<N;U++)d.holes.push(R[U].h)}return m}}class tI extends Ko{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function eI(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function nI(i,t){const e=i.image&&i.image.width?i.image.width/i.image.height:1;return e>t?(i.repeat.x=t/e,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=e/t,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function iI(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function bM(i,t,e,n){const a=aI(n);switch(e){case _b:return i*t;case n_:return i*t/a.components*a.byteLength;case ig:return i*t/a.components*a.byteLength;case Sb:return i*t*2/a.components*a.byteLength;case i_:return i*t*2/a.components*a.byteLength;case xb:return i*t*3/a.components*a.byteLength;case Oa:return i*t*4/a.components*a.byteLength;case a_:return i*t*4/a.components*a.byteLength;case ym:case _m:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case xm:case Sm:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case cy:case hy:return Math.max(i,16)*Math.max(t,8)/4;case uy:case fy:return Math.max(i,8)*Math.max(t,8)/2;case dy:case py:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case my:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case gy:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case vy:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case yy:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case _y:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case xy:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case Sy:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case My:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case by:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case Ey:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case Ty:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case Ay:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case Ry:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case Cy:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case wy:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case Mm:case Dy:case Uy:return Math.ceil(i/4)*Math.ceil(t/4)*16;case Mb:case Ny:return Math.ceil(i/4)*Math.ceil(t/4)*8;case Oy:case Ly:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function aI(i){switch(i){case yr:case gb:return{byteLength:1,components:1};case ud:case vb:case Td:return{byteLength:2,components:1};case t_:case e_:return{byteLength:2,components:4};case zl:case $y:case Ss:return{byteLength:4,components:1};case yb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class sI{static contain(t,e){return eI(t,e)}static cover(t,e){return nI(t,e)}static fill(t){return iI(t)}static getByteLength(t,e,n,a){return bM(t,e,n,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ky}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ky);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Yw(){let i=null,t=!1,e=null,n=null;function a(o,c){e(o,c),n=i.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(a),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){i=o}}}function rI(i){const t=new WeakMap;function e(h,d){const m=h.array,v=h.usage,y=m.byteLength,_=i.createBuffer();i.bindBuffer(d,_),i.bufferData(d,m,v),h.onUploadCallback();let M;if(m instanceof Float32Array)M=i.FLOAT;else if(typeof Float16Array<"u"&&m instanceof Float16Array)M=i.HALF_FLOAT;else if(m instanceof Uint16Array)h.isFloat16BufferAttribute?M=i.HALF_FLOAT:M=i.UNSIGNED_SHORT;else if(m instanceof Int16Array)M=i.SHORT;else if(m instanceof Uint32Array)M=i.UNSIGNED_INT;else if(m instanceof Int32Array)M=i.INT;else if(m instanceof Int8Array)M=i.BYTE;else if(m instanceof Uint8Array)M=i.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)M=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:_,type:M,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version,size:y}}function n(h,d,m){const v=d.array,y=d.updateRanges;if(i.bindBuffer(m,h),y.length===0)i.bufferSubData(m,0,v);else{y.sort((M,T)=>M.start-T.start);let _=0;for(let M=1;M<y.length;M++){const T=y[_],C=y[M];C.start<=T.start+T.count+1?T.count=Math.max(T.count,C.start+C.count-T.start):(++_,y[_]=C)}y.length=_+1;for(let M=0,T=y.length;M<T;M++){const C=y[M];i.bufferSubData(m,C.start*v.BYTES_PER_ELEMENT,v,C.start,C.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),t.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const d=t.get(h);d&&(i.deleteBuffer(d.buffer),t.delete(h))}function c(h,d){if(h.isInterleavedBufferAttribute&&(h=h.data),h.isGLBufferAttribute){const v=t.get(h);(!v||v.version<h.version)&&t.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}const m=t.get(h);if(m===void 0)t.set(h,e(h,d));else if(m.version<h.version){if(m.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(m.buffer,h,d),m.version=h.version}}return{get:a,remove:o,update:c}}var oI=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,lI=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,uI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,fI=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,hI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,pI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,mI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,gI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,vI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,_I=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,SI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,MI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,bI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,EI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,TI=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,AI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,CI=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,wI=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,DI=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UI=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NI=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,OI=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,LI=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,zI=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,PI=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,BI="gl_FragColor = linearToOutputTexel( gl_FragColor );",II=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,VI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HI=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,FI=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,GI=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,XI=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qI=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kI=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,YI=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,WI=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,jI=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZI=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,KI=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,QI=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JI=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$I=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,tV=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,eV=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nV=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,iV=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,aV=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,sV=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rV=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oV=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lV=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,uV=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cV=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fV=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,hV=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,dV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,pV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,mV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,vV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,_V=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xV=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,SV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,MV=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,bV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,TV=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,AV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,CV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,wV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,DV=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,UV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,NV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,OV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,LV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,PV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,BV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,IV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,VV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,HV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,FV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,GV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,XV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,YV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,WV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,jV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,KV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,QV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,JV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,$V=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,iH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,sH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const rH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,pH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,mH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,vH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_H=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,SH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,TH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,RH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,CH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,DH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LH=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,zH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,IH=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,tn={alphahash_fragment:oI,alphahash_pars_fragment:lI,alphamap_fragment:uI,alphamap_pars_fragment:cI,alphatest_fragment:fI,alphatest_pars_fragment:hI,aomap_fragment:dI,aomap_pars_fragment:pI,batching_pars_vertex:mI,batching_vertex:gI,begin_vertex:vI,beginnormal_vertex:yI,bsdfs:_I,iridescence_fragment:xI,bumpmap_pars_fragment:SI,clipping_planes_fragment:MI,clipping_planes_pars_fragment:bI,clipping_planes_pars_vertex:EI,clipping_planes_vertex:TI,color_fragment:AI,color_pars_fragment:RI,color_pars_vertex:CI,color_vertex:wI,common:DI,cube_uv_reflection_fragment:UI,defaultnormal_vertex:NI,displacementmap_pars_vertex:OI,displacementmap_vertex:LI,emissivemap_fragment:zI,emissivemap_pars_fragment:PI,colorspace_fragment:BI,colorspace_pars_fragment:II,envmap_fragment:VI,envmap_common_pars_fragment:HI,envmap_pars_fragment:FI,envmap_pars_vertex:GI,envmap_physical_pars_fragment:$I,envmap_vertex:XI,fog_vertex:qI,fog_pars_vertex:kI,fog_fragment:YI,fog_pars_fragment:WI,gradientmap_pars_fragment:jI,lightmap_pars_fragment:ZI,lights_lambert_fragment:KI,lights_lambert_pars_fragment:QI,lights_pars_begin:JI,lights_toon_fragment:tV,lights_toon_pars_fragment:eV,lights_phong_fragment:nV,lights_phong_pars_fragment:iV,lights_physical_fragment:aV,lights_physical_pars_fragment:sV,lights_fragment_begin:rV,lights_fragment_maps:oV,lights_fragment_end:lV,logdepthbuf_fragment:uV,logdepthbuf_pars_fragment:cV,logdepthbuf_pars_vertex:fV,logdepthbuf_vertex:hV,map_fragment:dV,map_pars_fragment:pV,map_particle_fragment:mV,map_particle_pars_fragment:gV,metalnessmap_fragment:vV,metalnessmap_pars_fragment:yV,morphinstance_vertex:_V,morphcolor_vertex:xV,morphnormal_vertex:SV,morphtarget_pars_vertex:MV,morphtarget_vertex:bV,normal_fragment_begin:EV,normal_fragment_maps:TV,normal_pars_fragment:AV,normal_pars_vertex:RV,normal_vertex:CV,normalmap_pars_fragment:wV,clearcoat_normal_fragment_begin:DV,clearcoat_normal_fragment_maps:UV,clearcoat_pars_fragment:NV,iridescence_pars_fragment:OV,opaque_fragment:LV,packing:zV,premultiplied_alpha_fragment:PV,project_vertex:BV,dithering_fragment:IV,dithering_pars_fragment:VV,roughnessmap_fragment:HV,roughnessmap_pars_fragment:FV,shadowmap_pars_fragment:GV,shadowmap_pars_vertex:XV,shadowmap_vertex:qV,shadowmask_pars_fragment:kV,skinbase_vertex:YV,skinning_pars_vertex:WV,skinning_vertex:jV,skinnormal_vertex:ZV,specularmap_fragment:KV,specularmap_pars_fragment:QV,tonemapping_fragment:JV,tonemapping_pars_fragment:$V,transmission_fragment:tH,transmission_pars_fragment:eH,uv_pars_fragment:nH,uv_pars_vertex:iH,uv_vertex:aH,worldpos_vertex:sH,background_vert:rH,background_frag:oH,backgroundCube_vert:lH,backgroundCube_frag:uH,cube_vert:cH,cube_frag:fH,depth_vert:hH,depth_frag:dH,distanceRGBA_vert:pH,distanceRGBA_frag:mH,equirect_vert:gH,equirect_frag:vH,linedashed_vert:yH,linedashed_frag:_H,meshbasic_vert:xH,meshbasic_frag:SH,meshlambert_vert:MH,meshlambert_frag:bH,meshmatcap_vert:EH,meshmatcap_frag:TH,meshnormal_vert:AH,meshnormal_frag:RH,meshphong_vert:CH,meshphong_frag:wH,meshphysical_vert:DH,meshphysical_frag:UH,meshtoon_vert:NH,meshtoon_frag:OH,points_vert:LH,points_frag:zH,shadow_vert:PH,shadow_frag:BH,sprite_vert:IH,sprite_frag:VH},ae={common:{diffuse:{value:new ce(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new je},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new je}},envmap:{envMap:{value:null},envMapRotation:{value:new je},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new je}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new je}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new je},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new je},normalScale:{value:new It(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new je},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new je}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new je}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new je}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ce(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ce(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0},uvTransform:{value:new je}},sprite:{diffuse:{value:new ce(16777215)},opacity:{value:1},center:{value:new It(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new je},alphaMap:{value:null},alphaMapTransform:{value:new je},alphaTest:{value:0}}},Kr={basic:{uniforms:Ja([ae.common,ae.specularmap,ae.envmap,ae.aomap,ae.lightmap,ae.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:Ja([ae.common,ae.specularmap,ae.envmap,ae.aomap,ae.lightmap,ae.emissivemap,ae.bumpmap,ae.normalmap,ae.displacementmap,ae.fog,ae.lights,{emissive:{value:new ce(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:Ja([ae.common,ae.specularmap,ae.envmap,ae.aomap,ae.lightmap,ae.emissivemap,ae.bumpmap,ae.normalmap,ae.displacementmap,ae.fog,ae.lights,{emissive:{value:new ce(0)},specular:{value:new ce(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:Ja([ae.common,ae.envmap,ae.aomap,ae.lightmap,ae.emissivemap,ae.bumpmap,ae.normalmap,ae.displacementmap,ae.roughnessmap,ae.metalnessmap,ae.fog,ae.lights,{emissive:{value:new ce(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:Ja([ae.common,ae.aomap,ae.lightmap,ae.emissivemap,ae.bumpmap,ae.normalmap,ae.displacementmap,ae.gradientmap,ae.fog,ae.lights,{emissive:{value:new ce(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:Ja([ae.common,ae.bumpmap,ae.normalmap,ae.displacementmap,ae.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:Ja([ae.points,ae.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:Ja([ae.common,ae.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:Ja([ae.common,ae.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:Ja([ae.common,ae.bumpmap,ae.normalmap,ae.displacementmap,{opacity:{value:1}}]),vertexShader:tn.meshnormal_vert,fragmentShader:tn.meshnormal_frag},sprite:{uniforms:Ja([ae.sprite,ae.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new je},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new je}},vertexShader:tn.backgroundCube_vert,fragmentShader:tn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:Ja([ae.common,ae.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:Ja([ae.lights,ae.fog,{color:{value:new ce(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Kr.physical={uniforms:Ja([Kr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new je},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new je},clearcoatNormalScale:{value:new It(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new je},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new je},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new je},sheen:{value:0},sheenColor:{value:new ce(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new je},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new je},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new je},transmissionSamplerSize:{value:new It},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new je},attenuationDistance:{value:0},attenuationColor:{value:new ce(0)},specularColor:{value:new ce(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new je},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new je},anisotropyVector:{value:new It},anisotropyMap:{value:null},anisotropyMapTransform:{value:new je}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};const Nv={r:0,b:0,g:0},nf=new ks,HH=new Pe;function FH(i,t,e,n,a,o,c){const h=new ce(0);let d=o===!0?0:1,m,v,y=null,_=0,M=null;function T(U){let N=U.isScene===!0?U.background:null;return N&&N.isTexture&&(N=(U.backgroundBlurriness>0?e:t).get(N)),N}function C(U){let N=!1;const P=T(U);P===null?b(h,d):P&&P.isColor&&(b(P,1),N=!0);const B=i.xr.getEnvironmentBlendMode();B==="additive"?n.buffers.color.setClear(0,0,0,1,c):B==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,c),(i.autoClear||N)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function R(U,N){const P=T(N);P&&(P.isCubeTexture||P.mapping===Ed)?(v===void 0&&(v=new Pi(new bf(1,1,1),new to({name:"BackgroundCubeMaterial",uniforms:md(Kr.backgroundCube.uniforms),vertexShader:Kr.backgroundCube.vertexShader,fragmentShader:Kr.backgroundCube.fragmentShader,side:es,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),v.geometry.deleteAttribute("normal"),v.geometry.deleteAttribute("uv"),v.onBeforeRender=function(B,H,X){this.matrixWorld.copyPosition(X.matrixWorld)},Object.defineProperty(v.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(v)),nf.copy(N.backgroundRotation),nf.x*=-1,nf.y*=-1,nf.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(nf.y*=-1,nf.z*=-1),v.material.uniforms.envMap.value=P,v.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,v.material.uniforms.backgroundBlurriness.value=N.backgroundBlurriness,v.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,v.material.uniforms.backgroundRotation.value.setFromMatrix4(HH.makeRotationFromEuler(nf)),v.material.toneMapped=mn.getTransfer(P.colorSpace)!==Bn,(y!==P||_!==P.version||M!==i.toneMapping)&&(v.material.needsUpdate=!0,y=P,_=P.version,M=i.toneMapping),v.layers.enableAll(),U.unshift(v,v.geometry,v.material,0,0,null)):P&&P.isTexture&&(m===void 0&&(m=new Pi(new Cd(2,2),new to({name:"BackgroundMaterial",uniforms:md(Kr.background.uniforms),vertexShader:Kr.background.vertexShader,fragmentShader:Kr.background.fragmentShader,side:Ol,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),m.geometry.deleteAttribute("normal"),Object.defineProperty(m.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(m)),m.material.uniforms.t2D.value=P,m.material.uniforms.backgroundIntensity.value=N.backgroundIntensity,m.material.toneMapped=mn.getTransfer(P.colorSpace)!==Bn,P.matrixAutoUpdate===!0&&P.updateMatrix(),m.material.uniforms.uvTransform.value.copy(P.matrix),(y!==P||_!==P.version||M!==i.toneMapping)&&(m.material.needsUpdate=!0,y=P,_=P.version,M=i.toneMapping),m.layers.enableAll(),U.unshift(m,m.geometry,m.material,0,0,null))}function b(U,N){U.getRGB(Nv,kC(i)),n.buffers.color.setClear(Nv.r,Nv.g,Nv.b,N,c)}function D(){v!==void 0&&(v.geometry.dispose(),v.material.dispose(),v=void 0),m!==void 0&&(m.geometry.dispose(),m.material.dispose(),m=void 0)}return{getClearColor:function(){return h},setClearColor:function(U,N=1){h.set(U),d=N,b(h,d)},getClearAlpha:function(){return d},setClearAlpha:function(U){d=U,b(h,d)},render:C,addToRenderList:R,dispose:D}}function GH(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},a=_(null);let o=a,c=!1;function h(L,W,ot,it,pt){let gt=!1;const I=y(it,ot,W);o!==I&&(o=I,m(o.object)),gt=M(L,it,ot,pt),gt&&T(L,it,ot,pt),pt!==null&&t.update(pt,i.ELEMENT_ARRAY_BUFFER),(gt||c)&&(c=!1,N(L,W,ot,it),pt!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(pt).buffer))}function d(){return i.createVertexArray()}function m(L){return i.bindVertexArray(L)}function v(L){return i.deleteVertexArray(L)}function y(L,W,ot){const it=ot.wireframe===!0;let pt=n[L.id];pt===void 0&&(pt={},n[L.id]=pt);let gt=pt[W.id];gt===void 0&&(gt={},pt[W.id]=gt);let I=gt[it];return I===void 0&&(I=_(d()),gt[it]=I),I}function _(L){const W=[],ot=[],it=[];for(let pt=0;pt<e;pt++)W[pt]=0,ot[pt]=0,it[pt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:ot,attributeDivisors:it,object:L,attributes:{},index:null}}function M(L,W,ot,it){const pt=o.attributes,gt=W.attributes;let I=0;const j=ot.getAttributes();for(const Z in j)if(j[Z].location>=0){const k=pt[Z];let tt=gt[Z];if(tt===void 0&&(Z==="instanceMatrix"&&L.instanceMatrix&&(tt=L.instanceMatrix),Z==="instanceColor"&&L.instanceColor&&(tt=L.instanceColor)),k===void 0||k.attribute!==tt||tt&&k.data!==tt.data)return!0;I++}return o.attributesNum!==I||o.index!==it}function T(L,W,ot,it){const pt={},gt=W.attributes;let I=0;const j=ot.getAttributes();for(const Z in j)if(j[Z].location>=0){let k=gt[Z];k===void 0&&(Z==="instanceMatrix"&&L.instanceMatrix&&(k=L.instanceMatrix),Z==="instanceColor"&&L.instanceColor&&(k=L.instanceColor));const tt={};tt.attribute=k,k&&k.data&&(tt.data=k.data),pt[Z]=tt,I++}o.attributes=pt,o.attributesNum=I,o.index=it}function C(){const L=o.newAttributes;for(let W=0,ot=L.length;W<ot;W++)L[W]=0}function R(L){b(L,0)}function b(L,W){const ot=o.newAttributes,it=o.enabledAttributes,pt=o.attributeDivisors;ot[L]=1,it[L]===0&&(i.enableVertexAttribArray(L),it[L]=1),pt[L]!==W&&(i.vertexAttribDivisor(L,W),pt[L]=W)}function D(){const L=o.newAttributes,W=o.enabledAttributes;for(let ot=0,it=W.length;ot<it;ot++)W[ot]!==L[ot]&&(i.disableVertexAttribArray(ot),W[ot]=0)}function U(L,W,ot,it,pt,gt,I){I===!0?i.vertexAttribIPointer(L,W,ot,pt,gt):i.vertexAttribPointer(L,W,ot,it,pt,gt)}function N(L,W,ot,it){C();const pt=it.attributes,gt=ot.getAttributes(),I=W.defaultAttributeValues;for(const j in gt){const Z=gt[j];if(Z.location>=0){let ct=pt[j];if(ct===void 0&&(j==="instanceMatrix"&&L.instanceMatrix&&(ct=L.instanceMatrix),j==="instanceColor"&&L.instanceColor&&(ct=L.instanceColor)),ct!==void 0){const k=ct.normalized,tt=ct.itemSize,bt=t.get(ct);if(bt===void 0)continue;const Rt=bt.buffer,et=bt.type,Et=bt.bytesPerElement,Bt=et===i.INT||et===i.UNSIGNED_INT||ct.gpuType===$y;if(ct.isInterleavedBufferAttribute){const Wt=ct.data,jt=Wt.stride,Te=ct.offset;if(Wt.isInstancedInterleavedBuffer){for(let ye=0;ye<Z.locationSize;ye++)b(Z.location+ye,Wt.meshPerAttribute);L.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=Wt.meshPerAttribute*Wt.count)}else for(let ye=0;ye<Z.locationSize;ye++)R(Z.location+ye);i.bindBuffer(i.ARRAY_BUFFER,Rt);for(let ye=0;ye<Z.locationSize;ye++)U(Z.location+ye,tt/Z.locationSize,et,k,jt*Et,(Te+tt/Z.locationSize*ye)*Et,Bt)}else{if(ct.isInstancedBufferAttribute){for(let Wt=0;Wt<Z.locationSize;Wt++)b(Z.location+Wt,ct.meshPerAttribute);L.isInstancedMesh!==!0&&it._maxInstanceCount===void 0&&(it._maxInstanceCount=ct.meshPerAttribute*ct.count)}else for(let Wt=0;Wt<Z.locationSize;Wt++)R(Z.location+Wt);i.bindBuffer(i.ARRAY_BUFFER,Rt);for(let Wt=0;Wt<Z.locationSize;Wt++)U(Z.location+Wt,tt/Z.locationSize,et,k,tt*Et,tt/Z.locationSize*Wt*Et,Bt)}}else if(I!==void 0){const k=I[j];if(k!==void 0)switch(k.length){case 2:i.vertexAttrib2fv(Z.location,k);break;case 3:i.vertexAttrib3fv(Z.location,k);break;case 4:i.vertexAttrib4fv(Z.location,k);break;default:i.vertexAttrib1fv(Z.location,k)}}}}D()}function P(){X();for(const L in n){const W=n[L];for(const ot in W){const it=W[ot];for(const pt in it)v(it[pt].object),delete it[pt];delete W[ot]}delete n[L]}}function B(L){if(n[L.id]===void 0)return;const W=n[L.id];for(const ot in W){const it=W[ot];for(const pt in it)v(it[pt].object),delete it[pt];delete W[ot]}delete n[L.id]}function H(L){for(const W in n){const ot=n[W];if(ot[L.id]===void 0)continue;const it=ot[L.id];for(const pt in it)v(it[pt].object),delete it[pt];delete ot[L.id]}}function X(){z(),c=!0,o!==a&&(o=a,m(o.object))}function z(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:h,reset:X,resetDefaultState:z,dispose:P,releaseStatesOfGeometry:B,releaseStatesOfProgram:H,initAttributes:C,enableAttribute:R,disableUnusedAttributes:D}}function XH(i,t,e){let n;function a(m){n=m}function o(m,v){i.drawArrays(n,m,v),e.update(v,n,1)}function c(m,v,y){y!==0&&(i.drawArraysInstanced(n,m,v,y),e.update(v,n,y))}function h(m,v,y){if(y===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,m,0,v,0,y);let M=0;for(let T=0;T<y;T++)M+=v[T];e.update(M,n,1)}function d(m,v,y,_){if(y===0)return;const M=t.get("WEBGL_multi_draw");if(M===null)for(let T=0;T<m.length;T++)c(m[T],v[T],_[T]);else{M.multiDrawArraysInstancedWEBGL(n,m,0,v,0,_,0,y);let T=0;for(let C=0;C<y;C++)T+=v[C]*_[C];e.update(T,n,1)}}this.setMode=a,this.render=o,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=d}function qH(i,t,e,n){let a;function o(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const H=t.get("EXT_texture_filter_anisotropic");a=i.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function c(H){return!(H!==Oa&&n.convert(H)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(H){const X=H===Td&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(H!==yr&&n.convert(H)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==Ss&&!X)}function d(H){if(H==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let m=e.precision!==void 0?e.precision:"highp";const v=d(m);v!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",v,"instead."),m=v);const y=e.logarithmicDepthBuffer===!0,_=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),M=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),T=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_TEXTURE_SIZE),R=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),D=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),U=i.getParameter(i.MAX_VARYING_VECTORS),N=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),P=T>0,B=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:d,textureFormatReadable:c,textureTypeReadable:h,precision:m,logarithmicDepthBuffer:y,reverseDepthBuffer:_,maxTextures:M,maxVertexTextures:T,maxTextureSize:C,maxCubemapSize:R,maxAttributes:b,maxVertexUniforms:D,maxVaryings:U,maxFragmentUniforms:N,vertexTextures:P,maxSamples:B}}function kH(i){const t=this;let e=null,n=0,a=!1,o=!1;const c=new Iu,h=new je,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(y,_){const M=y.length!==0||_||n!==0||a;return a=_,n=y.length,M},this.beginShadows=function(){o=!0,v(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(y,_){e=v(y,_,0)},this.setState=function(y,_,M){const T=y.clippingPlanes,C=y.clipIntersection,R=y.clipShadows,b=i.get(y);if(!a||T===null||T.length===0||o&&!R)o?v(null):m();else{const D=o?0:n,U=D*4;let N=b.clippingState||null;d.value=N,N=v(T,_,U,M);for(let P=0;P!==U;++P)N[P]=e[P];b.clippingState=N,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=D}};function m(){d.value!==e&&(d.value=e,d.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function v(y,_,M,T){const C=y!==null?y.length:0;let R=null;if(C!==0){if(R=d.value,T!==!0||R===null){const b=M+C*4,D=_.matrixWorldInverse;h.getNormalMatrix(D),(R===null||R.length<b)&&(R=new Float32Array(b));for(let U=0,N=M;U!==C;++U,N+=4)c.copy(y[U]).applyMatrix4(D,h),c.normal.toArray(R,N),R[N+3]=c.constant}d.value=R,d.needsUpdate=!0}return t.numPlanes=C,t.numIntersection=0,R}}function YH(i){let t=new WeakMap;function e(c,h){return h===Lm?c.mapping=Ll:h===zm&&(c.mapping=Xu),c}function n(c){if(c&&c.isTexture){const h=c.mapping;if(h===Lm||h===zm)if(t.has(c)){const d=t.get(c).texture;return e(d,c.mapping)}else{const d=c.image;if(d&&d.height>0){const m=new jC(d.height);return m.fromEquirectangularTexture(i,c),t.set(c,m),c.addEventListener("dispose",a),e(m.texture,c.mapping)}else return null}}return c}function a(c){const h=c.target;h.removeEventListener("dispose",a);const d=t.get(h);d!==void 0&&(t.delete(h),d.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}const ad=4,AA=[.125,.215,.35,.446,.526,.582],lf=20,_S=new fg,RA=new ce;let xS=null,SS=0,MS=0,bS=!1;const of=(1+Math.sqrt(5))/2,kh=1/of,CA=[new K(-of,kh,0),new K(of,kh,0),new K(-kh,0,of),new K(kh,0,of),new K(0,of,-kh),new K(0,of,kh),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],WH=new K;class EM{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,a=100,o={}){const{size:c=256,position:h=WH}=o;xS=this._renderer.getRenderTarget(),SS=this._renderer.getActiveCubeFace(),MS=this._renderer.getActiveMipmapLevel(),bS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(c);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,n,a,d,h),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=UA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=DA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(xS,SS,MS),this._renderer.xr.enabled=bS,t.scissorTest=!1,Ov(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Ll||t.mapping===Xu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),xS=this._renderer.getRenderTarget(),SS=this._renderer.getActiveCubeFace(),MS=this._renderer.getActiveMipmapLevel(),bS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Yi,minFilter:Yi,generateMipmaps:!1,type:Td,format:Oa,colorSpace:qu,depthBuffer:!1},a=wA(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wA(t,e,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=jH(o)),this._blurMaterial=ZH(o,t,e)}return a}_compileMaterial(t){const e=new Pi(this._lodPlanes[0],t);this._renderer.compile(e,_S)}_sceneToCubeUV(t,e,n,a,o){const d=new ia(90,1,e,n),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],y=this._renderer,_=y.autoClear,M=y.toneMapping;y.getClearColor(RA),y.toneMapping=Yo,y.autoClear=!1;const T=new ju({name:"PMREM.Background",side:es,depthWrite:!1,depthTest:!1}),C=new Pi(new bf,T);let R=!1;const b=t.background;b?b.isColor&&(T.color.copy(b),t.background=null,R=!0):(T.color.copy(RA),R=!0);for(let D=0;D<6;D++){const U=D%3;U===0?(d.up.set(0,m[D],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x+v[D],o.y,o.z)):U===1?(d.up.set(0,0,m[D]),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y+v[D],o.z)):(d.up.set(0,m[D],0),d.position.set(o.x,o.y,o.z),d.lookAt(o.x,o.y,o.z+v[D]));const N=this._cubeSize;Ov(a,U*N,D>2?N:0,N,N),y.setRenderTarget(a),R&&y.render(C,d),y.render(t,d)}C.geometry.dispose(),C.material.dispose(),y.toneMapping=M,y.autoClear=_,t.background=b}_textureToCubeUV(t,e){const n=this._renderer,a=t.mapping===Ll||t.mapping===Xu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=UA()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=DA());const o=a?this._cubemapMaterial:this._equirectMaterial,c=new Pi(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=t;const d=this._cubeSize;Ov(e,0,0,3*d,2*d),n.setRenderTarget(e),n.render(c,_S)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=CA[(a-o-1)%CA.length];this._blur(t,o-1,o,c,h)}e.autoClear=n}_blur(t,e,n,a,o){const c=this._pingPongRenderTarget;this._halfBlur(t,c,e,n,a,"latitudinal",o),this._halfBlur(c,t,n,n,a,"longitudinal",o)}_halfBlur(t,e,n,a,o,c,h){const d=this._renderer,m=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const v=3,y=new Pi(this._lodPlanes[a],m),_=m.uniforms,M=this._sizeLods[n]-1,T=isFinite(o)?Math.PI/(2*M):2*Math.PI/(2*lf-1),C=o/T,R=isFinite(o)?1+Math.floor(v*C):lf;R>lf&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${R} samples when the maximum is set to ${lf}`);const b=[];let D=0;for(let H=0;H<lf;++H){const X=H/C,z=Math.exp(-X*X/2);b.push(z),H===0?D+=z:H<R&&(D+=2*z)}for(let H=0;H<b.length;H++)b[H]=b[H]/D;_.envMap.value=t.texture,_.samples.value=R,_.weights.value=b,_.latitudinal.value=c==="latitudinal",h&&(_.poleAxis.value=h);const{_lodMax:U}=this;_.dTheta.value=T,_.mipInt.value=U-n;const N=this._sizeLods[a],P=3*N*(a>U-ad?a-U+ad:0),B=4*(this._cubeSize-N);Ov(e,P,B,3*N,2*N),d.setRenderTarget(e),d.render(y,_S)}}function jH(i){const t=[],e=[],n=[];let a=i;const o=i-ad+1+AA.length;for(let c=0;c<o;c++){const h=Math.pow(2,a);e.push(h);let d=1/h;c>i-ad?d=AA[c-i+ad-1]:c===0&&(d=0),n.push(d);const m=1/(h-2),v=-m,y=1+m,_=[v,v,y,v,y,y,v,v,y,y,v,y],M=6,T=6,C=3,R=2,b=1,D=new Float32Array(C*T*M),U=new Float32Array(R*T*M),N=new Float32Array(b*T*M);for(let B=0;B<M;B++){const H=B%3*2/3-1,X=B>2?0:-1,z=[H,X,0,H+2/3,X,0,H+2/3,X+1,0,H,X,0,H+2/3,X+1,0,H,X+1,0];D.set(z,C*T*B),U.set(_,R*T*B);const L=[B,B,B,B,B,B];N.set(L,b*T*B)}const P=new Je;P.setAttribute("position",new kn(D,C)),P.setAttribute("uv",new kn(U,R)),P.setAttribute("faceIndex",new kn(N,b)),t.push(P),a>ad&&a--}return{lodPlanes:t,sizeLods:e,sigmas:n}}function wA(i,t,e){const n=new Zo(i,t,e);return n.texture.mapping=Ed,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ov(i,t,e,n,a){i.viewport.set(t,e,n,a),i.scissor.set(t,e,n,a)}function ZH(i,t,e){const n=new Float32Array(lf),a=new K(0,1,0);return new to({name:"SphericalGaussianBlur",defines:{n:lf,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:t1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Dl,depthTest:!1,depthWrite:!1})}function DA(){return new to({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:t1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Dl,depthTest:!1,depthWrite:!1})}function UA(){return new to({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:t1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Dl,depthTest:!1,depthWrite:!1})}function t1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function KH(i){let t=new WeakMap,e=null;function n(h){if(h&&h.isTexture){const d=h.mapping,m=d===Lm||d===zm,v=d===Ll||d===Xu;if(m||v){let y=t.get(h);const _=y!==void 0?y.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==_)return e===null&&(e=new EM(i)),y=m?e.fromEquirectangular(h,y):e.fromCubemap(h,y),y.texture.pmremVersion=h.pmremVersion,t.set(h,y),y.texture;if(y!==void 0)return y.texture;{const M=h.image;return m&&M&&M.height>0||v&&M&&a(M)?(e===null&&(e=new EM(i)),y=m?e.fromEquirectangular(h):e.fromCubemap(h),y.texture.pmremVersion=h.pmremVersion,t.set(h,y),h.addEventListener("dispose",o),y.texture):null}}}return h}function a(h){let d=0;const m=6;for(let v=0;v<m;v++)h[v]!==void 0&&d++;return d===m}function o(h){const d=h.target;d.removeEventListener("dispose",o);const m=t.get(d);m!==void 0&&(t.delete(d),m.dispose())}function c(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:c}}function QH(i){const t={};function e(n){if(t[n]!==void 0)return t[n];let a;switch(n){case"WEBGL_depth_texture":a=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=i.getExtension(n)}return t[n]=a,a}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const a=e(n);return a===null&&sd("THREE.WebGLRenderer: "+n+" extension not supported."),a}}}function JH(i,t,e,n){const a={},o=new WeakMap;function c(y){const _=y.target;_.index!==null&&t.remove(_.index);for(const T in _.attributes)t.remove(_.attributes[T]);_.removeEventListener("dispose",c),delete a[_.id];const M=o.get(_);M&&(t.remove(M),o.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,e.memory.geometries--}function h(y,_){return a[_.id]===!0||(_.addEventListener("dispose",c),a[_.id]=!0,e.memory.geometries++),_}function d(y){const _=y.attributes;for(const M in _)t.update(_[M],i.ARRAY_BUFFER)}function m(y){const _=[],M=y.index,T=y.attributes.position;let C=0;if(M!==null){const D=M.array;C=M.version;for(let U=0,N=D.length;U<N;U+=3){const P=D[U+0],B=D[U+1],H=D[U+2];_.push(P,B,B,H,H,P)}}else if(T!==void 0){const D=T.array;C=T.version;for(let U=0,N=D.length/3-1;U<N;U+=3){const P=U+0,B=U+1,H=U+2;_.push(P,B,B,H,H,P)}}else return;const R=new(FC(_)?Cb:Rb)(_,1);R.version=C;const b=o.get(y);b&&t.remove(b),o.set(y,R)}function v(y){const _=o.get(y);if(_){const M=y.index;M!==null&&_.version<M.version&&m(y)}else m(y);return o.get(y)}return{get:h,update:d,getWireframeAttribute:v}}function $H(i,t,e){let n;function a(_){n=_}let o,c;function h(_){o=_.type,c=_.bytesPerElement}function d(_,M){i.drawElements(n,M,o,_*c),e.update(M,n,1)}function m(_,M,T){T!==0&&(i.drawElementsInstanced(n,M,o,_*c,T),e.update(M,n,T))}function v(_,M,T){if(T===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,M,0,o,_,0,T);let R=0;for(let b=0;b<T;b++)R+=M[b];e.update(R,n,1)}function y(_,M,T,C){if(T===0)return;const R=t.get("WEBGL_multi_draw");if(R===null)for(let b=0;b<_.length;b++)m(_[b]/c,M[b],C[b]);else{R.multiDrawElementsInstancedWEBGL(n,M,0,o,_,0,C,0,T);let b=0;for(let D=0;D<T;D++)b+=M[D]*C[D];e.update(b,n,1)}}this.setMode=a,this.setIndex=h,this.render=d,this.renderInstances=m,this.renderMultiDraw=v,this.renderMultiDrawInstances=y}function t5(i){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,c,h){switch(e.calls++,c){case i.TRIANGLES:e.triangles+=h*(o/3);break;case i.LINES:e.lines+=h*(o/2);break;case i.LINE_STRIP:e.lines+=h*(o-1);break;case i.LINE_LOOP:e.lines+=h*o;break;case i.POINTS:e.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:n}}function e5(i,t,e){const n=new WeakMap,a=new Sn;function o(c,h,d){const m=c.morphTargetInfluences,v=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,y=v!==void 0?v.length:0;let _=n.get(h);if(_===void 0||_.count!==y){let L=function(){X.dispose(),n.delete(h),h.removeEventListener("dispose",L)};var M=L;_!==void 0&&_.texture.dispose();const T=h.morphAttributes.position!==void 0,C=h.morphAttributes.normal!==void 0,R=h.morphAttributes.color!==void 0,b=h.morphAttributes.position||[],D=h.morphAttributes.normal||[],U=h.morphAttributes.color||[];let N=0;T===!0&&(N=1),C===!0&&(N=2),R===!0&&(N=3);let P=h.attributes.position.count*N,B=1;P>t.maxTextureSize&&(B=Math.ceil(P/t.maxTextureSize),P=t.maxTextureSize);const H=new Float32Array(P*B*4*y),X=new r_(H,P,B,y);X.type=Ss,X.needsUpdate=!0;const z=N*4;for(let W=0;W<y;W++){const ot=b[W],it=D[W],pt=U[W],gt=P*B*4*W;for(let I=0;I<ot.count;I++){const j=I*z;T===!0&&(a.fromBufferAttribute(ot,I),H[gt+j+0]=a.x,H[gt+j+1]=a.y,H[gt+j+2]=a.z,H[gt+j+3]=0),C===!0&&(a.fromBufferAttribute(it,I),H[gt+j+4]=a.x,H[gt+j+5]=a.y,H[gt+j+6]=a.z,H[gt+j+7]=0),R===!0&&(a.fromBufferAttribute(pt,I),H[gt+j+8]=a.x,H[gt+j+9]=a.y,H[gt+j+10]=a.z,H[gt+j+11]=pt.itemSize===4?a.w:1)}}_={count:y,texture:X,size:new It(P,B)},n.set(h,_),h.addEventListener("dispose",L)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)d.getUniforms().setValue(i,"morphTexture",c.morphTexture,e);else{let T=0;for(let R=0;R<m.length;R++)T+=m[R];const C=h.morphTargetsRelative?1:1-T;d.getUniforms().setValue(i,"morphTargetBaseInfluence",C),d.getUniforms().setValue(i,"morphTargetInfluences",m)}d.getUniforms().setValue(i,"morphTargetsTexture",_.texture,e),d.getUniforms().setValue(i,"morphTargetsTextureSize",_.size)}return{update:o}}function n5(i,t,e,n){let a=new WeakMap;function o(d){const m=n.render.frame,v=d.geometry,y=t.get(d,v);if(a.get(y)!==m&&(t.update(y),a.set(y,m)),d.isInstancedMesh&&(d.hasEventListener("dispose",h)===!1&&d.addEventListener("dispose",h),a.get(d)!==m&&(e.update(d.instanceMatrix,i.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,i.ARRAY_BUFFER),a.set(d,m))),d.isSkinnedMesh){const _=d.skeleton;a.get(_)!==m&&(_.update(),a.set(_,m))}return y}function c(){a=new WeakMap}function h(d){const m=d.target;m.removeEventListener("dispose",h),e.remove(m.instanceMatrix),m.instanceColor!==null&&e.remove(m.instanceColor)}return{update:o,dispose:c}}const Ww=new vi,NA=new Ob(1,1),jw=new r_,Zw=new o_,Kw=new ag,OA=[],LA=[],zA=new Float32Array(16),PA=new Float32Array(9),BA=new Float32Array(4);function wd(i,t,e){const n=i[0];if(n<=0||n>0)return i;const a=t*e;let o=OA[a];if(o===void 0&&(o=new Float32Array(a),OA[a]=o),t!==0){n.toArray(o,0);for(let c=1,h=0;c!==t;++c)h+=e,i[c].toArray(o,h)}return o}function Wi(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ji(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function w_(i,t){let e=LA[t];e===void 0&&(e=new Int32Array(t),LA[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function i5(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function a5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Wi(e,t))return;i.uniform2fv(this.addr,t),ji(e,t)}}function s5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Wi(e,t))return;i.uniform3fv(this.addr,t),ji(e,t)}}function r5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Wi(e,t))return;i.uniform4fv(this.addr,t),ji(e,t)}}function o5(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Wi(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ji(e,t)}else{if(Wi(e,n))return;BA.set(n),i.uniformMatrix2fv(this.addr,!1,BA),ji(e,n)}}function l5(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Wi(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ji(e,t)}else{if(Wi(e,n))return;PA.set(n),i.uniformMatrix3fv(this.addr,!1,PA),ji(e,n)}}function u5(i,t){const e=this.cache,n=t.elements;if(n===void 0){if(Wi(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ji(e,t)}else{if(Wi(e,n))return;zA.set(n),i.uniformMatrix4fv(this.addr,!1,zA),ji(e,n)}}function c5(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function f5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Wi(e,t))return;i.uniform2iv(this.addr,t),ji(e,t)}}function h5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Wi(e,t))return;i.uniform3iv(this.addr,t),ji(e,t)}}function d5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Wi(e,t))return;i.uniform4iv(this.addr,t),ji(e,t)}}function p5(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function m5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Wi(e,t))return;i.uniform2uiv(this.addr,t),ji(e,t)}}function g5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Wi(e,t))return;i.uniform3uiv(this.addr,t),ji(e,t)}}function v5(i,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Wi(e,t))return;i.uniform4uiv(this.addr,t),ji(e,t)}}function y5(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a);let o;this.type===i.SAMPLER_2D_SHADOW?(NA.compareFunction=Eb,o=NA):o=Ww,e.setTexture2D(t||o,a)}function _5(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture3D(t||Zw,a)}function x5(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTextureCube(t||Kw,a)}function S5(i,t,e){const n=this.cache,a=e.allocateTextureUnit();n[0]!==a&&(i.uniform1i(this.addr,a),n[0]=a),e.setTexture2DArray(t||jw,a)}function M5(i){switch(i){case 5126:return i5;case 35664:return a5;case 35665:return s5;case 35666:return r5;case 35674:return o5;case 35675:return l5;case 35676:return u5;case 5124:case 35670:return c5;case 35667:case 35671:return f5;case 35668:case 35672:return h5;case 35669:case 35673:return d5;case 5125:return p5;case 36294:return m5;case 36295:return g5;case 36296:return v5;case 35678:case 36198:case 36298:case 36306:case 35682:return y5;case 35679:case 36299:case 36307:return _5;case 35680:case 36300:case 36308:case 36293:return x5;case 36289:case 36303:case 36311:case 36292:return S5}}function b5(i,t){i.uniform1fv(this.addr,t)}function E5(i,t){const e=wd(t,this.size,2);i.uniform2fv(this.addr,e)}function T5(i,t){const e=wd(t,this.size,3);i.uniform3fv(this.addr,e)}function A5(i,t){const e=wd(t,this.size,4);i.uniform4fv(this.addr,e)}function R5(i,t){const e=wd(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function C5(i,t){const e=wd(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function w5(i,t){const e=wd(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function D5(i,t){i.uniform1iv(this.addr,t)}function U5(i,t){i.uniform2iv(this.addr,t)}function N5(i,t){i.uniform3iv(this.addr,t)}function O5(i,t){i.uniform4iv(this.addr,t)}function L5(i,t){i.uniform1uiv(this.addr,t)}function z5(i,t){i.uniform2uiv(this.addr,t)}function P5(i,t){i.uniform3uiv(this.addr,t)}function B5(i,t){i.uniform4uiv(this.addr,t)}function I5(i,t,e){const n=this.cache,a=t.length,o=w_(e,a);Wi(n,o)||(i.uniform1iv(this.addr,o),ji(n,o));for(let c=0;c!==a;++c)e.setTexture2D(t[c]||Ww,o[c])}function V5(i,t,e){const n=this.cache,a=t.length,o=w_(e,a);Wi(n,o)||(i.uniform1iv(this.addr,o),ji(n,o));for(let c=0;c!==a;++c)e.setTexture3D(t[c]||Zw,o[c])}function H5(i,t,e){const n=this.cache,a=t.length,o=w_(e,a);Wi(n,o)||(i.uniform1iv(this.addr,o),ji(n,o));for(let c=0;c!==a;++c)e.setTextureCube(t[c]||Kw,o[c])}function F5(i,t,e){const n=this.cache,a=t.length,o=w_(e,a);Wi(n,o)||(i.uniform1iv(this.addr,o),ji(n,o));for(let c=0;c!==a;++c)e.setTexture2DArray(t[c]||jw,o[c])}function G5(i){switch(i){case 5126:return b5;case 35664:return E5;case 35665:return T5;case 35666:return A5;case 35674:return R5;case 35675:return C5;case 35676:return w5;case 5124:case 35670:return D5;case 35667:case 35671:return U5;case 35668:case 35672:return N5;case 35669:case 35673:return O5;case 5125:return L5;case 36294:return z5;case 36295:return P5;case 36296:return B5;case 35678:case 36198:case 36298:case 36306:case 35682:return I5;case 35679:case 36299:case 36307:return V5;case 35680:case 36300:case 36308:case 36293:return H5;case 36289:case 36303:case 36311:case 36292:return F5}}class X5{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=M5(e.type)}}class q5{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=G5(e.type)}}class k5{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const a=this.seq;for(let o=0,c=a.length;o!==c;++o){const h=a[o];h.setValue(t,e[h.id],n)}}}const ES=/(\w+)(\])?(\[|\.)?/g;function IA(i,t){i.seq.push(t),i.map[t.id]=t}function Y5(i,t,e){const n=i.name,a=n.length;for(ES.lastIndex=0;;){const o=ES.exec(n),c=ES.lastIndex;let h=o[1];const d=o[2]==="]",m=o[3];if(d&&(h=h|0),m===void 0||m==="["&&c+2===a){IA(e,m===void 0?new X5(h,i,t):new q5(h,i,t));break}else{let y=e.map[h];y===void 0&&(y=new k5(h),IA(e,y)),e=y}}}class Wv{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<n;++a){const o=t.getActiveUniform(e,a),c=t.getUniformLocation(e,o.name);Y5(o,c,this)}}setValue(t,e,n,a){const o=this.map[e];o!==void 0&&o.setValue(t,n,a)}setOptional(t,e,n){const a=e[n];a!==void 0&&this.setValue(t,n,a)}static upload(t,e,n,a){for(let o=0,c=e.length;o!==c;++o){const h=e[o],d=n[h.id];d.needsUpdate!==!1&&h.setValue(t,d.value,a)}}static seqWithValue(t,e){const n=[];for(let a=0,o=t.length;a!==o;++a){const c=t[a];c.id in e&&n.push(c)}return n}}function VA(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const W5=37297;let j5=0;function Z5(i,t){const e=i.split(`
`),n=[],a=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let c=a;c<o;c++){const h=c+1;n.push(`${h===t?">":" "} ${h}: ${e[c]}`)}return n.join(`
`)}const HA=new je;function K5(i){mn._getMatrix(HA,mn.workingColorSpace,i);const t=`mat3( ${HA.elements.map(e=>e.toFixed(4))} )`;switch(mn.getTransfer(i)){case Hm:return[t,"LinearTransferOETF"];case Bn:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function FA(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),a=i.getShaderInfoLog(t).trim();if(n&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const c=parseInt(o[1]);return e.toUpperCase()+`

`+a+`

`+Z5(i.getShaderSource(t),c)}else return a}function Q5(i,t){const e=K5(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function J5(i,t){let e;switch(t){case SC:e="Linear";break;case MC:e="Reinhard";break;case bC:e="Cineon";break;case pb:e="ACESFilmic";break;case TC:e="AgX";break;case AC:e="Neutral";break;case EC:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const Lv=new K;function $5(){mn.getLuminanceCoefficients(Lv);const i=Lv.x.toFixed(4),t=Lv.y.toFixed(4),e=Lv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function tF(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(um).join(`
`)}function eF(i){const t=[];for(const e in i){const n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function nF(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let a=0;a<n;a++){const o=i.getActiveAttrib(t,a),c=o.name;let h=1;o.type===i.FLOAT_MAT2&&(h=2),o.type===i.FLOAT_MAT3&&(h=3),o.type===i.FLOAT_MAT4&&(h=4),e[c]={type:o.type,location:i.getAttribLocation(t,c),locationSize:h}}return e}function um(i){return i!==""}function GA(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function XA(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const iF=/^[ \t]*#include +<([\w\d./]+)>/gm;function TM(i){return i.replace(iF,sF)}const aF=new Map;function sF(i,t){let e=tn[t];if(e===void 0){const n=aF.get(t);if(n!==void 0)e=tn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return TM(e)}const rF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qA(i){return i.replace(rF,oF)}function oF(i,t,e,n){let a="";for(let o=parseInt(t);o<parseInt(e);o++)a+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function kA(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function lF(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Qy?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===gm?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Zr&&(t="SHADOWMAP_TYPE_VSM"),t}function uF(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Ll:case Xu:t="ENVMAP_TYPE_CUBE";break;case Ed:t="ENVMAP_TYPE_CUBE_UV";break}return t}function cF(i){let t="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Xu:t="ENVMAP_MODE_REFRACTION";break}return t}function fF(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case ng:t="ENVMAP_BLENDING_MULTIPLY";break;case _C:t="ENVMAP_BLENDING_MIX";break;case xC:t="ENVMAP_BLENDING_ADD";break}return t}function hF(i){const t=i.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}function dF(i,t,e,n){const a=i.getContext(),o=e.defines;let c=e.vertexShader,h=e.fragmentShader;const d=lF(e),m=uF(e),v=cF(e),y=fF(e),_=hF(e),M=tF(e),T=eF(o),C=a.createProgram();let R,b,D=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(R=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T].filter(um).join(`
`),R.length>0&&(R+=`
`),b=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T].filter(um).join(`
`),b.length>0&&(b+=`
`)):(R=[kA(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+v:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(um).join(`
`),b=[kA(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,T,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+m:"",e.envMap?"#define "+v:"",e.envMap?"#define "+y:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Yo?"#define TONE_MAPPING":"",e.toneMapping!==Yo?tn.tonemapping_pars_fragment:"",e.toneMapping!==Yo?J5("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",tn.colorspace_pars_fragment,Q5("linearToOutputTexel",e.outputColorSpace),$5(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(um).join(`
`)),c=TM(c),c=GA(c,e),c=XA(c,e),h=TM(h),h=GA(h,e),h=XA(h,e),c=qA(c),h=qA(h),e.isRawShaderMaterial!==!0&&(D=`#version 300 es
`,R=[M,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+R,b=["#define varying in",e.glslVersion===gM?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===gM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const U=D+R+c,N=D+b+h,P=VA(a,a.VERTEX_SHADER,U),B=VA(a,a.FRAGMENT_SHADER,N);a.attachShader(C,P),a.attachShader(C,B),e.index0AttributeName!==void 0?a.bindAttribLocation(C,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(C,0,"position"),a.linkProgram(C);function H(W){if(i.debug.checkShaderErrors){const ot=a.getProgramInfoLog(C).trim(),it=a.getShaderInfoLog(P).trim(),pt=a.getShaderInfoLog(B).trim();let gt=!0,I=!0;if(a.getProgramParameter(C,a.LINK_STATUS)===!1)if(gt=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(a,C,P,B);else{const j=FA(a,P,"vertex"),Z=FA(a,B,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(C,a.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+ot+`
`+j+`
`+Z)}else ot!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ot):(it===""||pt==="")&&(I=!1);I&&(W.diagnostics={runnable:gt,programLog:ot,vertexShader:{log:it,prefix:R},fragmentShader:{log:pt,prefix:b}})}a.deleteShader(P),a.deleteShader(B),X=new Wv(a,C),z=nF(a,C)}let X;this.getUniforms=function(){return X===void 0&&H(this),X};let z;this.getAttributes=function(){return z===void 0&&H(this),z};let L=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=a.getProgramParameter(C,W5)),L},this.destroy=function(){n.releaseStatesOfProgram(this),a.deleteProgram(C),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=j5++,this.cacheKey=t,this.usedTimes=1,this.program=C,this.vertexShader=P,this.fragmentShader=B,this}let pF=0;class mF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,a=this._getShaderStage(e),o=this._getShaderStage(n),c=this._getShaderCacheForMaterial(t);return c.has(a)===!1&&(c.add(a),a.usedTimes++),c.has(o)===!1&&(c.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return n===void 0&&(n=new gF(t),e.set(t,n)),n}}class gF{constructor(t){this.id=pF++,this.code=t,this.usedTimes=0}}function vF(i,t,e,n,a,o,c){const h=new pd,d=new mF,m=new Set,v=[],y=a.logarithmicDepthBuffer,_=a.vertexTextures;let M=a.precision;const T={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(z){return m.add(z),z===0?"uv":`uv${z}`}function R(z,L,W,ot,it){const pt=ot.fog,gt=it.geometry,I=z.isMeshStandardMaterial?ot.environment:null,j=(z.isMeshStandardMaterial?e:t).get(z.envMap||I),Z=j&&j.mapping===Ed?j.image.height:null,ct=T[z.type];z.precision!==null&&(M=a.getMaxPrecision(z.precision),M!==z.precision&&console.warn("THREE.WebGLProgram.getParameters:",z.precision,"not supported, using",M,"instead."));const k=gt.morphAttributes.position||gt.morphAttributes.normal||gt.morphAttributes.color,tt=k!==void 0?k.length:0;let bt=0;gt.morphAttributes.position!==void 0&&(bt=1),gt.morphAttributes.normal!==void 0&&(bt=2),gt.morphAttributes.color!==void 0&&(bt=3);let Rt,et,Et,Bt;if(ct){const ln=Kr[ct];Rt=ln.vertexShader,et=ln.fragmentShader}else Rt=z.vertexShader,et=z.fragmentShader,d.update(z),Et=d.getVertexShaderID(z),Bt=d.getFragmentShaderID(z);const Wt=i.getRenderTarget(),jt=i.state.buffers.depth.getReversed(),Te=it.isInstancedMesh===!0,ye=it.isBatchedMesh===!0,cn=!!z.map,ke=!!z.matcap,Ue=!!j,Y=!!z.aoMap,Zt=!!z.lightMap,Gt=!!z.bumpMap,Xt=!!z.normalMap,Ut=!!z.displacementMap,re=!!z.emissiveMap,Vt=!!z.metalnessMap,ee=!!z.roughnessMap,Ve=z.anisotropy>0,Q=z.clearcoat>0,V=z.dispersion>0,dt=z.iridescence>0,Tt=z.sheen>0,Ct=z.transmission>0,At=Ve&&!!z.anisotropyMap,ne=Q&&!!z.clearcoatMap,Jt=Q&&!!z.clearcoatNormalMap,fe=Q&&!!z.clearcoatRoughnessMap,de=dt&&!!z.iridescenceMap,Ot=dt&&!!z.iridescenceThicknessMap,$t=Tt&&!!z.sheenColorMap,ge=Tt&&!!z.sheenRoughnessMap,_e=!!z.specularMap,Kt=!!z.specularColorMap,Re=!!z.specularIntensityMap,st=Ct&&!!z.transmissionMap,te=Ct&&!!z.thicknessMap,Ft=!!z.gradientMap,ue=!!z.alphaMap,qt=z.alphaTest>0,Lt=!!z.alphaHash,he=!!z.extensions;let Ce=Yo;z.toneMapped&&(Wt===null||Wt.isXRRenderTarget===!0)&&(Ce=i.toneMapping);const hn={shaderID:ct,shaderType:z.type,shaderName:z.name,vertexShader:Rt,fragmentShader:et,defines:z.defines,customVertexShaderID:Et,customFragmentShaderID:Bt,isRawShaderMaterial:z.isRawShaderMaterial===!0,glslVersion:z.glslVersion,precision:M,batching:ye,batchingColor:ye&&it._colorsTexture!==null,instancing:Te,instancingColor:Te&&it.instanceColor!==null,instancingMorph:Te&&it.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:Wt===null?i.outputColorSpace:Wt.isXRRenderTarget===!0?Wt.texture.colorSpace:qu,alphaToCoverage:!!z.alphaToCoverage,map:cn,matcap:ke,envMap:Ue,envMapMode:Ue&&j.mapping,envMapCubeUVHeight:Z,aoMap:Y,lightMap:Zt,bumpMap:Gt,normalMap:Xt,displacementMap:_&&Ut,emissiveMap:re,normalMapObjectSpace:Xt&&z.normalMapType===OC,normalMapTangentSpace:Xt&&z.normalMapType===Wu,metalnessMap:Vt,roughnessMap:ee,anisotropy:Ve,anisotropyMap:At,clearcoat:Q,clearcoatMap:ne,clearcoatNormalMap:Jt,clearcoatRoughnessMap:fe,dispersion:V,iridescence:dt,iridescenceMap:de,iridescenceThicknessMap:Ot,sheen:Tt,sheenColorMap:$t,sheenRoughnessMap:ge,specularMap:_e,specularColorMap:Kt,specularIntensityMap:Re,transmission:Ct,transmissionMap:st,thicknessMap:te,gradientMap:Ft,opaque:z.transparent===!1&&z.blending===gf&&z.alphaToCoverage===!1,alphaMap:ue,alphaTest:qt,alphaHash:Lt,combine:z.combine,mapUv:cn&&C(z.map.channel),aoMapUv:Y&&C(z.aoMap.channel),lightMapUv:Zt&&C(z.lightMap.channel),bumpMapUv:Gt&&C(z.bumpMap.channel),normalMapUv:Xt&&C(z.normalMap.channel),displacementMapUv:Ut&&C(z.displacementMap.channel),emissiveMapUv:re&&C(z.emissiveMap.channel),metalnessMapUv:Vt&&C(z.metalnessMap.channel),roughnessMapUv:ee&&C(z.roughnessMap.channel),anisotropyMapUv:At&&C(z.anisotropyMap.channel),clearcoatMapUv:ne&&C(z.clearcoatMap.channel),clearcoatNormalMapUv:Jt&&C(z.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:fe&&C(z.clearcoatRoughnessMap.channel),iridescenceMapUv:de&&C(z.iridescenceMap.channel),iridescenceThicknessMapUv:Ot&&C(z.iridescenceThicknessMap.channel),sheenColorMapUv:$t&&C(z.sheenColorMap.channel),sheenRoughnessMapUv:ge&&C(z.sheenRoughnessMap.channel),specularMapUv:_e&&C(z.specularMap.channel),specularColorMapUv:Kt&&C(z.specularColorMap.channel),specularIntensityMapUv:Re&&C(z.specularIntensityMap.channel),transmissionMapUv:st&&C(z.transmissionMap.channel),thicknessMapUv:te&&C(z.thicknessMap.channel),alphaMapUv:ue&&C(z.alphaMap.channel),vertexTangents:!!gt.attributes.tangent&&(Xt||Ve),vertexColors:z.vertexColors,vertexAlphas:z.vertexColors===!0&&!!gt.attributes.color&&gt.attributes.color.itemSize===4,pointsUvs:it.isPoints===!0&&!!gt.attributes.uv&&(cn||ue),fog:!!pt,useFog:z.fog===!0,fogExp2:!!pt&&pt.isFogExp2,flatShading:z.flatShading===!0&&z.wireframe===!1,sizeAttenuation:z.sizeAttenuation===!0,logarithmicDepthBuffer:y,reverseDepthBuffer:jt,skinning:it.isSkinnedMesh===!0,morphTargets:gt.morphAttributes.position!==void 0,morphNormals:gt.morphAttributes.normal!==void 0,morphColors:gt.morphAttributes.color!==void 0,morphTargetsCount:tt,morphTextureStride:bt,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:z.dithering,shadowMapEnabled:i.shadowMap.enabled&&W.length>0,shadowMapType:i.shadowMap.type,toneMapping:Ce,decodeVideoTexture:cn&&z.map.isVideoTexture===!0&&mn.getTransfer(z.map.colorSpace)===Bn,decodeVideoTextureEmissive:re&&z.emissiveMap.isVideoTexture===!0&&mn.getTransfer(z.emissiveMap.colorSpace)===Bn,premultipliedAlpha:z.premultipliedAlpha,doubleSided:z.side===Ho,flipSided:z.side===es,useDepthPacking:z.depthPacking>=0,depthPacking:z.depthPacking||0,index0AttributeName:z.index0AttributeName,extensionClipCullDistance:he&&z.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(he&&z.extensions.multiDraw===!0||ye)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:z.customProgramCacheKey()};return hn.vertexUv1s=m.has(1),hn.vertexUv2s=m.has(2),hn.vertexUv3s=m.has(3),m.clear(),hn}function b(z){const L=[];if(z.shaderID?L.push(z.shaderID):(L.push(z.customVertexShaderID),L.push(z.customFragmentShaderID)),z.defines!==void 0)for(const W in z.defines)L.push(W),L.push(z.defines[W]);return z.isRawShaderMaterial===!1&&(D(L,z),U(L,z),L.push(i.outputColorSpace)),L.push(z.customProgramCacheKey),L.join()}function D(z,L){z.push(L.precision),z.push(L.outputColorSpace),z.push(L.envMapMode),z.push(L.envMapCubeUVHeight),z.push(L.mapUv),z.push(L.alphaMapUv),z.push(L.lightMapUv),z.push(L.aoMapUv),z.push(L.bumpMapUv),z.push(L.normalMapUv),z.push(L.displacementMapUv),z.push(L.emissiveMapUv),z.push(L.metalnessMapUv),z.push(L.roughnessMapUv),z.push(L.anisotropyMapUv),z.push(L.clearcoatMapUv),z.push(L.clearcoatNormalMapUv),z.push(L.clearcoatRoughnessMapUv),z.push(L.iridescenceMapUv),z.push(L.iridescenceThicknessMapUv),z.push(L.sheenColorMapUv),z.push(L.sheenRoughnessMapUv),z.push(L.specularMapUv),z.push(L.specularColorMapUv),z.push(L.specularIntensityMapUv),z.push(L.transmissionMapUv),z.push(L.thicknessMapUv),z.push(L.combine),z.push(L.fogExp2),z.push(L.sizeAttenuation),z.push(L.morphTargetsCount),z.push(L.morphAttributeCount),z.push(L.numDirLights),z.push(L.numPointLights),z.push(L.numSpotLights),z.push(L.numSpotLightMaps),z.push(L.numHemiLights),z.push(L.numRectAreaLights),z.push(L.numDirLightShadows),z.push(L.numPointLightShadows),z.push(L.numSpotLightShadows),z.push(L.numSpotLightShadowsWithMaps),z.push(L.numLightProbes),z.push(L.shadowMapType),z.push(L.toneMapping),z.push(L.numClippingPlanes),z.push(L.numClipIntersection),z.push(L.depthPacking)}function U(z,L){h.disableAll(),L.supportsVertexTextures&&h.enable(0),L.instancing&&h.enable(1),L.instancingColor&&h.enable(2),L.instancingMorph&&h.enable(3),L.matcap&&h.enable(4),L.envMap&&h.enable(5),L.normalMapObjectSpace&&h.enable(6),L.normalMapTangentSpace&&h.enable(7),L.clearcoat&&h.enable(8),L.iridescence&&h.enable(9),L.alphaTest&&h.enable(10),L.vertexColors&&h.enable(11),L.vertexAlphas&&h.enable(12),L.vertexUv1s&&h.enable(13),L.vertexUv2s&&h.enable(14),L.vertexUv3s&&h.enable(15),L.vertexTangents&&h.enable(16),L.anisotropy&&h.enable(17),L.alphaHash&&h.enable(18),L.batching&&h.enable(19),L.dispersion&&h.enable(20),L.batchingColor&&h.enable(21),L.gradientMap&&h.enable(22),z.push(h.mask),h.disableAll(),L.fog&&h.enable(0),L.useFog&&h.enable(1),L.flatShading&&h.enable(2),L.logarithmicDepthBuffer&&h.enable(3),L.reverseDepthBuffer&&h.enable(4),L.skinning&&h.enable(5),L.morphTargets&&h.enable(6),L.morphNormals&&h.enable(7),L.morphColors&&h.enable(8),L.premultipliedAlpha&&h.enable(9),L.shadowMapEnabled&&h.enable(10),L.doubleSided&&h.enable(11),L.flipSided&&h.enable(12),L.useDepthPacking&&h.enable(13),L.dithering&&h.enable(14),L.transmission&&h.enable(15),L.sheen&&h.enable(16),L.opaque&&h.enable(17),L.pointsUvs&&h.enable(18),L.decodeVideoTexture&&h.enable(19),L.decodeVideoTextureEmissive&&h.enable(20),L.alphaToCoverage&&h.enable(21),z.push(h.mask)}function N(z){const L=T[z.type];let W;if(L){const ot=Kr[L];W=YC.clone(ot.uniforms)}else W=z.uniforms;return W}function P(z,L){let W;for(let ot=0,it=v.length;ot<it;ot++){const pt=v[ot];if(pt.cacheKey===L){W=pt,++W.usedTimes;break}}return W===void 0&&(W=new dF(i,L,z,o),v.push(W)),W}function B(z){if(--z.usedTimes===0){const L=v.indexOf(z);v[L]=v[v.length-1],v.pop(),z.destroy()}}function H(z){d.remove(z)}function X(){d.dispose()}return{getParameters:R,getProgramCacheKey:b,getUniforms:N,acquireProgram:P,releaseProgram:B,releaseShaderCache:H,programs:v,dispose:X}}function yF(){let i=new WeakMap;function t(c){return i.has(c)}function e(c){let h=i.get(c);return h===void 0&&(h={},i.set(c,h)),h}function n(c){i.delete(c)}function a(c,h,d){i.get(c)[h]=d}function o(){i=new WeakMap}return{has:t,get:e,remove:n,update:a,dispose:o}}function _F(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function YA(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function WA(){const i=[];let t=0;const e=[],n=[],a=[];function o(){t=0,e.length=0,n.length=0,a.length=0}function c(y,_,M,T,C,R){let b=i[t];return b===void 0?(b={id:y.id,object:y,geometry:_,material:M,groupOrder:T,renderOrder:y.renderOrder,z:C,group:R},i[t]=b):(b.id=y.id,b.object=y,b.geometry=_,b.material=M,b.groupOrder=T,b.renderOrder=y.renderOrder,b.z=C,b.group=R),t++,b}function h(y,_,M,T,C,R){const b=c(y,_,M,T,C,R);M.transmission>0?n.push(b):M.transparent===!0?a.push(b):e.push(b)}function d(y,_,M,T,C,R){const b=c(y,_,M,T,C,R);M.transmission>0?n.unshift(b):M.transparent===!0?a.unshift(b):e.unshift(b)}function m(y,_){e.length>1&&e.sort(y||_F),n.length>1&&n.sort(_||YA),a.length>1&&a.sort(_||YA)}function v(){for(let y=t,_=i.length;y<_;y++){const M=i[y];if(M.id===null)break;M.id=null,M.object=null,M.geometry=null,M.material=null,M.group=null}}return{opaque:e,transmissive:n,transparent:a,init:o,push:h,unshift:d,finish:v,sort:m}}function xF(){let i=new WeakMap;function t(n,a){const o=i.get(n);let c;return o===void 0?(c=new WA,i.set(n,[c])):a>=o.length?(c=new WA,o.push(c)):c=o[a],c}function e(){i=new WeakMap}return{get:t,dispose:e}}function SF(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new K,color:new ce};break;case"SpotLight":e={position:new K,direction:new K,color:new ce,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new K,color:new ce,distance:0,decay:0};break;case"HemisphereLight":e={direction:new K,skyColor:new ce,groundColor:new ce};break;case"RectAreaLight":e={color:new ce,position:new K,halfWidth:new K,halfHeight:new K};break}return i[t.id]=e,e}}}function MF(){const i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new It,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}let bF=0;function EF(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function TF(i){const t=new SF,e=MF(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let m=0;m<9;m++)n.probe.push(new K);const a=new K,o=new Pe,c=new Pe;function h(m){let v=0,y=0,_=0;for(let z=0;z<9;z++)n.probe[z].set(0,0,0);let M=0,T=0,C=0,R=0,b=0,D=0,U=0,N=0,P=0,B=0,H=0;m.sort(EF);for(let z=0,L=m.length;z<L;z++){const W=m[z],ot=W.color,it=W.intensity,pt=W.distance,gt=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)v+=ot.r*it,y+=ot.g*it,_+=ot.b*it;else if(W.isLightProbe){for(let I=0;I<9;I++)n.probe[I].addScaledVector(W.sh.coefficients[I],it);H++}else if(W.isDirectionalLight){const I=t.get(W);if(I.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const j=W.shadow,Z=e.get(W);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,n.directionalShadow[M]=Z,n.directionalShadowMap[M]=gt,n.directionalShadowMatrix[M]=W.shadow.matrix,D++}n.directional[M]=I,M++}else if(W.isSpotLight){const I=t.get(W);I.position.setFromMatrixPosition(W.matrixWorld),I.color.copy(ot).multiplyScalar(it),I.distance=pt,I.coneCos=Math.cos(W.angle),I.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),I.decay=W.decay,n.spot[C]=I;const j=W.shadow;if(W.map&&(n.spotLightMap[P]=W.map,P++,j.updateMatrices(W),W.castShadow&&B++),n.spotLightMatrix[C]=j.matrix,W.castShadow){const Z=e.get(W);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,n.spotShadow[C]=Z,n.spotShadowMap[C]=gt,N++}C++}else if(W.isRectAreaLight){const I=t.get(W);I.color.copy(ot).multiplyScalar(it),I.halfWidth.set(W.width*.5,0,0),I.halfHeight.set(0,W.height*.5,0),n.rectArea[R]=I,R++}else if(W.isPointLight){const I=t.get(W);if(I.color.copy(W.color).multiplyScalar(W.intensity),I.distance=W.distance,I.decay=W.decay,W.castShadow){const j=W.shadow,Z=e.get(W);Z.shadowIntensity=j.intensity,Z.shadowBias=j.bias,Z.shadowNormalBias=j.normalBias,Z.shadowRadius=j.radius,Z.shadowMapSize=j.mapSize,Z.shadowCameraNear=j.camera.near,Z.shadowCameraFar=j.camera.far,n.pointShadow[T]=Z,n.pointShadowMap[T]=gt,n.pointShadowMatrix[T]=W.shadow.matrix,U++}n.point[T]=I,T++}else if(W.isHemisphereLight){const I=t.get(W);I.skyColor.copy(W.color).multiplyScalar(it),I.groundColor.copy(W.groundColor).multiplyScalar(it),n.hemi[b]=I,b++}}R>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ae.LTC_FLOAT_1,n.rectAreaLTC2=ae.LTC_FLOAT_2):(n.rectAreaLTC1=ae.LTC_HALF_1,n.rectAreaLTC2=ae.LTC_HALF_2)),n.ambient[0]=v,n.ambient[1]=y,n.ambient[2]=_;const X=n.hash;(X.directionalLength!==M||X.pointLength!==T||X.spotLength!==C||X.rectAreaLength!==R||X.hemiLength!==b||X.numDirectionalShadows!==D||X.numPointShadows!==U||X.numSpotShadows!==N||X.numSpotMaps!==P||X.numLightProbes!==H)&&(n.directional.length=M,n.spot.length=C,n.rectArea.length=R,n.point.length=T,n.hemi.length=b,n.directionalShadow.length=D,n.directionalShadowMap.length=D,n.pointShadow.length=U,n.pointShadowMap.length=U,n.spotShadow.length=N,n.spotShadowMap.length=N,n.directionalShadowMatrix.length=D,n.pointShadowMatrix.length=U,n.spotLightMatrix.length=N+P-B,n.spotLightMap.length=P,n.numSpotLightShadowsWithMaps=B,n.numLightProbes=H,X.directionalLength=M,X.pointLength=T,X.spotLength=C,X.rectAreaLength=R,X.hemiLength=b,X.numDirectionalShadows=D,X.numPointShadows=U,X.numSpotShadows=N,X.numSpotMaps=P,X.numLightProbes=H,n.version=bF++)}function d(m,v){let y=0,_=0,M=0,T=0,C=0;const R=v.matrixWorldInverse;for(let b=0,D=m.length;b<D;b++){const U=m[b];if(U.isDirectionalLight){const N=n.directional[y];N.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),N.direction.sub(a),N.direction.transformDirection(R),y++}else if(U.isSpotLight){const N=n.spot[M];N.position.setFromMatrixPosition(U.matrixWorld),N.position.applyMatrix4(R),N.direction.setFromMatrixPosition(U.matrixWorld),a.setFromMatrixPosition(U.target.matrixWorld),N.direction.sub(a),N.direction.transformDirection(R),M++}else if(U.isRectAreaLight){const N=n.rectArea[T];N.position.setFromMatrixPosition(U.matrixWorld),N.position.applyMatrix4(R),c.identity(),o.copy(U.matrixWorld),o.premultiply(R),c.extractRotation(o),N.halfWidth.set(U.width*.5,0,0),N.halfHeight.set(0,U.height*.5,0),N.halfWidth.applyMatrix4(c),N.halfHeight.applyMatrix4(c),T++}else if(U.isPointLight){const N=n.point[_];N.position.setFromMatrixPosition(U.matrixWorld),N.position.applyMatrix4(R),_++}else if(U.isHemisphereLight){const N=n.hemi[C];N.direction.setFromMatrixPosition(U.matrixWorld),N.direction.transformDirection(R),C++}}}return{setup:h,setupView:d,state:n}}function jA(i){const t=new TF(i),e=[],n=[];function a(v){m.camera=v,e.length=0,n.length=0}function o(v){e.push(v)}function c(v){n.push(v)}function h(){t.setup(e)}function d(v){t.setupView(e,v)}const m={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:m,setupLights:h,setupLightsView:d,pushLight:o,pushShadow:c}}function AF(i){let t=new WeakMap;function e(a,o=0){const c=t.get(a);let h;return c===void 0?(h=new jA(i),t.set(a,[h])):o>=c.length?(h=new jA(i),c.push(h)):h=c[o],h}function n(){t=new WeakMap}return{get:e,dispose:n}}const RF=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,CF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function wF(i,t,e){let n=new Rd;const a=new It,o=new It,c=new Sn,h=new Fb({depthPacking:NC}),d=new Gb,m={},v=e.maxTextureSize,y={[Ol]:es,[es]:Ol,[Ho]:Ho},_=new to({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new It},radius:{value:4}},vertexShader:RF,fragmentShader:CF}),M=_.clone();M.defines.HORIZONTAL_PASS=1;const T=new Je;T.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Pi(T,_),R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qy;let b=this.type;this.render=function(B,H,X){if(R.enabled===!1||R.autoUpdate===!1&&R.needsUpdate===!1||B.length===0)return;const z=i.getRenderTarget(),L=i.getActiveCubeFace(),W=i.getActiveMipmapLevel(),ot=i.state;ot.setBlending(Dl),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const it=b!==Zr&&this.type===Zr,pt=b===Zr&&this.type!==Zr;for(let gt=0,I=B.length;gt<I;gt++){const j=B[gt],Z=j.shadow;if(Z===void 0){console.warn("THREE.WebGLShadowMap:",j,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;a.copy(Z.mapSize);const ct=Z.getFrameExtents();if(a.multiply(ct),o.copy(Z.mapSize),(a.x>v||a.y>v)&&(a.x>v&&(o.x=Math.floor(v/ct.x),a.x=o.x*ct.x,Z.mapSize.x=o.x),a.y>v&&(o.y=Math.floor(v/ct.y),a.y=o.y*ct.y,Z.mapSize.y=o.y)),Z.map===null||it===!0||pt===!0){const tt=this.type!==Zr?{minFilter:ma,magFilter:ma}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Zo(a.x,a.y,tt),Z.map.texture.name=j.name+".shadowMap",Z.camera.updateProjectionMatrix()}i.setRenderTarget(Z.map),i.clear();const k=Z.getViewportCount();for(let tt=0;tt<k;tt++){const bt=Z.getViewport(tt);c.set(o.x*bt.x,o.y*bt.y,o.x*bt.z,o.y*bt.w),ot.viewport(c),Z.updateMatrices(j,tt),n=Z.getFrustum(),N(H,X,Z.camera,j,this.type)}Z.isPointLightShadow!==!0&&this.type===Zr&&D(Z,X),Z.needsUpdate=!1}b=this.type,R.needsUpdate=!1,i.setRenderTarget(z,L,W)};function D(B,H){const X=t.update(C);_.defines.VSM_SAMPLES!==B.blurSamples&&(_.defines.VSM_SAMPLES=B.blurSamples,M.defines.VSM_SAMPLES=B.blurSamples,_.needsUpdate=!0,M.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new Zo(a.x,a.y)),_.uniforms.shadow_pass.value=B.map.texture,_.uniforms.resolution.value=B.mapSize,_.uniforms.radius.value=B.radius,i.setRenderTarget(B.mapPass),i.clear(),i.renderBufferDirect(H,null,X,_,C,null),M.uniforms.shadow_pass.value=B.mapPass.texture,M.uniforms.resolution.value=B.mapSize,M.uniforms.radius.value=B.radius,i.setRenderTarget(B.map),i.clear(),i.renderBufferDirect(H,null,X,M,C,null)}function U(B,H,X,z){let L=null;const W=X.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(W!==void 0)L=W;else if(L=X.isPointLight===!0?d:h,i.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0||H.alphaToCoverage===!0){const ot=L.uuid,it=H.uuid;let pt=m[ot];pt===void 0&&(pt={},m[ot]=pt);let gt=pt[it];gt===void 0&&(gt=L.clone(),pt[it]=gt,H.addEventListener("dispose",P)),L=gt}if(L.visible=H.visible,L.wireframe=H.wireframe,z===Zr?L.side=H.shadowSide!==null?H.shadowSide:H.side:L.side=H.shadowSide!==null?H.shadowSide:y[H.side],L.alphaMap=H.alphaMap,L.alphaTest=H.alphaToCoverage===!0?.5:H.alphaTest,L.map=H.map,L.clipShadows=H.clipShadows,L.clippingPlanes=H.clippingPlanes,L.clipIntersection=H.clipIntersection,L.displacementMap=H.displacementMap,L.displacementScale=H.displacementScale,L.displacementBias=H.displacementBias,L.wireframeLinewidth=H.wireframeLinewidth,L.linewidth=H.linewidth,X.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const ot=i.properties.get(L);ot.light=X}return L}function N(B,H,X,z,L){if(B.visible===!1)return;if(B.layers.test(H.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&L===Zr)&&(!B.frustumCulled||n.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(X.matrixWorldInverse,B.matrixWorld);const it=t.update(B),pt=B.material;if(Array.isArray(pt)){const gt=it.groups;for(let I=0,j=gt.length;I<j;I++){const Z=gt[I],ct=pt[Z.materialIndex];if(ct&&ct.visible){const k=U(B,ct,z,L);B.onBeforeShadow(i,B,H,X,it,k,Z),i.renderBufferDirect(X,null,it,k,B,Z),B.onAfterShadow(i,B,H,X,it,k,Z)}}}else if(pt.visible){const gt=U(B,pt,z,L);B.onBeforeShadow(i,B,H,X,it,gt,null),i.renderBufferDirect(X,null,it,gt,B,null),B.onAfterShadow(i,B,H,X,it,gt,null)}}const ot=B.children;for(let it=0,pt=ot.length;it<pt;it++)N(ot[it],H,X,z,L)}function P(B){B.target.removeEventListener("dispose",P);for(const X in m){const z=m[X],L=B.target.uuid;L in z&&(z[L].dispose(),delete z[L])}}}const DF={[ny]:iy,[ay]:oy,[sy]:ly,[_f]:ry,[iy]:ny,[oy]:ay,[ly]:sy,[ry]:_f};function UF(i,t){function e(){let st=!1;const te=new Sn;let Ft=null;const ue=new Sn(0,0,0,0);return{setMask:function(qt){Ft!==qt&&!st&&(i.colorMask(qt,qt,qt,qt),Ft=qt)},setLocked:function(qt){st=qt},setClear:function(qt,Lt,he,Ce,hn){hn===!0&&(qt*=Ce,Lt*=Ce,he*=Ce),te.set(qt,Lt,he,Ce),ue.equals(te)===!1&&(i.clearColor(qt,Lt,he,Ce),ue.copy(te))},reset:function(){st=!1,Ft=null,ue.set(-1,0,0,0)}}}function n(){let st=!1,te=!1,Ft=null,ue=null,qt=null;return{setReversed:function(Lt){if(te!==Lt){const he=t.get("EXT_clip_control");Lt?he.clipControlEXT(he.LOWER_LEFT_EXT,he.ZERO_TO_ONE_EXT):he.clipControlEXT(he.LOWER_LEFT_EXT,he.NEGATIVE_ONE_TO_ONE_EXT),te=Lt;const Ce=qt;qt=null,this.setClear(Ce)}},getReversed:function(){return te},setTest:function(Lt){Lt?Wt(i.DEPTH_TEST):jt(i.DEPTH_TEST)},setMask:function(Lt){Ft!==Lt&&!st&&(i.depthMask(Lt),Ft=Lt)},setFunc:function(Lt){if(te&&(Lt=DF[Lt]),ue!==Lt){switch(Lt){case ny:i.depthFunc(i.NEVER);break;case iy:i.depthFunc(i.ALWAYS);break;case ay:i.depthFunc(i.LESS);break;case _f:i.depthFunc(i.LEQUAL);break;case sy:i.depthFunc(i.EQUAL);break;case ry:i.depthFunc(i.GEQUAL);break;case oy:i.depthFunc(i.GREATER);break;case ly:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ue=Lt}},setLocked:function(Lt){st=Lt},setClear:function(Lt){qt!==Lt&&(te&&(Lt=1-Lt),i.clearDepth(Lt),qt=Lt)},reset:function(){st=!1,Ft=null,ue=null,qt=null,te=!1}}}function a(){let st=!1,te=null,Ft=null,ue=null,qt=null,Lt=null,he=null,Ce=null,hn=null;return{setTest:function(ln){st||(ln?Wt(i.STENCIL_TEST):jt(i.STENCIL_TEST))},setMask:function(ln){te!==ln&&!st&&(i.stencilMask(ln),te=ln)},setFunc:function(ln,va,yi){(Ft!==ln||ue!==va||qt!==yi)&&(i.stencilFunc(ln,va,yi),Ft=ln,ue=va,qt=yi)},setOp:function(ln,va,yi){(Lt!==ln||he!==va||Ce!==yi)&&(i.stencilOp(ln,va,yi),Lt=ln,he=va,Ce=yi)},setLocked:function(ln){st=ln},setClear:function(ln){hn!==ln&&(i.clearStencil(ln),hn=ln)},reset:function(){st=!1,te=null,Ft=null,ue=null,qt=null,Lt=null,he=null,Ce=null,hn=null}}}const o=new e,c=new n,h=new a,d=new WeakMap,m=new WeakMap;let v={},y={},_=new WeakMap,M=[],T=null,C=!1,R=null,b=null,D=null,U=null,N=null,P=null,B=null,H=new ce(0,0,0),X=0,z=!1,L=null,W=null,ot=null,it=null,pt=null;const gt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,j=0;const Z=i.getParameter(i.VERSION);Z.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(Z)[1]),I=j>=1):Z.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),I=j>=2);let ct=null,k={};const tt=i.getParameter(i.SCISSOR_BOX),bt=i.getParameter(i.VIEWPORT),Rt=new Sn().fromArray(tt),et=new Sn().fromArray(bt);function Et(st,te,Ft,ue){const qt=new Uint8Array(4),Lt=i.createTexture();i.bindTexture(st,Lt),i.texParameteri(st,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(st,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let he=0;he<Ft;he++)st===i.TEXTURE_3D||st===i.TEXTURE_2D_ARRAY?i.texImage3D(te,0,i.RGBA,1,1,ue,0,i.RGBA,i.UNSIGNED_BYTE,qt):i.texImage2D(te+he,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,qt);return Lt}const Bt={};Bt[i.TEXTURE_2D]=Et(i.TEXTURE_2D,i.TEXTURE_2D,1),Bt[i.TEXTURE_CUBE_MAP]=Et(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[i.TEXTURE_2D_ARRAY]=Et(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Bt[i.TEXTURE_3D]=Et(i.TEXTURE_3D,i.TEXTURE_3D,1,1),o.setClear(0,0,0,1),c.setClear(1),h.setClear(0),Wt(i.DEPTH_TEST),c.setFunc(_f),Gt(!1),Xt(cM),Wt(i.CULL_FACE),Y(Dl);function Wt(st){v[st]!==!0&&(i.enable(st),v[st]=!0)}function jt(st){v[st]!==!1&&(i.disable(st),v[st]=!1)}function Te(st,te){return y[st]!==te?(i.bindFramebuffer(st,te),y[st]=te,st===i.DRAW_FRAMEBUFFER&&(y[i.FRAMEBUFFER]=te),st===i.FRAMEBUFFER&&(y[i.DRAW_FRAMEBUFFER]=te),!0):!1}function ye(st,te){let Ft=M,ue=!1;if(st){Ft=_.get(te),Ft===void 0&&(Ft=[],_.set(te,Ft));const qt=st.textures;if(Ft.length!==qt.length||Ft[0]!==i.COLOR_ATTACHMENT0){for(let Lt=0,he=qt.length;Lt<he;Lt++)Ft[Lt]=i.COLOR_ATTACHMENT0+Lt;Ft.length=qt.length,ue=!0}}else Ft[0]!==i.BACK&&(Ft[0]=i.BACK,ue=!0);ue&&i.drawBuffers(Ft)}function cn(st){return T!==st?(i.useProgram(st),T=st,!0):!1}const ke={[Vu]:i.FUNC_ADD,[nC]:i.FUNC_SUBTRACT,[iC]:i.FUNC_REVERSE_SUBTRACT};ke[aC]=i.MIN,ke[sC]=i.MAX;const Ue={[rC]:i.ZERO,[oC]:i.ONE,[lC]:i.SRC_COLOR,[ty]:i.SRC_ALPHA,[pC]:i.SRC_ALPHA_SATURATE,[hC]:i.DST_COLOR,[cC]:i.DST_ALPHA,[uC]:i.ONE_MINUS_SRC_COLOR,[ey]:i.ONE_MINUS_SRC_ALPHA,[dC]:i.ONE_MINUS_DST_COLOR,[fC]:i.ONE_MINUS_DST_ALPHA,[mC]:i.CONSTANT_COLOR,[gC]:i.ONE_MINUS_CONSTANT_COLOR,[vC]:i.CONSTANT_ALPHA,[yC]:i.ONE_MINUS_CONSTANT_ALPHA};function Y(st,te,Ft,ue,qt,Lt,he,Ce,hn,ln){if(st===Dl){C===!0&&(jt(i.BLEND),C=!1);return}if(C===!1&&(Wt(i.BLEND),C=!0),st!==eC){if(st!==R||ln!==z){if((b!==Vu||N!==Vu)&&(i.blendEquation(i.FUNC_ADD),b=Vu,N=Vu),ln)switch(st){case gf:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case fM:i.blendFunc(i.ONE,i.ONE);break;case hM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case dM:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}else switch(st){case gf:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case fM:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case hM:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case dM:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}D=null,U=null,P=null,B=null,H.set(0,0,0),X=0,R=st,z=ln}return}qt=qt||te,Lt=Lt||Ft,he=he||ue,(te!==b||qt!==N)&&(i.blendEquationSeparate(ke[te],ke[qt]),b=te,N=qt),(Ft!==D||ue!==U||Lt!==P||he!==B)&&(i.blendFuncSeparate(Ue[Ft],Ue[ue],Ue[Lt],Ue[he]),D=Ft,U=ue,P=Lt,B=he),(Ce.equals(H)===!1||hn!==X)&&(i.blendColor(Ce.r,Ce.g,Ce.b,hn),H.copy(Ce),X=hn),R=st,z=!1}function Zt(st,te){st.side===Ho?jt(i.CULL_FACE):Wt(i.CULL_FACE);let Ft=st.side===es;te&&(Ft=!Ft),Gt(Ft),st.blending===gf&&st.transparent===!1?Y(Dl):Y(st.blending,st.blendEquation,st.blendSrc,st.blendDst,st.blendEquationAlpha,st.blendSrcAlpha,st.blendDstAlpha,st.blendColor,st.blendAlpha,st.premultipliedAlpha),c.setFunc(st.depthFunc),c.setTest(st.depthTest),c.setMask(st.depthWrite),o.setMask(st.colorWrite);const ue=st.stencilWrite;h.setTest(ue),ue&&(h.setMask(st.stencilWriteMask),h.setFunc(st.stencilFunc,st.stencilRef,st.stencilFuncMask),h.setOp(st.stencilFail,st.stencilZFail,st.stencilZPass)),re(st.polygonOffset,st.polygonOffsetFactor,st.polygonOffsetUnits),st.alphaToCoverage===!0?Wt(i.SAMPLE_ALPHA_TO_COVERAGE):jt(i.SAMPLE_ALPHA_TO_COVERAGE)}function Gt(st){L!==st&&(st?i.frontFace(i.CW):i.frontFace(i.CCW),L=st)}function Xt(st){st!==JR?(Wt(i.CULL_FACE),st!==W&&(st===cM?i.cullFace(i.BACK):st===$R?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):jt(i.CULL_FACE),W=st}function Ut(st){st!==ot&&(I&&i.lineWidth(st),ot=st)}function re(st,te,Ft){st?(Wt(i.POLYGON_OFFSET_FILL),(it!==te||pt!==Ft)&&(i.polygonOffset(te,Ft),it=te,pt=Ft)):jt(i.POLYGON_OFFSET_FILL)}function Vt(st){st?Wt(i.SCISSOR_TEST):jt(i.SCISSOR_TEST)}function ee(st){st===void 0&&(st=i.TEXTURE0+gt-1),ct!==st&&(i.activeTexture(st),ct=st)}function Ve(st,te,Ft){Ft===void 0&&(ct===null?Ft=i.TEXTURE0+gt-1:Ft=ct);let ue=k[Ft];ue===void 0&&(ue={type:void 0,texture:void 0},k[Ft]=ue),(ue.type!==st||ue.texture!==te)&&(ct!==Ft&&(i.activeTexture(Ft),ct=Ft),i.bindTexture(st,te||Bt[st]),ue.type=st,ue.texture=te)}function Q(){const st=k[ct];st!==void 0&&st.type!==void 0&&(i.bindTexture(st.type,null),st.type=void 0,st.texture=void 0)}function V(){try{i.compressedTexImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function dt(){try{i.compressedTexImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Tt(){try{i.texSubImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Ct(){try{i.texSubImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function At(){try{i.compressedTexSubImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function ne(){try{i.compressedTexSubImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Jt(){try{i.texStorage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function fe(){try{i.texStorage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function de(){try{i.texImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Ot(){try{i.texImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function $t(st){Rt.equals(st)===!1&&(i.scissor(st.x,st.y,st.z,st.w),Rt.copy(st))}function ge(st){et.equals(st)===!1&&(i.viewport(st.x,st.y,st.z,st.w),et.copy(st))}function _e(st,te){let Ft=m.get(te);Ft===void 0&&(Ft=new WeakMap,m.set(te,Ft));let ue=Ft.get(st);ue===void 0&&(ue=i.getUniformBlockIndex(te,st.name),Ft.set(st,ue))}function Kt(st,te){const ue=m.get(te).get(st);d.get(te)!==ue&&(i.uniformBlockBinding(te,ue,st.__bindingPointIndex),d.set(te,ue))}function Re(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),c.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),v={},ct=null,k={},y={},_=new WeakMap,M=[],T=null,C=!1,R=null,b=null,D=null,U=null,N=null,P=null,B=null,H=new ce(0,0,0),X=0,z=!1,L=null,W=null,ot=null,it=null,pt=null,Rt.set(0,0,i.canvas.width,i.canvas.height),et.set(0,0,i.canvas.width,i.canvas.height),o.reset(),c.reset(),h.reset()}return{buffers:{color:o,depth:c,stencil:h},enable:Wt,disable:jt,bindFramebuffer:Te,drawBuffers:ye,useProgram:cn,setBlending:Y,setMaterial:Zt,setFlipSided:Gt,setCullFace:Xt,setLineWidth:Ut,setPolygonOffset:re,setScissorTest:Vt,activeTexture:ee,bindTexture:Ve,unbindTexture:Q,compressedTexImage2D:V,compressedTexImage3D:dt,texImage2D:de,texImage3D:Ot,updateUBOMapping:_e,uniformBlockBinding:Kt,texStorage2D:Jt,texStorage3D:fe,texSubImage2D:Tt,texSubImage3D:Ct,compressedTexSubImage2D:At,compressedTexSubImage3D:ne,scissor:$t,viewport:ge,reset:Re}}function NF(i,t,e,n,a,o,c){const h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new It,v=new WeakMap;let y;const _=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function T(Q,V){return M?new OffscreenCanvas(Q,V):Xm("canvas")}function C(Q,V,dt){let Tt=1;const Ct=Ve(Q);if((Ct.width>dt||Ct.height>dt)&&(Tt=dt/Math.max(Ct.width,Ct.height)),Tt<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const At=Math.floor(Tt*Ct.width),ne=Math.floor(Tt*Ct.height);y===void 0&&(y=T(At,ne));const Jt=V?T(At,ne):y;return Jt.width=At,Jt.height=ne,Jt.getContext("2d").drawImage(Q,0,0,At,ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ct.width+"x"+Ct.height+") to ("+At+"x"+ne+")."),Jt}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ct.width+"x"+Ct.height+")."),Q;return Q}function R(Q){return Q.generateMipmaps}function b(Q){i.generateMipmap(Q)}function D(Q){return Q.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?i.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function U(Q,V,dt,Tt,Ct=!1){if(Q!==null){if(i[Q]!==void 0)return i[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let At=V;if(V===i.RED&&(dt===i.FLOAT&&(At=i.R32F),dt===i.HALF_FLOAT&&(At=i.R16F),dt===i.UNSIGNED_BYTE&&(At=i.R8)),V===i.RED_INTEGER&&(dt===i.UNSIGNED_BYTE&&(At=i.R8UI),dt===i.UNSIGNED_SHORT&&(At=i.R16UI),dt===i.UNSIGNED_INT&&(At=i.R32UI),dt===i.BYTE&&(At=i.R8I),dt===i.SHORT&&(At=i.R16I),dt===i.INT&&(At=i.R32I)),V===i.RG&&(dt===i.FLOAT&&(At=i.RG32F),dt===i.HALF_FLOAT&&(At=i.RG16F),dt===i.UNSIGNED_BYTE&&(At=i.RG8)),V===i.RG_INTEGER&&(dt===i.UNSIGNED_BYTE&&(At=i.RG8UI),dt===i.UNSIGNED_SHORT&&(At=i.RG16UI),dt===i.UNSIGNED_INT&&(At=i.RG32UI),dt===i.BYTE&&(At=i.RG8I),dt===i.SHORT&&(At=i.RG16I),dt===i.INT&&(At=i.RG32I)),V===i.RGB_INTEGER&&(dt===i.UNSIGNED_BYTE&&(At=i.RGB8UI),dt===i.UNSIGNED_SHORT&&(At=i.RGB16UI),dt===i.UNSIGNED_INT&&(At=i.RGB32UI),dt===i.BYTE&&(At=i.RGB8I),dt===i.SHORT&&(At=i.RGB16I),dt===i.INT&&(At=i.RGB32I)),V===i.RGBA_INTEGER&&(dt===i.UNSIGNED_BYTE&&(At=i.RGBA8UI),dt===i.UNSIGNED_SHORT&&(At=i.RGBA16UI),dt===i.UNSIGNED_INT&&(At=i.RGBA32UI),dt===i.BYTE&&(At=i.RGBA8I),dt===i.SHORT&&(At=i.RGBA16I),dt===i.INT&&(At=i.RGBA32I)),V===i.RGB&&dt===i.UNSIGNED_INT_5_9_9_9_REV&&(At=i.RGB9_E5),V===i.RGBA){const ne=Ct?Hm:mn.getTransfer(Tt);dt===i.FLOAT&&(At=i.RGBA32F),dt===i.HALF_FLOAT&&(At=i.RGBA16F),dt===i.UNSIGNED_BYTE&&(At=ne===Bn?i.SRGB8_ALPHA8:i.RGBA8),dt===i.UNSIGNED_SHORT_4_4_4_4&&(At=i.RGBA4),dt===i.UNSIGNED_SHORT_5_5_5_1&&(At=i.RGB5_A1)}return(At===i.R16F||At===i.R32F||At===i.RG16F||At===i.RG32F||At===i.RGBA16F||At===i.RGBA32F)&&t.get("EXT_color_buffer_float"),At}function N(Q,V){let dt;return Q?V===null||V===zl||V===cd?dt=i.DEPTH24_STENCIL8:V===Ss?dt=i.DEPTH32F_STENCIL8:V===ud&&(dt=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===zl||V===cd?dt=i.DEPTH_COMPONENT24:V===Ss?dt=i.DEPTH_COMPONENT32F:V===ud&&(dt=i.DEPTH_COMPONENT16),dt}function P(Q,V){return R(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==ma&&Q.minFilter!==Yi?Math.log2(Math.max(V.width,V.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?V.mipmaps.length:1}function B(Q){const V=Q.target;V.removeEventListener("dispose",B),X(V),V.isVideoTexture&&v.delete(V)}function H(Q){const V=Q.target;V.removeEventListener("dispose",H),L(V)}function X(Q){const V=n.get(Q);if(V.__webglInit===void 0)return;const dt=Q.source,Tt=_.get(dt);if(Tt){const Ct=Tt[V.__cacheKey];Ct.usedTimes--,Ct.usedTimes===0&&z(Q),Object.keys(Tt).length===0&&_.delete(dt)}n.remove(Q)}function z(Q){const V=n.get(Q);i.deleteTexture(V.__webglTexture);const dt=Q.source,Tt=_.get(dt);delete Tt[V.__cacheKey],c.memory.textures--}function L(Q){const V=n.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),n.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let Tt=0;Tt<6;Tt++){if(Array.isArray(V.__webglFramebuffer[Tt]))for(let Ct=0;Ct<V.__webglFramebuffer[Tt].length;Ct++)i.deleteFramebuffer(V.__webglFramebuffer[Tt][Ct]);else i.deleteFramebuffer(V.__webglFramebuffer[Tt]);V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer[Tt])}else{if(Array.isArray(V.__webglFramebuffer))for(let Tt=0;Tt<V.__webglFramebuffer.length;Tt++)i.deleteFramebuffer(V.__webglFramebuffer[Tt]);else i.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&i.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Tt=0;Tt<V.__webglColorRenderbuffer.length;Tt++)V.__webglColorRenderbuffer[Tt]&&i.deleteRenderbuffer(V.__webglColorRenderbuffer[Tt]);V.__webglDepthRenderbuffer&&i.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const dt=Q.textures;for(let Tt=0,Ct=dt.length;Tt<Ct;Tt++){const At=n.get(dt[Tt]);At.__webglTexture&&(i.deleteTexture(At.__webglTexture),c.memory.textures--),n.remove(dt[Tt])}n.remove(Q)}let W=0;function ot(){W=0}function it(){const Q=W;return Q>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+a.maxTextures),W+=1,Q}function pt(Q){const V=[];return V.push(Q.wrapS),V.push(Q.wrapT),V.push(Q.wrapR||0),V.push(Q.magFilter),V.push(Q.minFilter),V.push(Q.anisotropy),V.push(Q.internalFormat),V.push(Q.format),V.push(Q.type),V.push(Q.generateMipmaps),V.push(Q.premultiplyAlpha),V.push(Q.flipY),V.push(Q.unpackAlignment),V.push(Q.colorSpace),V.join()}function gt(Q,V){const dt=n.get(Q);if(Q.isVideoTexture&&Vt(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&dt.__version!==Q.version){const Tt=Q.image;if(Tt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Tt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Bt(dt,Q,V);return}}e.bindTexture(i.TEXTURE_2D,dt.__webglTexture,i.TEXTURE0+V)}function I(Q,V){const dt=n.get(Q);if(Q.version>0&&dt.__version!==Q.version){Bt(dt,Q,V);return}e.bindTexture(i.TEXTURE_2D_ARRAY,dt.__webglTexture,i.TEXTURE0+V)}function j(Q,V){const dt=n.get(Q);if(Q.version>0&&dt.__version!==Q.version){Bt(dt,Q,V);return}e.bindTexture(i.TEXTURE_3D,dt.__webglTexture,i.TEXTURE0+V)}function Z(Q,V){const dt=n.get(Q);if(Q.version>0&&dt.__version!==Q.version){Wt(dt,Q,V);return}e.bindTexture(i.TEXTURE_CUBE_MAP,dt.__webglTexture,i.TEXTURE0+V)}const ct={[Pm]:i.REPEAT,[gr]:i.CLAMP_TO_EDGE,[Bm]:i.MIRRORED_REPEAT},k={[ma]:i.NEAREST,[mb]:i.NEAREST_MIPMAP_NEAREST,[ed]:i.NEAREST_MIPMAP_LINEAR,[Yi]:i.LINEAR,[vm]:i.LINEAR_MIPMAP_NEAREST,[Fo]:i.LINEAR_MIPMAP_LINEAR},tt={[LC]:i.NEVER,[HC]:i.ALWAYS,[zC]:i.LESS,[Eb]:i.LEQUAL,[PC]:i.EQUAL,[VC]:i.GEQUAL,[BC]:i.GREATER,[IC]:i.NOTEQUAL};function bt(Q,V){if(V.type===Ss&&t.has("OES_texture_float_linear")===!1&&(V.magFilter===Yi||V.magFilter===vm||V.magFilter===ed||V.magFilter===Fo||V.minFilter===Yi||V.minFilter===vm||V.minFilter===ed||V.minFilter===Fo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(Q,i.TEXTURE_WRAP_S,ct[V.wrapS]),i.texParameteri(Q,i.TEXTURE_WRAP_T,ct[V.wrapT]),(Q===i.TEXTURE_3D||Q===i.TEXTURE_2D_ARRAY)&&i.texParameteri(Q,i.TEXTURE_WRAP_R,ct[V.wrapR]),i.texParameteri(Q,i.TEXTURE_MAG_FILTER,k[V.magFilter]),i.texParameteri(Q,i.TEXTURE_MIN_FILTER,k[V.minFilter]),V.compareFunction&&(i.texParameteri(Q,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(Q,i.TEXTURE_COMPARE_FUNC,tt[V.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===ma||V.minFilter!==ed&&V.minFilter!==Fo||V.type===Ss&&t.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const dt=t.get("EXT_texture_filter_anisotropic");i.texParameterf(Q,dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,a.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function Rt(Q,V){let dt=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,V.addEventListener("dispose",B));const Tt=V.source;let Ct=_.get(Tt);Ct===void 0&&(Ct={},_.set(Tt,Ct));const At=pt(V);if(At!==Q.__cacheKey){Ct[At]===void 0&&(Ct[At]={texture:i.createTexture(),usedTimes:0},c.memory.textures++,dt=!0),Ct[At].usedTimes++;const ne=Ct[Q.__cacheKey];ne!==void 0&&(Ct[Q.__cacheKey].usedTimes--,ne.usedTimes===0&&z(V)),Q.__cacheKey=At,Q.__webglTexture=Ct[At].texture}return dt}function et(Q,V,dt){return Math.floor(Math.floor(Q/dt)/V)}function Et(Q,V,dt,Tt){const At=Q.updateRanges;if(At.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,V.width,V.height,dt,Tt,V.data);else{At.sort((Ot,$t)=>Ot.start-$t.start);let ne=0;for(let Ot=1;Ot<At.length;Ot++){const $t=At[ne],ge=At[Ot],_e=$t.start+$t.count,Kt=et(ge.start,V.width,4),Re=et($t.start,V.width,4);ge.start<=_e+1&&Kt===Re&&et(ge.start+ge.count-1,V.width,4)===Kt?$t.count=Math.max($t.count,ge.start+ge.count-$t.start):(++ne,At[ne]=ge)}At.length=ne+1;const Jt=i.getParameter(i.UNPACK_ROW_LENGTH),fe=i.getParameter(i.UNPACK_SKIP_PIXELS),de=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,V.width);for(let Ot=0,$t=At.length;Ot<$t;Ot++){const ge=At[Ot],_e=Math.floor(ge.start/4),Kt=Math.ceil(ge.count/4),Re=_e%V.width,st=Math.floor(_e/V.width),te=Kt,Ft=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,Re),i.pixelStorei(i.UNPACK_SKIP_ROWS,st),e.texSubImage2D(i.TEXTURE_2D,0,Re,st,te,Ft,dt,Tt,V.data)}Q.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Jt),i.pixelStorei(i.UNPACK_SKIP_PIXELS,fe),i.pixelStorei(i.UNPACK_SKIP_ROWS,de)}}function Bt(Q,V,dt){let Tt=i.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Tt=i.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Tt=i.TEXTURE_3D);const Ct=Rt(Q,V),At=V.source;e.bindTexture(Tt,Q.__webglTexture,i.TEXTURE0+dt);const ne=n.get(At);if(At.version!==ne.__version||Ct===!0){e.activeTexture(i.TEXTURE0+dt);const Jt=mn.getPrimaries(mn.workingColorSpace),fe=V.colorSpace===Cl?null:mn.getPrimaries(V.colorSpace),de=V.colorSpace===Cl||Jt===fe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,de);let Ot=C(V.image,!1,a.maxTextureSize);Ot=ee(V,Ot);const $t=o.convert(V.format,V.colorSpace),ge=o.convert(V.type);let _e=U(V.internalFormat,$t,ge,V.colorSpace,V.isVideoTexture);bt(Tt,V);let Kt;const Re=V.mipmaps,st=V.isVideoTexture!==!0,te=ne.__version===void 0||Ct===!0,Ft=At.dataReady,ue=P(V,Ot);if(V.isDepthTexture)_e=N(V.format===hd,V.type),te&&(st?e.texStorage2D(i.TEXTURE_2D,1,_e,Ot.width,Ot.height):e.texImage2D(i.TEXTURE_2D,0,_e,Ot.width,Ot.height,0,$t,ge,null));else if(V.isDataTexture)if(Re.length>0){st&&te&&e.texStorage2D(i.TEXTURE_2D,ue,_e,Re[0].width,Re[0].height);for(let qt=0,Lt=Re.length;qt<Lt;qt++)Kt=Re[qt],st?Ft&&e.texSubImage2D(i.TEXTURE_2D,qt,0,0,Kt.width,Kt.height,$t,ge,Kt.data):e.texImage2D(i.TEXTURE_2D,qt,_e,Kt.width,Kt.height,0,$t,ge,Kt.data);V.generateMipmaps=!1}else st?(te&&e.texStorage2D(i.TEXTURE_2D,ue,_e,Ot.width,Ot.height),Ft&&Et(V,Ot,$t,ge)):e.texImage2D(i.TEXTURE_2D,0,_e,Ot.width,Ot.height,0,$t,ge,Ot.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){st&&te&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,_e,Re[0].width,Re[0].height,Ot.depth);for(let qt=0,Lt=Re.length;qt<Lt;qt++)if(Kt=Re[qt],V.format!==Oa)if($t!==null)if(st){if(Ft)if(V.layerUpdates.size>0){const he=bM(Kt.width,Kt.height,V.format,V.type);for(const Ce of V.layerUpdates){const hn=Kt.data.subarray(Ce*he/Kt.data.BYTES_PER_ELEMENT,(Ce+1)*he/Kt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,qt,0,0,Ce,Kt.width,Kt.height,1,$t,hn)}V.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,qt,0,0,0,Kt.width,Kt.height,Ot.depth,$t,Kt.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,qt,_e,Kt.width,Kt.height,Ot.depth,0,Kt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else st?Ft&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,qt,0,0,0,Kt.width,Kt.height,Ot.depth,$t,ge,Kt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,qt,_e,Kt.width,Kt.height,Ot.depth,0,$t,ge,Kt.data)}else{st&&te&&e.texStorage2D(i.TEXTURE_2D,ue,_e,Re[0].width,Re[0].height);for(let qt=0,Lt=Re.length;qt<Lt;qt++)Kt=Re[qt],V.format!==Oa?$t!==null?st?Ft&&e.compressedTexSubImage2D(i.TEXTURE_2D,qt,0,0,Kt.width,Kt.height,$t,Kt.data):e.compressedTexImage2D(i.TEXTURE_2D,qt,_e,Kt.width,Kt.height,0,Kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?Ft&&e.texSubImage2D(i.TEXTURE_2D,qt,0,0,Kt.width,Kt.height,$t,ge,Kt.data):e.texImage2D(i.TEXTURE_2D,qt,_e,Kt.width,Kt.height,0,$t,ge,Kt.data)}else if(V.isDataArrayTexture)if(st){if(te&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ue,_e,Ot.width,Ot.height,Ot.depth),Ft)if(V.layerUpdates.size>0){const qt=bM(Ot.width,Ot.height,V.format,V.type);for(const Lt of V.layerUpdates){const he=Ot.data.subarray(Lt*qt/Ot.data.BYTES_PER_ELEMENT,(Lt+1)*qt/Ot.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Lt,Ot.width,Ot.height,1,$t,ge,he)}V.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ot.width,Ot.height,Ot.depth,$t,ge,Ot.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,_e,Ot.width,Ot.height,Ot.depth,0,$t,ge,Ot.data);else if(V.isData3DTexture)st?(te&&e.texStorage3D(i.TEXTURE_3D,ue,_e,Ot.width,Ot.height,Ot.depth),Ft&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ot.width,Ot.height,Ot.depth,$t,ge,Ot.data)):e.texImage3D(i.TEXTURE_3D,0,_e,Ot.width,Ot.height,Ot.depth,0,$t,ge,Ot.data);else if(V.isFramebufferTexture){if(te)if(st)e.texStorage2D(i.TEXTURE_2D,ue,_e,Ot.width,Ot.height);else{let qt=Ot.width,Lt=Ot.height;for(let he=0;he<ue;he++)e.texImage2D(i.TEXTURE_2D,he,_e,qt,Lt,0,$t,ge,null),qt>>=1,Lt>>=1}}else if(Re.length>0){if(st&&te){const qt=Ve(Re[0]);e.texStorage2D(i.TEXTURE_2D,ue,_e,qt.width,qt.height)}for(let qt=0,Lt=Re.length;qt<Lt;qt++)Kt=Re[qt],st?Ft&&e.texSubImage2D(i.TEXTURE_2D,qt,0,0,$t,ge,Kt):e.texImage2D(i.TEXTURE_2D,qt,_e,$t,ge,Kt);V.generateMipmaps=!1}else if(st){if(te){const qt=Ve(Ot);e.texStorage2D(i.TEXTURE_2D,ue,_e,qt.width,qt.height)}Ft&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,$t,ge,Ot)}else e.texImage2D(i.TEXTURE_2D,0,_e,$t,ge,Ot);R(V)&&b(Tt),ne.__version=At.version,V.onUpdate&&V.onUpdate(V)}Q.__version=V.version}function Wt(Q,V,dt){if(V.image.length!==6)return;const Tt=Rt(Q,V),Ct=V.source;e.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+dt);const At=n.get(Ct);if(Ct.version!==At.__version||Tt===!0){e.activeTexture(i.TEXTURE0+dt);const ne=mn.getPrimaries(mn.workingColorSpace),Jt=V.colorSpace===Cl?null:mn.getPrimaries(V.colorSpace),fe=V.colorSpace===Cl||ne===Jt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,fe);const de=V.isCompressedTexture||V.image[0].isCompressedTexture,Ot=V.image[0]&&V.image[0].isDataTexture,$t=[];for(let Lt=0;Lt<6;Lt++)!de&&!Ot?$t[Lt]=C(V.image[Lt],!0,a.maxCubemapSize):$t[Lt]=Ot?V.image[Lt].image:V.image[Lt],$t[Lt]=ee(V,$t[Lt]);const ge=$t[0],_e=o.convert(V.format,V.colorSpace),Kt=o.convert(V.type),Re=U(V.internalFormat,_e,Kt,V.colorSpace),st=V.isVideoTexture!==!0,te=At.__version===void 0||Tt===!0,Ft=Ct.dataReady;let ue=P(V,ge);bt(i.TEXTURE_CUBE_MAP,V);let qt;if(de){st&&te&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,Re,ge.width,ge.height);for(let Lt=0;Lt<6;Lt++){qt=$t[Lt].mipmaps;for(let he=0;he<qt.length;he++){const Ce=qt[he];V.format!==Oa?_e!==null?st?Ft&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he,0,0,Ce.width,Ce.height,_e,Ce.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he,Re,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):st?Ft&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he,0,0,Ce.width,Ce.height,_e,Kt,Ce.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he,Re,Ce.width,Ce.height,0,_e,Kt,Ce.data)}}}else{if(qt=V.mipmaps,st&&te){qt.length>0&&ue++;const Lt=Ve($t[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ue,Re,Lt.width,Lt.height)}for(let Lt=0;Lt<6;Lt++)if(Ot){st?Ft&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,0,0,$t[Lt].width,$t[Lt].height,_e,Kt,$t[Lt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,Re,$t[Lt].width,$t[Lt].height,0,_e,Kt,$t[Lt].data);for(let he=0;he<qt.length;he++){const hn=qt[he].image[Lt].image;st?Ft&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he+1,0,0,hn.width,hn.height,_e,Kt,hn.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he+1,Re,hn.width,hn.height,0,_e,Kt,hn.data)}}else{st?Ft&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,0,0,_e,Kt,$t[Lt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,0,Re,_e,Kt,$t[Lt]);for(let he=0;he<qt.length;he++){const Ce=qt[he];st?Ft&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he+1,0,0,_e,Kt,Ce.image[Lt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Lt,he+1,Re,_e,Kt,Ce.image[Lt])}}}R(V)&&b(i.TEXTURE_CUBE_MAP),At.__version=Ct.version,V.onUpdate&&V.onUpdate(V)}Q.__version=V.version}function jt(Q,V,dt,Tt,Ct,At){const ne=o.convert(dt.format,dt.colorSpace),Jt=o.convert(dt.type),fe=U(dt.internalFormat,ne,Jt,dt.colorSpace),de=n.get(V),Ot=n.get(dt);if(Ot.__renderTarget=V,!de.__hasExternalTextures){const $t=Math.max(1,V.width>>At),ge=Math.max(1,V.height>>At);Ct===i.TEXTURE_3D||Ct===i.TEXTURE_2D_ARRAY?e.texImage3D(Ct,At,fe,$t,ge,V.depth,0,ne,Jt,null):e.texImage2D(Ct,At,fe,$t,ge,0,ne,Jt,null)}e.bindFramebuffer(i.FRAMEBUFFER,Q),re(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Tt,Ct,Ot.__webglTexture,0,Ut(V)):(Ct===i.TEXTURE_2D||Ct>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ct<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Tt,Ct,Ot.__webglTexture,At),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Te(Q,V,dt){if(i.bindRenderbuffer(i.RENDERBUFFER,Q),V.depthBuffer){const Tt=V.depthTexture,Ct=Tt&&Tt.isDepthTexture?Tt.type:null,At=N(V.stencilBuffer,Ct),ne=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Jt=Ut(V);re(V)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Jt,At,V.width,V.height):dt?i.renderbufferStorageMultisample(i.RENDERBUFFER,Jt,At,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,At,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ne,i.RENDERBUFFER,Q)}else{const Tt=V.textures;for(let Ct=0;Ct<Tt.length;Ct++){const At=Tt[Ct],ne=o.convert(At.format,At.colorSpace),Jt=o.convert(At.type),fe=U(At.internalFormat,ne,Jt,At.colorSpace),de=Ut(V);dt&&re(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,de,fe,V.width,V.height):re(V)?h.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,de,fe,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,fe,V.width,V.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ye(Q,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,Q),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Tt=n.get(V.depthTexture);Tt.__renderTarget=V,(!Tt.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),gt(V.depthTexture,0);const Ct=Tt.__webglTexture,At=Ut(V);if(V.depthTexture.format===fd)re(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ct,0,At):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ct,0);else if(V.depthTexture.format===hd)re(V)?h.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ct,0,At):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ct,0);else throw new Error("Unknown depthTexture format")}function cn(Q){const V=n.get(Q),dt=Q.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==Q.depthTexture){const Tt=Q.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Tt){const Ct=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Tt.removeEventListener("dispose",Ct)};Tt.addEventListener("dispose",Ct),V.__depthDisposeCallback=Ct}V.__boundDepthTexture=Tt}if(Q.depthTexture&&!V.__autoAllocateDepthBuffer){if(dt)throw new Error("target.depthTexture not supported in Cube render targets");const Tt=Q.texture.mipmaps;Tt&&Tt.length>0?ye(V.__webglFramebuffer[0],Q):ye(V.__webglFramebuffer,Q)}else if(dt){V.__webglDepthbuffer=[];for(let Tt=0;Tt<6;Tt++)if(e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[Tt]),V.__webglDepthbuffer[Tt]===void 0)V.__webglDepthbuffer[Tt]=i.createRenderbuffer(),Te(V.__webglDepthbuffer[Tt],Q,!1);else{const Ct=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,At=V.__webglDepthbuffer[Tt];i.bindRenderbuffer(i.RENDERBUFFER,At),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ct,i.RENDERBUFFER,At)}}else{const Tt=Q.texture.mipmaps;if(Tt&&Tt.length>0?e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=i.createRenderbuffer(),Te(V.__webglDepthbuffer,Q,!1);else{const Ct=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,At=V.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,At),i.framebufferRenderbuffer(i.FRAMEBUFFER,Ct,i.RENDERBUFFER,At)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function ke(Q,V,dt){const Tt=n.get(Q);V!==void 0&&jt(Tt.__webglFramebuffer,Q,Q.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),dt!==void 0&&cn(Q)}function Ue(Q){const V=Q.texture,dt=n.get(Q),Tt=n.get(V);Q.addEventListener("dispose",H);const Ct=Q.textures,At=Q.isWebGLCubeRenderTarget===!0,ne=Ct.length>1;if(ne||(Tt.__webglTexture===void 0&&(Tt.__webglTexture=i.createTexture()),Tt.__version=V.version,c.memory.textures++),At){dt.__webglFramebuffer=[];for(let Jt=0;Jt<6;Jt++)if(V.mipmaps&&V.mipmaps.length>0){dt.__webglFramebuffer[Jt]=[];for(let fe=0;fe<V.mipmaps.length;fe++)dt.__webglFramebuffer[Jt][fe]=i.createFramebuffer()}else dt.__webglFramebuffer[Jt]=i.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){dt.__webglFramebuffer=[];for(let Jt=0;Jt<V.mipmaps.length;Jt++)dt.__webglFramebuffer[Jt]=i.createFramebuffer()}else dt.__webglFramebuffer=i.createFramebuffer();if(ne)for(let Jt=0,fe=Ct.length;Jt<fe;Jt++){const de=n.get(Ct[Jt]);de.__webglTexture===void 0&&(de.__webglTexture=i.createTexture(),c.memory.textures++)}if(Q.samples>0&&re(Q)===!1){dt.__webglMultisampledFramebuffer=i.createFramebuffer(),dt.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,dt.__webglMultisampledFramebuffer);for(let Jt=0;Jt<Ct.length;Jt++){const fe=Ct[Jt];dt.__webglColorRenderbuffer[Jt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,dt.__webglColorRenderbuffer[Jt]);const de=o.convert(fe.format,fe.colorSpace),Ot=o.convert(fe.type),$t=U(fe.internalFormat,de,Ot,fe.colorSpace,Q.isXRRenderTarget===!0),ge=Ut(Q);i.renderbufferStorageMultisample(i.RENDERBUFFER,ge,$t,Q.width,Q.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Jt,i.RENDERBUFFER,dt.__webglColorRenderbuffer[Jt])}i.bindRenderbuffer(i.RENDERBUFFER,null),Q.depthBuffer&&(dt.__webglDepthRenderbuffer=i.createRenderbuffer(),Te(dt.__webglDepthRenderbuffer,Q,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(At){e.bindTexture(i.TEXTURE_CUBE_MAP,Tt.__webglTexture),bt(i.TEXTURE_CUBE_MAP,V);for(let Jt=0;Jt<6;Jt++)if(V.mipmaps&&V.mipmaps.length>0)for(let fe=0;fe<V.mipmaps.length;fe++)jt(dt.__webglFramebuffer[Jt][fe],Q,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,fe);else jt(dt.__webglFramebuffer[Jt],Q,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0);R(V)&&b(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ne){for(let Jt=0,fe=Ct.length;Jt<fe;Jt++){const de=Ct[Jt],Ot=n.get(de);e.bindTexture(i.TEXTURE_2D,Ot.__webglTexture),bt(i.TEXTURE_2D,de),jt(dt.__webglFramebuffer,Q,de,i.COLOR_ATTACHMENT0+Jt,i.TEXTURE_2D,0),R(de)&&b(i.TEXTURE_2D)}e.unbindTexture()}else{let Jt=i.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(Jt=Q.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Jt,Tt.__webglTexture),bt(Jt,V),V.mipmaps&&V.mipmaps.length>0)for(let fe=0;fe<V.mipmaps.length;fe++)jt(dt.__webglFramebuffer[fe],Q,V,i.COLOR_ATTACHMENT0,Jt,fe);else jt(dt.__webglFramebuffer,Q,V,i.COLOR_ATTACHMENT0,Jt,0);R(V)&&b(Jt),e.unbindTexture()}Q.depthBuffer&&cn(Q)}function Y(Q){const V=Q.textures;for(let dt=0,Tt=V.length;dt<Tt;dt++){const Ct=V[dt];if(R(Ct)){const At=D(Q),ne=n.get(Ct).__webglTexture;e.bindTexture(At,ne),b(At),e.unbindTexture()}}}const Zt=[],Gt=[];function Xt(Q){if(Q.samples>0){if(re(Q)===!1){const V=Q.textures,dt=Q.width,Tt=Q.height;let Ct=i.COLOR_BUFFER_BIT;const At=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ne=n.get(Q),Jt=V.length>1;if(Jt)for(let de=0;de<V.length;de++)e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ne.__webglMultisampledFramebuffer);const fe=Q.texture.mipmaps;fe&&fe.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglFramebuffer);for(let de=0;de<V.length;de++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(Ct|=i.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(Ct|=i.STENCIL_BUFFER_BIT)),Jt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ne.__webglColorRenderbuffer[de]);const Ot=n.get(V[de]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Ot,0)}i.blitFramebuffer(0,0,dt,Tt,0,0,dt,Tt,Ct,i.NEAREST),d===!0&&(Zt.length=0,Gt.length=0,Zt.push(i.COLOR_ATTACHMENT0+de),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(Zt.push(At),Gt.push(At),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Gt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Zt))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Jt)for(let de=0;de<V.length;de++){e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.RENDERBUFFER,ne.__webglColorRenderbuffer[de]);const Ot=n.get(V[de]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+de,i.TEXTURE_2D,Ot,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ne.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&d){const V=Q.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[V])}}}function Ut(Q){return Math.min(a.maxSamples,Q.samples)}function re(Q){const V=n.get(Q);return Q.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Vt(Q){const V=c.render.frame;v.get(Q)!==V&&(v.set(Q,V),Q.update())}function ee(Q,V){const dt=Q.colorSpace,Tt=Q.format,Ct=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||dt!==qu&&dt!==Cl&&(mn.getTransfer(dt)===Bn?(Tt!==Oa||Ct!==yr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",dt)),V}function Ve(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(m.width=Q.naturalWidth||Q.width,m.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(m.width=Q.displayWidth,m.height=Q.displayHeight):(m.width=Q.width,m.height=Q.height),m}this.allocateTextureUnit=it,this.resetTextureUnits=ot,this.setTexture2D=gt,this.setTexture2DArray=I,this.setTexture3D=j,this.setTextureCube=Z,this.rebindTextures=ke,this.setupRenderTarget=Ue,this.updateRenderTargetMipmap=Y,this.updateMultisampleRenderTarget=Xt,this.setupDepthRenderbuffer=cn,this.setupFrameBufferTexture=jt,this.useMultisampledRTT=re}function Qw(i,t){function e(n,a=Cl){let o;const c=mn.getTransfer(a);if(n===yr)return i.UNSIGNED_BYTE;if(n===t_)return i.UNSIGNED_SHORT_4_4_4_4;if(n===e_)return i.UNSIGNED_SHORT_5_5_5_1;if(n===yb)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===gb)return i.BYTE;if(n===vb)return i.SHORT;if(n===ud)return i.UNSIGNED_SHORT;if(n===$y)return i.INT;if(n===zl)return i.UNSIGNED_INT;if(n===Ss)return i.FLOAT;if(n===Td)return i.HALF_FLOAT;if(n===_b)return i.ALPHA;if(n===xb)return i.RGB;if(n===Oa)return i.RGBA;if(n===fd)return i.DEPTH_COMPONENT;if(n===hd)return i.DEPTH_STENCIL;if(n===n_)return i.RED;if(n===ig)return i.RED_INTEGER;if(n===Sb)return i.RG;if(n===i_)return i.RG_INTEGER;if(n===a_)return i.RGBA_INTEGER;if(n===ym||n===_m||n===xm||n===Sm)if(c===Bn)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===ym)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===_m)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===xm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Sm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===ym)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===_m)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===xm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Sm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===uy||n===cy||n===fy||n===hy)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===uy)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===cy)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===fy)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===hy)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===dy||n===py||n===my)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(n===dy||n===py)return c===Bn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===my)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===gy||n===vy||n===yy||n===_y||n===xy||n===Sy||n===My||n===by||n===Ey||n===Ty||n===Ay||n===Ry||n===Cy||n===wy)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(n===gy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===vy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===yy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===_y)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===xy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Sy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===My)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===by)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Ey)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Ty)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Ay)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Ry)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Cy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===wy)return c===Bn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Mm||n===Dy||n===Uy)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(n===Mm)return c===Bn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Dy)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Uy)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Mb||n===Ny||n===Oy||n===Ly)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(n===Mm)return o.COMPRESSED_RED_RGTC1_EXT;if(n===Ny)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Oy)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Ly)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===cd?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}const OF=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,LF=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class zF{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(this.texture===null){const a=new vi,o=t.properties.get(a);o.__webglTexture=e.texture,(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,n=new to({vertexShader:OF,fragmentShader:LF,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Pi(new Cd(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class PF extends Ko{constructor(t,e){super();const n=this;let a=null,o=1,c=null,h="local-floor",d=1,m=null,v=null,y=null,_=null,M=null,T=null;const C=new zF,R=e.getContextAttributes();let b=null,D=null;const U=[],N=[],P=new It;let B=null;const H=new ia;H.viewport=new Sn;const X=new ia;X.viewport=new Sn;const z=[H,X],L=new Hw;let W=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(et){let Et=U[et];return Et===void 0&&(Et=new Yv,U[et]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(et){let Et=U[et];return Et===void 0&&(Et=new Yv,U[et]=Et),Et.getGripSpace()},this.getHand=function(et){let Et=U[et];return Et===void 0&&(Et=new Yv,U[et]=Et),Et.getHandSpace()};function it(et){const Et=N.indexOf(et.inputSource);if(Et===-1)return;const Bt=U[Et];Bt!==void 0&&(Bt.update(et.inputSource,et.frame,m||c),Bt.dispatchEvent({type:et.type,data:et.inputSource}))}function pt(){a.removeEventListener("select",it),a.removeEventListener("selectstart",it),a.removeEventListener("selectend",it),a.removeEventListener("squeeze",it),a.removeEventListener("squeezestart",it),a.removeEventListener("squeezeend",it),a.removeEventListener("end",pt),a.removeEventListener("inputsourceschange",gt);for(let et=0;et<U.length;et++){const Et=N[et];Et!==null&&(N[et]=null,U[et].disconnect(Et))}W=null,ot=null,C.reset(),t.setRenderTarget(b),M=null,_=null,y=null,a=null,D=null,Rt.stop(),n.isPresenting=!1,t.setPixelRatio(B),t.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(et){o=et,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(et){h=et,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m||c},this.setReferenceSpace=function(et){m=et},this.getBaseLayer=function(){return _!==null?_:M},this.getBinding=function(){return y},this.getFrame=function(){return T},this.getSession=function(){return a},this.setSession=async function(et){if(a=et,a!==null){if(b=t.getRenderTarget(),a.addEventListener("select",it),a.addEventListener("selectstart",it),a.addEventListener("selectend",it),a.addEventListener("squeeze",it),a.addEventListener("squeezestart",it),a.addEventListener("squeezeend",it),a.addEventListener("end",pt),a.addEventListener("inputsourceschange",gt),R.xrCompatible!==!0&&await e.makeXRCompatible(),B=t.getPixelRatio(),t.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Wt=null,jt=null;R.depth&&(jt=R.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=R.stencil?hd:fd,Wt=R.stencil?cd:zl);const Te={colorFormat:e.RGBA8,depthFormat:jt,scaleFactor:o};y=new XRWebGLBinding(a,e),_=y.createProjectionLayer(Te),a.updateRenderState({layers:[_]}),t.setPixelRatio(1),t.setSize(_.textureWidth,_.textureHeight,!1),D=new Zo(_.textureWidth,_.textureHeight,{format:Oa,type:yr,depthTexture:new Ob(_.textureWidth,_.textureHeight,Wt,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:R.stencil,colorSpace:t.outputColorSpace,samples:R.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const Bt={antialias:R.antialias,alpha:!0,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:o};M=new XRWebGLLayer(a,e,Bt),a.updateRenderState({baseLayer:M}),t.setPixelRatio(1),t.setSize(M.framebufferWidth,M.framebufferHeight,!1),D=new Zo(M.framebufferWidth,M.framebufferHeight,{format:Oa,type:yr,colorSpace:t.outputColorSpace,stencilBuffer:R.stencil,resolveDepthBuffer:M.ignoreDepthValues===!1,resolveStencilBuffer:M.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(d),m=null,c=await a.requestReferenceSpace(h),Rt.setContext(a),Rt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function gt(et){for(let Et=0;Et<et.removed.length;Et++){const Bt=et.removed[Et],Wt=N.indexOf(Bt);Wt>=0&&(N[Wt]=null,U[Wt].disconnect(Bt))}for(let Et=0;Et<et.added.length;Et++){const Bt=et.added[Et];let Wt=N.indexOf(Bt);if(Wt===-1){for(let Te=0;Te<U.length;Te++)if(Te>=N.length){N.push(Bt),Wt=Te;break}else if(N[Te]===null){N[Te]=Bt,Wt=Te;break}if(Wt===-1)break}const jt=U[Wt];jt&&jt.connect(Bt)}}const I=new K,j=new K;function Z(et,Et,Bt){I.setFromMatrixPosition(Et.matrixWorld),j.setFromMatrixPosition(Bt.matrixWorld);const Wt=I.distanceTo(j),jt=Et.projectionMatrix.elements,Te=Bt.projectionMatrix.elements,ye=jt[14]/(jt[10]-1),cn=jt[14]/(jt[10]+1),ke=(jt[9]+1)/jt[5],Ue=(jt[9]-1)/jt[5],Y=(jt[8]-1)/jt[0],Zt=(Te[8]+1)/Te[0],Gt=ye*Y,Xt=ye*Zt,Ut=Wt/(-Y+Zt),re=Ut*-Y;if(Et.matrixWorld.decompose(et.position,et.quaternion,et.scale),et.translateX(re),et.translateZ(Ut),et.matrixWorld.compose(et.position,et.quaternion,et.scale),et.matrixWorldInverse.copy(et.matrixWorld).invert(),jt[10]===-1)et.projectionMatrix.copy(Et.projectionMatrix),et.projectionMatrixInverse.copy(Et.projectionMatrixInverse);else{const Vt=ye+Ut,ee=cn+Ut,Ve=Gt-re,Q=Xt+(Wt-re),V=ke*cn/ee*Vt,dt=Ue*cn/ee*Vt;et.projectionMatrix.makePerspective(Ve,Q,V,dt,Vt,ee),et.projectionMatrixInverse.copy(et.projectionMatrix).invert()}}function ct(et,Et){Et===null?et.matrixWorld.copy(et.matrix):et.matrixWorld.multiplyMatrices(Et.matrixWorld,et.matrix),et.matrixWorldInverse.copy(et.matrixWorld).invert()}this.updateCamera=function(et){if(a===null)return;let Et=et.near,Bt=et.far;C.texture!==null&&(C.depthNear>0&&(Et=C.depthNear),C.depthFar>0&&(Bt=C.depthFar)),L.near=X.near=H.near=Et,L.far=X.far=H.far=Bt,(W!==L.near||ot!==L.far)&&(a.updateRenderState({depthNear:L.near,depthFar:L.far}),W=L.near,ot=L.far),H.layers.mask=et.layers.mask|2,X.layers.mask=et.layers.mask|4,L.layers.mask=H.layers.mask|X.layers.mask;const Wt=et.parent,jt=L.cameras;ct(L,Wt);for(let Te=0;Te<jt.length;Te++)ct(jt[Te],Wt);jt.length===2?Z(L,H,X):L.projectionMatrix.copy(H.projectionMatrix),k(et,L,Wt)};function k(et,Et,Bt){Bt===null?et.matrix.copy(Et.matrixWorld):(et.matrix.copy(Bt.matrixWorld),et.matrix.invert(),et.matrix.multiply(Et.matrixWorld)),et.matrix.decompose(et.position,et.quaternion,et.scale),et.updateMatrixWorld(!0),et.projectionMatrix.copy(Et.projectionMatrix),et.projectionMatrixInverse.copy(Et.projectionMatrixInverse),et.isPerspectiveCamera&&(et.fov=dd*2*Math.atan(1/et.projectionMatrix.elements[5]),et.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(_===null&&M===null))return d},this.setFoveation=function(et){d=et,_!==null&&(_.fixedFoveation=et),M!==null&&M.fixedFoveation!==void 0&&(M.fixedFoveation=et)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(L)};let tt=null;function bt(et,Et){if(v=Et.getViewerPose(m||c),T=Et,v!==null){const Bt=v.views;M!==null&&(t.setRenderTargetFramebuffer(D,M.framebuffer),t.setRenderTarget(D));let Wt=!1;Bt.length!==L.cameras.length&&(L.cameras.length=0,Wt=!0);for(let ye=0;ye<Bt.length;ye++){const cn=Bt[ye];let ke=null;if(M!==null)ke=M.getViewport(cn);else{const Y=y.getViewSubImage(_,cn);ke=Y.viewport,ye===0&&(t.setRenderTargetTextures(D,Y.colorTexture,Y.depthStencilTexture),t.setRenderTarget(D))}let Ue=z[ye];Ue===void 0&&(Ue=new ia,Ue.layers.enable(ye),Ue.viewport=new Sn,z[ye]=Ue),Ue.matrix.fromArray(cn.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.projectionMatrix.fromArray(cn.projectionMatrix),Ue.projectionMatrixInverse.copy(Ue.projectionMatrix).invert(),Ue.viewport.set(ke.x,ke.y,ke.width,ke.height),ye===0&&(L.matrix.copy(Ue.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),Wt===!0&&L.cameras.push(Ue)}const jt=a.enabledFeatures;if(jt&&jt.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&y){const ye=y.getDepthInformation(Bt[0]);ye&&ye.isValid&&ye.texture&&C.init(t,ye,a.renderState)}}for(let Bt=0;Bt<U.length;Bt++){const Wt=N[Bt],jt=U[Bt];Wt!==null&&jt!==void 0&&jt.update(Wt,Et,m||c)}tt&&tt(et,Et),Et.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Et}),T=null}const Rt=new Yw;Rt.setAnimationLoop(bt),this.setAnimationLoop=function(et){tt=et},this.dispose=function(){}}}const af=new ks,BF=new Pe;function IF(i,t){function e(R,b){R.matrixAutoUpdate===!0&&R.updateMatrix(),b.value.copy(R.matrix)}function n(R,b){b.color.getRGB(R.fogColor.value,kC(i)),b.isFog?(R.fogNear.value=b.near,R.fogFar.value=b.far):b.isFogExp2&&(R.fogDensity.value=b.density)}function a(R,b,D,U,N){b.isMeshBasicMaterial||b.isMeshLambertMaterial?o(R,b):b.isMeshToonMaterial?(o(R,b),y(R,b)):b.isMeshPhongMaterial?(o(R,b),v(R,b)):b.isMeshStandardMaterial?(o(R,b),_(R,b),b.isMeshPhysicalMaterial&&M(R,b,N)):b.isMeshMatcapMaterial?(o(R,b),T(R,b)):b.isMeshDepthMaterial?o(R,b):b.isMeshDistanceMaterial?(o(R,b),C(R,b)):b.isMeshNormalMaterial?o(R,b):b.isLineBasicMaterial?(c(R,b),b.isLineDashedMaterial&&h(R,b)):b.isPointsMaterial?d(R,b,D,U):b.isSpriteMaterial?m(R,b):b.isShadowMaterial?(R.color.value.copy(b.color),R.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function o(R,b){R.opacity.value=b.opacity,b.color&&R.diffuse.value.copy(b.color),b.emissive&&R.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(R.map.value=b.map,e(b.map,R.mapTransform)),b.alphaMap&&(R.alphaMap.value=b.alphaMap,e(b.alphaMap,R.alphaMapTransform)),b.bumpMap&&(R.bumpMap.value=b.bumpMap,e(b.bumpMap,R.bumpMapTransform),R.bumpScale.value=b.bumpScale,b.side===es&&(R.bumpScale.value*=-1)),b.normalMap&&(R.normalMap.value=b.normalMap,e(b.normalMap,R.normalMapTransform),R.normalScale.value.copy(b.normalScale),b.side===es&&R.normalScale.value.negate()),b.displacementMap&&(R.displacementMap.value=b.displacementMap,e(b.displacementMap,R.displacementMapTransform),R.displacementScale.value=b.displacementScale,R.displacementBias.value=b.displacementBias),b.emissiveMap&&(R.emissiveMap.value=b.emissiveMap,e(b.emissiveMap,R.emissiveMapTransform)),b.specularMap&&(R.specularMap.value=b.specularMap,e(b.specularMap,R.specularMapTransform)),b.alphaTest>0&&(R.alphaTest.value=b.alphaTest);const D=t.get(b),U=D.envMap,N=D.envMapRotation;U&&(R.envMap.value=U,af.copy(N),af.x*=-1,af.y*=-1,af.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(af.y*=-1,af.z*=-1),R.envMapRotation.value.setFromMatrix4(BF.makeRotationFromEuler(af)),R.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,R.reflectivity.value=b.reflectivity,R.ior.value=b.ior,R.refractionRatio.value=b.refractionRatio),b.lightMap&&(R.lightMap.value=b.lightMap,R.lightMapIntensity.value=b.lightMapIntensity,e(b.lightMap,R.lightMapTransform)),b.aoMap&&(R.aoMap.value=b.aoMap,R.aoMapIntensity.value=b.aoMapIntensity,e(b.aoMap,R.aoMapTransform))}function c(R,b){R.diffuse.value.copy(b.color),R.opacity.value=b.opacity,b.map&&(R.map.value=b.map,e(b.map,R.mapTransform))}function h(R,b){R.dashSize.value=b.dashSize,R.totalSize.value=b.dashSize+b.gapSize,R.scale.value=b.scale}function d(R,b,D,U){R.diffuse.value.copy(b.color),R.opacity.value=b.opacity,R.size.value=b.size*D,R.scale.value=U*.5,b.map&&(R.map.value=b.map,e(b.map,R.uvTransform)),b.alphaMap&&(R.alphaMap.value=b.alphaMap,e(b.alphaMap,R.alphaMapTransform)),b.alphaTest>0&&(R.alphaTest.value=b.alphaTest)}function m(R,b){R.diffuse.value.copy(b.color),R.opacity.value=b.opacity,R.rotation.value=b.rotation,b.map&&(R.map.value=b.map,e(b.map,R.mapTransform)),b.alphaMap&&(R.alphaMap.value=b.alphaMap,e(b.alphaMap,R.alphaMapTransform)),b.alphaTest>0&&(R.alphaTest.value=b.alphaTest)}function v(R,b){R.specular.value.copy(b.specular),R.shininess.value=Math.max(b.shininess,1e-4)}function y(R,b){b.gradientMap&&(R.gradientMap.value=b.gradientMap)}function _(R,b){R.metalness.value=b.metalness,b.metalnessMap&&(R.metalnessMap.value=b.metalnessMap,e(b.metalnessMap,R.metalnessMapTransform)),R.roughness.value=b.roughness,b.roughnessMap&&(R.roughnessMap.value=b.roughnessMap,e(b.roughnessMap,R.roughnessMapTransform)),b.envMap&&(R.envMapIntensity.value=b.envMapIntensity)}function M(R,b,D){R.ior.value=b.ior,b.sheen>0&&(R.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),R.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(R.sheenColorMap.value=b.sheenColorMap,e(b.sheenColorMap,R.sheenColorMapTransform)),b.sheenRoughnessMap&&(R.sheenRoughnessMap.value=b.sheenRoughnessMap,e(b.sheenRoughnessMap,R.sheenRoughnessMapTransform))),b.clearcoat>0&&(R.clearcoat.value=b.clearcoat,R.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(R.clearcoatMap.value=b.clearcoatMap,e(b.clearcoatMap,R.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(R.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,e(b.clearcoatRoughnessMap,R.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(R.clearcoatNormalMap.value=b.clearcoatNormalMap,e(b.clearcoatNormalMap,R.clearcoatNormalMapTransform),R.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===es&&R.clearcoatNormalScale.value.negate())),b.dispersion>0&&(R.dispersion.value=b.dispersion),b.iridescence>0&&(R.iridescence.value=b.iridescence,R.iridescenceIOR.value=b.iridescenceIOR,R.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],R.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(R.iridescenceMap.value=b.iridescenceMap,e(b.iridescenceMap,R.iridescenceMapTransform)),b.iridescenceThicknessMap&&(R.iridescenceThicknessMap.value=b.iridescenceThicknessMap,e(b.iridescenceThicknessMap,R.iridescenceThicknessMapTransform))),b.transmission>0&&(R.transmission.value=b.transmission,R.transmissionSamplerMap.value=D.texture,R.transmissionSamplerSize.value.set(D.width,D.height),b.transmissionMap&&(R.transmissionMap.value=b.transmissionMap,e(b.transmissionMap,R.transmissionMapTransform)),R.thickness.value=b.thickness,b.thicknessMap&&(R.thicknessMap.value=b.thicknessMap,e(b.thicknessMap,R.thicknessMapTransform)),R.attenuationDistance.value=b.attenuationDistance,R.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(R.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(R.anisotropyMap.value=b.anisotropyMap,e(b.anisotropyMap,R.anisotropyMapTransform))),R.specularIntensity.value=b.specularIntensity,R.specularColor.value.copy(b.specularColor),b.specularColorMap&&(R.specularColorMap.value=b.specularColorMap,e(b.specularColorMap,R.specularColorMapTransform)),b.specularIntensityMap&&(R.specularIntensityMap.value=b.specularIntensityMap,e(b.specularIntensityMap,R.specularIntensityMapTransform))}function T(R,b){b.matcap&&(R.matcap.value=b.matcap)}function C(R,b){const D=t.get(b).light;R.referencePosition.value.setFromMatrixPosition(D.matrixWorld),R.nearDistance.value=D.shadow.camera.near,R.farDistance.value=D.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:a}}function VF(i,t,e,n){let a={},o={},c=[];const h=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function d(D,U){const N=U.program;n.uniformBlockBinding(D,N)}function m(D,U){let N=a[D.id];N===void 0&&(T(D),N=v(D),a[D.id]=N,D.addEventListener("dispose",R));const P=U.program;n.updateUBOMapping(D,P);const B=t.render.frame;o[D.id]!==B&&(_(D),o[D.id]=B)}function v(D){const U=y();D.__bindingPointIndex=U;const N=i.createBuffer(),P=D.__size,B=D.usage;return i.bindBuffer(i.UNIFORM_BUFFER,N),i.bufferData(i.UNIFORM_BUFFER,P,B),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,U,N),N}function y(){for(let D=0;D<h;D++)if(c.indexOf(D)===-1)return c.push(D),D;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(D){const U=a[D.id],N=D.uniforms,P=D.__cache;i.bindBuffer(i.UNIFORM_BUFFER,U);for(let B=0,H=N.length;B<H;B++){const X=Array.isArray(N[B])?N[B]:[N[B]];for(let z=0,L=X.length;z<L;z++){const W=X[z];if(M(W,B,z,P)===!0){const ot=W.__offset,it=Array.isArray(W.value)?W.value:[W.value];let pt=0;for(let gt=0;gt<it.length;gt++){const I=it[gt],j=C(I);typeof I=="number"||typeof I=="boolean"?(W.__data[0]=I,i.bufferSubData(i.UNIFORM_BUFFER,ot+pt,W.__data)):I.isMatrix3?(W.__data[0]=I.elements[0],W.__data[1]=I.elements[1],W.__data[2]=I.elements[2],W.__data[3]=0,W.__data[4]=I.elements[3],W.__data[5]=I.elements[4],W.__data[6]=I.elements[5],W.__data[7]=0,W.__data[8]=I.elements[6],W.__data[9]=I.elements[7],W.__data[10]=I.elements[8],W.__data[11]=0):(I.toArray(W.__data,pt),pt+=j.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ot,W.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function M(D,U,N,P){const B=D.value,H=U+"_"+N;if(P[H]===void 0)return typeof B=="number"||typeof B=="boolean"?P[H]=B:P[H]=B.clone(),!0;{const X=P[H];if(typeof B=="number"||typeof B=="boolean"){if(X!==B)return P[H]=B,!0}else if(X.equals(B)===!1)return X.copy(B),!0}return!1}function T(D){const U=D.uniforms;let N=0;const P=16;for(let H=0,X=U.length;H<X;H++){const z=Array.isArray(U[H])?U[H]:[U[H]];for(let L=0,W=z.length;L<W;L++){const ot=z[L],it=Array.isArray(ot.value)?ot.value:[ot.value];for(let pt=0,gt=it.length;pt<gt;pt++){const I=it[pt],j=C(I),Z=N%P,ct=Z%j.boundary,k=Z+ct;N+=ct,k!==0&&P-k<j.storage&&(N+=P-k),ot.__data=new Float32Array(j.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=N,N+=j.storage}}}const B=N%P;return B>0&&(N+=P-B),D.__size=N,D.__cache={},this}function C(D){const U={boundary:0,storage:0};return typeof D=="number"||typeof D=="boolean"?(U.boundary=4,U.storage=4):D.isVector2?(U.boundary=8,U.storage=8):D.isVector3||D.isColor?(U.boundary=16,U.storage=12):D.isVector4?(U.boundary=16,U.storage=16):D.isMatrix3?(U.boundary=48,U.storage=48):D.isMatrix4?(U.boundary=64,U.storage=64):D.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",D),U}function R(D){const U=D.target;U.removeEventListener("dispose",R);const N=c.indexOf(U.__bindingPointIndex);c.splice(N,1),i.deleteBuffer(a[U.id]),delete a[U.id],delete o[U.id]}function b(){for(const D in a)i.deleteBuffer(a[D]);c=[],a={},o={}}return{bind:d,update:m,dispose:b}}class Jw{constructor(t={}){const{canvas:e=GC(),context:n=null,depth:a=!0,stencil:o=!1,alpha:c=!1,antialias:h=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:m=!1,powerPreference:v="default",failIfMajorPerformanceCaveat:y=!1,reverseDepthBuffer:_=!1}=t;this.isWebGLRenderer=!0;let M;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");M=n.getContextAttributes().alpha}else M=c;const T=new Uint32Array(4),C=new Int32Array(4);let R=null,b=null;const D=[],U=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Yo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const N=this;let P=!1;this._outputColorSpace=Ua;let B=0,H=0,X=null,z=-1,L=null;const W=new Sn,ot=new Sn;let it=null;const pt=new ce(0);let gt=0,I=e.width,j=e.height,Z=1,ct=null,k=null;const tt=new Sn(0,0,I,j),bt=new Sn(0,0,I,j);let Rt=!1;const et=new Rd;let Et=!1,Bt=!1;const Wt=new Pe,jt=new Pe,Te=new K,ye=new Sn,cn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ke=!1;function Ue(){return X===null?Z:1}let Y=n;function Zt(G,rt){return e.getContext(G,rt)}try{const G={alpha:!0,depth:a,stencil:o,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:m,powerPreference:v,failIfMajorPerformanceCaveat:y};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Ky}`),e.addEventListener("webglcontextlost",ue,!1),e.addEventListener("webglcontextrestored",qt,!1),e.addEventListener("webglcontextcreationerror",Lt,!1),Y===null){const rt="webgl2";if(Y=Zt(rt,G),Y===null)throw Zt(rt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(G){throw console.error("THREE.WebGLRenderer: "+G.message),G}let Gt,Xt,Ut,re,Vt,ee,Ve,Q,V,dt,Tt,Ct,At,ne,Jt,fe,de,Ot,$t,ge,_e,Kt,Re,st;function te(){Gt=new QH(Y),Gt.init(),Kt=new Qw(Y,Gt),Xt=new qH(Y,Gt,t,Kt),Ut=new UF(Y,Gt),Xt.reverseDepthBuffer&&_&&Ut.buffers.depth.setReversed(!0),re=new t5(Y),Vt=new yF,ee=new NF(Y,Gt,Ut,Vt,Xt,Kt,re),Ve=new YH(N),Q=new KH(N),V=new rI(Y),Re=new GH(Y,V),dt=new JH(Y,V,re,Re),Tt=new n5(Y,dt,V,re),$t=new e5(Y,Xt,ee),fe=new kH(Vt),Ct=new vF(N,Ve,Q,Gt,Xt,Re,fe),At=new IF(N,Vt),ne=new xF,Jt=new AF(Gt),Ot=new FH(N,Ve,Q,Ut,Tt,M,d),de=new wF(N,Tt,Xt),st=new VF(Y,re,Xt,Ut),ge=new XH(Y,Gt,re),_e=new $H(Y,Gt,re),re.programs=Ct.programs,N.capabilities=Xt,N.extensions=Gt,N.properties=Vt,N.renderLists=ne,N.shadowMap=de,N.state=Ut,N.info=re}te();const Ft=new PF(N,Y);this.xr=Ft,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const G=Gt.get("WEBGL_lose_context");G&&G.loseContext()},this.forceContextRestore=function(){const G=Gt.get("WEBGL_lose_context");G&&G.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(G){G!==void 0&&(Z=G,this.setSize(I,j,!1))},this.getSize=function(G){return G.set(I,j)},this.setSize=function(G,rt,_t=!0){if(Ft.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}I=G,j=rt,e.width=Math.floor(G*Z),e.height=Math.floor(rt*Z),_t===!0&&(e.style.width=G+"px",e.style.height=rt+"px"),this.setViewport(0,0,G,rt)},this.getDrawingBufferSize=function(G){return G.set(I*Z,j*Z).floor()},this.setDrawingBufferSize=function(G,rt,_t){I=G,j=rt,Z=_t,e.width=Math.floor(G*_t),e.height=Math.floor(rt*_t),this.setViewport(0,0,G,rt)},this.getCurrentViewport=function(G){return G.copy(W)},this.getViewport=function(G){return G.copy(tt)},this.setViewport=function(G,rt,_t,xt){G.isVector4?tt.set(G.x,G.y,G.z,G.w):tt.set(G,rt,_t,xt),Ut.viewport(W.copy(tt).multiplyScalar(Z).round())},this.getScissor=function(G){return G.copy(bt)},this.setScissor=function(G,rt,_t,xt){G.isVector4?bt.set(G.x,G.y,G.z,G.w):bt.set(G,rt,_t,xt),Ut.scissor(ot.copy(bt).multiplyScalar(Z).round())},this.getScissorTest=function(){return Rt},this.setScissorTest=function(G){Ut.setScissorTest(Rt=G)},this.setOpaqueSort=function(G){ct=G},this.setTransparentSort=function(G){k=G},this.getClearColor=function(G){return G.copy(Ot.getClearColor())},this.setClearColor=function(){Ot.setClearColor(...arguments)},this.getClearAlpha=function(){return Ot.getClearAlpha()},this.setClearAlpha=function(){Ot.setClearAlpha(...arguments)},this.clear=function(G=!0,rt=!0,_t=!0){let xt=0;if(G){let ut=!1;if(X!==null){const Ht=X.texture.format;ut=Ht===a_||Ht===i_||Ht===ig}if(ut){const Ht=X.texture.type,Qt=Ht===yr||Ht===zl||Ht===ud||Ht===cd||Ht===t_||Ht===e_,se=Ot.getClearColor(),oe=Ot.getClearAlpha(),we=se.r,Me=se.g,ve=se.b;Qt?(T[0]=we,T[1]=Me,T[2]=ve,T[3]=oe,Y.clearBufferuiv(Y.COLOR,0,T)):(C[0]=we,C[1]=Me,C[2]=ve,C[3]=oe,Y.clearBufferiv(Y.COLOR,0,C))}else xt|=Y.COLOR_BUFFER_BIT}rt&&(xt|=Y.DEPTH_BUFFER_BIT),_t&&(xt|=Y.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Y.clear(xt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ue,!1),e.removeEventListener("webglcontextrestored",qt,!1),e.removeEventListener("webglcontextcreationerror",Lt,!1),Ot.dispose(),ne.dispose(),Jt.dispose(),Vt.dispose(),Ve.dispose(),Q.dispose(),Tt.dispose(),Re.dispose(),st.dispose(),Ct.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",ui),Ft.removeEventListener("sessionend",_i),Zi.stop()};function ue(G){G.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function qt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const G=re.autoReset,rt=de.enabled,_t=de.autoUpdate,xt=de.needsUpdate,ut=de.type;te(),re.autoReset=G,de.enabled=rt,de.autoUpdate=_t,de.needsUpdate=xt,de.type=ut}function Lt(G){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",G.statusMessage)}function he(G){const rt=G.target;rt.removeEventListener("dispose",he),Ce(rt)}function Ce(G){hn(G),Vt.remove(G)}function hn(G){const rt=Vt.get(G).programs;rt!==void 0&&(rt.forEach(function(_t){Ct.releaseProgram(_t)}),G.isShaderMaterial&&Ct.releaseShaderCache(G))}this.renderBufferDirect=function(G,rt,_t,xt,ut,Ht){rt===null&&(rt=cn);const Qt=ut.isMesh&&ut.matrixWorld.determinant()<0,se=no(G,rt,_t,xt,ut);Ut.setMaterial(xt,Qt);let oe=_t.index,we=1;if(xt.wireframe===!0){if(oe=dt.getWireframeAttribute(_t),oe===void 0)return;we=2}const Me=_t.drawRange,ve=_t.attributes.position;let Ye=Me.start*we,yn=(Me.start+Me.count)*we;Ht!==null&&(Ye=Math.max(Ye,Ht.start*we),yn=Math.min(yn,(Ht.start+Ht.count)*we)),oe!==null?(Ye=Math.max(Ye,0),yn=Math.min(yn,oe.count)):ve!=null&&(Ye=Math.max(Ye,0),yn=Math.min(yn,ve.count));const Vn=yn-Ye;if(Vn<0||Vn===1/0)return;Re.setup(ut,xt,se,_t,oe);let Ze,_n=ge;if(oe!==null&&(Ze=V.get(oe),_n=_e,_n.setIndex(Ze)),ut.isMesh)xt.wireframe===!0?(Ut.setLineWidth(xt.wireframeLinewidth*Ue()),_n.setMode(Y.LINES)):_n.setMode(Y.TRIANGLES);else if(ut.isLine){let be=xt.linewidth;be===void 0&&(be=1),Ut.setLineWidth(be*Ue()),ut.isLineSegments?_n.setMode(Y.LINES):ut.isLineLoop?_n.setMode(Y.LINE_LOOP):_n.setMode(Y.LINE_STRIP)}else ut.isPoints?_n.setMode(Y.POINTS):ut.isSprite&&_n.setMode(Y.TRIANGLES);if(ut.isBatchedMesh)if(ut._multiDrawInstances!==null)sd("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_n.renderMultiDrawInstances(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount,ut._multiDrawInstances);else if(Gt.get("WEBGL_multi_draw"))_n.renderMultiDraw(ut._multiDrawStarts,ut._multiDrawCounts,ut._multiDrawCount);else{const be=ut._multiDrawStarts,Rn=ut._multiDrawCounts,an=ut._multiDrawCount,xi=oe?V.get(oe).bytesPerElement:1,Ys=Vt.get(xt).currentProgram.getUniforms();for(let Nn=0;Nn<an;Nn++)Ys.setValue(Y,"_gl_DrawID",Nn),_n.render(be[Nn]/xi,Rn[Nn])}else if(ut.isInstancedMesh)_n.renderInstances(Ye,Vn,ut.count);else if(_t.isInstancedBufferGeometry){const be=_t._maxInstanceCount!==void 0?_t._maxInstanceCount:1/0,Rn=Math.min(_t.instanceCount,be);_n.renderInstances(Ye,Vn,Rn)}else _n.render(Ye,Vn)};function ln(G,rt,_t){G.transparent===!0&&G.side===Ho&&G.forceSinglePass===!1?(G.side=es,G.needsUpdate=!0,wn(G,rt,_t),G.side=Ol,G.needsUpdate=!0,wn(G,rt,_t),G.side=Ho):wn(G,rt,_t)}this.compile=function(G,rt,_t=null){_t===null&&(_t=G),b=Jt.get(_t),b.init(rt),U.push(b),_t.traverseVisible(function(ut){ut.isLight&&ut.layers.test(rt.layers)&&(b.pushLight(ut),ut.castShadow&&b.pushShadow(ut))}),G!==_t&&G.traverseVisible(function(ut){ut.isLight&&ut.layers.test(rt.layers)&&(b.pushLight(ut),ut.castShadow&&b.pushShadow(ut))}),b.setupLights();const xt=new Set;return G.traverse(function(ut){if(!(ut.isMesh||ut.isPoints||ut.isLine||ut.isSprite))return;const Ht=ut.material;if(Ht)if(Array.isArray(Ht))for(let Qt=0;Qt<Ht.length;Qt++){const se=Ht[Qt];ln(se,_t,ut),xt.add(se)}else ln(Ht,_t,ut),xt.add(Ht)}),b=U.pop(),xt},this.compileAsync=function(G,rt,_t=null){const xt=this.compile(G,rt,_t);return new Promise(ut=>{function Ht(){if(xt.forEach(function(Qt){Vt.get(Qt).currentProgram.isReady()&&xt.delete(Qt)}),xt.size===0){ut(G);return}setTimeout(Ht,10)}Gt.get("KHR_parallel_shader_compile")!==null?Ht():setTimeout(Ht,10)})};let va=null;function yi(G){va&&va(G)}function ui(){Zi.stop()}function _i(){Zi.start()}const Zi=new Yw;Zi.setAnimationLoop(yi),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(G){va=G,Ft.setAnimationLoop(G),G===null?Zi.stop():Zi.start()},Ft.addEventListener("sessionstart",ui),Ft.addEventListener("sessionend",_i),this.render=function(G,rt){if(rt!==void 0&&rt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(G.matrixWorldAutoUpdate===!0&&G.updateMatrixWorld(),rt.parent===null&&rt.matrixWorldAutoUpdate===!0&&rt.updateMatrixWorld(),Ft.enabled===!0&&Ft.isPresenting===!0&&(Ft.cameraAutoUpdate===!0&&Ft.updateCamera(rt),rt=Ft.getCamera()),G.isScene===!0&&G.onBeforeRender(N,G,rt,X),b=Jt.get(G,U.length),b.init(rt),U.push(b),jt.multiplyMatrices(rt.projectionMatrix,rt.matrixWorldInverse),et.setFromProjectionMatrix(jt),Bt=this.localClippingEnabled,Et=fe.init(this.clippingPlanes,Bt),R=ne.get(G,D.length),R.init(),D.push(R),Ft.enabled===!0&&Ft.isPresenting===!0){const Ht=N.xr.getDepthSensingMesh();Ht!==null&&ya(Ht,rt,-1/0,N.sortObjects)}ya(G,rt,0,N.sortObjects),R.finish(),N.sortObjects===!0&&R.sort(ct,k),ke=Ft.enabled===!1||Ft.isPresenting===!1||Ft.hasDepthSensing()===!1,ke&&Ot.addToRenderList(R,G),this.info.render.frame++,Et===!0&&fe.beginShadows();const _t=b.state.shadowsArray;de.render(_t,G,rt),Et===!0&&fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const xt=R.opaque,ut=R.transmissive;if(b.setupLights(),rt.isArrayCamera){const Ht=rt.cameras;if(ut.length>0)for(let Qt=0,se=Ht.length;Qt<se;Qt++){const oe=Ht[Qt];Ts(xt,ut,G,oe)}ke&&Ot.render(G);for(let Qt=0,se=Ht.length;Qt<se;Qt++){const oe=Ht[Qt];Qu(R,G,oe,oe.viewport)}}else ut.length>0&&Ts(xt,ut,G,rt),ke&&Ot.render(G),Qu(R,G,rt);X!==null&&H===0&&(ee.updateMultisampleRenderTarget(X),ee.updateRenderTargetMipmap(X)),G.isScene===!0&&G.onAfterRender(N,G,rt),Re.resetDefaultState(),z=-1,L=null,U.pop(),U.length>0?(b=U[U.length-1],Et===!0&&fe.setGlobalState(N.clippingPlanes,b.state.camera)):b=null,D.pop(),D.length>0?R=D[D.length-1]:R=null};function ya(G,rt,_t,xt){if(G.visible===!1)return;if(G.layers.test(rt.layers)){if(G.isGroup)_t=G.renderOrder;else if(G.isLOD)G.autoUpdate===!0&&G.update(rt);else if(G.isLight)b.pushLight(G),G.castShadow&&b.pushShadow(G);else if(G.isSprite){if(!G.frustumCulled||et.intersectsSprite(G)){xt&&ye.setFromMatrixPosition(G.matrixWorld).applyMatrix4(jt);const Qt=Tt.update(G),se=G.material;se.visible&&R.push(G,Qt,se,_t,ye.z,null)}}else if((G.isMesh||G.isLine||G.isPoints)&&(!G.frustumCulled||et.intersectsObject(G))){const Qt=Tt.update(G),se=G.material;if(xt&&(G.boundingSphere!==void 0?(G.boundingSphere===null&&G.computeBoundingSphere(),ye.copy(G.boundingSphere.center)):(Qt.boundingSphere===null&&Qt.computeBoundingSphere(),ye.copy(Qt.boundingSphere.center)),ye.applyMatrix4(G.matrixWorld).applyMatrix4(jt)),Array.isArray(se)){const oe=Qt.groups;for(let we=0,Me=oe.length;we<Me;we++){const ve=oe[we],Ye=se[ve.materialIndex];Ye&&Ye.visible&&R.push(G,Qt,Ye,_t,ye.z,ve)}}else se.visible&&R.push(G,Qt,se,_t,ye.z,null)}}const Ht=G.children;for(let Qt=0,se=Ht.length;Qt<se;Qt++)ya(Ht[Qt],rt,_t,xt)}function Qu(G,rt,_t,xt){const ut=G.opaque,Ht=G.transmissive,Qt=G.transparent;b.setupLightsView(_t),Et===!0&&fe.setGlobalState(N.clippingPlanes,_t),xt&&Ut.viewport(W.copy(xt)),ut.length>0&&aa(ut,rt,_t),Ht.length>0&&aa(Ht,rt,_t),Qt.length>0&&aa(Qt,rt,_t),Ut.buffers.depth.setTest(!0),Ut.buffers.depth.setMask(!0),Ut.buffers.color.setMask(!0),Ut.setPolygonOffset(!1)}function Ts(G,rt,_t,xt){if((_t.isScene===!0?_t.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[xt.id]===void 0&&(b.state.transmissionRenderTarget[xt.id]=new Zo(1,1,{generateMipmaps:!0,type:Gt.has("EXT_color_buffer_half_float")||Gt.has("EXT_color_buffer_float")?Td:yr,minFilter:Fo,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mn.workingColorSpace}));const Ht=b.state.transmissionRenderTarget[xt.id],Qt=xt.viewport||W;Ht.setSize(Qt.z*N.transmissionResolutionScale,Qt.w*N.transmissionResolutionScale);const se=N.getRenderTarget(),oe=N.getActiveCubeFace(),we=N.getActiveMipmapLevel();N.setRenderTarget(Ht),N.getClearColor(pt),gt=N.getClearAlpha(),gt<1&&N.setClearColor(16777215,.5),N.clear(),ke&&Ot.render(_t);const Me=N.toneMapping;N.toneMapping=Yo;const ve=xt.viewport;if(xt.viewport!==void 0&&(xt.viewport=void 0),b.setupLightsView(xt),Et===!0&&fe.setGlobalState(N.clippingPlanes,xt),aa(G,_t,xt),ee.updateMultisampleRenderTarget(Ht),ee.updateRenderTargetMipmap(Ht),Gt.has("WEBGL_multisampled_render_to_texture")===!1){let Ye=!1;for(let yn=0,Vn=rt.length;yn<Vn;yn++){const Ze=rt[yn],_n=Ze.object,be=Ze.geometry,Rn=Ze.material,an=Ze.group;if(Rn.side===Ho&&_n.layers.test(xt.layers)){const xi=Rn.side;Rn.side=es,Rn.needsUpdate=!0,As(_n,_t,xt,be,Rn,an),Rn.side=xi,Rn.needsUpdate=!0,Ye=!0}}Ye===!0&&(ee.updateMultisampleRenderTarget(Ht),ee.updateRenderTargetMipmap(Ht))}N.setRenderTarget(se,oe,we),N.setClearColor(pt,gt),ve!==void 0&&(xt.viewport=ve),N.toneMapping=Me}function aa(G,rt,_t){const xt=rt.isScene===!0?rt.overrideMaterial:null;for(let ut=0,Ht=G.length;ut<Ht;ut++){const Qt=G[ut],se=Qt.object,oe=Qt.geometry,we=Qt.group;let Me=Qt.material;Me.allowOverride===!0&&xt!==null&&(Me=xt),se.layers.test(_t.layers)&&As(se,rt,_t,oe,Me,we)}}function As(G,rt,_t,xt,ut,Ht){G.onBeforeRender(N,rt,_t,xt,ut,Ht),G.modelViewMatrix.multiplyMatrices(_t.matrixWorldInverse,G.matrixWorld),G.normalMatrix.getNormalMatrix(G.modelViewMatrix),ut.onBeforeRender(N,rt,_t,xt,G,Ht),ut.transparent===!0&&ut.side===Ho&&ut.forceSinglePass===!1?(ut.side=es,ut.needsUpdate=!0,N.renderBufferDirect(_t,rt,xt,ut,G,Ht),ut.side=Ol,ut.needsUpdate=!0,N.renderBufferDirect(_t,rt,xt,ut,G,Ht),ut.side=Ho):N.renderBufferDirect(_t,rt,xt,ut,G,Ht),G.onAfterRender(N,rt,_t,xt,ut,Ht)}function wn(G,rt,_t){rt.isScene!==!0&&(rt=cn);const xt=Vt.get(G),ut=b.state.lights,Ht=b.state.shadowsArray,Qt=ut.state.version,se=Ct.getParameters(G,ut.state,Ht,rt,_t),oe=Ct.getProgramCacheKey(se);let we=xt.programs;xt.environment=G.isMeshStandardMaterial?rt.environment:null,xt.fog=rt.fog,xt.envMap=(G.isMeshStandardMaterial?Q:Ve).get(G.envMap||xt.environment),xt.envMapRotation=xt.environment!==null&&G.envMap===null?rt.environmentRotation:G.envMapRotation,we===void 0&&(G.addEventListener("dispose",he),we=new Map,xt.programs=we);let Me=we.get(oe);if(Me!==void 0){if(xt.currentProgram===Me&&xt.lightsStateVersion===Qt)return Cs(G,se),Me}else se.uniforms=Ct.getUniforms(G),G.onBeforeCompile(se,N),Me=Ct.acquireProgram(se,oe),we.set(oe,Me),xt.uniforms=se.uniforms;const ve=xt.uniforms;return(!G.isShaderMaterial&&!G.isRawShaderMaterial||G.clipping===!0)&&(ve.clippingPlanes=fe.uniform),Cs(G,se),xt.needsLights=ci(G),xt.lightsStateVersion=Qt,xt.needsLights&&(ve.ambientLightColor.value=ut.state.ambient,ve.lightProbe.value=ut.state.probe,ve.directionalLights.value=ut.state.directional,ve.directionalLightShadows.value=ut.state.directionalShadow,ve.spotLights.value=ut.state.spot,ve.spotLightShadows.value=ut.state.spotShadow,ve.rectAreaLights.value=ut.state.rectArea,ve.ltc_1.value=ut.state.rectAreaLTC1,ve.ltc_2.value=ut.state.rectAreaLTC2,ve.pointLights.value=ut.state.point,ve.pointLightShadows.value=ut.state.pointShadow,ve.hemisphereLights.value=ut.state.hemi,ve.directionalShadowMap.value=ut.state.directionalShadowMap,ve.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,ve.spotShadowMap.value=ut.state.spotShadowMap,ve.spotLightMatrix.value=ut.state.spotLightMatrix,ve.spotLightMap.value=ut.state.spotLightMap,ve.pointShadowMap.value=ut.state.pointShadowMap,ve.pointShadowMatrix.value=ut.state.pointShadowMatrix),xt.currentProgram=Me,xt.uniformsList=null,Me}function Rs(G){if(G.uniformsList===null){const rt=G.currentProgram.getUniforms();G.uniformsList=Wv.seqWithValue(rt.seq,G.uniforms)}return G.uniformsList}function Cs(G,rt){const _t=Vt.get(G);_t.outputColorSpace=rt.outputColorSpace,_t.batching=rt.batching,_t.batchingColor=rt.batchingColor,_t.instancing=rt.instancing,_t.instancingColor=rt.instancingColor,_t.instancingMorph=rt.instancingMorph,_t.skinning=rt.skinning,_t.morphTargets=rt.morphTargets,_t.morphNormals=rt.morphNormals,_t.morphColors=rt.morphColors,_t.morphTargetsCount=rt.morphTargetsCount,_t.numClippingPlanes=rt.numClippingPlanes,_t.numIntersection=rt.numClipIntersection,_t.vertexAlphas=rt.vertexAlphas,_t.vertexTangents=rt.vertexTangents,_t.toneMapping=rt.toneMapping}function no(G,rt,_t,xt,ut){rt.isScene!==!0&&(rt=cn),ee.resetTextureUnits();const Ht=rt.fog,Qt=xt.isMeshStandardMaterial?rt.environment:null,se=X===null?N.outputColorSpace:X.isXRRenderTarget===!0?X.texture.colorSpace:qu,oe=(xt.isMeshStandardMaterial?Q:Ve).get(xt.envMap||Qt),we=xt.vertexColors===!0&&!!_t.attributes.color&&_t.attributes.color.itemSize===4,Me=!!_t.attributes.tangent&&(!!xt.normalMap||xt.anisotropy>0),ve=!!_t.morphAttributes.position,Ye=!!_t.morphAttributes.normal,yn=!!_t.morphAttributes.color;let Vn=Yo;xt.toneMapped&&(X===null||X.isXRRenderTarget===!0)&&(Vn=N.toneMapping);const Ze=_t.morphAttributes.position||_t.morphAttributes.normal||_t.morphAttributes.color,_n=Ze!==void 0?Ze.length:0,be=Vt.get(xt),Rn=b.state.lights;if(Et===!0&&(Bt===!0||G!==L)){const Ri=G===L&&xt.id===z;fe.setState(xt,G,Ri)}let an=!1;xt.version===be.__version?(be.needsLights&&be.lightsStateVersion!==Rn.state.version||be.outputColorSpace!==se||ut.isBatchedMesh&&be.batching===!1||!ut.isBatchedMesh&&be.batching===!0||ut.isBatchedMesh&&be.batchingColor===!0&&ut.colorTexture===null||ut.isBatchedMesh&&be.batchingColor===!1&&ut.colorTexture!==null||ut.isInstancedMesh&&be.instancing===!1||!ut.isInstancedMesh&&be.instancing===!0||ut.isSkinnedMesh&&be.skinning===!1||!ut.isSkinnedMesh&&be.skinning===!0||ut.isInstancedMesh&&be.instancingColor===!0&&ut.instanceColor===null||ut.isInstancedMesh&&be.instancingColor===!1&&ut.instanceColor!==null||ut.isInstancedMesh&&be.instancingMorph===!0&&ut.morphTexture===null||ut.isInstancedMesh&&be.instancingMorph===!1&&ut.morphTexture!==null||be.envMap!==oe||xt.fog===!0&&be.fog!==Ht||be.numClippingPlanes!==void 0&&(be.numClippingPlanes!==fe.numPlanes||be.numIntersection!==fe.numIntersection)||be.vertexAlphas!==we||be.vertexTangents!==Me||be.morphTargets!==ve||be.morphNormals!==Ye||be.morphColors!==yn||be.toneMapping!==Vn||be.morphTargetsCount!==_n)&&(an=!0):(an=!0,be.__version=xt.version);let xi=be.currentProgram;an===!0&&(xi=wn(xt,rt,ut));let Ys=!1,Nn=!1,Ws=!1;const Dn=xi.getUniforms(),Bi=be.uniforms;if(Ut.useProgram(xi.program)&&(Ys=!0,Nn=!0,Ws=!0),xt.id!==z&&(z=xt.id,Nn=!0),Ys||L!==G){Ut.buffers.depth.getReversed()?(Wt.copy(G.projectionMatrix),AP(Wt),RP(Wt),Dn.setValue(Y,"projectionMatrix",Wt)):Dn.setValue(Y,"projectionMatrix",G.projectionMatrix),Dn.setValue(Y,"viewMatrix",G.matrixWorldInverse);const Ci=Dn.map.cameraPosition;Ci!==void 0&&Ci.setValue(Y,Te.setFromMatrixPosition(G.matrixWorld)),Xt.logarithmicDepthBuffer&&Dn.setValue(Y,"logDepthBufFC",2/(Math.log(G.far+1)/Math.LN2)),(xt.isMeshPhongMaterial||xt.isMeshToonMaterial||xt.isMeshLambertMaterial||xt.isMeshBasicMaterial||xt.isMeshStandardMaterial||xt.isShaderMaterial)&&Dn.setValue(Y,"isOrthographic",G.isOrthographicCamera===!0),L!==G&&(L=G,Nn=!0,Ws=!0)}if(ut.isSkinnedMesh){Dn.setOptional(Y,ut,"bindMatrix"),Dn.setOptional(Y,ut,"bindMatrixInverse");const Ri=ut.skeleton;Ri&&(Ri.boneTexture===null&&Ri.computeBoneTexture(),Dn.setValue(Y,"boneTexture",Ri.boneTexture,ee))}ut.isBatchedMesh&&(Dn.setOptional(Y,ut,"batchingTexture"),Dn.setValue(Y,"batchingTexture",ut._matricesTexture,ee),Dn.setOptional(Y,ut,"batchingIdTexture"),Dn.setValue(Y,"batchingIdTexture",ut._indirectTexture,ee),Dn.setOptional(Y,ut,"batchingColorTexture"),ut._colorsTexture!==null&&Dn.setValue(Y,"batchingColorTexture",ut._colorsTexture,ee));const fi=_t.morphAttributes;if((fi.position!==void 0||fi.normal!==void 0||fi.color!==void 0)&&$t.update(ut,_t,xi),(Nn||be.receiveShadow!==ut.receiveShadow)&&(be.receiveShadow=ut.receiveShadow,Dn.setValue(Y,"receiveShadow",ut.receiveShadow)),xt.isMeshGouraudMaterial&&xt.envMap!==null&&(Bi.envMap.value=oe,Bi.flipEnvMap.value=oe.isCubeTexture&&oe.isRenderTargetTexture===!1?-1:1),xt.isMeshStandardMaterial&&xt.envMap===null&&rt.environment!==null&&(Bi.envMapIntensity.value=rt.environmentIntensity),Nn&&(Dn.setValue(Y,"toneMappingExposure",N.toneMappingExposure),be.needsLights&&xr(Bi,Ws),Ht&&xt.fog===!0&&At.refreshFogUniforms(Bi,Ht),At.refreshMaterialUniforms(Bi,xt,Z,j,b.state.transmissionRenderTarget[G.id]),Wv.upload(Y,Rs(be),Bi,ee)),xt.isShaderMaterial&&xt.uniformsNeedUpdate===!0&&(Wv.upload(Y,Rs(be),Bi,ee),xt.uniformsNeedUpdate=!1),xt.isSpriteMaterial&&Dn.setValue(Y,"center",ut.center),Dn.setValue(Y,"modelViewMatrix",ut.modelViewMatrix),Dn.setValue(Y,"normalMatrix",ut.normalMatrix),Dn.setValue(Y,"modelMatrix",ut.matrixWorld),xt.isShaderMaterial||xt.isRawShaderMaterial){const Ri=xt.uniformsGroups;for(let Ci=0,sa=Ri.length;Ci<sa;Ci++){const js=Ri[Ci];st.update(js,xi),st.bind(js,xi)}}return xi}function xr(G,rt){G.ambientLightColor.needsUpdate=rt,G.lightProbe.needsUpdate=rt,G.directionalLights.needsUpdate=rt,G.directionalLightShadows.needsUpdate=rt,G.pointLights.needsUpdate=rt,G.pointLightShadows.needsUpdate=rt,G.spotLights.needsUpdate=rt,G.spotLightShadows.needsUpdate=rt,G.rectAreaLights.needsUpdate=rt,G.hemisphereLights.needsUpdate=rt}function ci(G){return G.isMeshLambertMaterial||G.isMeshToonMaterial||G.isMeshPhongMaterial||G.isMeshStandardMaterial||G.isShadowMaterial||G.isShaderMaterial&&G.lights===!0}this.getActiveCubeFace=function(){return B},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return X},this.setRenderTargetTextures=function(G,rt,_t){const xt=Vt.get(G);xt.__autoAllocateDepthBuffer=G.resolveDepthBuffer===!1,xt.__autoAllocateDepthBuffer===!1&&(xt.__useRenderToTexture=!1),Vt.get(G.texture).__webglTexture=rt,Vt.get(G.depthTexture).__webglTexture=xt.__autoAllocateDepthBuffer?void 0:_t,xt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(G,rt){const _t=Vt.get(G);_t.__webglFramebuffer=rt,_t.__useDefaultFramebuffer=rt===void 0};const Bl=Y.createFramebuffer();this.setRenderTarget=function(G,rt=0,_t=0){X=G,B=rt,H=_t;let xt=!0,ut=null,Ht=!1,Qt=!1;if(G){const oe=Vt.get(G);if(oe.__useDefaultFramebuffer!==void 0)Ut.bindFramebuffer(Y.FRAMEBUFFER,null),xt=!1;else if(oe.__webglFramebuffer===void 0)ee.setupRenderTarget(G);else if(oe.__hasExternalTextures)ee.rebindTextures(G,Vt.get(G.texture).__webglTexture,Vt.get(G.depthTexture).__webglTexture);else if(G.depthBuffer){const ve=G.depthTexture;if(oe.__boundDepthTexture!==ve){if(ve!==null&&Vt.has(ve)&&(G.width!==ve.image.width||G.height!==ve.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(G)}}const we=G.texture;(we.isData3DTexture||we.isDataArrayTexture||we.isCompressedArrayTexture)&&(Qt=!0);const Me=Vt.get(G).__webglFramebuffer;G.isWebGLCubeRenderTarget?(Array.isArray(Me[rt])?ut=Me[rt][_t]:ut=Me[rt],Ht=!0):G.samples>0&&ee.useMultisampledRTT(G)===!1?ut=Vt.get(G).__webglMultisampledFramebuffer:Array.isArray(Me)?ut=Me[_t]:ut=Me,W.copy(G.viewport),ot.copy(G.scissor),it=G.scissorTest}else W.copy(tt).multiplyScalar(Z).floor(),ot.copy(bt).multiplyScalar(Z).floor(),it=Rt;if(_t!==0&&(ut=Bl),Ut.bindFramebuffer(Y.FRAMEBUFFER,ut)&&xt&&Ut.drawBuffers(G,ut),Ut.viewport(W),Ut.scissor(ot),Ut.setScissorTest(it),Ht){const oe=Vt.get(G.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+rt,oe.__webglTexture,_t)}else if(Qt){const oe=Vt.get(G.texture),we=rt;Y.framebufferTextureLayer(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,oe.__webglTexture,_t,we)}else if(G!==null&&_t!==0){const oe=Vt.get(G.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,oe.__webglTexture,_t)}z=-1},this.readRenderTargetPixels=function(G,rt,_t,xt,ut,Ht,Qt,se=0){if(!(G&&G.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let oe=Vt.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Qt!==void 0&&(oe=oe[Qt]),oe){Ut.bindFramebuffer(Y.FRAMEBUFFER,oe);try{const we=G.textures[se],Me=we.format,ve=we.type;if(!Xt.textureFormatReadable(Me)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xt.textureTypeReadable(ve)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}rt>=0&&rt<=G.width-xt&&_t>=0&&_t<=G.height-ut&&(G.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+se),Y.readPixels(rt,_t,xt,ut,Kt.convert(Me),Kt.convert(ve),Ht))}finally{const we=X!==null?Vt.get(X).__webglFramebuffer:null;Ut.bindFramebuffer(Y.FRAMEBUFFER,we)}}},this.readRenderTargetPixelsAsync=async function(G,rt,_t,xt,ut,Ht,Qt,se=0){if(!(G&&G.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let oe=Vt.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&Qt!==void 0&&(oe=oe[Qt]),oe)if(rt>=0&&rt<=G.width-xt&&_t>=0&&_t<=G.height-ut){Ut.bindFramebuffer(Y.FRAMEBUFFER,oe);const we=G.textures[se],Me=we.format,ve=we.type;if(!Xt.textureFormatReadable(Me))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xt.textureTypeReadable(ve))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Ye=Y.createBuffer();Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ye),Y.bufferData(Y.PIXEL_PACK_BUFFER,Ht.byteLength,Y.STREAM_READ),G.textures.length>1&&Y.readBuffer(Y.COLOR_ATTACHMENT0+se),Y.readPixels(rt,_t,xt,ut,Kt.convert(Me),Kt.convert(ve),0);const yn=X!==null?Vt.get(X).__webglFramebuffer:null;Ut.bindFramebuffer(Y.FRAMEBUFFER,yn);const Vn=Y.fenceSync(Y.SYNC_GPU_COMMANDS_COMPLETE,0);return Y.flush(),await TP(Y,Vn,4),Y.bindBuffer(Y.PIXEL_PACK_BUFFER,Ye),Y.getBufferSubData(Y.PIXEL_PACK_BUFFER,0,Ht),Y.deleteBuffer(Ye),Y.deleteSync(Vn),Ht}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(G,rt=null,_t=0){const xt=Math.pow(2,-_t),ut=Math.floor(G.image.width*xt),Ht=Math.floor(G.image.height*xt),Qt=rt!==null?rt.x:0,se=rt!==null?rt.y:0;ee.setTexture2D(G,0),Y.copyTexSubImage2D(Y.TEXTURE_2D,_t,0,0,Qt,se,ut,Ht),Ut.unbindTexture()};const Il=Y.createFramebuffer(),ws=Y.createFramebuffer();this.copyTextureToTexture=function(G,rt,_t=null,xt=null,ut=0,Ht=null){Ht===null&&(ut!==0?(sd("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ht=ut,ut=0):Ht=0);let Qt,se,oe,we,Me,ve,Ye,yn,Vn;const Ze=G.isCompressedTexture?G.mipmaps[Ht]:G.image;if(_t!==null)Qt=_t.max.x-_t.min.x,se=_t.max.y-_t.min.y,oe=_t.isBox3?_t.max.z-_t.min.z:1,we=_t.min.x,Me=_t.min.y,ve=_t.isBox3?_t.min.z:0;else{const fi=Math.pow(2,-ut);Qt=Math.floor(Ze.width*fi),se=Math.floor(Ze.height*fi),G.isDataArrayTexture?oe=Ze.depth:G.isData3DTexture?oe=Math.floor(Ze.depth*fi):oe=1,we=0,Me=0,ve=0}xt!==null?(Ye=xt.x,yn=xt.y,Vn=xt.z):(Ye=0,yn=0,Vn=0);const _n=Kt.convert(rt.format),be=Kt.convert(rt.type);let Rn;rt.isData3DTexture?(ee.setTexture3D(rt,0),Rn=Y.TEXTURE_3D):rt.isDataArrayTexture||rt.isCompressedArrayTexture?(ee.setTexture2DArray(rt,0),Rn=Y.TEXTURE_2D_ARRAY):(ee.setTexture2D(rt,0),Rn=Y.TEXTURE_2D),Y.pixelStorei(Y.UNPACK_FLIP_Y_WEBGL,rt.flipY),Y.pixelStorei(Y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,rt.premultiplyAlpha),Y.pixelStorei(Y.UNPACK_ALIGNMENT,rt.unpackAlignment);const an=Y.getParameter(Y.UNPACK_ROW_LENGTH),xi=Y.getParameter(Y.UNPACK_IMAGE_HEIGHT),Ys=Y.getParameter(Y.UNPACK_SKIP_PIXELS),Nn=Y.getParameter(Y.UNPACK_SKIP_ROWS),Ws=Y.getParameter(Y.UNPACK_SKIP_IMAGES);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,Ze.width),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,Ze.height),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,we),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,Me),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,ve);const Dn=G.isDataArrayTexture||G.isData3DTexture,Bi=rt.isDataArrayTexture||rt.isData3DTexture;if(G.isDepthTexture){const fi=Vt.get(G),Ri=Vt.get(rt),Ci=Vt.get(fi.__renderTarget),sa=Vt.get(Ri.__renderTarget);Ut.bindFramebuffer(Y.READ_FRAMEBUFFER,Ci.__webglFramebuffer),Ut.bindFramebuffer(Y.DRAW_FRAMEBUFFER,sa.__webglFramebuffer);for(let js=0;js<oe;js++)Dn&&(Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Vt.get(G).__webglTexture,ut,ve+js),Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Vt.get(rt).__webglTexture,Ht,Vn+js)),Y.blitFramebuffer(we,Me,Qt,se,Ye,yn,Qt,se,Y.DEPTH_BUFFER_BIT,Y.NEAREST);Ut.bindFramebuffer(Y.READ_FRAMEBUFFER,null),Ut.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else if(ut!==0||G.isRenderTargetTexture||Vt.has(G)){const fi=Vt.get(G),Ri=Vt.get(rt);Ut.bindFramebuffer(Y.READ_FRAMEBUFFER,Il),Ut.bindFramebuffer(Y.DRAW_FRAMEBUFFER,ws);for(let Ci=0;Ci<oe;Ci++)Dn?Y.framebufferTextureLayer(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,fi.__webglTexture,ut,ve+Ci):Y.framebufferTexture2D(Y.READ_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,fi.__webglTexture,ut),Bi?Y.framebufferTextureLayer(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Ri.__webglTexture,Ht,Vn+Ci):Y.framebufferTexture2D(Y.DRAW_FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_2D,Ri.__webglTexture,Ht),ut!==0?Y.blitFramebuffer(we,Me,Qt,se,Ye,yn,Qt,se,Y.COLOR_BUFFER_BIT,Y.NEAREST):Bi?Y.copyTexSubImage3D(Rn,Ht,Ye,yn,Vn+Ci,we,Me,Qt,se):Y.copyTexSubImage2D(Rn,Ht,Ye,yn,we,Me,Qt,se);Ut.bindFramebuffer(Y.READ_FRAMEBUFFER,null),Ut.bindFramebuffer(Y.DRAW_FRAMEBUFFER,null)}else Bi?G.isDataTexture||G.isData3DTexture?Y.texSubImage3D(Rn,Ht,Ye,yn,Vn,Qt,se,oe,_n,be,Ze.data):rt.isCompressedArrayTexture?Y.compressedTexSubImage3D(Rn,Ht,Ye,yn,Vn,Qt,se,oe,_n,Ze.data):Y.texSubImage3D(Rn,Ht,Ye,yn,Vn,Qt,se,oe,_n,be,Ze):G.isDataTexture?Y.texSubImage2D(Y.TEXTURE_2D,Ht,Ye,yn,Qt,se,_n,be,Ze.data):G.isCompressedTexture?Y.compressedTexSubImage2D(Y.TEXTURE_2D,Ht,Ye,yn,Ze.width,Ze.height,_n,Ze.data):Y.texSubImage2D(Y.TEXTURE_2D,Ht,Ye,yn,Qt,se,_n,be,Ze);Y.pixelStorei(Y.UNPACK_ROW_LENGTH,an),Y.pixelStorei(Y.UNPACK_IMAGE_HEIGHT,xi),Y.pixelStorei(Y.UNPACK_SKIP_PIXELS,Ys),Y.pixelStorei(Y.UNPACK_SKIP_ROWS,Nn),Y.pixelStorei(Y.UNPACK_SKIP_IMAGES,Ws),Ht===0&&rt.generateMipmaps&&Y.generateMipmap(Rn),Ut.unbindTexture()},this.copyTextureToTexture3D=function(G,rt,_t=null,xt=null,ut=0){return sd('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(G,rt,_t,xt,ut)},this.initRenderTarget=function(G){Vt.get(G).__webglFramebuffer===void 0&&ee.setupRenderTarget(G)},this.initTexture=function(G){G.isCubeTexture?ee.setTextureCube(G,0):G.isData3DTexture?ee.setTexture3D(G,0):G.isDataArrayTexture||G.isCompressedArrayTexture?ee.setTexture2DArray(G,0):ee.setTexture2D(G,0),Ut.unbindTexture()},this.resetState=function(){B=0,H=0,X=null,Ut.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=mn._getDrawingBufferColorSpace(t),e.unpackColorSpace=mn._getUnpackColorSpace()}}const HF=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:pb,AddEquation:Vu,AddOperation:xC,AdditiveAnimationBlendMode:bb,AdditiveBlending:fM,AgXToneMapping:TC,AlphaFormat:_b,AlwaysCompare:HC,AlwaysDepth:iy,AlwaysStencilFunc:mM,AmbientLight:Lw,AnimationAction:Xw,AnimationClip:Zm,AnimationLoader:t4,AnimationMixer:w4,AnimationObjectGroup:R4,AnimationUtils:KB,ArcCurve:sw,ArrayCamera:Hw,ArrowHelper:Q4,AttachedBindMode:pM,Audio:Fw,AudioAnalyser:v4,AudioContext:jb,AudioListener:p4,AudioLoader:f4,AxesHelper:J4,BackSide:es,BasicDepthPacking:UC,BasicShadowMap:tC,BatchedMesh:tw,Bone:Ub,BooleanKeyframeTrack:Ef,Box2:B4,Box3:La,Box3Helper:Z4,BoxGeometry:bf,BoxHelper:j4,BufferAttribute:kn,BufferGeometry:Je,BufferGeometryLoader:Vw,ByteType:gb,Cache:Go,Camera:l_,CameraHelper:W4,CanvasTexture:_B,CapsuleGeometry:m_,CatmullRomCurve3:rw,CineonToneMapping:bC,CircleGeometry:g_,ClampToEdgeWrapping:gr,Clock:Zb,Color:ce,ColorKeyframeTrack:kb,ColorManagement:mn,CompressedArrayTexture:vB,CompressedCubeTexture:yB,CompressedTexture:p_,CompressedTextureLoader:e4,ConeGeometry:rg,ConstantAlphaFactor:vC,ConstantColorFactor:mC,Controls:tI,CubeCamera:WC,CubeReflectionMapping:Ll,CubeRefractionMapping:Xu,CubeTexture:ag,CubeTextureLoader:n4,CubeUVReflectionMapping:Ed,CubicBezierCurve:zb,CubicBezierCurve3:ow,CubicInterpolant:Aw,CullFaceBack:cM,CullFaceFront:$R,CullFaceFrontBack:Ez,CullFaceNone:JR,Curve:eo,CurvePath:uw,CustomBlending:eC,CustomToneMapping:EC,CylinderGeometry:sg,Cylindrical:P4,Data3DTexture:o_,DataArrayTexture:r_,DataTexture:Wo,DataTextureLoader:i4,DataUtils:GP,DecrementStencilOp:Iz,DecrementWrapStencilOp:Hz,DefaultLoadingManager:ww,DepthFormat:fd,DepthStencilFormat:hd,DepthTexture:Ob,DetachedBindMode:RC,DirectionalLight:Ow,DirectionalLightHelper:Y4,DiscreteInterpolant:Rw,DodecahedronGeometry:v_,DoubleSide:Ho,DstAlphaFactor:cC,DstColorFactor:hC,DynamicCopyUsage:eP,DynamicDrawUsage:Zz,DynamicReadUsage:Jz,EdgesGeometry:aw,EllipseCurve:y_,EqualCompare:PC,EqualDepth:sy,EqualStencilFunc:qz,EquirectangularReflectionMapping:Lm,EquirectangularRefractionMapping:zm,Euler:ks,EventDispatcher:Ko,ExtrudeGeometry:__,FileLoader:Pl,Float16BufferAttribute:ZP,Float32BufferAttribute:me,FloatType:Ss,Fog:c_,FogExp2:u_,FramebufferTexture:gB,FrontSide:Ol,Frustum:Rd,FrustumArray:d_,GLBufferAttribute:L4,GLSL1:iP,GLSL3:gM,GreaterCompare:BC,GreaterDepth:oy,GreaterEqualCompare:VC,GreaterEqualDepth:ry,GreaterEqualStencilFunc:jz,GreaterStencilFunc:Yz,GridHelper:q4,Group:id,HalfFloatType:Td,HemisphereLight:Dw,HemisphereLightHelper:X4,IcosahedronGeometry:x_,ImageBitmapLoader:c4,ImageLoader:Km,ImageUtils:XC,IncrementStencilOp:Bz,IncrementWrapStencilOp:Vz,InstancedBufferAttribute:gd,InstancedBufferGeometry:Iw,InstancedInterleavedBuffer:O4,InstancedMesh:$C,Int16BufferAttribute:WP,Int32BufferAttribute:jP,Int8BufferAttribute:qP,IntType:$y,InterleavedBuffer:f_,InterleavedBufferAttribute:xf,Interpolant:ug,InterpolateDiscrete:Im,InterpolateLinear:zy,InterpolateSmooth:kv,InterpolationSamplingMode:rP,InterpolationSamplingType:sP,InvertStencilOp:Fz,KeepStencilOp:rf,KeyframeTrack:_r,LOD:QC,LatheGeometry:S_,Layers:pd,LessCompare:zC,LessDepth:ay,LessEqualCompare:Eb,LessEqualDepth:_f,LessEqualStencilFunc:kz,LessStencilFunc:Xz,Light:Ku,LightProbe:Bw,Line:ku,Line3:I4,LineBasicMaterial:ns,LineCurve:Pb,LineCurve3:lw,LineDashedMaterial:bw,LineLoop:ew,LineSegments:Qo,LinearFilter:Yi,LinearInterpolant:qb,LinearMipMapLinearFilter:Cz,LinearMipMapNearestFilter:Rz,LinearMipmapLinearFilter:Fo,LinearMipmapNearestFilter:vm,LinearSRGBColorSpace:qu,LinearToneMapping:SC,LinearTransfer:Hm,Loader:Es,LoaderUtils:SM,LoadingManager:Yb,LoopOnce:CC,LoopPingPong:DC,LoopRepeat:wC,MOUSE:Mz,Material:za,MaterialLoader:C_,MathUtils:bP,Matrix2:$b,Matrix3:je,Matrix4:Pe,MaxEquation:sC,Mesh:Pi,MeshBasicMaterial:ju,MeshDepthMaterial:Fb,MeshDistanceMaterial:Gb,MeshLambertMaterial:Sw,MeshMatcapMaterial:Mw,MeshNormalMaterial:xw,MeshPhongMaterial:yw,MeshPhysicalMaterial:vw,MeshStandardMaterial:Hb,MeshToonMaterial:_w,MinEquation:aC,MirroredRepeatWrapping:Bm,MixOperation:_C,MultiplyBlending:dM,MultiplyOperation:ng,NearestFilter:ma,NearestMipMapLinearFilter:Az,NearestMipMapNearestFilter:Tz,NearestMipmapLinearFilter:ed,NearestMipmapNearestFilter:mb,NeutralToneMapping:AC,NeverCompare:LC,NeverDepth:ny,NeverStencilFunc:Gz,NoBlending:Dl,NoColorSpace:Cl,NoToneMapping:Yo,NormalAnimationBlendMode:s_,NormalBlending:gf,NotEqualCompare:IC,NotEqualDepth:ly,NotEqualStencilFunc:Wz,NumberKeyframeTrack:Wm,Object3D:Mn,ObjectLoader:l4,ObjectSpaceNormalMap:OC,OctahedronGeometry:og,OneFactor:oC,OneMinusConstantAlphaFactor:yC,OneMinusConstantColorFactor:gC,OneMinusDstAlphaFactor:fC,OneMinusDstColorFactor:dC,OneMinusSrcAlphaFactor:ey,OneMinusSrcColorFactor:uC,OrthographicCamera:fg,PCFShadowMap:Qy,PCFSoftShadowMap:gm,PMREMGenerator:EM,Path:Vy,PerspectiveCamera:ia,Plane:Iu,PlaneGeometry:Cd,PlaneHelper:K4,PointLight:Nw,PointLightHelper:F4,Points:nw,PointsMaterial:Nb,PolarGridHelper:k4,PolyhedronGeometry:Zu,PositionalAudio:g4,PropertyBinding:xn,PropertyMixer:Gw,QuadraticBezierCurve:Bb,QuadraticBezierCurve3:Ib,Quaternion:bs,QuaternionKeyframeTrack:cg,QuaternionLinearInterpolant:Cw,RED_GREEN_RGTC2_Format:Oy,RED_RGTC1_Format:Mb,REVISION:Ky,RGBADepthPacking:NC,RGBAFormat:Oa,RGBAIntegerFormat:a_,RGBA_ASTC_10x10_Format:Ry,RGBA_ASTC_10x5_Format:Ey,RGBA_ASTC_10x6_Format:Ty,RGBA_ASTC_10x8_Format:Ay,RGBA_ASTC_12x10_Format:Cy,RGBA_ASTC_12x12_Format:wy,RGBA_ASTC_4x4_Format:gy,RGBA_ASTC_5x4_Format:vy,RGBA_ASTC_5x5_Format:yy,RGBA_ASTC_6x5_Format:_y,RGBA_ASTC_6x6_Format:xy,RGBA_ASTC_8x5_Format:Sy,RGBA_ASTC_8x6_Format:My,RGBA_ASTC_8x8_Format:by,RGBA_BPTC_Format:Mm,RGBA_ETC2_EAC_Format:my,RGBA_PVRTC_2BPPV1_Format:hy,RGBA_PVRTC_4BPPV1_Format:fy,RGBA_S3TC_DXT1_Format:_m,RGBA_S3TC_DXT3_Format:xm,RGBA_S3TC_DXT5_Format:Sm,RGBDepthPacking:Oz,RGBFormat:xb,RGBIntegerFormat:wz,RGB_BPTC_SIGNED_Format:Dy,RGB_BPTC_UNSIGNED_Format:Uy,RGB_ETC1_Format:dy,RGB_ETC2_Format:py,RGB_PVRTC_2BPPV1_Format:cy,RGB_PVRTC_4BPPV1_Format:uy,RGB_S3TC_DXT1_Format:ym,RGDepthPacking:Lz,RGFormat:Sb,RGIntegerFormat:i_,RawShaderMaterial:gw,Ray:Ad,Raycaster:qw,RectAreaLight:zw,RedFormat:n_,RedIntegerFormat:ig,ReinhardToneMapping:MC,RenderTarget:Ab,RenderTarget3D:D4,RepeatWrapping:Pm,ReplaceStencilOp:Pz,ReverseSubtractEquation:iC,RingGeometry:M_,SIGNED_RED_GREEN_RGTC2_Format:Ly,SIGNED_RED_RGTC1_Format:Ny,SRGBColorSpace:Ua,SRGBTransfer:Bn,Scene:wb,ShaderChunk:tn,ShaderLib:Kr,ShaderMaterial:to,ShadowMaterial:mw,Shape:yf,ShapeGeometry:b_,ShapePath:$4,ShapeUtils:Jr,ShortType:vb,Skeleton:h_,SkeletonHelper:H4,SkinnedMesh:JC,Source:Fu,Sphere:ga,SphereGeometry:lg,Spherical:z4,SphericalHarmonics3:Pw,SplineCurve:Vb,SpotLight:Uw,SpotLightHelper:V4,Sprite:KC,SpriteMaterial:Db,SrcAlphaFactor:ty,SrcAlphaSaturateFactor:pC,SrcColorFactor:lC,StaticCopyUsage:tP,StaticDrawUsage:Fm,StaticReadUsage:Qz,StereoCamera:h4,StreamCopyUsage:nP,StreamDrawUsage:Kz,StreamReadUsage:$z,StringKeyframeTrack:Tf,SubtractEquation:nC,SubtractiveBlending:hM,TOUCH:bz,TangentSpaceNormalMap:Wu,TetrahedronGeometry:E_,Texture:vi,TextureLoader:a4,TextureUtils:sI,TimestampQuery:aP,TorusGeometry:T_,TorusKnotGeometry:A_,Triangle:_s,TriangleFanDrawMode:Nz,TriangleStripDrawMode:Uz,TrianglesDrawMode:Dz,TubeGeometry:R_,UVMapping:Jy,Uint16BufferAttribute:Rb,Uint32BufferAttribute:Cb,Uint8BufferAttribute:kP,Uint8ClampedBufferAttribute:YP,Uniform:Jb,UniformsGroup:N4,UniformsLib:ae,UniformsUtils:YC,UnsignedByteType:yr,UnsignedInt248Type:cd,UnsignedInt5999Type:yb,UnsignedIntType:zl,UnsignedShort4444Type:t_,UnsignedShort5551Type:e_,UnsignedShortType:ud,VSMShadowMap:Zr,Vector2:It,Vector3:K,Vector4:Sn,VectorKeyframeTrack:jm,VideoFrameTexture:mB,VideoTexture:iw,WebGL3DRenderTarget:NP,WebGLArrayRenderTarget:UP,WebGLCoordinateSystem:vr,WebGLCubeRenderTarget:jC,WebGLRenderTarget:Zo,WebGLRenderer:Jw,WebGLUtils:Qw,WebGPUCoordinateSystem:Gm,WebXRController:Yv,WireframeGeometry:pw,WrapAroundEnding:Vm,ZeroCurvatureEnding:ff,ZeroFactor:rC,ZeroSlopeEnding:hf,ZeroStencilOp:zz,createCanvasElement:GC},Symbol.toStringTag,{value:"Module"}));var TS={exports:{}},AS={},RS={exports:{}},CS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZA;function FF(){if(ZA)return CS;ZA=1;var i=_d();function t(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var e=typeof Object.is=="function"?Object.is:t,n=i.useState,a=i.useEffect,o=i.useLayoutEffect,c=i.useDebugValue;function h(y,_){var M=_(),T=n({inst:{value:M,getSnapshot:_}}),C=T[0].inst,R=T[1];return o(function(){C.value=M,C.getSnapshot=_,d(C)&&R({inst:C})},[y,M,_]),a(function(){return d(C)&&R({inst:C}),y(function(){d(C)&&R({inst:C})})},[y]),c(M),M}function d(y){var _=y.getSnapshot;y=y.value;try{var M=_();return!e(y,M)}catch{return!0}}function m(y,_){return _()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:h;return CS.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:v,CS}var KA;function GF(){return KA||(KA=1,RS.exports=FF()),RS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function XF(){if(QA)return AS;QA=1;var i=_d(),t=GF();function e(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var n=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,o=i.useRef,c=i.useEffect,h=i.useMemo,d=i.useDebugValue;return AS.useSyncExternalStoreWithSelector=function(m,v,y,_,M){var T=o(null);if(T.current===null){var C={hasValue:!1,value:null};T.current=C}else C=T.current;T=h(function(){function b(B){if(!D){if(D=!0,U=B,B=_(B),M!==void 0&&C.hasValue){var H=C.value;if(M(H,B))return N=H}return N=B}if(H=N,n(U,B))return H;var X=_(B);return M!==void 0&&M(H,X)?(U=B,H):(U=B,N=X)}var D=!1,U,N,P=y===void 0?null:y;return[function(){return b(v())},P===null?void 0:function(){return b(P())}]},[v,y,_,M]);var R=a(m,T[0],T[1]);return c(function(){C.hasValue=!0,C.value=R},[R]),d(R),R},AS}var JA;function qF(){return JA||(JA=1,TS.exports=XF()),TS.exports}var kF=qF();const YF=NM(kF),$A=i=>{let t;const e=new Set,n=(m,v)=>{const y=typeof m=="function"?m(t):m;if(!Object.is(y,t)){const _=t;t=v??(typeof y!="object"||y===null)?y:Object.assign({},t,y),e.forEach(M=>M(t,_))}},a=()=>t,h={setState:n,getState:a,getInitialState:()=>d,subscribe:m=>(e.add(m),()=>e.delete(m))},d=t=i(n,a,h);return h},WF=i=>i?$A(i):$A,{useSyncExternalStoreWithSelector:jF}=YF,ZF=i=>i;function KF(i,t=ZF,e){const n=jF(i.subscribe,i.getState,i.getInitialState,t,e);return nD.useDebugValue(n),n}const t2=(i,t)=>{const e=WF(i),n=(a,o=t)=>KF(e,a,o);return Object.assign(n,e),n},QF=(i,t)=>i?t2(i,t):t2;var wS={exports:{}},DS={exports:{}},US={exports:{}},NS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function JF(){return e2||(e2=1,function(i){function t(I,j){var Z=I.length;I.push(j);t:for(;0<Z;){var ct=Z-1>>>1,k=I[ct];if(0<a(k,j))I[ct]=j,I[Z]=k,Z=ct;else break t}}function e(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var j=I[0],Z=I.pop();if(Z!==j){I[0]=Z;t:for(var ct=0,k=I.length,tt=k>>>1;ct<tt;){var bt=2*(ct+1)-1,Rt=I[bt],et=bt+1,Et=I[et];if(0>a(Rt,Z))et<k&&0>a(Et,Rt)?(I[ct]=Et,I[et]=Z,ct=et):(I[ct]=Rt,I[bt]=Z,ct=bt);else if(et<k&&0>a(Et,Z))I[ct]=Et,I[et]=Z,ct=et;else break t}}return j}function a(I,j){var Z=I.sortIndex-j.sortIndex;return Z!==0?Z:I.id-j.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],m=[],v=1,y=null,_=3,M=!1,T=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(I){for(var j=e(m);j!==null;){if(j.callback===null)n(m);else if(j.startTime<=I)n(m),j.sortIndex=j.expirationTime,t(d,j);else break;j=e(m)}}function N(I){if(C=!1,U(I),!T)if(e(d)!==null)T=!0,pt();else{var j=e(m);j!==null&&gt(N,j.startTime-I)}}var P=!1,B=-1,H=5,X=-1;function z(){return!(i.unstable_now()-X<H)}function L(){if(P){var I=i.unstable_now();X=I;var j=!0;try{t:{T=!1,C&&(C=!1,b(B),B=-1),M=!0;var Z=_;try{e:{for(U(I),y=e(d);y!==null&&!(y.expirationTime>I&&z());){var ct=y.callback;if(typeof ct=="function"){y.callback=null,_=y.priorityLevel;var k=ct(y.expirationTime<=I);if(I=i.unstable_now(),typeof k=="function"){y.callback=k,U(I),j=!0;break e}y===e(d)&&n(d),U(I)}else n(d);y=e(d)}if(y!==null)j=!0;else{var tt=e(m);tt!==null&&gt(N,tt.startTime-I),j=!1}}break t}finally{y=null,_=Z,M=!1}j=void 0}}finally{j?W():P=!1}}}var W;if(typeof D=="function")W=function(){D(L)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,it=ot.port2;ot.port1.onmessage=L,W=function(){it.postMessage(null)}}else W=function(){R(L,0)};function pt(){P||(P=!0,W())}function gt(I,j){B=R(function(){I(i.unstable_now())},j)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_continueExecution=function(){T||M||(T=!0,pt())},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(I){switch(_){case 1:case 2:case 3:var j=3;break;default:j=_}var Z=_;_=j;try{return I()}finally{_=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Z=_;_=I;try{return j()}finally{_=Z}},i.unstable_scheduleCallback=function(I,j,Z){var ct=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ct+Z:ct):Z=ct,I){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Z+k,I={id:v++,callback:j,priorityLevel:I,startTime:Z,expirationTime:k,sortIndex:-1},Z>ct?(I.sortIndex=Z,t(m,I),e(d)===null&&I===e(m)&&(C?(b(B),B=-1):C=!0,gt(N,Z-ct))):(I.sortIndex=k,t(d,I),T||M||(T=!0,pt())),I},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(I){var j=_;return function(){var Z=_;_=j;try{return I.apply(this,arguments)}finally{_=Z}}}}(NS)),NS}var n2;function $F(){return n2||(n2=1,US.exports=JF()),US.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2;function t6(){return i2||(i2=1,function(i){i.exports=function(t){function e(l,u,g,S){return new sp(l,u,g,S)}function n(){}function a(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(l){return l===null||typeof l!="object"?null:(l=Or&&l[Or]||l["@@iterator"],typeof l=="function"?l:null)}function c(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===up?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case _o:return"Fragment";case rs:return"Portal";case Zf:return"Profiler";case Tc:return"StrictMode";case Kf:return"Suspense";case au:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case Ns:return(l.displayName||"Context")+".Provider";case op:return(l._context.displayName||"Context")+".Consumer";case Rc:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Qf:return u=l.displayName||null,u!==null?u:c(l.type)||"Memo";case os:u=l._payload,l=l._init;try{return c(l(u))}catch{}}return null}function h(l){if($s===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);$s=u&&u[1]||"",Lr=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$s+l+Lr}function d(l,u){if(!l||nl)return"";nl=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(u){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Fe){var le=Fe}Reflect.construct(l,[],ie)}else{try{ie.call()}catch(Fe){le=Fe}l.call(ie.prototype)}}else{try{throw Error()}catch(Fe){le=Fe}(ie=l())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Fe){if(Fe&&le&&typeof Fe.stack=="string")return[Fe.stack,le.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=S.DetermineComponentFrameRoot(),q=w[0],$=w[1];if(q&&$){var ft=q.split(`
`),wt=$.split(`
`);for(A=S=0;S<ft.length&&!ft[S].includes("DetermineComponentFrameRoot");)S++;for(;A<wt.length&&!wt[A].includes("DetermineComponentFrameRoot");)A++;if(S===ft.length||A===wt.length)for(S=ft.length-1,A=wt.length-1;1<=S&&0<=A&&ft[S]!==wt[A];)A--;for(;1<=S&&0<=A;S--,A--)if(ft[S]!==wt[A]){if(S!==1||A!==1)do if(S--,A--,0>A||ft[S]!==wt[A]){var Yt=`
`+ft[S].replace(" at new "," at ");return l.displayName&&Yt.includes("<anonymous>")&&(Yt=Yt.replace("<anonymous>",l.displayName)),Yt}while(1<=S&&0<=A);break}}}finally{nl=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?h(g):""}function m(l){switch(l.tag){case 26:case 27:case 5:return h(l.type);case 16:return h("Lazy");case 13:return h("Suspense");case 19:return h("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function v(l){try{var u="";do u+=m(l),l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function y(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function _(l){if(y(l)!==l)throw Error(a(188))}function M(l){var u=l.alternate;if(!u){if(u=y(l),u===null)throw Error(a(188));return u!==l?null:l}for(var g=l,S=u;;){var A=g.return;if(A===null)break;var w=A.alternate;if(w===null){if(S=A.return,S!==null){g=S;continue}break}if(A.child===w.child){for(w=A.child;w;){if(w===g)return _(A),l;if(w===S)return _(A),u;w=w.sibling}throw Error(a(188))}if(g.return!==S.return)g=A,S=w;else{for(var q=!1,$=A.child;$;){if($===g){q=!0,g=A,S=w;break}if($===S){q=!0,S=A,g=w;break}$=$.sibling}if(!q){for($=w.child;$;){if($===g){q=!0,g=w,S=A;break}if($===S){q=!0,S=w,g=A;break}$=$.sibling}if(!q)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:u}function T(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=T(l),u!==null)return u;l=l.sibling}return null}function C(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(u=C(l),u!==null))return u;l=l.sibling}return null}function R(l){return{current:l}}function b(l){0>Ir||(l.current=ii[Ir],ii[Ir]=null,Ir--)}function D(l,u){Ir++,ii[Ir]=l.current,l.current=u}function U(l){return l>>>=0,l===0?32:31-(g0(l)/v0|0)|0}function N(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function P(l,u){var g=l.pendingLanes;if(g===0)return 0;var S=0,A=l.suspendedLanes,w=l.pingedLanes,q=l.warmLanes;l=l.finishedLanes!==0;var $=g&134217727;return $!==0?(g=$&~A,g!==0?S=N(g):(w&=$,w!==0?S=N(w):l||(q=$&~q,q!==0&&(S=N(q))))):($=g&~A,$!==0?S=N($):w!==0?S=N(w):l||(q=g&~q,q!==0&&(S=N(q)))),S===0?0:u!==0&&u!==S&&(u&A)===0&&(A=S&-S,q=u&-u,A>=q||A===32&&(q&4194176)!==0)?u:S}function B(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function H(l,u){switch(l){case 1:case 2:case 4:case 8:return u+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X(){var l=er;return er<<=1,(er&4194176)===0&&(er=128),l}function z(){var l=sl;return sl<<=1,(sl&62914560)===0&&(sl=4194304),l}function L(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function W(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ot(l,u,g,S,A,w){var q=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var $=l.entanglements,ft=l.expirationTimes,wt=l.hiddenUpdates;for(g=q&~g;0<g;){var Yt=31-fa(g),ie=1<<Yt;$[Yt]=0,ft[Yt]=-1;var le=wt[Yt];if(le!==null)for(wt[Yt]=null,Yt=0;Yt<le.length;Yt++){var Fe=le[Yt];Fe!==null&&(Fe.lane&=-536870913)}g&=~ie}S!==0&&it(l,S,0),w!==0&&A===0&&l.tag!==0&&(l.suspendedLanes|=w&~(q&~u))}function it(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var S=31-fa(u);l.entangledLanes|=u,l.entanglements[S]=l.entanglements[S]|1073741824|g&4194218}function pt(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var S=31-fa(g),A=1<<S;A&u|l[S]&u&&(l[S]|=u),g&=~A}}function gt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function I(l){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(ai,l,void 0,(l.current.flags&128)===128)}catch{}}function j(l){if(typeof x0=="function"&&Ui(l),Ta&&typeof Ta.setStrictMode=="function")try{Ta.setStrictMode(ai,l)}catch{}}function Z(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}function ct(l,u){if(typeof l=="object"&&l!==null){var g=Cp.get(l);return g!==void 0?g:(u={value:l,source:u,stack:v(u)},Cp.set(l,u),u)}return{value:l,source:u,stack:v(u)}}function k(l,u){rl[ol++]=du,rl[ol++]=ll,ll=l,du=u}function tt(l,u,g){Ha[Fa++]=zs,Ha[Fa++]=Ps,Ha[Fa++]=Ao,Ao=l;var S=zs;l=Ps;var A=32-fa(S)-1;S&=~(1<<A),g+=1;var w=32-fa(u)+A;if(30<w){var q=A-A%5;w=(S&(1<<q)-1).toString(32),S>>=q,A-=q,zs=1<<32-fa(u)+A|g<<A|S,Ps=w+l}else zs=1<<w|g<<A|S,Ps=l}function bt(l){l.return!==null&&(k(l,1),tt(l,1,0))}function Rt(l){for(;l===ll;)ll=rl[--ol],rl[ol]=null,du=rl[--ol],rl[ol]=null;for(;l===Ao;)Ao=Ha[--Fa],Ha[Fa]=null,Ps=Ha[--Fa],Ha[Fa]=null,zs=Ha[--Fa],Ha[Fa]=null}function et(l,u){D(nr,u),D(pu,l),D(Mi,null),l=zg(u),b(Mi),D(Mi,l)}function Et(){b(Mi),b(pu),b(nr)}function Bt(l){l.memoizedState!==null&&D(ul,l);var u=Mi.current,g=lu(u,l.type);u!==g&&(D(pu,l),D(Mi,g))}function Wt(l){pu.current===l&&(b(Mi),b(pu)),ul.current===l&&(b(ul),ua?Os._currentValue=So:Os._currentValue2=So)}function jt(l){var u=Error(a(418,""));throw Ue(ct(u,l)),Pc}function Te(l,u){if(!Xi)throw Error(a(175));r0(l.stateNode,l.type,l.memoizedProps,u,l)||jt(l)}function ye(l){for(qi=l.return;qi;)switch(qi.tag){case 3:case 27:Ni=!0;return;case 5:case 13:Ni=!1;return;default:qi=qi.return}}function cn(l){if(!Xi||l!==qi)return!1;if(!fn)return ye(l),fn=!0,!1;var u=!1;if(On?l.tag!==3&&l.tag!==27&&(l.tag!==5||rh(l.type)&&!Xe(l.type,l.memoizedProps))&&(u=!0):l.tag!==3&&(l.tag!==5||rh(l.type)&&!Xe(l.type,l.memoizedProps))&&(u=!0),u&&ki&&jt(l),ye(l),l.tag===13){if(!Xi)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));ki=l0(l)}else ki=qi?Ep(l.stateNode):null;return!0}function ke(){Xi&&(ki=qi=null,fn=!1)}function Ue(l){cs===null?cs=[l]:cs.push(l)}function Y(){for(var l=cl,u=Bs=cl=0;u<l;){var g=fs[u];fs[u++]=null;var S=fs[u];fs[u++]=null;var A=fs[u];fs[u++]=null;var w=fs[u];if(fs[u++]=null,S!==null&&A!==null){var q=S.pending;q===null?A.next=A:(A.next=q.next,q.next=A),S.pending=A}w!==0&&Ut(g,A,w)}}function Zt(l,u,g,S){fs[cl++]=l,fs[cl++]=u,fs[cl++]=g,fs[cl++]=S,Bs|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function Gt(l,u,g,S){return Zt(l,u,g,S),re(l)}function Xt(l,u){return Zt(l,null,null,u),re(l)}function Ut(l,u,g){l.lanes|=g;var S=l.alternate;S!==null&&(S.lanes|=g);for(var A=!1,w=l.return;w!==null;)w.childLanes|=g,S=w.alternate,S!==null&&(S.childLanes|=g),w.tag===22&&(l=w.stateNode,l===null||l._visibility&1||(A=!0)),l=w,w=w.return;A&&u!==null&&l.tag===3&&(w=l.stateNode,A=31-fa(g),w=w.hiddenUpdates,l=w[A],l===null?w[A]=[u]:l.push(u),u.lane=g|536870912)}function re(l){if(50<bu)throw bu=0,Sh=null,Error(a(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}function Vt(l){l!==Vr&&l.next===null&&(Vr===null?Bc=Vr=l:Vr=Vr.next=l),Hn=!0,fl||(fl=!0,Tt(Ve))}function ee(l,u){if(!wp&&Hn){wp=!0;do for(var g=!1,S=Bc;S!==null;){if(l!==0){var A=S.pendingLanes;if(A===0)var w=0;else{var q=S.suspendedLanes,$=S.pingedLanes;w=(1<<31-fa(42|l)+1)-1,w&=A&~(q&~$),w=w&201326677?w&201326677|1:w?w|2:0}w!==0&&(g=!0,dt(S,w))}else w=sn,w=P(S,S===Tn?w:0),(w&3)===0||B(S,w)||(g=!0,dt(S,w));S=S.next}while(g);wp=!1}}function Ve(){Hn=fl=!1;var l=0;mu!==0&&(Vg()&&(l=mu),mu=0);for(var u=us(),g=null,S=Bc;S!==null;){var A=S.next,w=Q(S,u);w===0?(S.next=null,g===null?Bc=A:g.next=A,A===null&&(Vr=g)):(g=S,(l!==0||(w&3)!==0)&&(Hn=!0)),S=A}ee(l)}function Q(l,u){for(var g=l.suspendedLanes,S=l.pingedLanes,A=l.expirationTimes,w=l.pendingLanes&-62914561;0<w;){var q=31-fa(w),$=1<<q,ft=A[q];ft===-1?(($&g)===0||($&S)!==0)&&(A[q]=H($,u)):ft<=u&&(l.expiredLanes|=$),w&=~$}if(u=Tn,g=sn,g=P(l,l===u?g:0),S=l.callbackNode,g===0||l===u&&Un===2||l.cancelPendingCommit!==null)return S!==null&&S!==null&&ch(S),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||B(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(S!==null&&ch(S),gt(g)){case 2:case 8:g=_0;break;case 32:g=dh;break;case 268435456:g=X_;break;default:g=dh}return S=V.bind(null,l),g=zc(g,S),l.callbackPriority=u,l.callbackNode=g,u}return S!==null&&S!==null&&ch(S),l.callbackPriority=2,l.callbackNode=null,2}function V(l,u){var g=l.callbackNode;if(Us()&&l.callbackNode!==g)return null;var S=sn;return S=P(l,l===Tn?S:0),S===0?null:(po(l,S,u),Q(l,us()),l.callbackNode!=null&&l.callbackNode===g?V.bind(null,l):null)}function dt(l,u){if(Us())return null;po(l,u,!0)}function Tt(l){pp?Br(function(){(pn&6)!==0?zc(hh,l):l()}):zc(hh,l)}function Ct(){return mu===0&&(mu=X()),mu}function At(l,u){if(gu===null){var g=gu=[];hl=0,Ga=Ct(),dl={status:"pending",value:void 0,then:function(S){g.push(S)}}}return hl++,u.then(ne,ne),u}function ne(){if(--hl===0&&gu!==null){dl!==null&&(dl.status="fulfilled");var l=gu;gu=null,Ga=0,dl=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Jt(l,u){var g=[],S={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return l.then(function(){S.status="fulfilled",S.value=u;for(var A=0;A<g.length;A++)(0,g[A])(u)},function(A){for(S.status="rejected",S.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),S}function fe(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function de(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Ot(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function $t(l,u,g){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(pn&2)!==0){var A=S.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),S.pending=u,u=re(l),Ut(l,null,g),u}return Zt(l,S,u,g),re(l)}function ge(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194176)!==0)){var S=u.lanes;S&=l.pendingLanes,g|=S,u.lanes=g,pt(l,g)}}function _e(l,u){var g=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var A=null,w=null;if(g=g.firstBaseUpdate,g!==null){do{var q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};w===null?A=w=q:w=w.next=q,g=g.next}while(g!==null);w===null?A=w=u:w=w.next=u}else A=w=u;g={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:w,shared:S.shared,callbacks:S.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}function Kt(){if(pl){var l=dl;if(l!==null)throw l}}function Re(l,u,g,S){pl=!1;var A=l.updateQueue;Hr=!1;var w=A.firstBaseUpdate,q=A.lastBaseUpdate,$=A.shared.pending;if($!==null){A.shared.pending=null;var ft=$,wt=ft.next;ft.next=null,q===null?w=wt:q.next=wt,q=ft;var Yt=l.alternate;Yt!==null&&(Yt=Yt.updateQueue,$=Yt.lastBaseUpdate,$!==q&&($===null?Yt.firstBaseUpdate=wt:$.next=wt,Yt.lastBaseUpdate=ft))}if(w!==null){var ie=A.baseState;q=0,Yt=wt=ft=null,$=w;do{var le=$.lane&-536870913,Fe=le!==$.lane;if(Fe?(sn&le)===le:(S&le)===le){le!==0&&le===Ga&&(pl=!0),Yt!==null&&(Yt=Yt.next={lane:0,tag:$.tag,payload:$.payload,callback:null,next:null});t:{var Ka=l,zo=$;le=u;var Po=g;switch(zo.tag){case 1:if(Ka=zo.payload,typeof Ka=="function"){ie=Ka.call(Po,ie,le);break t}ie=Ka;break t;case 3:Ka.flags=Ka.flags&-65537|128;case 0:if(Ka=zo.payload,le=typeof Ka=="function"?Ka.call(Po,ie,le):Ka,le==null)break t;ie=jf({},ie,le);break t;case 2:Hr=!0}}le=$.callback,le!==null&&(l.flags|=64,Fe&&(l.flags|=8192),Fe=A.callbacks,Fe===null?A.callbacks=[le]:Fe.push(le))}else Fe={lane:le,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Yt===null?(wt=Yt=Fe,ft=ie):Yt=Yt.next=Fe,q|=le;if($=$.next,$===null){if($=A.shared.pending,$===null)break;Fe=$,$=Fe.next,Fe.next=null,A.lastBaseUpdate=Fe,A.shared.pending=null}}while(!0);Yt===null&&(ft=ie),A.baseState=ft,A.firstBaseUpdate=wt,A.lastBaseUpdate=Yt,w===null&&(A.shared.lanes=0),ja|=q,l.lanes=q,l.memoizedState=ie}}function st(l,u){if(typeof l!="function")throw Error(a(191,l));l.call(u)}function te(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)st(g[l],u)}function Ft(l,u){if(Aa(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),S=Object.keys(u);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var A=g[S];if(!ir.call(u,A)||!Aa(l[A],u[A]))return!1}return!0}function ue(l){return l=l.status,l==="fulfilled"||l==="rejected"}function qt(){}function Lt(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(qt,qt),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===vu?Error(a(483)):l;default:if(typeof u.status=="string")u.then(qt,qt);else{if(l=Tn,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=u,l.status="pending",l.then(function(S){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=S}},function(S){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=S}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,l===vu?Error(a(483)):l}throw Ro=u,vu}}function he(){if(Ro===null)throw Error(a(459));var l=Ro;return Ro=null,l}function Ce(l){var u=wo;return wo+=1,Co===null&&(Co=[]),Lt(Co,l,u)}function hn(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function ln(l,u){throw u.$$typeof===P_?Error(a(525)):(l=Object.prototype.toString.call(u),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function va(l){var u=l._init;return u(l._payload)}function yi(l){function u(vt,nt){if(l){var Mt=vt.deletions;Mt===null?(vt.deletions=[nt],vt.flags|=16):Mt.push(nt)}}function g(vt,nt){if(!l)return null;for(;nt!==null;)u(vt,nt),nt=nt.sibling;return null}function S(vt){for(var nt=new Map;vt!==null;)vt.key!==null?nt.set(vt.key,vt):nt.set(vt.index,vt),vt=vt.sibling;return nt}function A(vt,nt){return vt=ss(vt,nt),vt.index=0,vt.sibling=null,vt}function w(vt,nt,Mt){return vt.index=Mt,l?(Mt=vt.alternate,Mt!==null?(Mt=Mt.index,Mt<nt?(vt.flags|=33554434,nt):Mt):(vt.flags|=33554434,nt)):(vt.flags|=1048576,nt)}function q(vt){return l&&vt.alternate===null&&(vt.flags|=33554434),vt}function $(vt,nt,Mt,kt){return nt===null||nt.tag!==6?(nt=Yf(Mt,vt.mode,kt),nt.return=vt,nt):(nt=A(nt,Mt),nt.return=vt,nt)}function ft(vt,nt,Mt,kt){var xe=Mt.type;return xe===_o?Yt(vt,nt,Mt.props.children,kt,Mt.key):nt!==null&&(nt.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===os&&va(xe)===nt.type)?(nt=A(nt,Mt.props),hn(nt,Mt),nt.return=vt,nt):(nt=Js(Mt.type,Mt.key,Mt.props,null,vt.mode,kt),hn(nt,Mt),nt.return=vt,nt)}function wt(vt,nt,Mt,kt){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==Mt.containerInfo||nt.stateNode.implementation!==Mt.implementation?(nt=rp(Mt,vt.mode,kt),nt.return=vt,nt):(nt=A(nt,Mt.children||[]),nt.return=vt,nt)}function Yt(vt,nt,Mt,kt,xe){return nt===null||nt.tag!==7?(nt=Qn(Mt,vt.mode,kt,xe),nt.return=vt,nt):(nt=A(nt,Mt),nt.return=vt,nt)}function ie(vt,nt,Mt){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=Yf(""+nt,vt.mode,Mt),nt.return=vt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case Ec:return Mt=Js(nt.type,nt.key,nt.props,null,vt.mode,Mt),hn(Mt,nt),Mt.return=vt,Mt;case rs:return nt=rp(nt,vt.mode,Mt),nt.return=vt,nt;case os:var kt=nt._init;return nt=kt(nt._payload),ie(vt,nt,Mt)}if(su(nt)||o(nt))return nt=Qn(nt,vt.mode,Mt,null),nt.return=vt,nt;if(typeof nt.then=="function")return ie(vt,Ce(nt),Mt);if(nt.$$typeof===Ns)return ie(vt,uc(vt,nt),Mt);ln(vt,nt)}return null}function le(vt,nt,Mt,kt){var xe=nt!==null?nt.key:null;if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return xe!==null?null:$(vt,nt,""+Mt,kt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Ec:return Mt.key===xe?ft(vt,nt,Mt,kt):null;case rs:return Mt.key===xe?wt(vt,nt,Mt,kt):null;case os:return xe=Mt._init,Mt=xe(Mt._payload),le(vt,nt,Mt,kt)}if(su(Mt)||o(Mt))return xe!==null?null:Yt(vt,nt,Mt,kt,null);if(typeof Mt.then=="function")return le(vt,nt,Ce(Mt),kt);if(Mt.$$typeof===Ns)return le(vt,nt,uc(vt,Mt),kt);ln(vt,Mt)}return null}function Fe(vt,nt,Mt,kt,xe){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return vt=vt.get(Mt)||null,$(nt,vt,""+kt,xe);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case Ec:return vt=vt.get(kt.key===null?Mt:kt.key)||null,ft(nt,vt,kt,xe);case rs:return vt=vt.get(kt.key===null?Mt:kt.key)||null,wt(nt,vt,kt,xe);case os:var Wn=kt._init;return kt=Wn(kt._payload),Fe(vt,nt,Mt,kt,xe)}if(su(kt)||o(kt))return vt=vt.get(Mt)||null,Yt(nt,vt,kt,xe,null);if(typeof kt.then=="function")return Fe(vt,nt,Mt,Ce(kt),xe);if(kt.$$typeof===Ns)return Fe(vt,nt,Mt,uc(nt,kt),xe);ln(nt,kt)}return null}function Ka(vt,nt,Mt,kt){for(var xe=null,Wn=null,ze=nt,vn=nt=0,si=null;ze!==null&&vn<Mt.length;vn++){ze.index>vn?(si=ze,ze=null):si=ze.sibling;var nn=le(vt,ze,Mt[vn],kt);if(nn===null){ze===null&&(ze=si);break}l&&ze&&nn.alternate===null&&u(vt,ze),nt=w(nn,nt,vn),Wn===null?xe=nn:Wn.sibling=nn,Wn=nn,ze=si}if(vn===Mt.length)return g(vt,ze),fn&&k(vt,vn),xe;if(ze===null){for(;vn<Mt.length;vn++)ze=ie(vt,Mt[vn],kt),ze!==null&&(nt=w(ze,nt,vn),Wn===null?xe=ze:Wn.sibling=ze,Wn=ze);return fn&&k(vt,vn),xe}for(ze=S(ze);vn<Mt.length;vn++)si=Fe(ze,vt,vn,Mt[vn],kt),si!==null&&(l&&si.alternate!==null&&ze.delete(si.key===null?vn:si.key),nt=w(si,nt,vn),Wn===null?xe=si:Wn.sibling=si,Wn=si);return l&&ze.forEach(function(fr){return u(vt,fr)}),fn&&k(vt,vn),xe}function zo(vt,nt,Mt,kt){if(Mt==null)throw Error(a(151));for(var xe=null,Wn=null,ze=nt,vn=nt=0,si=null,nn=Mt.next();ze!==null&&!nn.done;vn++,nn=Mt.next()){ze.index>vn?(si=ze,ze=null):si=ze.sibling;var fr=le(vt,ze,nn.value,kt);if(fr===null){ze===null&&(ze=si);break}l&&ze&&fr.alternate===null&&u(vt,ze),nt=w(fr,nt,vn),Wn===null?xe=fr:Wn.sibling=fr,Wn=fr,ze=si}if(nn.done)return g(vt,ze),fn&&k(vt,vn),xe;if(ze===null){for(;!nn.done;vn++,nn=Mt.next())nn=ie(vt,nn.value,kt),nn!==null&&(nt=w(nn,nt,vn),Wn===null?xe=nn:Wn.sibling=nn,Wn=nn);return fn&&k(vt,vn),xe}for(ze=S(ze);!nn.done;vn++,nn=Mt.next())nn=Fe(ze,vt,vn,nn.value,kt),nn!==null&&(l&&nn.alternate!==null&&ze.delete(nn.key===null?vn:nn.key),nt=w(nn,nt,vn),Wn===null?xe=nn:Wn.sibling=nn,Wn=nn);return l&&ze.forEach(function(Mh){return u(vt,Mh)}),fn&&k(vt,vn),xe}function Po(vt,nt,Mt,kt){if(typeof Mt=="object"&&Mt!==null&&Mt.type===_o&&Mt.key===null&&(Mt=Mt.props.children),typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Ec:t:{for(var xe=Mt.key;nt!==null;){if(nt.key===xe){if(xe=Mt.type,xe===_o){if(nt.tag===7){g(vt,nt.sibling),kt=A(nt,Mt.props.children),kt.return=vt,vt=kt;break t}}else if(nt.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===os&&va(xe)===nt.type){g(vt,nt.sibling),kt=A(nt,Mt.props),hn(kt,Mt),kt.return=vt,vt=kt;break t}g(vt,nt);break}else u(vt,nt);nt=nt.sibling}Mt.type===_o?(kt=Qn(Mt.props.children,vt.mode,kt,Mt.key),kt.return=vt,vt=kt):(kt=Js(Mt.type,Mt.key,Mt.props,null,vt.mode,kt),hn(kt,Mt),kt.return=vt,vt=kt)}return q(vt);case rs:t:{for(xe=Mt.key;nt!==null;){if(nt.key===xe)if(nt.tag===4&&nt.stateNode.containerInfo===Mt.containerInfo&&nt.stateNode.implementation===Mt.implementation){g(vt,nt.sibling),kt=A(nt,Mt.children||[]),kt.return=vt,vt=kt;break t}else{g(vt,nt);break}else u(vt,nt);nt=nt.sibling}kt=rp(Mt,vt.mode,kt),kt.return=vt,vt=kt}return q(vt);case os:return xe=Mt._init,Mt=xe(Mt._payload),Po(vt,nt,Mt,kt)}if(su(Mt))return Ka(vt,nt,Mt,kt);if(o(Mt)){if(xe=o(Mt),typeof xe!="function")throw Error(a(150));return Mt=xe.call(Mt),zo(vt,nt,Mt,kt)}if(typeof Mt.then=="function")return Po(vt,nt,Ce(Mt),kt);if(Mt.$$typeof===Ns)return Po(vt,nt,uc(vt,Mt),kt);ln(vt,Mt)}return typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint"?(Mt=""+Mt,nt!==null&&nt.tag===6?(g(vt,nt.sibling),kt=A(nt,Mt),kt.return=vt,vt=kt):(g(vt,nt),kt=Yf(Mt,vt.mode,kt),kt.return=vt,vt=kt),q(vt)):g(vt,nt)}return function(vt,nt,Mt,kt){try{wo=0;var xe=Po(vt,nt,Mt,kt);return Co=null,xe}catch(ze){if(ze===vu)throw ze;var Wn=e(29,ze,null,vt.mode);return Wn.lanes=kt,Wn.return=vt,Wn}finally{}}}function ui(l,u){l=$i,D(yu,l),D(Fn,u),$i=l|u.baseLanes}function _i(){D(yu,$i),D(Fn,Fn.current)}function Zi(){$i=yu.current,b(Fn),b(yu)}function ya(l){var u=l.alternate;D(bi,bi.current&1),D(Xa,l),Ln===null&&(u===null||Fn.current!==null||u.memoizedState!==null)&&(Ln=l)}function Qu(l){if(l.tag===22){if(D(bi,bi.current),D(Xa,l),Ln===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Ln=l)}}else Ts()}function Ts(){D(bi,bi.current),D(Xa,Xa.current)}function aa(l){b(Xa),Ln===l&&(Ln=null),b(bi)}function As(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||ih(g)||ah(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function wn(){throw Error(a(321))}function Rs(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!Aa(l[g],u[g]))return!1;return!0}function Cs(l,u,g,S,A,w){return Fr=w,Ke=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Le.H=l===null||l.memoizedState===null?No:ha,Uo=!1,w=g(S,A),Uo=!1,ml&&(w=xr(u,g,S,A)),no(l),w}function no(l){Le.H=Jn;var u=Ae!==null&&Ae.next!==null;if(Fr=0,dn=Ae=Ke=null,hs=!1,gl=0,Oi=null,u)throw Error(a(300));l===null||zn||(l=l.dependencies,l!==null&&lc(l)&&(zn=!0))}function xr(l,u,g,S){Ke=l;var A=0;do{if(ml&&(Oi=null),gl=0,ml=!1,25<=A)throw Error(a(301));if(A+=1,dn=Ae=null,l.updateQueue!=null){var w=l.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Le.H=qa,w=u(g,S)}while(ml);return w}function ci(){var l=Le.H,u=l.useState()[0];return u=typeof u.then=="function"?_t(u):u,l=l.useState()[0],(Ae!==null?Ae.memoizedState:null)!==l&&(Ke.flags|=1024),u}function Bl(){var l=ph!==0;return ph=0,l}function Il(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function ws(l){if(hs){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}hs=!1}Fr=0,dn=Ae=Ke=null,ml=!1,gl=ph=0,Oi=null}function G(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Ke.memoizedState=dn=l:dn=dn.next=l,dn}function rt(){if(Ae===null){var l=Ke.alternate;l=l!==null?l.memoizedState:null}else l=Ae.next;var u=dn===null?Ke.memoizedState:dn.next;if(u!==null)dn=u,Ae=l;else{if(l===null)throw Ke.alternate===null?Error(a(467)):Error(a(310));Ae=l,l={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},dn===null?Ke.memoizedState=dn=l:dn=dn.next=l}return dn}function _t(l){var u=gl;return gl+=1,Oi===null&&(Oi=[]),l=Lt(Oi,l,u),u=Ke,(dn===null?u.memoizedState:dn.next)===null&&(u=u.alternate,Le.H=u===null||u.memoizedState===null?No:ha),l}function xt(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return _t(l);if(l.$$typeof===Ns)return Vi(l)}throw Error(a(438,String(l)))}function ut(l){var u=null,g=Ke.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var S=Ke.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(u={data:S.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=mh(),Ke.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),S=0;S<l;S++)g[S]=Lg;return u.index++,g}function Ht(l,u){return typeof u=="function"?u(l):u}function Qt(l){var u=rt();return se(u,Ae,l)}function se(l,u,g){var S=l.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var A=l.baseQueue,w=S.pending;if(w!==null){if(A!==null){var q=A.next;A.next=w.next,w.next=q}u.baseQueue=A=w,S.pending=null}if(w=l.baseState,A===null)l.memoizedState=w;else{u=A.next;var $=q=null,ft=null,wt=u,Yt=!1;do{var ie=wt.lane&-536870913;if(ie!==wt.lane?(sn&ie)===ie:(Fr&ie)===ie){var le=wt.revertLane;if(le===0)ft!==null&&(ft=ft.next={lane:0,revertLane:0,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null}),ie===Ga&&(Yt=!0);else if((Fr&le)===le){wt=wt.next,le===Ga&&(Yt=!0);continue}else ie={lane:0,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ft===null?($=ft=ie,q=w):ft=ft.next=ie,Ke.lanes|=le,ja|=le;ie=wt.action,Uo&&g(w,ie),w=wt.hasEagerState?wt.eagerState:g(w,ie)}else le={lane:ie,revertLane:wt.revertLane,action:wt.action,hasEagerState:wt.hasEagerState,eagerState:wt.eagerState,next:null},ft===null?($=ft=le,q=w):ft=ft.next=le,Ke.lanes|=ie,ja|=ie;wt=wt.next}while(wt!==null&&wt!==u);if(ft===null?q=w:ft.next=$,!Aa(w,l.memoizedState)&&(zn=!0,Yt&&(g=dl,g!==null)))throw g;l.memoizedState=w,l.baseState=q,l.baseQueue=ft,S.lastRenderedState=w}return A===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function oe(l){var u=rt(),g=u.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var S=g.dispatch,A=g.pending,w=u.memoizedState;if(A!==null){g.pending=null;var q=A=A.next;do w=l(w,q.action),q=q.next;while(q!==A);Aa(w,u.memoizedState)||(zn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),g.lastRenderedState=w}return[w,S]}function we(l,u,g){var S=Ke,A=rt(),w=fn;if(w){if(g===void 0)throw Error(a(407));g=g()}else g=u();var q=!Aa((Ae||A).memoizedState,g);if(q&&(A.memoizedState=g,zn=!0),A=A.queue,Ud(Ye.bind(null,S,A,l),[l]),A.getSnapshot!==u||q||dn!==null&&dn.memoizedState.tag&1){if(S.flags|=2048,sa(9,ve.bind(null,S,A,g,u),{destroy:void 0},null),Tn===null)throw Error(a(349));w||(Fr&60)!==0||Me(S,u,g)}return g}function Me(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Ke.updateQueue,u===null?(u=mh(),Ke.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function ve(l,u,g,S){u.value=g,u.getSnapshot=S,yn(u)&&Vn(l)}function Ye(l,u,g){return g(function(){yn(u)&&Vn(l)})}function yn(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!Aa(l,g)}catch{return!0}}function Vn(l){var u=Xt(l,2);u!==null&&Di(u,l,2)}function Ze(l){var u=G();if(typeof l=="function"){var g=l;if(l=g(),Uo){j(!0);try{g()}finally{j(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:l},u}function _n(l,u,g,S){return l.baseState=g,se(l,Ae,typeof S=="function"?S:Ht)}function be(l,u,g,S,A){if(ic(l))throw Error(a(485));if(l=u.action,l!==null){var w={payload:A,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){w.listeners.push(q)}};Le.T!==null?g(!0):w.isTransition=!1,S(w),g=u.pending,g===null?(w.next=u.pending=w,Rn(u,w)):(w.next=g.next,u.pending=g.next=w)}}function Rn(l,u){var g=u.action,S=u.payload,A=l.state;if(u.isTransition){var w=Le.T,q={};Le.T=q;try{var $=g(A,S),ft=Le.S;ft!==null&&ft(q,$),an(l,u,$)}catch(wt){Ys(l,u,wt)}finally{Le.T=w}}else try{w=g(A,S),an(l,u,w)}catch(wt){Ys(l,u,wt)}}function an(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){xi(l,u,S)},function(S){return Ys(l,u,S)}):xi(l,u,g)}function xi(l,u,g){u.status="fulfilled",u.value=g,Nn(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,Rn(l,g)))}function Ys(l,u,g){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do u.status="rejected",u.reason=g,Nn(u),u=u.next;while(u!==S)}l.action=null}function Nn(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Ws(l,u){return u}function Dn(l,u){if(fn){var g=Tn.formState;if(g!==null){t:{var S=Ke;if(fn){if(ki){var A=bp(ki,Ni);if(A){ki=Ep(A),S=n0(A);break t}}jt(S)}S=!1}S&&(u=g[0])}}g=G(),g.memoizedState=g.baseState=u,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:u},g.queue=S,g=zd.bind(null,Ke,S),S.dispatch=g,S=Ze(!1);var w=Fl.bind(null,Ke,!1,S.queue);return S=G(),A={state:u,dispatch:null,action:l,pending:null},S.queue=A,g=be.bind(null,Ke,A,w,g),A.dispatch=g,S.memoizedState=l,[u,g,!1]}function Bi(l){var u=rt();return fi(u,Ae,l)}function fi(l,u,g){u=se(l,u,Ws)[0],l=Qt(Ht)[0],u=typeof u=="object"&&u!==null&&typeof u.then=="function"?_t(u):u;var S=rt(),A=S.queue,w=A.dispatch;return g!==S.memoizedState&&(Ke.flags|=2048,sa(9,Ri.bind(null,A,g),{destroy:void 0},null)),[u,w,l]}function Ri(l,u){l.action=u}function Ci(l){var u=rt(),g=Ae;if(g!==null)return fi(u,g,l);rt(),u=u.memoizedState,g=rt();var S=g.queue.dispatch;return g.memoizedState=l,[u,S,!1]}function sa(l,u,g,S){return l={tag:l,create:u,inst:g,deps:S,next:null},u=Ke.updateQueue,u===null&&(u=mh(),Ke.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(S=g.next,g.next=l,l.next=S,u.lastEffect=l),l}function js(){return rt().memoizedState}function Ju(l,u,g,S){var A=G();Ke.flags|=l,A.memoizedState=sa(1|u,g,{destroy:void 0},S===void 0?null:S)}function $u(l,u,g,S){var A=rt();S=S===void 0?null:S;var w=A.memoizedState.inst;Ae!==null&&S!==null&&Rs(S,Ae.memoizedState.deps)?A.memoizedState=sa(u,g,w,S):(Ke.flags|=l,A.memoizedState=sa(1|u,g,w,S))}function Af(l,u){Ju(8390656,8,l,u)}function Ud(l,u){$u(2048,8,l,u)}function hg(l,u){return $u(4,2,l,u)}function tc(l,u){return $u(4,4,l,u)}function Rf(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Cf(l,u,g){g=g!=null?g.concat([l]):null,$u(4,4,Rf.bind(null,u,l),g)}function io(){}function Jo(l,u){var g=rt();u=u===void 0?null:u;var S=g.memoizedState;return u!==null&&Rs(u,S[1])?S[0]:(g.memoizedState=[l,u],l)}function Nd(l,u){var g=rt();u=u===void 0?null:u;var S=g.memoizedState;if(u!==null&&Rs(u,S[1]))return S[0];if(S=l(),Uo){j(!0);try{l()}finally{j(!1)}}return g.memoizedState=[S,u],S}function ec(l,u,g){return g===void 0||(Fr&1073741824)!==0?l.memoizedState=u:(l.memoizedState=g,l=tp(),Ke.lanes|=l,ja|=l,g)}function Od(l,u,g,S){return Aa(g,u)?g:Fn.current!==null?(l=ec(l,g,S),Aa(l,u)||(zn=!0),l):(Fr&42)===0?(zn=!0,l.memoizedState=g):(l=tp(),Ke.lanes|=l,ja|=l,u)}function Vl(l,u,g,S,A){var w=Pr();Qi(w!==0&&8>w?w:8);var q=Le.T,$={};Le.T=$,Fl(l,!1,u,g);try{var ft=A(),wt=Le.S;if(wt!==null&&wt($,ft),ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Yt=Jt(ft,S);ao(l,u,Yt,ei(l))}else ao(l,u,S,ei(l))}catch(ie){ao(l,u,{then:function(){},status:"rejected",reason:ie},ei())}finally{Qi(w),Le.T=q}}function Zs(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:So,baseState:So,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:So},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ht,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function nc(){return Vi(Os)}function Hl(){return rt().memoizedState}function Sr(){return rt().memoizedState}function Ld(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=ei();l=Ot(g);var S=$t(u,l,g);S!==null&&(Di(S,u,g),ge(S,u,g)),u={cache:lo()},l.payload=u;return}u=u.return}}function wf(l,u,g){var S=ei();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},ic(l)?ra(u,g):(g=Gt(l,u,g,S),g!==null&&(Di(g,l,S),so(g,u,S)))}function zd(l,u,g){var S=ei();ao(l,u,g,S)}function ao(l,u,g,S){var A={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(ic(l))ra(u,A);else{var w=l.alternate;if(l.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var q=u.lastRenderedState,$=w(q,g);if(A.hasEagerState=!0,A.eagerState=$,Aa($,q))return Zt(l,u,A,0),Tn===null&&Y(),!1}catch{}finally{}if(g=Gt(l,u,A,S),g!==null)return Di(g,l,S),so(g,u,S),!0}return!1}function Fl(l,u,g,S){if(S={lane:2,revertLane:Ct(),action:S,hasEagerState:!1,eagerState:null,next:null},ic(l)){if(u)throw Error(a(479))}else u=Gt(l,g,S,2),u!==null&&Di(u,l,2)}function ic(l){var u=l.alternate;return l===Ke||u!==null&&u===Ke}function ra(l,u){ml=hs=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function so(l,u,g){if((g&4194176)!==0){var S=u.lanes;S&=l.pendingLanes,g|=S,u.lanes=g,pt(l,g)}}function Gl(l,u,g,S){u=l.memoizedState,g=g(S,u),g=g==null?u:jf({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Xl(l,u,g,S,A,w,q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,w,q):u.prototype&&u.prototype.isPureReactComponent?!Ft(g,S)||!Ft(A,w):!0}function dg(l,u,g,S){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,S),u.state!==l&&sr.enqueueReplaceState(u,u.state,null)}function Mr(l,u){var g=u;if("ref"in u){g={};for(var S in u)S!=="ref"&&(g[S]=u[S])}if(l=l.defaultProps){g===u&&(g=jf({},g));for(var A in l)g[A]===void 0&&(g[A]=l[A])}return g}function ql(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(S){setTimeout(function(){throw S})}}function kl(l,u,g){try{var S=l.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Yl(l,u,g){return g=Ot(g),g.tag=3,g.payload={element:null},g.callback=function(){ql(l,u)},g}function Pd(l){return l=Ot(l),l.tag=3,l}function pg(l,u,g,S){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var w=S.value;l.payload=function(){return A(w)},l.callback=function(){kl(u,g,S)}}var q=g.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(l.callback=function(){kl(u,g,S),typeof A!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var $=S.stack;this.componentDidCatch(S.value,{componentStack:$!==null?$:""})})}function N_(l,u,g,S,A){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(u=g.alternate,u!==null&&oc(u,g,A,!0),g=Xa.current,g!==null){switch(g.tag){case 13:return Ln===null?Dr():g.alternate===null&&Pn===0&&(Pn=3),g.flags&=-257,g.flags|=65536,g.lanes=A,S===Vc?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([S]):u.add(S),el(l,S,A)),!1;case 22:return g.flags|=65536,S===Vc?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([S]):g.add(S)),el(l,S,A)),!1}throw Error(a(435,g.tag))}return el(l,S,A),Dr(),!1}if(fn)return u=Xa.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,S!==Pc&&(l=Error(a(422),{cause:S}),Ue(ct(l,g)))):(S!==Pc&&(u=Error(a(423),{cause:S}),Ue(ct(u,g))),l=l.current.alternate,l.flags|=65536,A&=-A,l.lanes|=A,S=ct(S,g),A=Yl(l.stateNode,S,A),_e(l,A),Pn!==4&&(Pn=2)),!1;var w=Error(a(520),{cause:S});if(w=ct(w,g),yl===null?yl=[w]:yl.push(w),Pn!==4&&(Pn=2),u===null)return!0;S=ct(S,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=A&-A,g.lanes|=l,l=Yl(g.stateNode,S,l),_e(g,l),!1;case 1:if(u=g.type,w=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Oo===null||!Oo.has(w))))return g.flags|=65536,A&=-A,g.lanes|=A,A=Pd(A),pg(A,l,g,S),_e(g,A),!1}g=g.return}while(g!==null);return!1}function Ii(l,u,g,S){u.child=l===null?ar(u,null,g,S):Do(u,l.child,g,S)}function Df(l,u,g,S,A){g=g.render;var w=u.ref;if("ref"in S){var q={};for(var $ in S)$!=="ref"&&(q[$]=S[$])}else q=S;return oo(u),S=Cs(l,u,g,q,w,A),$=Bl(),l!==null&&!zn?(Il(l,u,A),br(l,u,A)):(fn&&$&&bt(u),u.flags|=1,Ii(l,u,S,A),u.child)}function mg(l,u,g,S,A){if(l===null){var w=g.type;return typeof w=="function"&&!xc(w)&&w.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=w,gg(l,u,w,S,A)):(l=Js(g.type,null,S,u,u.mode,A),l.ref=u.ref,l.return=u,u.child=l)}if(w=l.child,!Fd(l,A)){var q=w.memoizedProps;if(g=g.compare,g=g!==null?g:Ft,g(q,S)&&l.ref===u.ref)return br(l,u,A)}return u.flags|=1,l=ss(w,S),l.ref=u.ref,l.return=u,u.child=l}function gg(l,u,g,S,A){if(l!==null){var w=l.memoizedProps;if(Ft(w,S)&&l.ref===u.ref)if(zn=!1,u.pendingProps=S=w,Fd(l,A))(l.flags&131072)!==0&&(zn=!0);else return u.lanes=l.lanes,br(l,u,A)}return Uf(l,u,g,S,A)}function vg(l,u,g){var S=u.pendingProps,A=S.children,w=(u.stateNode._pendingVisibility&2)!==0,q=l!==null?l.memoizedState:null;if(ac(l,u),S.mode==="hidden"||w){if((u.flags&128)!==0){if(S=q!==null?q.baseLanes|g:g,l!==null){for(A=u.child=l.child,w=0;A!==null;)w=w|A.lanes|A.childLanes,A=A.sibling;u.childLanes=w&~S}else u.childLanes=0,u.child=null;return yg(l,u,S,g)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Of(u,q!==null?q.cachePool:null),q!==null?ui(u,q):_i(),Qu(u);else return u.lanes=u.childLanes=536870912,yg(l,u,q!==null?q.baseLanes|g:g,g)}else q!==null?(Of(u,q.cachePool),ui(u,q),Ts(),u.memoizedState=null):(l!==null&&Of(u,null),_i(),Ts());return Ii(l,u,A,g),u.child}function yg(l,u,g,S){var A=Xd();return A=A===null?null:{parent:ua?Gn._currentValue:Gn._currentValue2,pool:A},u.memoizedState={baseLanes:g,cachePool:A},l!==null&&Of(u,null),_i(),Qu(u),l!==null&&oc(l,u,S,!0),null}function ac(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(l===null||l.ref!==g)&&(u.flags|=2097664)}}function Uf(l,u,g,S,A){return oo(u),g=Cs(l,u,g,S,void 0,A),S=Bl(),l!==null&&!zn?(Il(l,u,A),br(l,u,A)):(fn&&S&&bt(u),u.flags|=1,Ii(l,u,g,A),u.child)}function _g(l,u,g,S,A,w){return oo(u),u.updateQueue=null,g=xr(u,S,g,A),no(l),S=Bl(),l!==null&&!zn?(Il(l,u,w),br(l,u,w)):(fn&&S&&bt(u),u.flags|=1,Ii(l,u,g,w),u.child)}function xg(l,u,g,S,A){if(oo(u),u.stateNode===null){var w=To,q=g.contextType;typeof q=="object"&&q!==null&&(w=Vi(q)),w=new g(S,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=sr,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=S,w.state=u.memoizedState,w.refs={},fe(u),q=g.contextType,w.context=typeof q=="object"&&q!==null?Vi(q):To,w.state=u.memoizedState,q=g.getDerivedStateFromProps,typeof q=="function"&&(Gl(u,g,q,S),w.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(q=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),q!==w.state&&sr.enqueueReplaceState(w,w.state,null),Re(u,S,w,A),Kt(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),S=!0}else if(l===null){w=u.stateNode;var $=u.memoizedProps,ft=Mr(g,$);w.props=ft;var wt=w.context,Yt=g.contextType;q=To,typeof Yt=="object"&&Yt!==null&&(q=Vi(Yt));var ie=g.getDerivedStateFromProps;Yt=typeof ie=="function"||typeof w.getSnapshotBeforeUpdate=="function",$=u.pendingProps!==$,Yt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||($||wt!==q)&&dg(u,w,S,q),Hr=!1;var le=u.memoizedState;w.state=le,Re(u,S,w,A),Kt(),wt=u.memoizedState,$||le!==wt||Hr?(typeof ie=="function"&&(Gl(u,g,ie,S),wt=u.memoizedState),(ft=Hr||Xl(u,g,ft,S,le,wt,q))?(Yt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=wt),w.props=S,w.state=wt,w.context=q,S=ft):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{w=u.stateNode,de(l,u),q=u.memoizedProps,Yt=Mr(g,q),w.props=Yt,ie=u.pendingProps,le=w.context,wt=g.contextType,ft=To,typeof wt=="object"&&wt!==null&&(ft=Vi(wt)),$=g.getDerivedStateFromProps,(wt=typeof $=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(q!==ie||le!==ft)&&dg(u,w,S,ft),Hr=!1,le=u.memoizedState,w.state=le,Re(u,S,w,A),Kt();var Fe=u.memoizedState;q!==ie||le!==Fe||Hr||l!==null&&l.dependencies!==null&&lc(l.dependencies)?(typeof $=="function"&&(Gl(u,g,$,S),Fe=u.memoizedState),(Yt=Hr||Xl(u,g,Yt,S,le,Fe,ft)||l!==null&&l.dependencies!==null&&lc(l.dependencies))?(wt||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(S,Fe,ft),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(S,Fe,ft)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=Fe),w.props=S,w.state=Fe,w.context=ft,S=Yt):(typeof w.componentDidUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(u.flags|=1024),S=!1)}return w=S,ac(l,u),S=(u.flags&128)!==0,w||S?(w=u.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,l!==null&&S?(u.child=Do(u,l.child,null,A),u.child=Do(u,null,g,A)):Ii(l,u,g,A),u.memoizedState=w.state,l=u.child):l=br(l,u,A),l}function Sg(l,u,g,S){return ke(),u.flags|=256,Ii(l,u,g,S),u.child}function Bd(l){return{baseLanes:l,cachePool:qd()}}function sc(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=Za),l}function Mg(l,u,g){var S=u.pendingProps,A=!1,w=(u.flags&128)!==0,q;if((q=w)||(q=l!==null&&l.memoizedState===null?!1:(bi.current&2)!==0),q&&(A=!0,u.flags&=-129),q=(u.flags&32)!==0,u.flags&=-33,l===null){if(fn){if(A?ya(u):Ts(),fn){var $=ki,ft;(ft=$)&&($=s0($,Ni),$!==null?(u.memoizedState={dehydrated:$,treeContext:Ao!==null?{id:zs,overflow:Ps}:null,retryLane:536870912},ft=e(18,null,null,0),ft.stateNode=$,ft.return=u,u.child=ft,qi=u,ki=null,ft=!0):ft=!1),ft||jt(u)}if($=u.memoizedState,$!==null&&($=$.dehydrated,$!==null))return ah($)?u.lanes=16:u.lanes=536870912,null;aa(u)}return $=S.children,S=S.fallback,A?(Ts(),A=u.mode,$=Vd({mode:"hidden",children:$},A),S=Qn(S,A,g,null),$.return=u,S.return=u,$.sibling=S,u.child=$,A=u.child,A.memoizedState=Bd(g),A.childLanes=sc(l,q,g),u.memoizedState=yh,S):(ya(u),Id(u,$))}if(ft=l.memoizedState,ft!==null&&($=ft.dehydrated,$!==null)){if(w)u.flags&256?(ya(u),u.flags&=-257,u=Nf(l,u,g)):u.memoizedState!==null?(Ts(),u.child=l.child,u.flags|=128,u=null):(Ts(),A=S.fallback,$=u.mode,S=Vd({mode:"visible",children:S.children},$),A=Qn(A,$,g,null),A.flags|=2,S.return=u,A.return=u,S.sibling=A,u.child=S,Do(u,l.child,null,g),S=u.child,S.memoizedState=Bd(g),S.childLanes=sc(l,q,g),u.memoizedState=yh,u=A);else if(ya(u),ah($))q=t0($).digest,S=Error(a(419)),S.stack="",S.digest=q,Ue({value:S,source:null,stack:null}),u=Nf(l,u,g);else if(zn||oc(l,u,g,!1),q=(g&l.childLanes)!==0,zn||q){if(q=Tn,q!==null){if(S=g&-g,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(q.suspendedLanes|g))!==0?0:S,S!==0&&S!==ft.retryLane)throw ft.retryLane=S,Xt(l,S),Di(q,l,S),vh}ih($)||Dr(),u=Nf(l,u,g)}else ih($)?(u.flags|=128,u.child=l.child,u=Ur.bind(null,l),e0($,u),u=null):(l=ft.treeContext,Xi&&(ki=a0($),qi=u,fn=!0,cs=null,Ni=!1,l!==null&&(Ha[Fa++]=zs,Ha[Fa++]=Ps,Ha[Fa++]=Ao,zs=l.id,Ps=l.overflow,Ao=u)),u=Id(u,S.children),u.flags|=4096);return u}return A?(Ts(),A=S.fallback,$=u.mode,ft=l.child,w=ft.sibling,S=ss(ft,{mode:"hidden",children:S.children}),S.subtreeFlags=ft.subtreeFlags&31457280,w!==null?A=ss(w,A):(A=Qn(A,$,g,null),A.flags|=2),A.return=u,S.return=u,S.sibling=A,u.child=S,S=A,A=u.child,$=l.child.memoizedState,$===null?$=Bd(g):(ft=$.cachePool,ft!==null?(w=ua?Gn._currentValue:Gn._currentValue2,ft=ft.parent!==w?{parent:w,pool:w}:ft):ft=qd(),$={baseLanes:$.baseLanes|g,cachePool:ft}),A.memoizedState=$,A.childLanes=sc(l,q,g),u.memoizedState=yh,S):(ya(u),g=l.child,l=g.sibling,g=ss(g,{mode:"visible",children:S.children}),g.return=u,g.sibling=null,l!==null&&(q=u.deletions,q===null?(u.deletions=[l],u.flags|=16):q.push(l)),u.child=g,u.memoizedState=null,g)}function Id(l,u){return u=Vd({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Vd(l,u){return Mc(l,u,0,null)}function Nf(l,u,g){return Do(u,l.child,null,g),l=Id(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function bg(l,u,g){l.lanes|=u;var S=l.alternate;S!==null&&(S.lanes|=u),rc(l.return,u,g)}function Hd(l,u,g,S,A){var w=l.memoizedState;w===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:A}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=S,w.tail=g,w.tailMode=A)}function Eg(l,u,g){var S=u.pendingProps,A=S.revealOrder,w=S.tail;if(Ii(l,u,S.children,g),S=bi.current,(S&2)!==0)S=S&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&bg(l,g,u);else if(l.tag===19)bg(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break t;for(;l.sibling===null;){if(l.return===null||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}switch(D(bi,S),A){case"forwards":for(g=u.child,A=null;g!==null;)l=g.alternate,l!==null&&As(l)===null&&(A=g),g=g.sibling;g=A,g===null?(A=u.child,u.child=null):(A=g.sibling,g.sibling=null),Hd(u,!1,A,g,w);break;case"backwards":for(g=null,A=u.child,u.child=null;A!==null;){if(l=A.alternate,l!==null&&As(l)===null){u.child=A;break}l=A.sibling,A.sibling=g,g=A,A=l}Hd(u,!0,g,null,w);break;case"together":Hd(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function br(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),ja|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(oc(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(a(153));if(u.child!==null){for(l=u.child,g=ss(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=ss(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function Fd(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&lc(l)))}function O_(l,u,g){switch(u.tag){case 3:et(u,u.stateNode.containerInfo),ro(u,Gn,l.memoizedState.cache),ke();break;case 27:case 5:Bt(u);break;case 4:et(u,u.stateNode.containerInfo);break;case 10:ro(u,u.type,u.memoizedProps.value);break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(ya(u),u.flags|=128,null):(g&u.child.childLanes)!==0?Mg(l,u,g):(ya(u),l=br(l,u,g),l!==null?l.sibling:null);ya(u);break;case 19:var A=(l.flags&128)!==0;if(S=(g&u.childLanes)!==0,S||(oc(l,u,g,!1),S=(g&u.childLanes)!==0),A){if(S)return Eg(l,u,g);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),D(bi,bi.current),S)break;return null;case 22:case 23:return u.lanes=0,vg(l,u,g);case 24:ro(u,Gn,l.memoizedState.cache)}return br(l,u,g)}function Tg(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)zn=!0;else{if(!Fd(l,g)&&(u.flags&128)===0)return zn=!1,O_(l,u,g);zn=(l.flags&131072)!==0}else zn=!1,fn&&(u.flags&1048576)!==0&&tt(u,du,u.index);switch(u.lanes=0,u.tag){case 16:t:{l=u.pendingProps;var S=u.elementType,A=S._init;if(S=A(S._payload),u.type=S,typeof S=="function")xc(S)?(l=Mr(S,l),u.tag=1,u=xg(null,u,S,l,g)):(u.tag=0,u=Uf(null,u,S,l,g));else{if(S!=null){if(A=S.$$typeof,A===Rc){u.tag=11,u=Df(null,u,S,l,g);break t}else if(A===Qf){u.tag=14,u=mg(null,u,S,l,g);break t}}throw u=c(S)||S,Error(a(306,u,""))}}return u;case 0:return Uf(l,u,u.type,u.pendingProps,g);case 1:return S=u.type,A=Mr(S,u.pendingProps),xg(l,u,S,A,g);case 3:t:{if(et(u,u.stateNode.containerInfo),l===null)throw Error(a(387));var w=u.pendingProps;A=u.memoizedState,S=A.element,de(l,u),Re(u,w,null,g);var q=u.memoizedState;if(w=q.cache,ro(u,Gn,w),w!==A.cache&&$o(u,[Gn],g,!0),Kt(),w=q.element,Xi&&A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:q.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=Sg(l,u,w,g);break t}else if(w!==S){S=ct(Error(a(424)),u),Ue(S),u=Sg(l,u,w,g);break t}else for(Xi&&(ki=i0(u.stateNode.containerInfo),qi=u,fn=!0,cs=null,Ni=!0),g=ar(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(ke(),w===S){u=br(l,u,g);break t}Ii(l,u,w,g)}u=u.child}return u;case 26:if(Va)return ac(l,u),l===null?(g=Rp(u.type,null,u.pendingProps,null))?u.memoizedState=g:fn||(u.stateNode=uh(u.type,u.pendingProps,nr.current,u)):u.memoizedState=Rp(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:if(On)return Bt(u),l===null&&On&&fn&&(S=u.stateNode=Ls(u.type,u.pendingProps,nr.current,Mi.current,!1),qi=u,Ni=!0,ki=sh(S)),S=u.pendingProps.children,l!==null||fn?Ii(l,u,S,g):u.child=Do(u,null,S,g),ac(l,u),u.child;case 5:return l===null&&fn&&(oh(u.type,u.pendingProps,Mi.current),(A=S=ki)&&(S=H_(S,u.type,u.pendingProps,Ni),S!==null?(u.stateNode=S,qi=u,ki=sh(S),Ni=!1,A=!0):A=!1),A||jt(u)),Bt(u),A=u.type,w=u.pendingProps,q=l!==null?l.memoizedProps:null,S=w.children,Xe(A,w)?S=null:q!==null&&Xe(A,q)&&(u.flags|=32),u.memoizedState!==null&&(A=Cs(l,u,ci,null,null,g),ua?Os._currentValue=A:Os._currentValue2=A),ac(l,u),Ii(l,u,S,g),u.child;case 6:return l===null&&fn&&(c0(u.pendingProps,Mi.current),(l=g=ki)&&(g=Tp(g,u.pendingProps,Ni),g!==null?(u.stateNode=g,qi=u,ki=null,l=!0):l=!1),l||jt(u)),null;case 13:return Mg(l,u,g);case 4:return et(u,u.stateNode.containerInfo),S=u.pendingProps,l===null?u.child=Do(u,null,S,g):Ii(l,u,S,g),u.child;case 11:return Df(l,u,u.type,u.pendingProps,g);case 7:return Ii(l,u,u.pendingProps,g),u.child;case 8:return Ii(l,u,u.pendingProps.children,g),u.child;case 12:return Ii(l,u,u.pendingProps.children,g),u.child;case 10:return S=u.pendingProps,ro(u,u.type,S.value),Ii(l,u,S.children,g),u.child;case 9:return A=u.type._context,S=u.pendingProps.children,oo(u),A=Vi(A),S=S(A),u.flags|=1,Ii(l,u,S,g),u.child;case 14:return mg(l,u,u.type,u.pendingProps,g);case 15:return gg(l,u,u.type,u.pendingProps,g);case 19:return Eg(l,u,g);case 22:return vg(l,u,g);case 24:return oo(u),S=Vi(Gn),l===null?(A=Xd(),A===null&&(A=Tn,w=lo(),A.pooledCache=w,w.refCount++,w!==null&&(A.pooledCacheLanes|=g),A=w),u.memoizedState={parent:S,cache:A},fe(u),ro(u,Gn,A)):((l.lanes&g)!==0&&(de(l,u),Re(u,null,null,g),Kt()),A=l.memoizedState,w=u.memoizedState,A.parent!==S?(A={parent:S,cache:S},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),ro(u,Gn,S)):(S=w.cache,ro(u,Gn,S),S!==A.cache&&$o(u,[Gn],g,!0))),Ii(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(a(156,u.tag))}function ro(l,u,g){ua?(D(Gr,u._currentValue),u._currentValue=g):(D(Gr,u._currentValue2),u._currentValue2=g)}function Er(l){var u=Gr.current;ua?l._currentValue=u:l._currentValue2=u,b(Gr)}function rc(l,u,g){for(;l!==null;){var S=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),l===g)break;l=l.return}}function $o(l,u,g,S){var A=l.child;for(A!==null&&(A.return=l);A!==null;){var w=A.dependencies;if(w!==null){var q=A.child;w=w.firstContext;t:for(;w!==null;){var $=w;w=A;for(var ft=0;ft<u.length;ft++)if($.context===u[ft]){w.lanes|=g,$=w.alternate,$!==null&&($.lanes|=g),rc(w.return,g,l),S||(q=null);break t}w=$.next}}else if(A.tag===18){if(q=A.return,q===null)throw Error(a(341));q.lanes|=g,w=q.alternate,w!==null&&(w.lanes|=g),rc(q,g,l),q=null}else q=A.child;if(q!==null)q.return=A;else for(q=A;q!==null;){if(q===l){q=null;break}if(A=q.sibling,A!==null){A.return=q.return,q=A;break}q=q.return}A=q}}function oc(l,u,g,S){l=null;for(var A=u,w=!1;A!==null;){if(!w){if((A.flags&524288)!==0)w=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var q=A.alternate;if(q===null)throw Error(a(387));if(q=q.memoizedProps,q!==null){var $=A.type;Aa(A.pendingProps.value,q.value)||(l!==null?l.push($):l=[$])}}else if(A===ul.current){if(q=A.alternate,q===null)throw Error(a(387));q.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(l!==null?l.push(Os):l=[Os])}A=A.return}l!==null&&$o(u,l,g,S),u.flags|=262144}function lc(l){for(l=l.firstContext;l!==null;){var u=l.context;if(!Aa(ua?u._currentValue:u._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function oo(l){Vs=l,ka=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Vi(l){return Gd(Vs,l)}function uc(l,u){return Vs===null&&oo(l),Gd(l,u)}function Gd(l,u){var g=ua?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:g,next:null},ka===null){if(l===null)throw Error(a(308));ka=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ka=ka.next=u;return g}function lo(){return{controller:new _u,data:new Map,refCount:0}}function cc(l){l.refCount--,l.refCount===0&&S0(M0,function(){l.controller.abort()})}function Xd(){var l=rr.current;return l!==null?l:Tn.pooledCache}function Of(l,u){u===null?D(rr,rr.current):D(rr,u.pool)}function qd(){var l=Xd();return l===null?null:{parent:ua?Gn._currentValue:Gn._currentValue2,pool:l}}function _a(l){l.flags|=4}function Wl(l,u){if(l!==null&&l.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(l=u.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function tl(l,u,g,S){if(Si)for(g=u.child;g!==null;){if(g.tag===5||g.tag===6)wc(l,g.stateNode);else if(!(g.tag===4||On&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(ls)for(var A=u.child;A!==null;){if(A.tag===5){var w=A.stateNode;g&&S&&(w=Sp(w,A.type,A.memoizedProps)),wc(l,w)}else if(A.tag===6)w=A.stateNode,g&&S&&(w=Mp(w,A.memoizedProps)),wc(l,w);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)w=A.child,w!==null&&(w.return=A),tl(l,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function Ag(l,u,g,S){if(ls)for(var A=u.child;A!==null;){if(A.tag===5){var w=A.stateNode;g&&S&&(w=Sp(w,A.type,A.memoizedProps)),xp(l,w)}else if(A.tag===6)w=A.stateNode,g&&S&&(w=Mp(w,A.memoizedProps)),xp(l,w);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)w=A.child,w!==null&&(w.return=A),Ag(l,A,!(A.memoizedProps!==null&&A.memoizedProps.mode==="manual"),!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function fc(l,u){if(ls&&Wl(l,u)){l=u.stateNode;var g=l.containerInfo,S=Dc();Ag(S,u,!1,!1),l.pendingChildren=S,_a(u),nh(g,S)}}function Lf(l,u,g,S){if(Si)l.memoizedProps!==S&&_a(u);else if(ls){var A=l.stateNode,w=l.memoizedProps;if((l=Wl(l,u))||w!==S){var q=Mi.current;w=cu(A,g,w,S,!l,null),w===A?u.stateNode=A:(zr(w,g,S,q)&&_a(u),u.stateNode=w,l?tl(w,u,!1,!1):_a(u))}else u.stateNode=A}}function zf(l,u,g){if(hp(u,g)){if(l.flags|=16777216,!th(u,g))if(mo())l.flags|=8192;else throw Ro=Vc,Ic}else l.flags&=-16777217}function Pf(l,u){if(d0(u)){if(l.flags|=16777216,!al(u))if(mo())l.flags|=8192;else throw Ro=Vc,Ic}else l.flags&=-16777217}function jl(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?z():536870912,l.lanes|=u,ur|=u)}function Zl(l,u){if(!fn)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function jn(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,S=0;if(u)for(var A=l.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags&31457280,S|=A.flags&31457280,A.return=l,A=A.sibling;else for(A=l.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=l,A=A.sibling;return l.subtreeFlags|=S,l.childLanes=g,u}function Rg(l,u,g){var S=u.pendingProps;switch(Rt(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(u),null;case 1:return jn(u),null;case 3:return g=u.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),u.memoizedState.cache!==S&&(u.flags|=2048),Er(Gn),Et(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(cn(u)?_a(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,cs!==null&&(yc(cs),cs=null))),fc(l,u),jn(u),null;case 26:if(Va){g=u.type;var A=u.memoizedState;return l===null?(_a(u),A!==null?(jn(u),Pf(u,A)):(jn(u),zf(u,g,S))):A?A!==l.memoizedState?(_a(u),jn(u),Pf(u,A)):(jn(u),u.flags&=-16777217):(Si?l.memoizedProps!==S&&_a(u):Lf(l,u,g,S),jn(u),zf(u,g,S)),null}case 27:if(On){if(Wt(u),g=nr.current,A=u.type,l!==null&&u.stateNode!=null)Si?l.memoizedProps!==S&&_a(u):Lf(l,u,A,S);else{if(!S){if(u.stateNode===null)throw Error(a(166));return jn(u),null}l=Mi.current,cn(u)?Te(u,l):(l=Ls(A,S,g,l,!0),u.stateNode=l,_a(u))}return jn(u),null}case 5:if(Wt(u),g=u.type,l!==null&&u.stateNode!=null)Lf(l,u,g,S);else{if(!S){if(u.stateNode===null)throw Error(a(166));return jn(u),null}l=Mi.current,cn(u)?Te(u,l):(A=fp(g,S,nr.current,l,u),tl(A,u,!1,!1),u.stateNode=A,zr(A,g,S,l)&&_a(u))}return jn(u),zf(u,u.type,u.pendingProps),null;case 6:if(l&&u.stateNode!=null)g=l.memoizedProps,Si?g!==S&&_a(u):ls&&(g!==S?(u.stateNode=Cn(S,nr.current,Mi.current,u),_a(u)):u.stateNode=l.stateNode);else{if(typeof S!="string"&&u.stateNode===null)throw Error(a(166));if(l=nr.current,g=Mi.current,cn(u)){if(!Xi)throw Error(a(176));if(l=u.stateNode,g=u.memoizedProps,S=null,A=qi,A!==null)switch(A.tag){case 27:case 5:S=A.memoizedProps}Ap(l,g,u,S)||jt(u)}else u.stateNode=Cn(S,l,g,u)}return jn(u),null;case 13:if(S=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(A=cn(u),S!==null&&S.dehydrated!==null){if(l===null){if(!A)throw Error(a(318));if(!Xi)throw Error(a(344));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));o0(A,u)}else ke(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;jn(u),A=!1}else cs!==null&&(yc(cs),cs=null),A=!0;if(!A)return u.flags&256?(aa(u),u):(aa(u),null)}if(aa(u),(u.flags&128)!==0)return u.lanes=g,u;if(g=S!==null,l=l!==null&&l.memoizedState!==null,g){S=u.child,A=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(A=S.alternate.memoizedState.cachePool.pool);var w=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(w=S.memoizedState.cachePool.pool),w!==A&&(S.flags|=2048)}return g!==l&&g&&(u.child.flags|=8192),jl(u,u.updateQueue),jn(u),null;case 4:return Et(),fc(l,u),l===null&&ni(u.stateNode.containerInfo),jn(u),null;case 10:return Er(u.type),jn(u),null;case 19:if(b(bi),A=u.memoizedState,A===null)return jn(u),null;if(S=(u.flags&128)!==0,w=A.rendering,w===null)if(S)Zl(A,!1);else{if(Pn!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(w=As(l),w!==null){for(u.flags|=128,Zl(A,!1),l=w.updateQueue,u.updateQueue=l,jl(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)Sc(g,l),g=g.sibling;return D(bi,bi.current&1|2),u.child}l=l.sibling}A.tail!==null&&us()>Mu&&(u.flags|=128,S=!0,Zl(A,!1),u.lanes=4194304)}else{if(!S)if(l=As(w),l!==null){if(u.flags|=128,S=!0,l=l.updateQueue,u.updateQueue=l,jl(u,l),Zl(A,!0),A.tail===null&&A.tailMode==="hidden"&&!w.alternate&&!fn)return jn(u),null}else 2*us()-A.renderingStartTime>Mu&&g!==536870912&&(u.flags|=128,S=!0,Zl(A,!1),u.lanes=4194304);A.isBackwards?(w.sibling=u.child,u.child=w):(l=A.last,l!==null?l.sibling=w:u.child=w,A.last=w)}return A.tail!==null?(u=A.tail,A.rendering=u,A.tail=u.sibling,A.renderingStartTime=us(),u.sibling=null,l=bi.current,D(bi,S?l&1|2:l&1),u):(jn(u),null);case 22:case 23:return aa(u),Zi(),S=u.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(u.flags|=8192):S&&(u.flags|=8192),S?(g&536870912)!==0&&(u.flags&128)===0&&(jn(u),u.subtreeFlags&6&&(u.flags|=8192)):jn(u),g=u.updateQueue,g!==null&&jl(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),S=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(S=u.memoizedState.cachePool.pool),S!==g&&(u.flags|=2048),l!==null&&b(rr),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Er(Gn),jn(u),null;case 25:return null}throw Error(a(156,u.tag))}function L_(l,u){switch(Rt(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Er(Gn),Et(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Wt(u),null;case 13:if(aa(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(a(340));ke()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return b(bi),null;case 4:return Et(),null;case 10:return Er(u.type),null;case 22:case 23:return aa(u),Zi(),l!==null&&b(rr),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Er(Gn),null;case 25:return null;default:return null}}function Cg(l,u){switch(Rt(u),u.tag){case 3:Er(Gn),Et();break;case 26:case 27:case 5:Wt(u);break;case 4:Et();break;case 13:aa(u);break;case 19:b(bi);break;case 10:Er(u.type);break;case 22:case 23:aa(u),Zi(),l!==null&&b(rr);break;case 24:Er(Gn)}}function hc(l,u){try{var g=u.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var A=S.next;g=A;do{if((g.tag&l)===l){S=void 0;var w=g.create,q=g.inst;S=w(),q.destroy=S}g=g.next}while(g!==A)}}catch($){bn(u,u.return,$)}}function uo(l,u,g){try{var S=u.updateQueue,A=S!==null?S.lastEffect:null;if(A!==null){var w=A.next;S=w;do{if((S.tag&l)===l){var q=S.inst,$=q.destroy;if($!==void 0){q.destroy=void 0,A=u;var ft=g;try{$()}catch(wt){bn(A,ft,wt)}}}S=S.next}while(S!==w)}}catch(wt){bn(u,u.return,wt)}}function wg(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{te(u,g)}catch(S){bn(l,l.return,S)}}}function xa(l,u,g){g.props=Mr(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(S){bn(l,u,S)}}function Ds(l,u){try{var g=l.ref;if(g!==null){var S=l.stateNode;switch(l.tag){case 26:case 27:case 5:var A=ou(S);break;default:A=S}typeof g=="function"?l.refCleanup=g(A):g.current=A}}catch(w){bn(l,u,w)}}function Sa(l,u){var g=l.ref,S=l.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(A){bn(l,u,A)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){bn(l,u,A)}else g.current=null}function kd(l){var u=l.type,g=l.memoizedProps,S=l.stateNode;try{I_(S,u,g,l)}catch(A){bn(l,l.return,A)}}function Yd(l,u,g){try{Yg(l.stateNode,l.type,g,u,l)}catch(S){bn(l,l.return,S)}}function Wd(l){return l.tag===5||l.tag===3||(Va?l.tag===26:!1)||(On?l.tag===27:!1)||l.tag===4}function dc(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||Wd(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!On||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function jd(l,u,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?jg(g,l,u):vp(g,l);else if(!(S===4||On&&S===27)&&(l=l.child,l!==null))for(jd(l,u,g),l=l.sibling;l!==null;)jd(l,u,g),l=l.sibling}function Tr(l,u,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,u?Wg(g,l,u):qg(g,l);else if(!(S===4||On&&S===27)&&(l=l.child,l!==null))for(Tr(l,u,g),l=l.sibling;l!==null;)Tr(l,u,g),l=l.sibling}function Bf(l,u,g){l=l.containerInfo;try{fu(l,g)}catch(S){bn(u,u.return,S)}}function pc(l,u){for(Jf(l.containerInfo),He=u;He!==null;)if(l=He,u=l.child,(l.subtreeFlags&1028)!==0&&u!==null)u.return=l,He=u;else for(;He!==null;){l=He;var g=l.alternate;switch(u=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&g!==null){u=void 0;var S=l,A=g.memoizedProps;g=g.memoizedState;var w=S.stateNode;try{var q=Mr(S.type,A,S.elementType===S.type);u=w.getSnapshotBeforeUpdate(q,g),w.__reactInternalSnapshotBeforeUpdate=u}catch($){bn(S,S.return,$)}}break;case 3:(u&1024)!==0&&Si&&$g(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(a(163))}if(u=l.sibling,u!==null){u.return=l.return,He=u;break}He=l.return}return q=en,en=!1,q}function If(l,u,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:Rr(l,g),S&4&&hc(5,g);break;case 1:if(Rr(l,g),S&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch($){bn(g,g.return,$)}else{var A=Mr(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(A,u,l.__reactInternalSnapshotBeforeUpdate)}catch($){bn(g,g.return,$)}}S&64&&wg(g),S&512&&Ds(g,g.return);break;case 3:if(Rr(l,g),S&64&&(S=g.updateQueue,S!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=ou(g.child.stateNode);break;case 1:l=g.child.stateNode}try{te(S,l)}catch($){bn(g,g.return,$)}}break;case 26:if(Va){Rr(l,g),S&512&&Ds(g,g.return);break}case 27:case 5:Rr(l,g),u===null&&S&4&&kd(g),S&512&&Ds(g,g.return);break;case 12:Rr(l,g);break;case 13:Rr(l,g),S&4&&Vf(l,g);break;case 22:if(A=g.memoizedState!==null||or,!A){u=u!==null&&u.memoizedState!==null||$n;var w=or,q=$n;or=A,($n=u)&&!q?Cr(l,g,(g.subtreeFlags&8772)!==0):Rr(l,g),or=w,$n=q}S&512&&(g.memoizedProps.mode==="manual"?Ds(g,g.return):Sa(g,g.return));break;default:Rr(l,g)}}function Zd(l){var u=l.alternate;u!==null&&(l.alternate=null,Zd(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&B_(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Hi(l,u,g){for(g=g.child;g!==null;)co(l,u,g),g=g.sibling}function co(l,u,g){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(ai,g)}catch{}switch(g.tag){case 26:if(Va){$n||Sa(g,u),Hi(l,u,g),g.memoizedState?il(g.memoizedState):g.stateNode&&hu(g.stateNode);break}case 27:if(On){$n||Sa(g,u);var S=Ee,A=We;Ee=g.stateNode,Hi(l,u,g),Eo(g.stateNode),Ee=S,We=A;break}case 5:$n||Sa(g,u);case 6:if(Si){if(S=Ee,A=We,Ee=null,Hi(l,u,g),Ee=S,We=A,Ee!==null)if(We)try{Zg(Ee,g.stateNode)}catch(w){bn(g,u,w)}else try{yp(Ee,g.stateNode)}catch(w){bn(g,u,w)}}else Hi(l,u,g);break;case 18:Si&&Ee!==null&&(We?Uc(Ee,g.stateNode):u0(Ee,g.stateNode));break;case 4:Si?(S=Ee,A=We,Ee=g.stateNode.containerInfo,We=!0,Hi(l,u,g),Ee=S,We=A):(ls&&Bf(g.stateNode,g,Dc()),Hi(l,u,g));break;case 0:case 11:case 14:case 15:$n||uo(2,g,u),$n||uo(4,g,u),Hi(l,u,g);break;case 1:$n||(Sa(g,u),S=g.stateNode,typeof S.componentWillUnmount=="function"&&xa(g,u,S)),Hi(l,u,g);break;case 21:Hi(l,u,g);break;case 22:$n||Sa(g,u),$n=(S=$n)||g.memoizedState!==null,Hi(l,u,g),$n=S;break;default:Hi(l,u,g)}}function Vf(l,u){if(Xi&&u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{G_(l)}catch(g){bn(u,u.return,g)}}function Dg(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new En),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new En),u;default:throw Error(a(435,l.tag))}}function Ar(l,u){var g=Dg(l);u.forEach(function(S){var A=yo.bind(null,l,S);g.has(S)||(g.add(S),S.then(A,A))})}function oa(l,u){var g=u.deletions;if(g!==null)for(var S=0;S<g.length;S++){var A=g[S],w=l,q=u;if(Si){var $=q;t:for(;$!==null;){switch($.tag){case 27:case 5:Ee=$.stateNode,We=!1;break t;case 3:Ee=$.stateNode.containerInfo,We=!0;break t;case 4:Ee=$.stateNode.containerInfo,We=!0;break t}$=$.return}if(Ee===null)throw Error(a(160));co(w,q,A),Ee=null,We=!1}else co(w,q,A);w=A.alternate,w!==null&&(w.return=null),A.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Kd(u,l),u=u.sibling}function Kd(l,u){var g=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:oa(u,l),Ma(l),S&4&&(uo(3,l,l.return),hc(3,l),uo(5,l,l.return));break;case 1:oa(u,l),Ma(l),S&512&&($n||g===null||Sa(g,g.return)),S&64&&or&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:if(Va){var A=Kn;oa(u,l),Ma(l),S&512&&($n||g===null||Sa(g,g.return)),S&4&&(S=g!==null?g.memoizedState:null,u=l.memoizedState,g===null?u===null?l.stateNode===null?l.stateNode=Oc(A,l.type,l.memoizedProps,l):Lc(A,l.type,l.stateNode):l.stateNode=f0(A,u,l.memoizedProps):S!==u?(S===null?g.stateNode!==null&&hu(g.stateNode):il(S),u===null?Lc(A,l.type,l.stateNode):f0(A,u,l.memoizedProps)):u===null&&l.stateNode!==null&&Yd(l,l.memoizedProps,g.memoizedProps));break}case 27:if(On&&S&4&&l.alternate===null){A=l.stateNode;var w=l.memoizedProps;try{bo(A),m0(l.type,w,A,l)}catch(Yt){bn(l,l.return,Yt)}}case 5:if(oa(u,l),Ma(l),S&512&&($n||g===null||Sa(g,g.return)),Si){if(l.flags&32){u=l.stateNode;try{_p(u)}catch(Yt){bn(l,l.return,Yt)}}S&4&&l.stateNode!=null&&(u=l.memoizedProps,Yd(l,u,g!==null?g.memoizedProps:u)),S&1024&&(Up=!0)}break;case 6:if(oa(u,l),Ma(l),S&4&&Si){if(l.stateNode===null)throw Error(a(162));S=l.memoizedProps,g=g!==null?g.memoizedProps:S,u=l.stateNode;try{kg(u,g,S)}catch(Yt){bn(l,l.return,Yt)}}break;case 3:if(Va?(h0(),A=Kn,Kn=lh(u.containerInfo),oa(u,l),Kn=A):oa(u,l),Ma(l),S&4){if(Si&&Xi&&g!==null&&g.memoizedState.isDehydrated)try{F_(u.containerInfo)}catch(Yt){bn(l,l.return,Yt)}if(ls){S=u.containerInfo,g=u.pendingChildren;try{fu(S,g)}catch(Yt){bn(l,l.return,Yt)}}}Up&&(Up=!1,Ug(l));break;case 4:Va?(g=Kn,Kn=lh(l.stateNode.containerInfo),oa(u,l),Ma(l),Kn=g):(oa(u,l),Ma(l)),S&4&&ls&&Bf(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:oa(u,l),Ma(l);break;case 13:oa(u,l),Ma(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(da=us()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Ar(l,S)));break;case 22:S&512&&($n||g===null||Sa(g,g.return)),A=l.memoizedState!==null;var q=g!==null&&g.memoizedState!==null,$=or,ft=$n;if(or=$||A,$n=ft||q,oa(u,l),$n=ft,or=$,Ma(l),u=l.stateNode,u._current=l,u._visibility&=-3,u._visibility|=u._pendingVisibility&2,S&8192&&(u._visibility=A?u._visibility&-2:u._visibility|1,A&&(u=or||$n,g===null||q||u||Kl(l)),Si&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(g=null,Si)for(u=l;;){if(u.tag===5||Va&&u.tag===26||On&&u.tag===27){if(g===null){q=g=u;try{w=q.stateNode,A?Kg(w):Jg(q.stateNode,q.memoizedProps)}catch(Yt){bn(q,q.return,Yt)}}}else if(u.tag===6){if(g===null){q=u;try{var wt=q.stateNode;A?Qg(wt):V_(wt,q.memoizedProps)}catch(Yt){bn(q,q.return,Yt)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break t;for(;u.sibling===null;){if(u.return===null||u.return===l)break t;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}S&4&&(S=l.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Ar(l,g))));break;case 19:oa(u,l),Ma(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Ar(l,S)));break;case 21:break;default:oa(u,l),Ma(l)}}function Ma(l){var u=l.flags;if(u&2){try{if(Si&&(!On||l.tag!==27)){t:{for(var g=l.return;g!==null;){if(Wd(g)){var S=g;break t}g=g.return}throw Error(a(160))}switch(S.tag){case 27:if(On){var A=S.stateNode,w=dc(l);Tr(l,w,A);break}case 5:var q=S.stateNode;S.flags&32&&(_p(q),S.flags&=-33);var $=dc(l);Tr(l,$,q);break;case 3:case 4:var ft=S.stateNode.containerInfo,wt=dc(l);jd(l,wt,ft);break;default:throw Error(a(161))}}}catch(Yt){bn(l,l.return,Yt)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Ug(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Ug(u),u.tag===5&&u.flags&1024&&eh(u.stateNode),l=l.sibling}}function Rr(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)If(l,u.alternate,u),u=u.sibling}function Kl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:uo(4,u,u.return),Kl(u);break;case 1:Sa(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&xa(u,u.return,g),Kl(u);break;case 26:case 27:case 5:Sa(u,u.return),Kl(u);break;case 22:Sa(u,u.return),u.memoizedState===null&&Kl(u);break;default:Kl(u)}l=l.sibling}}function Cr(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var S=u.alternate,A=l,w=u,q=w.flags;switch(w.tag){case 0:case 11:case 15:Cr(A,w,g),hc(4,w);break;case 1:if(Cr(A,w,g),S=w,A=S.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(wt){bn(S,S.return,wt)}if(S=w,A=S.updateQueue,A!==null){var $=S.stateNode;try{var ft=A.shared.hiddenCallbacks;if(ft!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ft.length;A++)st(ft[A],$)}catch(wt){bn(S,S.return,wt)}}g&&q&64&&wg(w),Ds(w,w.return);break;case 26:case 27:case 5:Cr(A,w,g),g&&S===null&&q&4&&kd(w),Ds(w,w.return);break;case 12:Cr(A,w,g);break;case 13:Cr(A,w,g),g&&q&4&&Vf(A,w);break;case 22:w.memoizedState===null&&Cr(A,w,g),Ds(w,w.return);break;default:Cr(A,w,g)}u=u.sibling}}function Hf(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&cc(g))}function mc(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&cc(l))}function wi(l,u,g,S){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Qd(l,u,g,S),u=u.sibling}function Qd(l,u,g,S){var A=u.flags;switch(u.tag){case 0:case 11:case 15:wi(l,u,g,S),A&2048&&hc(9,u);break;case 3:wi(l,u,g,S),A&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&cc(l)));break;case 12:if(A&2048){wi(l,u,g,S),l=u.stateNode;try{var w=u.memoizedProps,q=w.id,$=w.onPostCommit;typeof $=="function"&&$(q,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ft){bn(u,u.return,ft)}}else wi(l,u,g,S);break;case 23:break;case 22:w=u.stateNode,u.memoizedState!==null?w._visibility&4?wi(l,u,g,S):Ki(l,u):w._visibility&4?wi(l,u,g,S):(w._visibility|=4,Fi(l,u,g,S,(u.subtreeFlags&10256)!==0)),A&2048&&Hf(u.alternate,u);break;case 24:wi(l,u,g,S),A&2048&&mc(u.alternate,u);break;default:wi(l,u,g,S)}}function Fi(l,u,g,S,A){for(A=A&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var w=l,q=u,$=g,ft=S,wt=q.flags;switch(q.tag){case 0:case 11:case 15:Fi(w,q,$,ft,A),hc(8,q);break;case 23:break;case 22:var Yt=q.stateNode;q.memoizedState!==null?Yt._visibility&4?Fi(w,q,$,ft,A):Ki(w,q):(Yt._visibility|=4,Fi(w,q,$,ft,A)),A&&wt&2048&&Hf(q.alternate,q);break;case 24:Fi(w,q,$,ft,A),A&&wt&2048&&mc(q.alternate,q);break;default:Fi(w,q,$,ft,A)}u=u.sibling}}function Ki(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,S=u,A=S.flags;switch(S.tag){case 22:Ki(g,S),A&2048&&Hf(S.alternate,S);break;case 24:Ki(g,S),A&2048&&mc(S.alternate,S);break;default:Ki(g,S)}u=u.sibling}}function is(l){if(l.subtreeFlags&Ya)for(l=l.child;l!==null;)Ff(l),l=l.sibling}function Ff(l){switch(l.tag){case 26:is(l),l.flags&Ya&&(l.memoizedState!==null?p0(Kn,l.memoizedState,l.memoizedProps):ca(l.type,l.memoizedProps));break;case 5:is(l),l.flags&Ya&&ca(l.type,l.memoizedProps);break;case 3:case 4:if(Va){var u=Kn;Kn=lh(l.stateNode.containerInfo),is(l),Kn=u}else is(l);break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Ya,Ya=16777216,is(l),Ya=u):is(l));break;default:is(l)}}function gc(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function fo(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];He=S,Jd(S,l)}gc(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Gf(l),l=l.sibling}function Gf(l){switch(l.tag){case 0:case 11:case 15:fo(l),l.flags&2048&&uo(9,l,l.return);break;case 3:fo(l);break;case 12:fo(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&4&&(l.return===null||l.return.tag!==13)?(u._visibility&=-5,wr(l)):fo(l);break;default:fo(l)}}function wr(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];He=S,Jd(S,l)}gc(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:uo(8,u,u.return),wr(u);break;case 22:g=u.stateNode,g._visibility&4&&(g._visibility&=-5,wr(u));break;default:wr(u)}l=l.sibling}}function Jd(l,u){for(;He!==null;){var g=He;switch(g.tag){case 0:case 11:case 15:uo(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:cc(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,He=S;else t:for(g=l;He!==null;){S=He;var A=S.sibling,w=S.return;if(Zd(S),S===g){He=null;break t}if(A!==null){A.return=w,He=A;break t}He=w}}}function Ql(l){var u=Bg(l);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(a(364));return u}if(l=mp(l),l===null)throw Error(a(362));return l.stateNode.current}function ho(l,u){var g=l.tag;switch(u.$$typeof){case Su:if(l.type===u.value)return!0;break;case ds:t:{for(u=u.value,l=[l,0],g=0;g<l.length;){var S=l[g++],A=S.tag,w=l[g++],q=u[w];if(A!==5&&A!==26&&A!==27||!uu(S)){for(;q!=null&&ho(S,q);)w++,q=u[w];if(w===u.length){u=!0;break t}else for(S=S.child;S!==null;)l.push(S,w),S=S.sibling}}u=!1}return u;case Yn:if((g===5||g===26||g===27)&&Fg(l.stateNode,u.value))return!0;break;case lr:if((g===5||g===6||g===26||g===27)&&(l=Hg(l),l!==null&&0<=l.indexOf(u.value)))return!0;break;case Hs:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function $d(l){switch(l.$$typeof){case Su:return"<"+(c(l.value)||"Unknown")+">";case ds:return":has("+($d(l)||"")+")";case Yn:return'[role="'+l.value+'"]';case lr:return'"'+l.value+'"';case Hs:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function ba(l,u){var g=[];l=[l,0];for(var S=0;S<l.length;){var A=l[S++],w=A.tag,q=l[S++],$=u[q];if(w!==5&&w!==26&&w!==27||!uu(A)){for(;$!=null&&ho(A,$);)q++,$=u[q];if(q===u.length)g.push(A);else for(A=A.child;A!==null;)l.push(A,q),A=A.sibling}}return g}function vc(l,u){if(!Mo)throw Error(a(363));l=Ql(l),l=ba(l,u),u=[],l=Array.from(l);for(var g=0;g<l.length;){var S=l[g++],A=S.tag;if(A===5||A===26||A===27)uu(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return u}function ei(){if((pn&2)!==0&&sn!==0)return sn&-sn;if(Le.T!==null){var l=Ga;return l!==0?l:Ct()}return Ig()}function tp(){Za===0&&(Za=(sn&536870912)===0||fn?X():536870912);var l=Xa.current;return l!==null&&(l.flags|=32),Za}function Di(l,u,g){(l===Tn&&Un===2||l.cancelPendingCommit!==null)&&(Gi(l,0),Ea(l,sn,Za,!1)),W(l,g),((pn&2)===0||l!==Tn)&&(l===Tn&&((pn&2)===0&&(Xr|=g),Pn===4&&Ea(l,sn,Za,!1)),Vt(l))}function po(l,u,g){if((pn&6)!==0)throw Error(a(327));var S=!g&&(u&60)===0&&(u&l.expiredLanes)===0||B(l,u),A=S?np(l,u):qf(l,u,!0),w=S;do{if(A===0){Wa&&!S&&Ea(l,u,0,!1);break}else if(A===6)Ea(l,u,0,!ms);else{if(g=l.current.alternate,w&&!Jl(g)){A=qf(l,u,!1),w=!1;continue}if(A===2){if(w=u,l.errorRecoveryDisabledLanes&w)var q=0;else q=l.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){u=q;t:{var $=l;A=yl;var ft=Xi&&$.current.memoizedState.isDehydrated;if(ft&&(Gi($,q).flags|=256),q=qf($,q,!1),q!==2){if(Ei&&!ft){$.errorRecoveryDisabledLanes|=w,Xr|=w,A=4;break t}w=ti,ti=A,w!==null&&yc(w)}A=q}if(w=!1,A!==2)continue}}if(A===1){Gi(l,0),Ea(l,u,0,!0);break}t:{switch(S=l,A){case 0:case 1:throw Error(a(345));case 4:if((u&4194176)===u){Ea(S,u,Za,!ms);break t}break;case 2:ti=null;break;case 3:case 5:break;default:throw Error(a(329))}if(S.finishedWork=g,S.finishedLanes=u,(u&62914560)===u&&(w=da+300-us(),10<w)){if(Ea(S,u,Za,!ms),P(S,0)!==0)break t;S.timeoutHandle=di(Xf.bind(null,S,g,ti,Fc,_h,u,Za,Xr,ur,ms,2,-0,0),w);break t}Xf(S,g,ti,Fc,_h,u,Za,Xr,ur,ms,0,-0,0)}}break}while(!0);Vt(l)}function yc(l){ti===null?ti=l:ti.push.apply(ti,l)}function Xf(l,u,g,S,A,w,q,$,ft,wt,Yt,ie,le){var Fe=u.subtreeFlags;if((Fe&8192||(Fe&16785408)===16785408)&&(dp(),Ff(u),u=pi(),u!==null)){l.cancelPendingCommit=u(go.bind(null,l,g,S,A,q,$,ft,1,ie,le)),Ea(l,w,q,!wt);return}go(l,g,S,A,q,$,ft,Yt,ie,le)}function Jl(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var A=g[S],w=A.getSnapshot;A=A.value;try{if(!Aa(w(),A))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ea(l,u,g,S){u&=~Hc,u&=~Xr,l.suspendedLanes|=u,l.pingedLanes&=~u,S&&(l.warmLanes|=u),S=l.expirationTimes;for(var A=u;0<A;){var w=31-fa(A),q=1<<w;S[w]=-1,A&=~q}g!==0&&it(l,g,u)}function _c(){return(pn&6)===0?(ee(0),!1):!0}function $l(){if(De!==null){if(Un===0)var l=De.return;else l=De,ka=Vs=null,ws(l),Co=null,wo=0,l=De;for(;l!==null;)Cg(l.alternate,l),l=l.return;De=null}}function Gi(l,u){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;g!==xo&&(l.timeoutHandle=xo,$f(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),$l(),Tn=l,De=g=ss(l.current,null),sn=u,Un=0,Ji=null,ms=!1,Wa=B(l,u),Ei=!1,ur=Za=Hc=Xr=ja=Pn=0,ti=yl=null,_h=!1,(u&8)!==0&&(u|=u&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=u;0<S;){var A=31-fa(S),w=1<<A;u|=l[A],S&=~w}return $i=u,Y(),g}function Pa(l,u){Ke=null,Le.H=Jn,u===vu?(u=he(),Un=3):u===Ic?(u=he(),Un=4):Un=u===vh?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ji=u,De===null&&(Pn=1,ql(l,ct(u,l.current)))}function mo(){var l=Xa.current;return l===null?!0:(sn&4194176)===sn?Ln===null:(sn&62914560)===sn||(sn&536870912)!==0?l===Ln:!1}function Ks(){var l=Le.H;return Le.H=Jn,l===null?Jn:l}function Qs(){var l=Le.A;return Le.A=xu,l}function Dr(){Pn=4,ms||(sn&4194176)!==sn&&Xa.current!==null||(Wa=!0),(ja&134217727)===0&&(Xr&134217727)===0||Tn===null||Ea(Tn,sn,Za,!1)}function qf(l,u,g){var S=pn;pn|=2;var A=Ks(),w=Qs();(Tn!==l||sn!==u)&&(Fc=null,Gi(l,u)),u=!1;var q=Pn;t:do try{if(Un!==0&&De!==null){var $=De,ft=Ji;switch(Un){case 8:$l(),q=6;break t;case 3:case 2:case 6:Xa.current===null&&(u=!0);var wt=Un;if(Un=0,Ji=null,as(l,$,ft,wt),g&&Wa){q=0;break t}break;default:wt=Un,Un=0,Ji=null,as(l,$,ft,wt)}}ep(),q=Pn;break}catch(Yt){Pa(l,Yt)}while(!0);return u&&l.shellSuspendCounter++,ka=Vs=null,pn=S,Le.H=A,Le.A=w,De===null&&(Tn=null,sn=0,Y()),q}function ep(){for(;De!==null;)Zn(De)}function np(l,u){var g=pn;pn|=2;var S=Ks(),A=Qs();Tn!==l||sn!==u?(Fc=null,Mu=us()+500,Gi(l,u)):Wa=B(l,u);t:do try{if(Un!==0&&De!==null){u=De;var w=Ji;e:switch(Un){case 1:Un=0,Ji=null,as(l,u,w,1);break;case 2:if(ue(w)){Un=0,Ji=null,gn(u);break}u=function(){Un===2&&Tn===l&&(Un=7),Vt(l)},w.then(u,u);break t;case 3:Un=7;break t;case 4:Un=5;break t;case 7:ue(w)?(Un=0,Ji=null,gn(u)):(Un=0,Ji=null,as(l,u,w,7));break;case 5:var q=null;switch(De.tag){case 26:q=De.memoizedState;case 5:case 27:var $=De,ft=$.type,wt=$.pendingProps;if(q?al(q):th(ft,wt)){Un=0,Ji=null;var Yt=$.sibling;if(Yt!==null)De=Yt;else{var ie=$.return;ie!==null?(De=ie,Ba(ie)):De=null}break e}}Un=0,Ji=null,as(l,u,w,5);break;case 6:Un=0,Ji=null,as(l,u,w,6);break;case 8:$l(),Pn=6;break t;default:throw Error(a(462))}}la();break}catch(le){Pa(l,le)}while(!0);return ka=Vs=null,Le.H=S,Le.A=A,pn=g,De!==null?0:(Tn=null,sn=0,Y(),Pn)}function la(){for(;De!==null&&!y0();)Zn(De)}function Zn(l){var u=Tg(l.alternate,l,$i);l.memoizedProps=l.pendingProps,u===null?Ba(l):De=u}function gn(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=_g(g,u,u.pendingProps,u.type,void 0,sn);break;case 11:u=_g(g,u,u.pendingProps,u.type.render,u.ref,sn);break;case 5:ws(u);default:Cg(g,u),u=De=Sc(u,$i),u=Tg(g,u,$i)}l.memoizedProps=l.pendingProps,u===null?Ba(l):De=u}function as(l,u,g,S){ka=Vs=null,ws(u),Co=null,wo=0;var A=u.return;try{if(N_(l,A,u,g,sn)){Pn=1,ql(l,ct(g,l.current)),De=null;return}}catch(w){if(A!==null)throw De=A,w;Pn=1,ql(l,ct(g,l.current)),De=null;return}u.flags&32768?(fn||S===1?l=!0:Wa||(sn&536870912)!==0?l=!1:(ms=l=!0,(S===2||S===3||S===6)&&(S=Xa.current,S!==null&&S.tag===13&&(S.flags|=16384))),kf(u,l)):Ba(u)}function Ba(l){var u=l;do{if((u.flags&32768)!==0){kf(u,ms);return}l=u.return;var g=Rg(u.alternate,u,$i);if(g!==null){De=g;return}if(u=u.sibling,u!==null){De=u;return}De=u=l}while(u!==null);Pn===0&&(Pn=5)}function kf(l,u){do{var g=L_(l.alternate,l);if(g!==null){g.flags&=32767,De=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){De=l;return}De=l=g}while(l!==null);Pn=6,De=null}function go(l,u,g,S,A,w,q,$,ft,wt){var Yt=Le.T,ie=Pr();try{Qi(2),Le.T=null,Ng(l,u,g,S,ie,A,w,q,$,ft,wt)}finally{Le.T=Yt,Qi(ie)}}function Ng(l,u,g,S,A,w,q,$){do Us();while(cr!==null);if((pn&6)!==0)throw Error(a(327));var ft=l.finishedWork;if(S=l.finishedLanes,ft===null)return null;if(l.finishedWork=null,l.finishedLanes=0,ft===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var wt=ft.lanes|ft.childLanes;if(wt|=Bs,ot(l,S,wt,w,q,$),l===Tn&&(De=Tn=null,sn=0),(ft.subtreeFlags&10256)===0&&(ft.flags&10256)===0||Fs||(Fs=!0,Lo=wt,xh=g,Nr(dh,function(){return Us(),null})),g=(ft.flags&15990)!==0,(ft.subtreeFlags&15990)!==0||g?(g=Le.T,Le.T=null,w=Pr(),Qi(2),q=pn,pn|=4,pc(l,ft),Kd(ft,l),Pg(l.containerInfo),l.current=ft,If(l,ft.alternate,ft),fh(),pn=q,Qi(w),Le.T=g):l.current=ft,Fs?(Fs=!1,cr=l,_l=S):ip(l,wt),wt=l.pendingLanes,wt===0&&(Oo=null),I(ft.stateNode),Vt(l),u!==null)for(A=l.onRecoverableError,ft=0;ft<u.length;ft++)wt=u[ft],A(wt.value,{componentStack:wt.stack});return(_l&3)!==0&&Us(),wt=l.pendingLanes,(S&4194218)!==0&&(wt&42)!==0?l===Sh?bu++:(bu=0,Sh=l):bu=0,ee(0),null}function ip(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,cc(u)))}function Us(){if(cr!==null){var l=cr,u=Lo;Lo=0;var g=gt(_l),S=32>g?32:g;g=Le.T;var A=Pr();try{if(Qi(S),Le.T=null,cr===null)var w=!1;else{S=xh,xh=null;var q=cr,$=_l;if(cr=null,_l=0,(pn&6)!==0)throw Error(a(331));var ft=pn;if(pn|=4,Gf(q.current),Qd(q,q.current,$,S),pn=ft,ee(0,!1),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(ai,q)}catch{}w=!0}return w}finally{Qi(A),Le.T=g,ip(l,u)}}return!1}function tu(l,u,g){u=ct(g,u),u=Yl(l.stateNode,u,2),l=$t(l,u,2),l!==null&&(W(l,2),Vt(l))}function bn(l,u,g){if(l.tag===3)tu(l,l,g);else for(;u!==null;){if(u.tag===3){tu(u,l,g);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Oo===null||!Oo.has(S))){l=ct(g,l),g=Pd(2),S=$t(u,g,2),S!==null&&(pg(g,S,u,l),W(S,2),Vt(S));break}}u=u.return}}function el(l,u,g){var S=l.pingCache;if(S===null){S=l.pingCache=new ps;var A=new Set;S.set(u,A)}else A=S.get(u),A===void 0&&(A=new Set,S.set(u,A));A.has(g)||(Ei=!0,A.add(g),l=ap.bind(null,l,u,g),u.then(l,l))}function ap(l,u,g){var S=l.pingCache;S!==null&&S.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Tn===l&&(sn&g)===g&&(Pn===4||Pn===3&&(sn&62914560)===sn&&300>us()-da?(pn&2)===0&&Gi(l,0):Hc|=g,ur===sn&&(ur=0)),Vt(l)}function vo(l,u){u===0&&(u=z()),l=Xt(l,u),l!==null&&(W(l,u),Vt(l))}function Ur(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),vo(l,g)}function yo(l,u){var g=0;switch(l.tag){case 13:var S=l.stateNode,A=l.memoizedState;A!==null&&(g=A.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(u),vo(l,g)}function Nr(l,u){return zc(l,u)}function sp(l,u,g,S){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ss(l,u){var g=l.alternate;return g===null?(g=e(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&31457280,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Sc(l,u){l.flags&=31457282;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Js(l,u,g,S,A,w){var q=0;if(S=l,typeof l=="function")xc(l)&&(q=1);else if(typeof l=="string")q=Va&&On?Nc(l,g,Mi.current)?26:tr(l)?27:5:Va?Nc(l,g,Mi.current)?26:5:On&&tr(l)?27:5;else t:switch(l){case _o:return Qn(g.children,A,w,u);case Tc:q=8,A|=24;break;case Zf:return l=e(12,g,u,A|2),l.elementType=Zf,l.lanes=w,l;case Kf:return l=e(13,g,u,A),l.elementType=Kf,l.lanes=w,l;case au:return l=e(19,g,u,A),l.elementType=au,l.lanes=w,l;case lp:return Mc(g,A,w,u);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Ac:case Ns:q=10;break t;case op:q=9;break t;case Rc:q=11;break t;case Qf:q=14;break t;case os:q=16,S=null;break t}q=29,g=Error(a(130,l===null?"null":typeof l,"")),S=null}return u=e(q,g,u,A),u.elementType=l,u.type=S,u.lanes=w,u}function Qn(l,u,g,S){return l=e(7,l,S,u),l.lanes=g,l}function Mc(l,u,g,S){l=e(22,l,S,u),l.elementType=lp,l.lanes=g;var A={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var w=A._current;if(w===null)throw Error(a(456));if((A._pendingVisibility&2)===0){var q=Xt(w,2);q!==null&&(A._pendingVisibility|=2,Di(q,w,2))}},attach:function(){var w=A._current;if(w===null)throw Error(a(456));if((A._pendingVisibility&2)!==0){var q=Xt(w,2);q!==null&&(A._pendingVisibility&=-3,Di(q,w,2))}}};return l.stateNode=A,l}function Yf(l,u,g){return l=e(6,l,null,u),l.lanes=g,l}function rp(l,u,g){return u=e(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}function z_(l,u,g,S,A,w,q,$){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=xo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=S,this.onUncaughtError=A,this.onCaughtError=w,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function Og(l,u,g,S,A,w,q,$,ft,wt,Yt,ie){return l=new z_(l,u,g,q,$,ft,wt,ie),u=1,w===!0&&(u|=24),w=e(3,null,null,u),l.current=w,w.stateNode=l,u=lo(),u.refCount++,l.pooledCache=u,u.refCount++,w.memoizedState={element:S,isDehydrated:g,cache:u},fe(w),l}function hi(l){return l?(l=To,l):To}function Wf(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=M(u),l=l!==null?T(l):null,l===null?null:ou(l.stateNode)}function eu(l,u,g,S,A,w){A=hi(A),S.context===null?S.context=A:S.pendingContext=A,S=Ot(u),S.payload={element:g},w=w===void 0?null:w,w!==null&&(S.callback=w),g=$t(l,S,u),g!==null&&(Di(g,l,u),ge(g,l,u))}function nu(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function bc(l,u){nu(l,u),(l=l.alternate)&&nu(l,u)}var Ge={},iu=_d(),Ia=$F(),jf=Object.assign,P_=Symbol.for("react.element"),Ec=Symbol.for("react.transitional.element"),rs=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),Tc=Symbol.for("react.strict_mode"),Zf=Symbol.for("react.profiler"),Ac=Symbol.for("react.provider"),op=Symbol.for("react.consumer"),Ns=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),au=Symbol.for("react.suspense_list"),Qf=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),lp=Symbol.for("react.offscreen"),Lg=Symbol.for("react.memo_cache_sentinel"),Or=Symbol.iterator,up=Symbol.for("react.client.reference"),Le=iu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$s,Lr,nl=!1,su=Array.isArray,cp=t.rendererVersion,Cc=t.rendererPackageName,ru=t.extraDevToolsConfig,ou=t.getPublicInstance,zg=t.getRootHostContext,lu=t.getChildHostContext,Jf=t.prepareForCommit,Pg=t.resetAfterCommit,fp=t.createInstance,wc=t.appendInitialChild,zr=t.finalizeInitialChildren,Xe=t.shouldSetTextContent,Cn=t.createTextInstance,di=t.scheduleTimeout,$f=t.cancelTimeout,xo=t.noTimeout,ua=t.isPrimaryRenderer;t.warnsIfNotActing;var Si=t.supportsMutation,ls=t.supportsPersistence,Xi=t.supportsHydration,Bg=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ni=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Qi=t.setCurrentUpdatePriority,Pr=t.getCurrentUpdatePriority,Ig=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var Vg=t.shouldAttemptEagerTransition,B_=t.detachDeletedInstance;t.requestPostPaintCallback;var hp=t.maySuspendCommit,th=t.preloadInstance,dp=t.startSuspendingCommit,ca=t.suspendInstance,pi=t.waitForCommitToBeReady,So=t.NotPendingTransition,Os=t.HostTransitionContext,eh=t.resetFormInstance;t.bindToConsole;var pp=t.supportsMicrotasks,Br=t.scheduleMicrotask,Mo=t.supportsTestSelectors,mp=t.findFiberRoot,gp=t.getBoundingRect,Hg=t.getTextContent,uu=t.isHiddenSubtree,Fg=t.matchAccessibilityRole,Gg=t.setFocusIfFocusable,Xg=t.setupIntersectionObserver,qg=t.appendChild,vp=t.appendChildToContainer,kg=t.commitTextUpdate,I_=t.commitMount,Yg=t.commitUpdate,Wg=t.insertBefore,jg=t.insertInContainerBefore,yp=t.removeChild,Zg=t.removeChildFromContainer,_p=t.resetTextContent,Kg=t.hideInstance,Qg=t.hideTextInstance,Jg=t.unhideInstance,V_=t.unhideTextInstance,$g=t.clearContainer,cu=t.cloneInstance,Dc=t.createContainerChildSet,xp=t.appendChildToContainerChildSet,nh=t.finalizeContainerChildren,fu=t.replaceContainerChildren,Sp=t.cloneHiddenInstance,Mp=t.cloneHiddenTextInstance,ih=t.isSuspenseInstancePending,ah=t.isSuspenseInstanceFallback,t0=t.getSuspenseInstanceFallbackErrorDetails,e0=t.registerSuspenseInstanceRetry,bp=t.canHydrateFormStateMarker,n0=t.isFormStateMarkerMatching,Ep=t.getNextHydratableSibling,sh=t.getFirstHydratableChild,i0=t.getFirstHydratableChildWithinContainer,a0=t.getFirstHydratableChildWithinSuspenseInstance,H_=t.canHydrateInstance,Tp=t.canHydrateTextInstance,s0=t.canHydrateSuspenseInstance,r0=t.hydrateInstance,Ap=t.hydrateTextInstance,o0=t.hydrateSuspenseInstance,l0=t.getNextHydratableInstanceAfterSuspenseInstance,F_=t.commitHydratedContainer,G_=t.commitHydratedSuspenseInstance,u0=t.clearSuspenseBoundary,Uc=t.clearSuspenseBoundaryFromContainer,rh=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var oh=t.validateHydratableInstance,c0=t.validateHydratableTextInstance,Va=t.supportsResources,Nc=t.isHostHoistableType,lh=t.getHoistableRoot,Rp=t.getResource,f0=t.acquireResource,il=t.releaseResource,Oc=t.hydrateHoistable,Lc=t.mountHoistable,hu=t.unmountHoistable,uh=t.createHoistableInstance,h0=t.prepareToCommitHoistables,d0=t.mayResourceSuspendCommit,al=t.preloadResource,p0=t.suspendResource,On=t.supportsSingletons,Ls=t.resolveSingletonInstance,bo=t.clearSingleton,m0=t.acquireSingletonInstance,Eo=t.releaseSingletonInstance,tr=t.isHostSingletonType,ii=[],Ir=-1,To={},fa=Math.clz32?Math.clz32:U,g0=Math.log,v0=Math.LN2,er=128,sl=4194304,zc=Ia.unstable_scheduleCallback,ch=Ia.unstable_cancelCallback,y0=Ia.unstable_shouldYield,fh=Ia.unstable_requestPaint,us=Ia.unstable_now,hh=Ia.unstable_ImmediatePriority,_0=Ia.unstable_UserBlockingPriority,dh=Ia.unstable_NormalPriority,X_=Ia.unstable_IdlePriority,x0=Ia.log,Ui=Ia.unstable_setDisableYieldValue,ai=null,Ta=null,Aa=typeof Object.is=="function"?Object.is:Z,Cp=new WeakMap,rl=[],ol=0,ll=null,du=0,Ha=[],Fa=0,Ao=null,zs=1,Ps="",Mi=R(null),pu=R(null),nr=R(null),ul=R(null),qi=null,ki=null,fn=!1,cs=null,Ni=!1,Pc=Error(a(519)),fs=[],cl=0,Bs=0,Bc=null,Vr=null,fl=!1,Hn=!1,wp=!1,mu=0,gu=null,hl=0,Ga=0,dl=null,Hr=!1,pl=!1,ir=Object.prototype.hasOwnProperty,vu=Error(a(460)),Ic=Error(a(474)),Vc={then:function(){}},Ro=null,Co=null,wo=0,Do=yi(!0),ar=yi(!1),Fn=R(null),yu=R(0),Xa=R(null),Ln=null,bi=R(0),Fr=0,Ke=null,Ae=null,dn=null,hs=!1,ml=!1,Uo=!1,ph=0,gl=0,Oi=null,Is=0,mh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Jn={readContext:Vi,use:xt,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn};Jn.useCacheRefresh=wn,Jn.useMemoCache=wn,Jn.useHostTransitionStatus=wn,Jn.useFormState=wn,Jn.useActionState=wn,Jn.useOptimistic=wn;var No={readContext:Vi,use:xt,useCallback:function(l,u){return G().memoizedState=[l,u===void 0?null:u],l},useContext:Vi,useEffect:Af,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,Ju(4194308,4,Rf.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Ju(4194308,4,l,u)},useInsertionEffect:function(l,u){Ju(4,2,l,u)},useMemo:function(l,u){var g=G();u=u===void 0?null:u;var S=l();if(Uo){j(!0);try{l()}finally{j(!1)}}return g.memoizedState=[S,u],S},useReducer:function(l,u,g){var S=G();if(g!==void 0){var A=g(u);if(Uo){j(!0);try{g(u)}finally{j(!1)}}}else A=u;return S.memoizedState=S.baseState=A,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:A},S.queue=l,l=l.dispatch=wf.bind(null,Ke,l),[S.memoizedState,l]},useRef:function(l){var u=G();return l={current:l},u.memoizedState=l},useState:function(l){l=Ze(l);var u=l.queue,g=zd.bind(null,Ke,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:io,useDeferredValue:function(l,u){var g=G();return ec(g,l,u)},useTransition:function(){var l=Ze(!1);return l=Vl.bind(null,Ke,l.queue,!0,!1),G().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var S=Ke,A=G();if(fn){if(g===void 0)throw Error(a(407));g=g()}else{if(g=u(),Tn===null)throw Error(a(349));(sn&60)!==0||Me(S,u,g)}A.memoizedState=g;var w={value:g,getSnapshot:u};return A.queue=w,Af(Ye.bind(null,S,w,l),[l]),S.flags|=2048,sa(9,ve.bind(null,S,w,g,u),{destroy:void 0},null),g},useId:function(){var l=G(),u=Tn.identifierPrefix;if(fn){var g=Ps,S=zs;g=(S&~(1<<32-fa(S)-1)).toString(32)+g,u=":"+u+"R"+g,g=ph++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=Is++,u=":"+u+"r"+g.toString(32)+":";return l.memoizedState=u},useCacheRefresh:function(){return G().memoizedState=Ld.bind(null,Ke)}};No.useMemoCache=ut,No.useHostTransitionStatus=nc,No.useFormState=Dn,No.useActionState=Dn,No.useOptimistic=function(l){var u=G();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=Fl.bind(null,Ke,!0,g),g.dispatch=u,[l,u]};var ha={readContext:Vi,use:xt,useCallback:Jo,useContext:Vi,useEffect:Ud,useImperativeHandle:Cf,useInsertionEffect:hg,useLayoutEffect:tc,useMemo:Nd,useReducer:Qt,useRef:js,useState:function(){return Qt(Ht)},useDebugValue:io,useDeferredValue:function(l,u){var g=rt();return Od(g,Ae.memoizedState,l,u)},useTransition:function(){var l=Qt(Ht)[0],u=rt().memoizedState;return[typeof l=="boolean"?l:_t(l),u]},useSyncExternalStore:we,useId:Hl};ha.useCacheRefresh=Sr,ha.useMemoCache=ut,ha.useHostTransitionStatus=nc,ha.useFormState=Bi,ha.useActionState=Bi,ha.useOptimistic=function(l,u){var g=rt();return _n(g,Ae,l,u)};var qa={readContext:Vi,use:xt,useCallback:Jo,useContext:Vi,useEffect:Ud,useImperativeHandle:Cf,useInsertionEffect:hg,useLayoutEffect:tc,useMemo:Nd,useReducer:oe,useRef:js,useState:function(){return oe(Ht)},useDebugValue:io,useDeferredValue:function(l,u){var g=rt();return Ae===null?ec(g,l,u):Od(g,Ae.memoizedState,l,u)},useTransition:function(){var l=oe(Ht)[0],u=rt().memoizedState;return[typeof l=="boolean"?l:_t(l),u]},useSyncExternalStore:we,useId:Hl};qa.useCacheRefresh=Sr,qa.useMemoCache=ut,qa.useHostTransitionStatus=nc,qa.useFormState=Ci,qa.useActionState=Ci,qa.useOptimistic=function(l,u){var g=rt();return Ae!==null?_n(g,Ae,l,u):(g.baseState=l,[l,g.queue.dispatch])};var sr={isMounted:function(l){return(l=l._reactInternals)?y(l)===l:!1},enqueueSetState:function(l,u,g){l=l._reactInternals;var S=ei(),A=Ot(S);A.payload=u,g!=null&&(A.callback=g),u=$t(l,A,S),u!==null&&(Di(u,l,S),ge(u,l,S))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var S=ei(),A=Ot(S);A.tag=1,A.payload=u,g!=null&&(A.callback=g),u=$t(l,A,S),u!==null&&(Di(u,l,S),ge(u,l,S))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=ei(),S=Ot(g);S.tag=2,u!=null&&(S.callback=u),u=$t(l,S,g),u!==null&&(Di(u,l,g),ge(u,l,g))}},gh=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},vh=Error(a(461)),zn=!1,yh={dehydrated:null,treeContext:null,retryLane:0},Gr=R(null),Vs=null,ka=null,_u=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,S){l.push(S)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},S0=Ia.unstable_scheduleCallback,M0=Ia.unstable_NormalPriority,Gn={$$typeof:Ns,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Dp=Le.S;Le.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&At(l,u),Dp!==null&&Dp(l,u)};var rr=R(null),or=!1,$n=!1,Up=!1,En=typeof WeakSet=="function"?WeakSet:Set,He=null,en=!1,Ee=null,We=!1,Kn=null,Ya=8192,xu={getCacheForType:function(l){var u=Vi(Gn),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g}},Su=0,ds=1,Yn=2,Hs=3,lr=4;if(typeof Symbol=="function"&&Symbol.for){var vl=Symbol.for;Su=vl("selector.component"),ds=vl("selector.has_pseudo_class"),Yn=vl("selector.role"),Hs=vl("selector.test_id"),lr=vl("selector.text")}var ps=typeof WeakMap=="function"?WeakMap:Map,pn=0,Tn=null,De=null,sn=0,Un=0,Ji=null,ms=!1,Wa=!1,Ei=!1,$i=0,Pn=0,ja=0,Xr=0,Hc=0,Za=0,ur=0,yl=null,ti=null,_h=!1,da=0,Mu=1/0,Fc=null,Oo=null,Fs=!1,cr=null,_l=0,Lo=0,xh=null,bu=0,Sh=null;return Ge.attemptContinuousHydration=function(l){if(l.tag===13){var u=Xt(l,67108864);u!==null&&Di(u,l,67108864),bc(l,67108864)}},Ge.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var u=ei(),g=Xt(l,u);g!==null&&Di(g,l,u),bc(l,u)}},Ge.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var u=N(l.pendingLanes);if(u!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;u;){var g=1<<31-fa(u);l.entanglements[1]|=g,u&=~g}Vt(l),(pn&6)===0&&(Mu=us()+500,ee(0))}}break;case 13:u=Xt(l,2),u!==null&&Di(u,l,2),_c(),bc(l,2)}},Ge.batchedUpdates=function(l,u){return l(u)},Ge.createComponentSelector=function(l){return{$$typeof:Su,value:l}},Ge.createContainer=function(l,u,g,S,A,w,q,$,ft,wt){return Og(l,u,!1,null,g,S,w,q,$,ft,wt,null)},Ge.createHasPseudoClassSelector=function(l){return{$$typeof:ds,value:l}},Ge.createHydrationContainer=function(l,u,g,S,A,w,q,$,ft,wt,Yt,ie,le){return l=Og(g,S,!0,l,A,w,$,ft,wt,Yt,ie,le),l.context=hi(null),g=l.current,S=ei(),A=Ot(S),A.callback=u??null,$t(g,A,S),l.current.lanes=S,W(l,S),Vt(l),l},Ge.createPortal=function(l,u,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rs,key:S==null?null:""+S,children:l,containerInfo:u,implementation:g}},Ge.createRoleSelector=function(l){return{$$typeof:Yn,value:l}},Ge.createTestNameSelector=function(l){return{$$typeof:Hs,value:l}},Ge.createTextSelector=function(l){return{$$typeof:lr,value:l}},Ge.defaultOnCaughtError=function(l){console.error(l)},Ge.defaultOnRecoverableError=function(l){gh(l)},Ge.defaultOnUncaughtError=function(l){gh(l)},Ge.deferredUpdates=function(l){var u=Le.T,g=Pr();try{return Qi(32),Le.T=null,l()}finally{Qi(g),Le.T=u}},Ge.discreteUpdates=function(l,u,g,S,A){var w=Le.T,q=Pr();try{return Qi(2),Le.T=null,l(u,g,S,A)}finally{Qi(q),Le.T=w,pn===0&&(Mu=us()+500)}},Ge.findAllNodes=vc,Ge.findBoundingRects=function(l,u){if(!Mo)throw Error(a(363));u=vc(l,u),l=[];for(var g=0;g<u.length;g++)l.push(gp(u[g]));for(u=l.length-1;0<u;u--){g=l[u];for(var S=g.x,A=S+g.width,w=g.y,q=w+g.height,$=u-1;0<=$;$--)if(u!==$){var ft=l[$],wt=ft.x,Yt=wt+ft.width,ie=ft.y,le=ie+ft.height;if(S>=wt&&w>=ie&&A<=Yt&&q<=le){l.splice(u,1);break}else if(S!==wt||g.width!==ft.width||le<w||ie>q){if(!(w!==ie||g.height!==ft.height||Yt<S||wt>A)){wt>S&&(ft.width+=wt-S,ft.x=S),Yt<A&&(ft.width=A-wt),l.splice(u,1);break}}else{ie>w&&(ft.height+=ie-w,ft.y=w),le<q&&(ft.height=q-ie),l.splice(u,1);break}}}return l},Ge.findHostInstance=Wf,Ge.findHostInstanceWithNoPortals=function(l){return l=M(l),l=l!==null?C(l):null,l===null?null:ou(l.stateNode)},Ge.findHostInstanceWithWarning=function(l){return Wf(l)},Ge.flushPassiveEffects=Us,Ge.flushSyncFromReconciler=function(l){var u=pn;pn|=1;var g=Le.T,S=Pr();try{if(Qi(2),Le.T=null,l)return l()}finally{Qi(S),Le.T=g,pn=u,(pn&6)===0&&ee(0)}},Ge.flushSyncWork=_c,Ge.focusWithin=function(l,u){if(!Mo)throw Error(a(363));for(l=Ql(l),u=ba(l,u),u=Array.from(u),l=0;l<u.length;){var g=u[l++],S=g.tag;if(!uu(g)){if((S===5||S===26||S===27)&&Gg(g.stateNode))return!0;for(g=g.child;g!==null;)u.push(g),g=g.sibling}}return!1},Ge.getFindAllNodesFailureDescription=function(l,u){if(!Mo)throw Error(a(363));var g=0,S=[];l=[Ql(l),0];for(var A=0;A<l.length;){var w=l[A++],q=w.tag,$=l[A++],ft=u[$];if((q!==5&&q!==26&&q!==27||!uu(w))&&(ho(w,ft)&&(S.push($d(ft)),$++,$>g&&(g=$)),$<u.length))for(w=w.child;w!==null;)l.push(w,$),w=w.sibling}if(g<u.length){for(l=[];g<u.length;g++)l.push($d(u[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},Ge.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return ou(l.child.stateNode);default:return l.child.stateNode}},Ge.injectIntoDevTools=function(){var l={bundleType:0,version:cp,rendererPackageName:Cc,currentDispatcherRef:Le,findFiberByHostInstance:Bg,reconcilerVersion:"19.0.0"};if(ru!==null&&(l.rendererConfig=ru),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)l=!0;else{try{ai=u.inject(l),Ta=u}catch{}l=!!u.checkDCE}}return l},Ge.isAlreadyRendering=function(){return!1},Ge.observeVisibleRects=function(l,u,g,S){if(!Mo)throw Error(a(363));l=vc(l,u);var A=Xg(l,g,S).disconnect;return{disconnect:function(){A()}}},Ge.shouldError=function(){return null},Ge.shouldSuspend=function(){return!1},Ge.startHostTransition=function(l,u,g,S){if(l.tag!==5)throw Error(a(476));var A=Zs(l).queue;Vl(l,A,u,So,g===null?n:function(){var w=Zs(l).next.queue;return ao(l,w,{},ei()),g(S)})},Ge.updateContainer=function(l,u,g,S){var A=u.current,w=ei();return eu(A,w,l,u,g,S),w},Ge.updateContainerSync=function(l,u,g,S){return u.tag===0&&Us(),eu(u.current,2,l,u,g,S),2},Ge},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(DS)),DS.exports}var a2;function e6(){return a2||(a2=1,wS.exports=t6()),wS.exports}var n6=e6();const i6=NM(n6);var OS={exports:{}},LS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s2;function a6(){return s2||(s2=1,function(i){function t(I,j){var Z=I.length;I.push(j);t:for(;0<Z;){var ct=Z-1>>>1,k=I[ct];if(0<a(k,j))I[ct]=j,I[Z]=k,Z=ct;else break t}}function e(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var j=I[0],Z=I.pop();if(Z!==j){I[0]=Z;t:for(var ct=0,k=I.length,tt=k>>>1;ct<tt;){var bt=2*(ct+1)-1,Rt=I[bt],et=bt+1,Et=I[et];if(0>a(Rt,Z))et<k&&0>a(Et,Rt)?(I[ct]=Et,I[et]=Z,ct=et):(I[ct]=Rt,I[bt]=Z,ct=bt);else if(et<k&&0>a(Et,Z))I[ct]=Et,I[et]=Z,ct=et;else break t}}return j}function a(I,j){var Z=I.sortIndex-j.sortIndex;return Z!==0?Z:I.id-j.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],m=[],v=1,y=null,_=3,M=!1,T=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function U(I){for(var j=e(m);j!==null;){if(j.callback===null)n(m);else if(j.startTime<=I)n(m),j.sortIndex=j.expirationTime,t(d,j);else break;j=e(m)}}function N(I){if(C=!1,U(I),!T)if(e(d)!==null)T=!0,pt();else{var j=e(m);j!==null&&gt(N,j.startTime-I)}}var P=!1,B=-1,H=5,X=-1;function z(){return!(i.unstable_now()-X<H)}function L(){if(P){var I=i.unstable_now();X=I;var j=!0;try{t:{T=!1,C&&(C=!1,b(B),B=-1),M=!0;var Z=_;try{e:{for(U(I),y=e(d);y!==null&&!(y.expirationTime>I&&z());){var ct=y.callback;if(typeof ct=="function"){y.callback=null,_=y.priorityLevel;var k=ct(y.expirationTime<=I);if(I=i.unstable_now(),typeof k=="function"){y.callback=k,U(I),j=!0;break e}y===e(d)&&n(d),U(I)}else n(d);y=e(d)}if(y!==null)j=!0;else{var tt=e(m);tt!==null&&gt(N,tt.startTime-I),j=!1}}break t}finally{y=null,_=Z,M=!1}j=void 0}}finally{j?W():P=!1}}}var W;if(typeof D=="function")W=function(){D(L)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,it=ot.port2;ot.port1.onmessage=L,W=function(){it.postMessage(null)}}else W=function(){R(L,0)};function pt(){P||(P=!0,W())}function gt(I,j){B=R(function(){I(i.unstable_now())},j)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_continueExecution=function(){T||M||(T=!0,pt())},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return e(d)},i.unstable_next=function(I){switch(_){case 1:case 2:case 3:var j=3;break;default:j=_}var Z=_;_=j;try{return I()}finally{_=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Z=_;_=I;try{return j()}finally{_=Z}},i.unstable_scheduleCallback=function(I,j,Z){var ct=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ct+Z:ct):Z=ct,I){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Z+k,I={id:v++,callback:j,priorityLevel:I,startTime:Z,expirationTime:k,sortIndex:-1},Z>ct?(I.sortIndex=Z,t(m,I),e(d)===null&&I===e(m)&&(C?(b(B),B=-1):C=!0,gt(N,Z-ct))):(I.sortIndex=k,t(d,I),T||M||(T=!0,pt())),I},i.unstable_shouldYield=z,i.unstable_wrapCallback=function(I){var j=_;return function(){var Z=_;_=j;try{return I.apply(this,arguments)}finally{_=Z}}}}(LS)),LS}var r2;function s6(){return r2||(r2=1,OS.exports=a6()),OS.exports}var o2=s6();function e1(i,t,e){if(!i)return;if(e(i)===!0)return i;let n=t?i.return:i.child;for(;n;){const a=e1(n,t,e);if(a)return a;n=t?null:n.sibling}}function $w(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const n1=$w(zt.createContext(null));class t3 extends zt.Component{render(){return zt.createElement(n1.Provider,{value:this._reactInternals},this.props.children)}}function e3(){const i=zt.useContext(n1);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=zt.useId();return zt.useMemo(()=>{for(const e of[i,i?.alternate]){if(!e)continue;const n=e1(e,!1,a=>{let o=a.memoizedState;for(;o;){if(o.memoizedState===t)return!0;o=o.next}});if(n)return n}},[i,t])}const r6=Symbol.for("react.context"),o6=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===r6;function l6(){const i=e3(),[t]=zt.useState(()=>new Map);t.clear();let e=i;for(;e;){const n=e.type;o6(n)&&n!==n1&&!t.has(n)&&t.set(n,zt.use($w(n))),e=e.return}return t}function u6(){const i=l6();return zt.useMemo(()=>Array.from(i.keys()).reduce((t,e)=>n=>zt.createElement(t,null,zt.createElement(e.Provider,{...n,value:i.get(e)})),t=>zt.createElement(t3,{...t})),[i])}function n3(i){let t=i.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const i3=i=>i&&i.isOrthographicCamera,c6=i=>i&&i.hasOwnProperty("current"),f6=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),D_=((i,t)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?zt.useLayoutEffect:zt.useEffect;function h6(i){const t=zt.useRef(i);return D_(()=>void(t.current=i),[i]),t}function d6(){const i=e3(),t=u6();return zt.useMemo(()=>({children:e})=>{const a=!!e1(i,!0,o=>o.type===zt.StrictMode)?zt.StrictMode:zt.Fragment;return on.jsx(a,{children:on.jsx(t,{children:e})})},[i,t])}function p6({set:i}){return D_(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const m6=(i=>(i=class extends zt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function a3(i){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],e),i[1]):i}function Yh(i){var t;return(t=i.__r3f)==null?void 0:t.root.getState()}const ri={obj:i=>i===Object(i)&&!ri.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,t,{arrays:e="shallow",objects:n="reference",strict:a=!0}={}){if(typeof i!=typeof t||!!i!=!!t)return!1;if(ri.str(i)||ri.num(i)||ri.boo(i))return i===t;const o=ri.obj(i);if(o&&n==="reference")return i===t;const c=ri.arr(i);if(c&&e==="reference")return i===t;if((c||o)&&i===t)return!0;let h;for(h in i)if(!(h in t))return!1;if(o&&e==="shallow"&&n==="shallow"){for(h in a?t:i)if(!ri.equ(i[h],t[h],{strict:a,objects:"reference"}))return!1}else for(h in a?t:i)if(i[h]!==t[h])return!1;if(ri.und(h)){if(c&&i.length===0&&t.length===0||o&&Object.keys(i).length===0&&Object.keys(t).length===0)return!0;if(i!==t)return!1}return!0}};function g6(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const t in i){const e=i[t];e?.type!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const s3=["children","key","ref"];function v6(i){const t={};for(const e in i)s3.includes(e)||(t[e]=i[e]);return t}function Hy(i,t,e,n){const a=i;let o=a?.__r3f;return o||(o={root:t,type:e,parent:null,children:[],props:v6(n),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=o)),o}function Qm(i,t){let e=i[t];if(!t.includes("-"))return{root:i,key:t,target:e};e=i;for(const a of t.split("-")){var n;t=a,i=e,e=(n=e)==null?void 0:n[t]}return{root:i,key:t,target:e}}const l2=/-\d+$/;function Fy(i,t){if(ri.str(t.props.attach)){if(l2.test(t.props.attach)){const a=t.props.attach.replace(l2,""),{root:o,key:c}=Qm(i.object,a);Array.isArray(o[c])||(o[c]=[])}const{root:e,key:n}=Qm(i.object,t.props.attach);t.previousAttach=e[n],e[n]=t.object}else ri.fun(t.props.attach)&&(t.previousAttach=t.props.attach(i.object,t.object))}function Gy(i,t){if(ri.str(t.props.attach)){const{root:e,key:n}=Qm(i.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[n]:e[n]=a}else t.previousAttach==null||t.previousAttach(i.object,t.object);delete t.previousAttach}const AM=[...s3,"args","dispose","attach","object","onUpdate","dispose"],u2=new Map;function y6(i){let t=u2.get(i.constructor);try{t||(t=new i.constructor,u2.set(i.constructor,t))}catch{}return t}function _6(i,t){const e={};for(const n in t)if(!AM.includes(n)&&!ri.equ(t[n],i.props[n])){e[n]=t[n];for(const a in t)a.startsWith(`${n}-`)&&(e[a]=t[a])}for(const n in i.props){if(AM.includes(n)||t.hasOwnProperty(n))continue;const{root:a,key:o}=Qm(i.object,n);if(a.constructor&&a.constructor.length===0){const c=y6(a);ri.und(c)||(e[o]=c[o])}else e[o]=0}return e}const x6=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],S6=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Hu(i,t){var e;const n=i.__r3f,a=n&&n3(n).getState(),o=n?.eventCount;for(const h in t){let d=t[h];if(AM.includes(h))continue;if(n&&S6.test(h)){typeof d=="function"?n.handlers[h]=d:delete n.handlers[h],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:m,key:v,target:y}=Qm(i,h);if(y instanceof pd&&d instanceof pd)y.mask=d.mask;else if(y instanceof ce&&f6(d))y.set(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof y.copy=="function"&&d!=null&&d.constructor&&y.constructor===d.constructor)y.copy(d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&Array.isArray(d))typeof y.fromArray=="function"?y.fromArray(d):y.set(...d);else if(y!==null&&typeof y=="object"&&typeof y.set=="function"&&typeof d=="number")typeof y.setScalar=="function"?y.setScalar(d):y.set(d);else{var c;m[v]=d,a&&!a.linear&&x6.includes(v)&&(c=m[v])!=null&&c.isTexture&&m[v].format===Oa&&m[v].type===yr&&(m[v].colorSpace=Ua)}}if(n!=null&&n.parent&&a!=null&&a.internal&&(e=n.object)!=null&&e.isObject3D&&o!==n.eventCount){const h=n.object,d=a.internal.interaction.indexOf(h);d>-1&&a.internal.interaction.splice(d,1),n.eventCount&&h.raycast!==null&&a.internal.interaction.push(h)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&Dd(n),i}function Dd(i){var t;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const e=(t=i.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function M6(i,t){i.manual||(i3(i)?(i.left=t.width/-2,i.right=t.width/2,i.top=t.height/2,i.bottom=t.height/-2):i.aspect=t.width/t.height,i.updateProjectionMatrix())}const ys=i=>i?.isObject3D;function zv(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function r3(i,t,e,n){const a=e.get(t);a&&(e.delete(t),e.size===0&&(i.delete(n),a.target.releasePointerCapture(n)))}function b6(i,t){const{internal:e}=i.getState();e.interaction=e.interaction.filter(n=>n!==t),e.initialHits=e.initialHits.filter(n=>n!==t),e.hovered.forEach((n,a)=>{(n.eventObject===t||n.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((n,a)=>{r3(e.capturedMap,t,n,a)})}function E6(i){function t(d){const{internal:m}=i.getState(),v=d.offsetX-m.initialClick[0],y=d.offsetY-m.initialClick[1];return Math.round(Math.sqrt(v*v+y*y))}function e(d){return d.filter(m=>["Move","Over","Enter","Out","Leave"].some(v=>{var y;return(y=m.__r3f)==null?void 0:y.handlers["onPointer"+v]}))}function n(d,m){const v=i.getState(),y=new Set,_=[],M=m?m(v.internal.interaction):v.internal.interaction;for(let b=0;b<M.length;b++){const D=Yh(M[b]);D&&(D.raycaster.camera=void 0)}v.previousRoot||v.events.compute==null||v.events.compute(d,v);function T(b){const D=Yh(b);if(!D||!D.events.enabled||D.raycaster.camera===null)return[];if(D.raycaster.camera===void 0){var U;D.events.compute==null||D.events.compute(d,D,(U=D.previousRoot)==null?void 0:U.getState()),D.raycaster.camera===void 0&&(D.raycaster.camera=null)}return D.raycaster.camera?D.raycaster.intersectObject(b,!0):[]}let C=M.flatMap(T).sort((b,D)=>{const U=Yh(b.object),N=Yh(D.object);return!U||!N?b.distance-D.distance:N.events.priority-U.events.priority||b.distance-D.distance}).filter(b=>{const D=zv(b);return y.has(D)?!1:(y.add(D),!0)});v.events.filter&&(C=v.events.filter(C,v));for(const b of C){let D=b.object;for(;D;){var R;(R=D.__r3f)!=null&&R.eventCount&&_.push({...b,eventObject:D}),D=D.parent}}if("pointerId"in d&&v.internal.capturedMap.has(d.pointerId))for(let b of v.internal.capturedMap.get(d.pointerId).values())y.has(zv(b.intersection))||_.push(b.intersection);return _}function a(d,m,v,y){if(d.length){const _={stopped:!1};for(const M of d){let T=Yh(M.object);if(T||M.object.traverseAncestors(C=>{const R=Yh(C);if(R)return T=R,!1}),T){const{raycaster:C,pointer:R,camera:b,internal:D}=T,U=new K(R.x,R.y,0).unproject(b),N=z=>{var L,W;return(L=(W=D.capturedMap.get(z))==null?void 0:W.has(M.eventObject))!=null?L:!1},P=z=>{const L={intersection:M,target:m.target};D.capturedMap.has(z)?D.capturedMap.get(z).set(M.eventObject,L):D.capturedMap.set(z,new Map([[M.eventObject,L]])),m.target.setPointerCapture(z)},B=z=>{const L=D.capturedMap.get(z);L&&r3(D.capturedMap,M.eventObject,L,z)};let H={};for(let z in m){let L=m[z];typeof L!="function"&&(H[z]=L)}let X={...M,...H,pointer:R,intersections:d,stopped:_.stopped,delta:v,unprojectedPoint:U,ray:C.ray,camera:b,stopPropagation(){const z="pointerId"in m&&D.capturedMap.get(m.pointerId);if((!z||z.has(M.eventObject))&&(X.stopped=_.stopped=!0,D.hovered.size&&Array.from(D.hovered.values()).find(L=>L.eventObject===M.eventObject))){const L=d.slice(0,d.indexOf(M));o([...L,M])}},target:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:B},currentTarget:{hasPointerCapture:N,setPointerCapture:P,releasePointerCapture:B},nativeEvent:m};if(y(X),_.stopped===!0)break}}}return d}function o(d){const{internal:m}=i.getState();for(const v of m.hovered.values())if(!d.length||!d.find(y=>y.object===v.object&&y.index===v.index&&y.instanceId===v.instanceId)){const _=v.eventObject.__r3f;if(m.hovered.delete(zv(v)),_!=null&&_.eventCount){const M=_.handlers,T={...v,intersections:d};M.onPointerOut==null||M.onPointerOut(T),M.onPointerLeave==null||M.onPointerLeave(T)}}}function c(d,m){for(let v=0;v<m.length;v++){const y=m[v].__r3f;y==null||y.handlers.onPointerMissed==null||y.handlers.onPointerMissed(d)}}function h(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return m=>{const{internal:v}=i.getState();"pointerId"in m&&v.capturedMap.has(m.pointerId)&&requestAnimationFrame(()=>{v.capturedMap.has(m.pointerId)&&(v.capturedMap.delete(m.pointerId),o([]))})}}return function(v){const{onPointerMissed:y,internal:_}=i.getState();_.lastEvent.current=v;const M=d==="onPointerMove",T=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",R=n(v,M?e:void 0),b=T?t(v):0;d==="onPointerDown"&&(_.initialClick=[v.offsetX,v.offsetY],_.initialHits=R.map(U=>U.eventObject)),T&&!R.length&&b<=2&&(c(v,_.interaction),y&&y(v)),M&&o(R);function D(U){const N=U.eventObject,P=N.__r3f;if(!(P!=null&&P.eventCount))return;const B=P.handlers;if(M){if(B.onPointerOver||B.onPointerEnter||B.onPointerOut||B.onPointerLeave){const H=zv(U),X=_.hovered.get(H);X?X.stopped&&U.stopPropagation():(_.hovered.set(H,U),B.onPointerOver==null||B.onPointerOver(U),B.onPointerEnter==null||B.onPointerEnter(U))}B.onPointerMove==null||B.onPointerMove(U)}else{const H=B[d];H?(!T||_.initialHits.includes(N))&&(c(v,_.interaction.filter(X=>!_.initialHits.includes(X))),H(U)):T&&_.initialHits.includes(N)&&c(v,_.interaction.filter(X=>!_.initialHits.includes(X)))}}a(R,v,b,D)}}return{handlePointer:h}}const c2=i=>!!(i!=null&&i.render),T6=zt.createContext(null),A6=(i,t)=>{const e=QF((h,d)=>{const m=new K,v=new K,y=new K;function _(b=d().camera,D=v,U=d().size){const{width:N,height:P,top:B,left:H}=U,X=N/P;D.isVector3?y.copy(D):y.set(...D);const z=b.getWorldPosition(m).distanceTo(y);if(i3(b))return{width:N/b.zoom,height:P/b.zoom,top:B,left:H,factor:1,distance:z,aspect:X};{const L=b.fov*Math.PI/180,W=2*Math.tan(L/2)*z,ot=W*(N/P);return{width:ot,height:W,top:B,left:H,factor:N/ot,distance:z,aspect:X}}}let M;const T=b=>h(D=>({performance:{...D.performance,current:b}})),C=new It;return{set:h,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>i(d(),b),advance:(b,D)=>t(b,D,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Zb,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=d();M&&clearTimeout(M),b.performance.current!==b.performance.min&&T(b.performance.min),M=setTimeout(()=>T(d().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:b=>h(D=>({...D,events:{...D.events,...b}})),setSize:(b,D,U=0,N=0)=>{const P=d().camera,B={width:b,height:D,top:U,left:N};h(H=>({size:B,viewport:{...H.viewport,..._(P,v,B)}}))},setDpr:b=>h(D=>{const U=a3(b);return{viewport:{...D.viewport,dpr:U,initialDpr:D.viewport.initialDpr||U}}}),setFrameloop:(b="always")=>{const D=d().clock;D.stop(),D.elapsedTime=0,b!=="never"&&(D.start(),D.elapsedTime=0),h(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:zt.createRef(),active:!1,frames:0,priority:0,subscribe:(b,D,U)=>{const N=d().internal;return N.priority=N.priority+(D>0?1:0),N.subscribers.push({ref:b,priority:D,store:U}),N.subscribers=N.subscribers.sort((P,B)=>P.priority-B.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(D>0?1:0),P.subscribers=P.subscribers.filter(B=>B.ref!==b))}}}}}),n=e.getState();let a=n.size,o=n.viewport.dpr,c=n.camera;return e.subscribe(()=>{const{camera:h,size:d,viewport:m,gl:v,set:y}=e.getState();if(d.width!==a.width||d.height!==a.height||m.dpr!==o){a=d,o=m.dpr,M6(h,d),m.dpr>0&&v.setPixelRatio(m.dpr);const _=typeof HTMLCanvasElement<"u"&&v.domElement instanceof HTMLCanvasElement;v.setSize(d.width,d.height,_)}h!==c&&(c=h,y(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(h)}})))}),e.subscribe(h=>i(h)),e};function R6(i){const t=i6(i);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:zt.version}),t}const o3=0,yd={},C6=/^three(?=[A-Z])/,U_=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let w6=0;const D6=i=>typeof i=="function";function U6(i){if(D6(i)){const t=`${w6++}`;return yd[t]=i,t}else Object.assign(yd,i)}function l3(i,t){const e=U_(i),n=yd[e];if(i!=="primitive"&&!n)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function N6(i,t,e){var n;return i=U_(i)in yd?i:i.replace(C6,""),l3(i,t),i==="primitive"&&(n=t.object)!=null&&n.__r3f&&delete t.object.__r3f,Hy(t.object,e,i,t)}function O6(i){if(!i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?Gy(i.parent,i):ys(i.object)&&(i.object.visible=!1),i.isHidden=!0,Dd(i)}}function u3(i){if(i.isHidden){var t;i.props.attach&&(t=i.parent)!=null&&t.object?Fy(i.parent,i):ys(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,Dd(i)}}function i1(i,t,e){const n=t.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!t.object){var a,o;const c=yd[U_(t.type)];t.object=(a=t.props.object)!=null?a:new c(...(o=t.props.args)!=null?o:[]),t.object.__r3f=t}if(Hu(t.object,t.props),t.props.attach)Fy(i,t);else if(ys(t.object)&&ys(i.object)){const c=i.object.children.indexOf(e?.object);if(e&&c!==-1){const h=i.object.children.indexOf(t.object);if(h!==-1){i.object.children.splice(h,1);const d=h<c?c-1:c;i.object.children.splice(d,0,t.object)}else t.object.parent=i.object,i.object.children.splice(c,0,t.object),t.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:t.object})}else i.object.add(t.object)}for(const c of t.children)i1(t,c);Dd(t)}}function zS(i,t){t&&(t.parent=i,i.children.push(t),i1(i,t))}function f2(i,t,e){if(!t||!e)return;t.parent=i;const n=i.children.indexOf(e);n!==-1?i.children.splice(n,0,t):i.children.push(t),i1(i,t,e)}function c3(i){if(typeof i.dispose=="function"){const t=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():o2.unstable_scheduleCallback(o2.unstable_IdlePriority,t)}}function RM(i,t,e){if(!t)return;t.parent=null;const n=i.children.indexOf(t);n!==-1&&i.children.splice(n,1),t.props.attach?Gy(i,t):ys(t.object)&&ys(i.object)&&(i.object.remove(t.object),b6(n3(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let o=t.children.length-1;o>=0;o--){const c=t.children[o];RM(t,c,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&c3(t.object),e===void 0&&Dd(t)}function L6(i,t){for(const e of[i,i.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const n=e.ref(t);typeof n=="function"&&(e.refCleanup=n)}else e.ref&&(e.ref.current=t)}const jv=[];function z6(){for(const[e]of jv){const n=e.parent;if(n){e.props.attach?Gy(n,e):ys(e.object)&&ys(n.object)&&n.object.remove(e.object);for(const a of e.children)a.props.attach?Gy(e,a):ys(a.object)&&ys(e.object)&&e.object.remove(a.object)}e.isHidden&&u3(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&c3(e.object)}for(const[e,n,a]of jv){e.props=n;const o=e.parent;if(o){var i,t;const c=yd[U_(e.type)];e.object=(i=e.props.object)!=null?i:new c(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,L6(a,e.object),Hu(e.object,e.props),e.props.attach?Fy(o,e):ys(e.object)&&ys(o.object)&&o.object.add(e.object);for(const h of e.children)h.props.attach?Fy(e,h):ys(h.object)&&ys(e.object)&&e.object.add(h.object);Dd(e)}}jv.length=0}const PS=()=>{},h2={};let Pv=o3;const P6=0,B6=4,CM=R6({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:N6,removeChild:RM,appendChild:zS,appendInitialChild:zS,insertBefore:f2,appendChildToContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||zS(e,t)},removeChildFromContainer(i,t){const e=i.getState().scene.__r3f;!t||!e||RM(e,t)},insertInContainerBefore(i,t,e){const n=i.getState().scene.__r3f;!t||!e||!n||f2(n,t,e)},getRootHostContext:()=>h2,getChildHostContext:()=>h2,commitUpdate(i,t,e,n,a){var o,c,h;l3(t,n);let d=!1;if((i.type==="primitive"&&e.object!==n.object||((o=n.args)==null?void 0:o.length)!==((c=e.args)==null?void 0:c.length)||(h=n.args)!=null&&h.some((v,y)=>{var _;return v!==((_=e.args)==null?void 0:_[y])}))&&(d=!0),d)jv.push([i,{...n},a]);else{const v=_6(i,n);Object.keys(v).length&&(Object.assign(i.props,v),Hu(i.object,v))}(a.sibling===null||(a.flags&B6)===P6)&&z6()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>Hy(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:O6,unhideInstance:u3,createTextInstance:PS,hideTextInstance:PS,unhideTextInstance:PS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:zt.createContext(null),setCurrentUpdatePriority(i){Pv=i},getCurrentUpdatePriority(){return Pv},resolveUpdatePriority(){var i;if(Pv!==o3)return Pv;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return qv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return qv.ContinuousEventPriority;default:return qv.DefaultEventPriority}},resetFormInstance(){}}),Mf=new Map,Wh={objects:"shallow",strict:!1};function I6(i,t){if(!t&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:e,height:n,top:a,left:o}=i.parentElement.getBoundingClientRect();return{width:e,height:n,top:a,left:o}}else if(!t&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function V6(i){const t=Mf.get(i),e=t?.fiber,n=t?.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,o=n||A6(UM,p2),c=e||CM.createContainer(o,qv.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||Mf.set(i,{fiber:c,store:o});let h,d,m=!1,v=null;return{async configure(y={}){let _;v=new Promise(tt=>_=tt);let{gl:M,size:T,scene:C,events:R,onCreated:b,shadows:D=!1,linear:U=!1,flat:N=!1,legacy:P=!1,orthographic:B=!1,frameloop:H="always",dpr:X=[1,2],performance:z,raycaster:L,camera:W,onPointerMissed:ot}=y,it=o.getState(),pt=it.gl;if(!it.gl){const tt={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},bt=typeof M=="function"?await M(tt):M;c2(bt)?pt=bt:pt=new Jw({...tt,...M}),it.set({gl:pt})}let gt=it.raycaster;gt||it.set({raycaster:gt=new qw});const{params:I,...j}=L||{};if(ri.equ(j,gt,Wh)||Hu(gt,{...j}),ri.equ(I,gt.params,Wh)||Hu(gt,{params:{...gt.params,...I}}),!it.camera||it.camera===d&&!ri.equ(d,W,Wh)){d=W;const tt=W?.isCamera,bt=tt?W:B?new fg(0,0,0,0,.1,1e3):new ia(75,0,.1,1e3);tt||(bt.position.z=5,W&&(Hu(bt,W),bt.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(bt.manual=!0,bt.updateProjectionMatrix())),!it.camera&&!(W!=null&&W.rotation)&&bt.lookAt(0,0,0)),it.set({camera:bt}),gt.camera=bt}if(!it.scene){let tt;C!=null&&C.isScene?(tt=C,Hy(tt,o,"",{})):(tt=new wb,Hy(tt,o,"",{}),C&&Hu(tt,C)),it.set({scene:tt})}R&&!it.events.handlers&&it.set({events:R(o)});const Z=I6(i,T);if(ri.equ(Z,it.size,Wh)||it.setSize(Z.width,Z.height,Z.top,Z.left),X&&it.viewport.dpr!==a3(X)&&it.setDpr(X),it.frameloop!==H&&it.setFrameloop(H),it.onPointerMissed||it.set({onPointerMissed:ot}),z&&!ri.equ(z,it.performance,Wh)&&it.set(tt=>({performance:{...tt.performance,...z}})),!it.xr){var ct;const tt=(et,Et)=>{const Bt=o.getState();Bt.frameloop!=="never"&&p2(et,!0,Bt,Et)},bt=()=>{const et=o.getState();et.gl.xr.enabled=et.gl.xr.isPresenting,et.gl.xr.setAnimationLoop(et.gl.xr.isPresenting?tt:null),et.gl.xr.isPresenting||UM(et)},Rt={connect(){const et=o.getState().gl;et.xr.addEventListener("sessionstart",bt),et.xr.addEventListener("sessionend",bt)},disconnect(){const et=o.getState().gl;et.xr.removeEventListener("sessionstart",bt),et.xr.removeEventListener("sessionend",bt)}};typeof((ct=pt.xr)==null?void 0:ct.addEventListener)=="function"&&Rt.connect(),it.set({xr:Rt})}if(pt.shadowMap){const tt=pt.shadowMap.enabled,bt=pt.shadowMap.type;if(pt.shadowMap.enabled=!!D,ri.boo(D))pt.shadowMap.type=gm;else if(ri.str(D)){var k;const Rt={basic:tC,percentage:Qy,soft:gm,variance:Zr};pt.shadowMap.type=(k=Rt[D])!=null?k:gm}else ri.obj(D)&&Object.assign(pt.shadowMap,D);(tt!==pt.shadowMap.enabled||bt!==pt.shadowMap.type)&&(pt.shadowMap.needsUpdate=!0)}return mn.enabled=!P,m||(pt.outputColorSpace=U?qu:Ua,pt.toneMapping=N?Yo:pb),it.legacy!==P&&it.set(()=>({legacy:P})),it.linear!==U&&it.set(()=>({linear:U})),it.flat!==N&&it.set(()=>({flat:N})),M&&!ri.fun(M)&&!c2(M)&&!ri.equ(M,pt,Wh)&&Hu(pt,M),h=b,m=!0,_(),this},render(y){return!m&&!v&&this.configure(),v.then(()=>{CM.updateContainer(on.jsx(H6,{store:o,children:y,onCreated:h,rootElement:i}),c,null,()=>{})}),o},unmount(){f3(i)}}}function H6({store:i,children:t,onCreated:e,rootElement:n}){return D_(()=>{const a=i.getState();a.set(o=>({internal:{...o.internal,active:!0}})),e&&e(a),i.getState().events.connected||a.events.connect==null||a.events.connect(n)},[]),on.jsx(T6.Provider,{value:i,children:t})}function f3(i,t){const e=Mf.get(i),n=e?.fiber;if(n){const a=e?.store.getState();a&&(a.internal.active=!1),CM.updateContainer(null,n,null,()=>{a&&setTimeout(()=>{try{var o,c,h,d;a.events.disconnect==null||a.events.disconnect(),(o=a.gl)==null||(c=o.renderLists)==null||c.dispose==null||c.dispose(),(h=a.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),g6(a.scene),Mf.delete(i)}catch{}},500)})}}const F6=new Set,G6=new Set,X6=new Set;function BS(i,t){if(i.size)for(const{callback:e}of i.values())e(t)}function Am(i,t){switch(i){case"before":return BS(F6,t);case"after":return BS(G6,t);case"tail":return BS(X6,t)}}let IS,VS;function wM(i,t,e){let n=t.clock.getDelta();t.frameloop==="never"&&typeof i=="number"&&(n=i-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=i),IS=t.internal.subscribers;for(let a=0;a<IS.length;a++)VS=IS[a],VS.ref.current(VS.store.getState(),n,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Xy=!1,DM=!1,HS,d2,jh;function h3(i){d2=requestAnimationFrame(h3),Xy=!0,HS=0,Am("before",i),DM=!0;for(const e of Mf.values()){var t;jh=e.store.getState(),jh.internal.active&&(jh.frameloop==="always"||jh.internal.frames>0)&&!((t=jh.gl.xr)!=null&&t.isPresenting)&&(HS+=wM(i,jh))}if(DM=!1,Am("after",i),HS===0)return Am("tail",i),Xy=!1,cancelAnimationFrame(d2)}function UM(i,t=1){var e;if(!i)return Mf.forEach(n=>UM(n.store.getState(),t));(e=i.gl.xr)!=null&&e.isPresenting||!i.internal.active||i.frameloop==="never"||(t>1?i.internal.frames=Math.min(60,i.internal.frames+t):DM?i.internal.frames=2:i.internal.frames=1,Xy||(Xy=!0,requestAnimationFrame(h3)))}function p2(i,t=!0,e,n){if(t&&Am("before",i),e)wM(i,e,n);else for(const a of Mf.values())wM(i,a.store.getState());t&&Am("after",i)}const FS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function q6(i){const{handlePointer:t}=E6(i);return{priority:1,enabled:!0,compute(e,n,a){n.pointer.set(e.offsetX/n.size.width*2-1,-(e.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(FS).reduce((e,n)=>({...e,[n]:t(n)}),{}),update:()=>{var e;const{events:n,internal:a}=i.getState();(e=a.lastEvent)!=null&&e.current&&n.handlers&&n.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:n,events:a}=i.getState();if(a.disconnect==null||a.disconnect(),n(o=>({events:{...o.events,connected:e}})),a.handlers)for(const o in a.handlers){const c=a.handlers[o],[h,d]=FS[o];e.addEventListener(h,c,{passive:d})}},disconnect:()=>{const{set:e,events:n}=i.getState();if(n.connected){if(n.handlers)for(const a in n.handlers){const o=n.handlers[a],[c]=FS[a];n.connected.removeEventListener(c,o)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function m2(i,t){let e;return(...n)=>{window.clearTimeout(e),e=window.setTimeout(()=>i(...n),t)}}function k6({debounce:i,scroll:t,polyfill:e,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,c]=zt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=zt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),d=i?typeof i=="number"?i:i.scroll:null,m=i?typeof i=="number"?i:i.resize:null,v=zt.useRef(!1);zt.useEffect(()=>(v.current=!0,()=>void(v.current=!1)));const[y,_,M]=zt.useMemo(()=>{const b=()=>{if(!h.current.element)return;const{left:D,top:U,width:N,height:P,bottom:B,right:H,x:X,y:z}=h.current.element.getBoundingClientRect(),L={left:D,top:U,width:N,height:P,bottom:B,right:H,x:X,y:z};h.current.element instanceof HTMLElement&&n&&(L.height=h.current.element.offsetHeight,L.width=h.current.element.offsetWidth),Object.freeze(L),v.current&&!Z6(h.current.lastBounds,L)&&c(h.current.lastBounds=L)};return[b,m?m2(b,m):b,d?m2(b,d):b]},[c,n,d,m]);function T(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",M,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function C(){h.current.element&&(h.current.resizeObserver=new a(M),h.current.resizeObserver.observe(h.current.element),t&&h.current.scrollContainers&&h.current.scrollContainers.forEach(b=>b.addEventListener("scroll",M,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{M()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const R=b=>{!b||b===h.current.element||(T(),h.current.element=b,h.current.scrollContainers=d3(b),C())};return W6(M,!!t),Y6(_),zt.useEffect(()=>{T(),C()},[t,M,_]),zt.useEffect(()=>T,[]),[R,o,y]}function Y6(i){zt.useEffect(()=>{const t=i;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[i])}function W6(i,t){zt.useEffect(()=>{if(t){const e=i;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[i,t])}function d3(i){const t=[];if(!i||i===document.body)return t;const{overflow:e,overflowX:n,overflowY:a}=window.getComputedStyle(i);return[e,n,a].some(o=>o==="auto"||o==="scroll")&&t.push(i),[...t,...d3(i.parentElement)]}const j6=["x","y","top","bottom","left","right","width","height"],Z6=(i,t)=>j6.every(e=>i[e]===t[e]);function K6({ref:i,children:t,fallback:e,resize:n,style:a,gl:o,events:c=q6,eventSource:h,eventPrefix:d,shadows:m,linear:v,flat:y,legacy:_,orthographic:M,frameloop:T,dpr:C,performance:R,raycaster:b,camera:D,scene:U,onPointerMissed:N,onCreated:P,...B}){zt.useMemo(()=>U6(HF),[]);const H=d6(),[X,z]=k6({scroll:!0,debounce:{scroll:50,resize:0},...n}),L=zt.useRef(null),W=zt.useRef(null);zt.useImperativeHandle(i,()=>L.current);const ot=h6(N),[it,pt]=zt.useState(!1),[gt,I]=zt.useState(!1);if(it)throw it;if(gt)throw gt;const j=zt.useRef(null);D_(()=>{const ct=L.current;if(z.width>0&&z.height>0&&ct){j.current||(j.current=V6(ct));async function k(){await j.current.configure({gl:o,scene:U,events:c,shadows:m,linear:v,flat:y,legacy:_,orthographic:M,frameloop:T,dpr:C,performance:R,raycaster:b,camera:D,size:z,onPointerMissed:(...tt)=>ot.current==null?void 0:ot.current(...tt),onCreated:tt=>{tt.events.connect==null||tt.events.connect(h?c6(h)?h.current:h:W.current),d&&tt.setEvents({compute:(bt,Rt)=>{const et=bt[d+"X"],Et=bt[d+"Y"];Rt.pointer.set(et/Rt.size.width*2-1,-(Et/Rt.size.height)*2+1),Rt.raycaster.setFromCamera(Rt.pointer,Rt.camera)}}),P?.(tt)}}),j.current.render(on.jsx(H,{children:on.jsx(m6,{set:I,children:on.jsx(zt.Suspense,{fallback:on.jsx(p6,{set:pt}),children:t??null})})}))}k()}}),zt.useEffect(()=>{const ct=L.current;if(ct)return()=>f3(ct)},[]);const Z=h?"none":"auto";return on.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...a},...B,children:on.jsx("div",{ref:X,style:{width:"100%",height:"100%"},children:on.jsx("canvas",{ref:L,style:{display:"block"},children:e})})})}function Q6(i){return on.jsx(t3,{children:on.jsx(K6,{...i})})}function J6({scrollProgress:i}){var t=zt.useRef(null);return QR(()=>{let e=i.get();t.current&&(t.current.rotation.z=e*4,t.current.position.z=Math.sin(e*5)*.2)}),on.jsx("div",{id:"canvas-container",className:"w-full h-full",children:on.jsx(Q6,{camera:{position:[0,3,0]},children:on.jsx("group",{ref:t,children:on.jsxs("mesh",{rotation:[Math.PI*.25,Math.PI*.25,Math.PI*.25],children:[on.jsx("boxGeometry",{}),on.jsx("meshNormalMaterial",{})]})})})})}function $6(){const{scrollYProgress:i}=gz();return on.jsxs("div",{className:"w-full h-[300vh] bg-white",children:[on.jsx("div",{className:"w-1/2 h-screen fixed flex items-center justify-center",children:on.jsx(_z,{scrollProgress:i})}),on.jsx("div",{className:"w-1/2 h-screen fixed left-1/2",children:on.jsx(J6,{scrollProgress:i})})]})}uD.createRoot(document.getElementById("root")).render(on.jsx(zt.StrictMode,{children:on.jsx($6,{})}));
